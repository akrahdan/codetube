{"version":3,"sources":["portal/scenes/Instructor/Courses/Pricing/index.js"],"names":["Pricing","currencies","useFetchPricingCurrencyQuery","data","tiers","useFetchPricingTierQuery","useCreatePricingMutation","createPricing","locationPayload","useAppSelector","selectSections","selectLocationPayload","payload","useFetchSectionsQuery","id","pricing","useFetchPricingQuery","selectPricing","useState","toggleCurrency","setToggleCurrency","toggleTier","setToggleTier","name","display","currency","setCurrency","amount","setAmount","useEffect","className","data-purpose","style","verticalAlign","classNames","open","onClick","role","aria-haspopup","aria-expanded","type","paddingRight","position","right","aria-labelledby","map","curr","tabIndex","href","tier","index","course","disabled"],"mappings":"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","file":"static/js/19.11079773.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { selectLocationPayload } from \"state/location/selectors\";\nimport { useAppSelector } from \"store/hooks\";\nimport { selectPricing } from \"state/course/courseSplice\";\nimport { selectSections } from \"state/curriculum/currriculumSplice\";\nimport {\n  useFetchPricingCurrencyQuery,\n  useFetchPricingTierQuery,\n  useCreatePricingMutation,\n  useFetchPricingQuery,\n  useFetchSectionsQuery\n} from \"services/courses\";\nimport classNames from \"classnames\";\n\nexport const Pricing = () => {\n  const { data: currencies } = useFetchPricingCurrencyQuery();\n  const { data: tiers } = useFetchPricingTierQuery();\n  const [createPricing] = useCreatePricingMutation();\n  const selectedSections = useAppSelector(selectSections)\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const { data: querySections } = useFetchSectionsQuery(locationPayload.id)\n  const payload = useAppSelector(selectLocationPayload);\n  const { data: pricingQuery } = useFetchPricingQuery(payload.id);\n  const pricing = useAppSelector(selectPricing);\n  const [toggleCurrency, setToggleCurrency] = useState(false);\n  const [toggleTier, setToggleTier] = useState(false);\n  const [currency, setCurrency] = useState({\n    name: \"USD\",\n    display: \"USD\",\n  });\n  const [amount, setAmount] = useState({\n    name: 100,\n    display: \"100\",\n  });\n\n  useEffect(() => {\n    if (pricing) {\n      setCurrency({\n        name: pricing.currency,\n        display: pricing.currency,\n      });\n\n      setAmount({\n        name: pricing.amount,\n        display: pricing.amount,\n      });\n    }\n  }, [pricing]);\n  return (\n    <div>\n      <div className=\"sub-header--wrapper--3Vunm\">\n        <div className=\"sub-header--main-content--22it3\">\n          <h2\n            data-purpose=\"page-title\"\n            className=\"font-heading-serif-xl sub-header--title--2VD8q\"\n          >\n            Pricing\n          </h2>\n        </div>\n      </div>\n      <div className=\"main-content--wrap_component--2TEkz\">\n        {\" \"}\n        <div data-purpose=\"price-route\">\n          <div className=\"mb30\">\n            <div>\n              <div name=\"owner-opt-in\">\n                <h4 className=\"blockLabel\">Course Price Tier</h4>\n                <div className=\"mb30 mt20\">\n                  <p data-purpose=\"safely-set-inner-html:price-form:link-to-price-tier-matrix\">\n                    Please select the price tier for your course below and click\n                    'Save'.\n                  </p>\n\n                  <span data-purpose=\"practice-course-message\" />\n                </div>\n              </div>\n              <div className=\"fx-jsb db-sm mt10\">\n                <div className=\"fx-jsb\">\n                  <div className=\"pr20\">\n                    <div className=\"dib\" style={{ verticalAlign: \"top\" }}>\n                      <div\n                        data-purpose=\"price-select\"\n                        className=\"price-select--price-select--3gmzG form-group\"\n                      >\n                        <div className=\"df\">\n                          <div className=\"fx-jsb mr20\">\n                            <div\n                              className={classNames(\n                                \"dropdown btn-group btn-group-default\",\n                                {\n                                  open: toggleCurrency,\n                                }\n                              )}\n                            >\n                              <button\n                                onClick={() =>\n                                  setToggleCurrency(!toggleCurrency)\n                                }\n                                id=\"select-currency\"\n                                role=\"button\"\n                                aria-haspopup=\"true\"\n                                aria-expanded=\"false\"\n                                type=\"button\"\n                                className=\"dropdown-toggle btn btn-default\"\n                                style={{ paddingRight: \"26px\" }}\n                              >\n                                {currency.display}\n                                <span\n                                  style={{\n                                    position: \"absolute\",\n                                    right: \"12px\",\n                                  }}\n                                >\n                                  <span className=\"dropdown-caret cfi cfi-angle-down\" />\n                                </span>\n                              </button>\n                              <ul\n                                role=\"menu\"\n                                className=\"dropdown-menu\"\n                                aria-labelledby=\"select-currency\"\n                              >\n                                {currencies &&\n                                  currencies.map((curr) => (\n                                    <li key={curr.name} role=\"presentation\">\n                                      <a\n                                        onClick={() => {\n                                          setCurrency(curr);\n                                          setToggleCurrency(!toggleCurrency);\n                                        }}\n                                        role=\"menuitem\"\n                                        tabIndex={-1}\n                                        href=\"javascript:void(0)\"\n                                      >\n                                        {curr.display}\n                                      </a>\n                                    </li>\n                                  ))}\n                              </ul>\n                            </div>\n                          </div>\n                          <div className=\"fx-jsb mr20\">\n                            <div\n                              className={classNames(\n                                \"dropdown btn-group btn-group-default\",\n                                {\n                                  open: toggleTier,\n                                }\n                              )}\n                            >\n                              <button\n                                onClick={() => setToggleTier(!toggleTier)}\n                                id=\"select-amount\"\n                                role=\"button\"\n                                aria-haspopup=\"true\"\n                                aria-expanded=\"false\"\n                                type=\"button\"\n                                className=\"dropdown-toggle btn btn-default\"\n                                style={{ paddingRight: \"26px\" }}\n                              >\n                                <div className=\"dib\">\n                                  <div className=\"price-select--price-select__title-spacer--3OZvO\">\n                                    <span>{`${currency.display} ${amount.display}`}</span>\n                                  </div>\n                                  {`${currency.display} ${amount.display}`}\n                                </div>\n                                <span\n                                  style={{\n                                    position: \"absolute\",\n                                    right: \"12px\",\n                                  }}\n                                >\n                                  <span className=\"dropdown-caret cfi cfi-angle-down\" />\n                                </span>\n                              </button>\n                              <ul\n                                role=\"menu\"\n                                className=\"dropdown-menu\"\n                                aria-labelledby=\"select-amount\"\n                              >\n                                <li role=\"presentation\" className=\"active\">\n                                  <a\n                                    data-purpose=\"select-amount-\"\n                                    role=\"menuitem\"\n                                    tabIndex={-1}\n                                    href=\"javascript:void(0)\"\n                                  >\n                                    Select\n                                  </a>\n                                </li>\n                                {tiers &&\n                                  tiers.map((tier, index) => (\n                                    <li key={tier.name} role=\"presentation\">\n                                      <a\n                                        onClick={() => {\n                                          setAmount(tier);\n                                          setToggleTier(!toggleTier);\n                                        }}\n                                        role=\"menuitem\"\n                                        tabIndex={-1}\n                                      >\n                                        {currency.display} {tier.display}\n                                        <span className=\"text-midnight-lighter\">\n                                          (tier {index + 1})\n                                        </span>\n                                      </a>\n                                    </li>\n                                  ))}\n                              </ul>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"dib\">\n                      <button\n                        onClick={() => {\n                          createPricing({\n                            course: payload.id,\n                            amount: amount.name,\n                            currency: currency.name,\n                          });\n                        }}\n                        disabled={!currency || !amount}\n                        type=\"submit\"\n                        className=\"btn btn-secondary btn-block\"\n                      >\n                        Save\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>{\" \"}\n      </div>\n    </div>\n  );\n};\n\nexport default Pricing;\n"],"sourceRoot":""}
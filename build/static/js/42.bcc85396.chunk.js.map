{"version":3,"sources":["portal/scenes/Instructor/Projects/Pricing/index.tsx"],"names":["Pricing","alert","useAlert","currencies","useFetchProjectPricingCurrencyQuery","data","tiers","useFetchProjectPricingTierQuery","useCreateProjectPricingMutation","createProjectPricing","useUpdateProjectPricingMutation","updateProjectPricing","payload","useAppSelector","selectLocationPayload","pricing","useFetchProjectPricingQuery","id","selectPricing","useState","toggleCurrency","setToggleCurrency","toggleTier","setToggleTier","name","display","currency","setCurrency","amount","setAmount","useEffect","className","data-purpose","data-name","style","verticalAlign","classNames","open","onClick","role","aria-haspopup","aria-expanded","type","paddingRight","position","right","aria-labelledby","map","curr","tabIndex","href","tier","index","project","String","then","res","show","disabled"],"mappings":"6OAiBaA,EAAU,WACrB,IAAMC,EAAQC,cACAC,EAAeC,cAArBC,KACMC,EAAUC,cAAhBF,KAHmB,EAIIG,cAAxBC,EAJoB,sBAKIC,cAAxBC,EALoB,oBAMrBC,EAAUC,YAAeC,KAEzBC,GADyBC,YAA4BJ,EAAQK,IAA3DZ,KACQQ,YAAeK,MARJ,EASiBC,oBAAS,GAT1B,mBASpBC,EAToB,KASJC,EATI,OAUSF,oBAAS,GAVlB,mBAUpBG,EAVoB,KAURC,EAVQ,OAWKJ,mBAAS,CACvCK,KAAM,MACNC,QAAS,QAbgB,mBAWpBC,EAXoB,KAWVC,EAXU,OAeCR,mBAAS,CACnCK,KAAM,MACNC,QAAS,QAjBgB,mBAepBG,EAfoB,KAeZC,EAfY,KAiC3B,OAbAC,qBAAU,WACJf,IACFY,EAAY,CACVH,KAAMT,EAAQW,SACdD,QAASV,EAAQW,WAGnBG,EAAU,CACRL,KAAMT,EAAQa,OACdH,QAASV,EAAQa,YAGpB,CAACb,IAEF,gCACE,qBAAKgB,UAAU,6BAAf,SACE,qBAAKA,UAAU,kCAAf,SACE,oBAEEA,UAAU,iDAFZ,yBAQJ,qBAAKA,UAAU,sCAAf,SAEE,qBAAKC,eAAa,cAAlB,SACE,qBAAKD,UAAU,OAAf,SACE,gCACE,sBAAKE,YAAU,eAAf,UACE,oBAAIF,UAAU,aAAd,gCACA,sBAAKA,UAAU,YAAf,UACE,mBAAGC,eAAa,6DAAhB,mFAKA,sBAAMA,eAAa,kCAGvB,qBAAKD,UAAU,oBAAf,SACE,qBAAKA,UAAU,SAAf,SACE,sBAAKA,UAAU,OAAf,UACE,qBAAKA,UAAU,MAAMG,MAAO,CAAEC,cAAe,OAA7C,SACE,qBACEH,eAAa,eACbD,UAAU,+CAFZ,SAIE,sBAAKA,UAAU,KAAf,UACE,qBAAKA,UAAU,cAAf,SACE,sBACEA,UAAWK,IACT,uCACA,CACEC,KAAMjB,IAJZ,UAQE,yBACEkB,QAAS,kBACPjB,GAAmBD,IAErBH,GAAG,kBACHsB,KAAK,SACLC,gBAAc,OACdC,gBAAc,QACdC,KAAK,SACLX,UAAU,kCACVG,MAAO,CAAES,aAAc,QAVzB,UAYGjB,EAASD,QACV,sBACES,MAAO,CACLU,SAAU,WACVC,MAAO,QAHX,SAME,sBAAMd,UAAU,2CAGpB,oBACEQ,KAAK,OACLR,UAAU,gBACVe,kBAAgB,kBAHlB,SAKG3C,IAAU,OACTA,QADS,IACTA,OADS,EACTA,EAAY4C,KAAI,SAACC,GAAD,OACd,oBAAoBT,KAAK,eAAzB,SACE,mBACED,QAAS,WACPX,EAAYqB,GACZ3B,GAAmBD,IAErBmB,KAAK,WACLU,UAAW,EACXC,KAAK,GAPP,SASGF,EAAKvB,WAVDuB,EAAKxB,iBAiBxB,qBAAKO,UAAU,cAAf,SACE,sBACEA,UAAWK,IACT,uCACA,CACEC,KAAMf,IAJZ,UAQE,yBACEgB,QAAS,kBAAMf,GAAeD,IAC9BL,GAAG,gBACHsB,KAAK,SACLC,gBAAc,OACdC,gBAAc,QACdC,KAAK,SACLX,UAAU,kCACVG,MAAO,CAAES,aAAc,QARzB,UAUE,sBAAKZ,UAAU,MAAf,UACE,qBAAKA,UAAU,kDAAf,SACE,yCAAUL,EAASD,QAAnB,YAA8BG,EAAOH,aAFzC,UAIMC,EAASD,QAJf,YAI0BG,EAAOH,YAEjC,sBACES,MAAO,CACLU,SAAU,WACVC,MAAO,QAHX,SAME,sBAAMd,UAAU,2CAGpB,qBACEQ,KAAK,OACLR,UAAU,gBACVe,kBAAgB,gBAHlB,UAKE,oBAAIP,KAAK,eAAeR,UAAU,SAAlC,SACE,mBACEC,eAAa,iBACbO,KAAK,WACLU,UAAW,EACXC,KAAK,GAJP,sBASD5C,GACCA,EAAMyC,KAAI,SAACI,EAAMC,GAAP,OACR,oBAAoBb,KAAK,eAAzB,SACE,oBACED,QAAS,WACPT,EAAUsB,GACV5B,GAAeD,IAEjBiB,KAAK,WACLU,UAAW,EANb,UAQGvB,EAASD,QARZ,IAQsB0B,EAAK1B,QACzB,uBAAMM,UAAU,wBAAhB,mBACSqB,EAAQ,EADjB,WAVKD,EAAK3B,wBAsB9B,qBAAKO,UAAU,MAAf,SACE,wBACEO,QAAS,YACP,OAAIvB,QAAJ,IAAIA,OAAJ,EAAIA,EAASa,QACXjB,EAAqB,CACnB0C,QAASzC,EAAQK,GACjBW,OAAQ0B,OAAO1B,EAAOJ,MACtBE,SAAUA,EAASF,OAClB+B,MAAK,SAACC,IACP,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAKnD,KAAKuB,SACZ3B,EAAMwD,KAAK,mCAIfhD,EAAqB,CACnB4C,QAASzC,EAAQK,GACjBW,OAAQ0B,OAAO1B,EAAOJ,MACtBE,SAAUA,EAASF,OAClB+B,MAAK,SAACC,IACP,OAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAKnD,KAAKuB,SACZ3B,EAAMwD,KAAK,oCAKnBC,UAAWhC,IAAaE,EACxBc,KAAK,SACLX,UAAU,8BA1BZ,wCA0CP/B","file":"static/js/42.bcc85396.chunk.js","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useAlert } from \"react-alert\";\nimport { selectLocationPayload } from \"state/location/selectors\";\nimport { useAppSelector } from \"store/hooks\";\nimport { selectPricing } from \"state/project/projectSplice\";\nimport { selectSections } from \"state/curriculum/currriculumSplice\";\nimport type { ProjectPricing } from \"services/projects\";\nimport {\n  useFetchProjectPricingCurrencyQuery,\n  useFetchProjectPricingQuery,\n  useFetchProjectPricingTierQuery,\n  useCreateProjectPricingMutation,\n  useUpdateProjectPricingMutation\n\n} from \"services/projects\";\nimport classNames from \"classnames\";\n\nexport const Pricing = () => {\n  const alert = useAlert()\n  const { data: currencies } = useFetchProjectPricingCurrencyQuery();\n  const { data: tiers } = useFetchProjectPricingTierQuery();\n  const [createProjectPricing] = useCreateProjectPricingMutation();\n  const [updateProjectPricing] = useUpdateProjectPricingMutation()\n  const payload = useAppSelector(selectLocationPayload);\n  const { data: pricingQuery } = useFetchProjectPricingQuery(payload.id);\n  const pricing = useAppSelector(selectPricing);\n  const [toggleCurrency, setToggleCurrency] = useState(false);\n  const [toggleTier, setToggleTier] = useState(false);\n  const [currency, setCurrency] = useState({\n    name: \"USD\",\n    display: \"USD\",\n  });\n  const [amount, setAmount] = useState({\n    name: '100',\n    display: \"100\",\n  });\n\n  useEffect(() => {\n    if (pricing) {\n      setCurrency({\n        name: pricing.currency,\n        display: pricing.currency,\n      });\n\n      setAmount({\n        name: pricing.amount,\n        display: pricing.amount,\n      });\n    }\n  }, [pricing]);\n  return (\n    <div>\n      <div className=\"sub-header--wrapper--3Vunm\">\n        <div className=\"sub-header--main-content--22it3\">\n          <h2\n\n            className=\"font-heading-serif-xl sub-header--title--2VD8q\"\n          >\n            Pricing\n          </h2>\n        </div>\n      </div>\n      <div className=\"main-content--wrap_component--2TEkz\">\n\n        <div data-purpose=\"price-route\">\n          <div className=\"mb30\">\n            <div>\n              <div data-name=\"owner-opt-in\">\n                <h4 className=\"blockLabel\">Project Price Tier</h4>\n                <div className=\"mb30 mt20\">\n                  <p data-purpose=\"safely-set-inner-html:price-form:link-to-price-tier-matrix\">\n                    Please select the price tier for your project below and click\n                    'Save'.\n                  </p>\n\n                  <span data-purpose=\"practice-course-message\" />\n                </div>\n              </div>\n              <div className=\"fx-jsb db-sm mt10\">\n                <div className=\"fx-jsb\">\n                  <div className=\"pr20\">\n                    <div className=\"dib\" style={{ verticalAlign: \"top\" }}>\n                      <div\n                        data-purpose=\"price-select\"\n                        className=\"price-select--price-select--3gmzG form-group\"\n                      >\n                        <div className=\"df\">\n                          <div className=\"fx-jsb mr20\">\n                            <div\n                              className={classNames(\n                                \"dropdown btn-group btn-group-default\",\n                                {\n                                  open: toggleCurrency,\n                                }\n                              )}\n                            >\n                              <button\n                                onClick={() =>\n                                  setToggleCurrency(!toggleCurrency)\n                                }\n                                id=\"select-currency\"\n                                role=\"button\"\n                                aria-haspopup=\"true\"\n                                aria-expanded=\"false\"\n                                type=\"button\"\n                                className=\"dropdown-toggle btn btn-default\"\n                                style={{ paddingRight: \"26px\" }}\n                              >\n                                {currency.display}\n                                <span\n                                  style={{\n                                    position: \"absolute\",\n                                    right: \"12px\",\n                                  }}\n                                >\n                                  <span className=\"dropdown-caret cfi cfi-angle-down\" />\n                                </span>\n                              </button>\n                              <ul\n                                role=\"menu\"\n                                className=\"dropdown-menu\"\n                                aria-labelledby=\"select-currency\"\n                              >\n                                {currencies &&\n                                  currencies?.map((curr) => (\n                                    <li key={curr.name} role=\"presentation\">\n                                      <a\n                                        onClick={() => {\n                                          setCurrency(curr);\n                                          setToggleCurrency(!toggleCurrency);\n                                        }}\n                                        role=\"menuitem\"\n                                        tabIndex={-1}\n                                        href=\"\"\n                                      >\n                                        {curr.display}\n                                      </a>\n                                    </li>\n                                  ))}\n                              </ul>\n                            </div>\n                          </div>\n                          <div className=\"fx-jsb mr20\">\n                            <div\n                              className={classNames(\n                                \"dropdown btn-group btn-group-default\",\n                                {\n                                  open: toggleTier,\n                                }\n                              )}\n                            >\n                              <button\n                                onClick={() => setToggleTier(!toggleTier)}\n                                id=\"select-amount\"\n                                role=\"button\"\n                                aria-haspopup=\"true\"\n                                aria-expanded=\"false\"\n                                type=\"button\"\n                                className=\"dropdown-toggle btn btn-default\"\n                                style={{ paddingRight: \"26px\" }}\n                              >\n                                <div className=\"dib\">\n                                  <div className=\"price-select--price-select__title-spacer--3OZvO\">\n                                    <span>{`${currency.display} ${amount.display}`}</span>\n                                  </div>\n                                  {`${currency.display} ${amount.display}`}\n                                </div>\n                                <span\n                                  style={{\n                                    position: \"absolute\",\n                                    right: \"12px\",\n                                  }}\n                                >\n                                  <span className=\"dropdown-caret cfi cfi-angle-down\" />\n                                </span>\n                              </button>\n                              <ul\n                                role=\"menu\"\n                                className=\"dropdown-menu\"\n                                aria-labelledby=\"select-amount\"\n                              >\n                                <li role=\"presentation\" className=\"active\">\n                                  <a\n                                    data-purpose=\"select-amount-\"\n                                    role=\"menuitem\"\n                                    tabIndex={-1}\n                                    href=\"\"\n                                  >\n                                    Select\n                                  </a>\n                                </li>\n                                {tiers &&\n                                  tiers.map((tier, index) => (\n                                    <li key={tier.name} role=\"presentation\">\n                                      <a\n                                        onClick={() => {\n                                          setAmount(tier);\n                                          setToggleTier(!toggleTier);\n                                        }}\n                                        role=\"menuitem\"\n                                        tabIndex={-1}\n                                      >\n                                        {currency.display} {tier.display}\n                                        <span className=\"text-midnight-lighter\">\n                                          (tier {index + 1})\n                                        </span>\n                                      </a>\n                                    </li>\n                                  ))}\n                              </ul>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"dib\">\n                      <button\n                        onClick={() => {\n                          if (pricing?.amount) {\n                            updateProjectPricing({\n                              project: payload.id,\n                              amount: String(amount.name),\n                              currency: currency.name,\n                            }).then((res: { data: ProjectPricing }) => {\n                              if (res?.data.amount) {\n                                alert.show(\"Your changes have been saved\")\n                              }\n                            })\n                          } else {\n                            createProjectPricing({\n                              project: payload.id,\n                              amount: String(amount.name),\n                              currency: currency.name,\n                            }).then((res: { data: ProjectPricing }) => {\n                              if (res?.data.amount) {\n                                alert.show(\"Your changes have been saved\")\n                              }\n                            });\n                          }\n                        }}\n                        disabled={!currency || !amount}\n                        type=\"submit\"\n                        className=\"btn btn-secondary btn-block\"\n                      >\n                        Save\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Pricing;\n"],"sourceRoot":""}
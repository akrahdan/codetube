/*!
 * react-paypal-js v7.2.1 (2021-07-28T21:34:39.268Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),r=function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function o(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||t)}function i(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL);var n=function(e,t){var n="",r="";Array.isArray(e)?e.length>1?(n="*",r=e.toString()):n=e.toString():"string"==typeof e&&e.length>0?n=e:"string"==typeof t&&t.length>0&&(n="*",r=t);return{"merchant-id":n,"data-merchant-id":r}}(e["merchant-id"],e["data-merchant-id"]),r=Object.assign({},e,n),a=Object.keys(r).filter((function(e){return void 0!==r[e]&&null!==r[e]&&""!==r[e]})).reduce((function(e,t){var n=r[t].toString();return"data-"===t.substring(0,5)?e.dataAttributes[t]=n:e.queryParams[t]=n,e}),{queryParams:{},dataAttributes:{}}),o=a.queryParams,i=a.dataAttributes;return{url:t+"?"+u(o),dataAttributes:i}}function u(e){var t="";return Object.keys(e).forEach((function(n){0!==t.length&&(t+="&"),t+=n+"="+e[n]})),t}function s(e,t){void 0===t&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach((function(e){n.setAttribute(e,t[e]),"data-csp-nonce"===e&&n.setAttribute("nonce",t["data-csp-nonce"])})),n}function c(e,t){if(void 0===t&&(t=l()),f(e,t),"undefined"==typeof window)return t.resolve(null);var n=i(e),r=n.url,a=n.dataAttributes,o=a["data-namespace"]||"paypal",u=d(o);return function(e,t){var n=document.querySelector('script[src="'+e+'"]');if(null===n)return null;var r=s(e,t),a=Object.assign({},n.dataset);if(delete a.uidAuto,Object.keys(a).length!==Object.keys(r.dataset).length)return null;var o=!0;return Object.keys(a).forEach((function(e){a[e]!==r.dataset[e]&&(o=!1)})),o?n:null}(r,a)&&u?t.resolve(u):function(e,t){void 0===t&&(t=l());f(e,t);var n=e.url,r=e.attributes;if("string"!=typeof n||0===n.length)throw new Error("Invalid url.");if(void 0!==r&&"object"!=typeof r)throw new Error("Expected attributes to be an object.");return new t((function(e,t){if("undefined"==typeof window)return e();!function(e){var t=e.url,n=e.attributes,r=e.onSuccess,a=e.onError,o=s(t,n);o.onerror=a,o.onload=r,document.head.insertBefore(o,document.head.firstElementChild)}({url:n,attributes:r,onSuccess:function(){return e()},onError:function(){return t(new Error('The script "'+n+'" failed to load.'))}})}))}({url:r,attributes:a},t).then((function(){var e=d(o);if(e)return e;throw new Error("The window."+o+" global variable is not available.")}))}function l(){if("undefined"==typeof Promise)throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function d(e){return window[e]}function f(e,t){if("object"!=typeof e||null===e)throw new Error("Expected an options object.");if(void 0!==t&&"function"!=typeof t)throw new Error("Expected PromisePonyfill to be a function.")}function p(e){return void 0===e&&(e="paypal"),window[e]}var v="initial",y="pending",h="rejected",P="resolved",m=e.createContext(null),b=e.createContext(null);function g(e,t){switch(t.type){case"setLoadingStatus":return{options:r({},e.options),loadingStatus:t.value};case"resetOptions":return function(e){var t=document.querySelector('script[data-react-paypal-script-id="'+e+'"]');if(null===t)return;t.parentNode&&t.parentNode.removeChild(t)}(e.options["data-react-paypal-script-id"]),delete t.value["data-react-paypal-script-id"],{loadingStatus:y,options:r(r({},t.value),{"data-react-paypal-script-id":""+w(t.value)})};default:return e}}function w(e){return"react-paypal-js-"+function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].charCodeAt(0)*Math.pow(n%10+1,5);return Math.floor(Math.pow(Math.sqrt(t),5))}(JSON.stringify(e))}function E(){var t=e.useContext(m),n=e.useContext(b);if(null===t||null===n)throw new Error("usePayPalScriptReducer must be used within a PayPalScriptProvider");var o=t.loadingStatus,i=a(t,["loadingStatus"]);return[r(r({},i),{isInitial:o===v,isPending:o===y,isResolved:o===P,isRejected:o===h}),n]}var S={PAYPAL:"paypal",VENMO:"venmo",APPLEPAY:"applepay",ITAU:"itau",CREDIT:"credit",PAYLATER:"paylater",CARD:"card",IDEAL:"ideal",SEPA:"sepa",BANCONTACT:"bancontact",GIROPAY:"giropay",SOFORT:"sofort",EPS:"eps",MYBANK:"mybank",P24:"p24",VERKKOPANKKI:"verkkopankki",PAYU:"payu",BLIK:"blik",TRUSTLY:"trustly",ZIMPLER:"zimpler",MAXIMA:"maxima",OXXO:"oxxo",BOLETO:"boleto",WECHATPAY:"wechatpay",MERCADOPAGO:"mercadopago"};exports.FUNDING=S,exports.PayPalButtons=function(t){var i=t.className,u=void 0===i?"":i,s=t.disabled,c=void 0!==s&&s,l=t.children,d=void 0===l?null:l,f=t.forceReRender,v=void 0===f?[]:f,y=a(t,["className","disabled","children","forceReRender"]),h=e.useRef(null),P=e.useRef(null),m=E()[0],b=m.isResolved,g=m.options,w=e.useState(null),S=w[0],O=w[1],A=e.useState(!0),R=A[0],k=A[1],j=e.useState(null)[1];function M(){null!==P.current&&P.current.close().catch((function(){}))}e.useEffect((function(){if(!1===b)return M;var e=p(g["data-namespace"]);if(void 0===e||void 0===e.Buttons)return j((function(){throw new Error(function(e){var t=e.components,n=void 0===t?"":t,r=e["data-namespace"],a="Unable to render <PayPalButtons /> because window."+(void 0===r?"paypal":r)+".Buttons is undefined.";if(n.length&&!n.includes("buttons")){a+="\nTo fix the issue, add 'buttons' to the list of components passed to the parent PayPalScriptProvider:\n`<PayPalScriptProvider options={{ components: '"+(n+",buttons")+"'}}>`."}return a}(g))})),M;return P.current=e.Buttons(r(r({},y),{onInit:function(e,t){O(t),"function"==typeof y.onInit&&y.onInit(e,t)}})),!1===P.current.isEligible()?(k(!1),M):(null===h.current||P.current.render(h.current).catch((function(e){null!==h.current&&0!==h.current.children.length&&j((function(){throw new Error("Failed to render <PayPalButtons /> component. "+e)}))})),M)}),o(o([b],v),[y.fundingSource])),e.useEffect((function(){null!==S&&(!0===c?S.disable().catch((function(){})):S.enable().catch((function(){})))}),[c,S]);var x=c?{opacity:.38}:{},N=(u+" "+(c?"paypal-buttons-disabled":"")).trim();return!1===R?d:n.default.createElement("div",{ref:h,style:x,className:N})},exports.PayPalMarks=function(t){var o=t.className,i=void 0===o?"":o,u=a(t,["className"]),s=E()[0],c=s.isResolved,l=s.options,d=e.useRef(null),f=e.useRef(null),v=e.useState(null)[1];return e.useEffect((function(){if(!1!==c&&null===f.current){var e=p(l["data-namespace"]);void 0!==e&&void 0!==e.Marks?(f.current=e.Marks(r({},u)),!1!==f.current.isEligible()&&null!==d.current&&f.current.render(d.current).catch((function(e){null!==d.current&&0!==d.current.children.length&&v((function(){throw new Error("Failed to render <PayPalMarks /> component. "+e)}))}))):v((function(){throw new Error(function(e){var t=e.components,n=void 0===t?"":t,r=e["data-namespace"],a="Unable to render <PayPalMarks /> because window."+(void 0===r?"paypal":r)+".Marks is undefined.";if(!n.includes("marks")){a+="\nTo fix the issue, add 'marks' to the list of components passed to the parent PayPalScriptProvider:\n`<PayPalScriptProvider options={{ components: '"+(n?n+",marks":"marks")+"'}}>`."}return a}(l))}))}}),[c,u.fundingSource]),n.default.createElement("div",{ref:d,className:i})},exports.PayPalMessages=function(t){var i=t.className,u=void 0===i?"":i,s=t.forceReRender,c=void 0===s?[]:s,l=a(t,["className","forceReRender"]),d=E()[0],f=d.isResolved,v=d.options,y=e.useRef(null),h=e.useRef(null),P=e.useState(null)[1];return e.useEffect((function(){if(!1!==f){var e=p(v["data-namespace"]);void 0!==e&&void 0!==e.Messages?(h.current=e.Messages(r({},l)),null!==y.current&&h.current.render(y.current).catch((function(e){null!==y.current&&0!==y.current.children.length&&P((function(){throw new Error("Failed to render <PayPalMessages /> component. "+e)}))}))):P((function(){throw new Error(function(e){var t=e.components,n=void 0===t?"":t,r=e["data-namespace"],a="Unable to render <PayPalMessages /> because window."+(void 0===r?"paypal":r)+".Messages is undefined.";if(!n.includes("messages")){a+="\nTo fix the issue, add 'messages' to the list of components passed to the parent PayPalScriptProvider:\n`<PayPalScriptProvider options={{ components: '"+(n?n+",messages":"messages")+"'}}>`."}return a}(v))}))}}),o([f],c)),n.default.createElement("div",{ref:y,className:u})},exports.PayPalScriptProvider=function(t){var a=t.options,o=t.children,i=t.deferLoading,u=void 0!==i&&i;var s=e.useReducer(g,{options:a,deferLoading:u},(function(e){var t=e.options,n=e.deferLoading;return{options:r(r({},t),{"data-react-paypal-script-id":""+w(t)}),loadingStatus:n?v:y}})),l=s[0],d=s[1];return e.useEffect((function(){if(!1===u&&l.loadingStatus===v)return d({type:"setLoadingStatus",value:y});if(l.loadingStatus===y){var e=!0;return c(l.options).then((function(){e&&d({type:"setLoadingStatus",value:P})})).catch((function(){e&&d({type:"setLoadingStatus",value:h})})),function(){e=!1}}}),[a,u,l.loadingStatus]),n.default.createElement(m.Provider,{value:l},n.default.createElement(b.Provider,{value:d},o))},exports.usePayPalScriptReducer=E;

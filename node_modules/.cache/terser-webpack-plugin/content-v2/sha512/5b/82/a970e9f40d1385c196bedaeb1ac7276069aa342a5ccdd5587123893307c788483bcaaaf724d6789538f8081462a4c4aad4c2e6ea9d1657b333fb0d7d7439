{"code":"(this.webpackJsonpcodefluent=this.webpackJsonpcodefluent||[]).push([[2],{326:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return _e})),n.d(t,\"b\",(function(){return Ne})),n.d(t,\"c\",(function(){return Ie})),n.d(t,\"d\",(function(){return Ve})),n.d(t,\"e\",(function(){return Ue})),n.d(t,\"f\",(function(){return Ze})),n.d(t,\"g\",(function(){return tt})),n.d(t,\"h\",(function(){return gt})),n.d(t,\"i\",(function(){return Oe}));var r=n(178),a=n.n(r),o=n(180),i=n(59),c=n(1),s=n(423),u=n(534),l=n(759);function f(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error(\"[Immer] minified error nr: \"+e+(n.length?\" \"+n.map((function(e){return\"'\"+e+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function d(e){return!!e&&!!e[G]}function v(e){return!!e&&(function(e){if(!e||\"object\"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,\"constructor\")&&t.constructor;return\"function\"==typeof n&&Function.toString.call(n)===Q}(e)||Array.isArray(e)||!!e[Z]||!!e.constructor[Z]||O(e)||w(e))}function h(e,t,n){void 0===n&&(n=!1),0===p(e)?(n?Object.keys:ee)(e).forEach((function(r){n&&\"symbol\"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function p(e){var t=e[G];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:O(e)?2:w(e)?3:0}function g(e,t){return 2===p(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function b(e,t){return 2===p(e)?e.get(t):e[t]}function m(e,t,n){var r=p(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function y(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function O(e){return J&&e instanceof Map}function w(e){return $&&e instanceof Set}function j(e){return e.o||e.t}function x(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=te(e);delete t[G];for(var n=ee(t),r=0;r<n.length;r++){var a=n[r],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function k(e,t){return void 0===t&&(t=!1),P(e)||d(e)||!v(e)||(p(e)>1&&(e.set=e.add=e.clear=e.delete=E),Object.freeze(e),t&&h(e,(function(e,t){return k(t,!0)}),!0)),e}function E(){f(2)}function P(e){return null==e||\"object\"!=typeof e||Object.isFrozen(e)}function D(e){var t=ne[e];return t||f(18,e),t}function F(){return K}function C(e,t){t&&(D(\"Patches\"),e.u=[],e.s=[],e.v=t)}function S(e){A(e),e.p.forEach(N),e.p=null}function A(e){e===K&&(K=e.l)}function B(e){return K={p:[],l:K,h:e,m:!0,_:0}}function N(e){var t=e[G];0===t.i||1===t.i?t.j():t.g=!0}function R(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||D(\"ES5\").S(t,e,r),r?(n[G].P&&(S(t),f(4)),v(e)&&(e=M(t,e),t.l||_(t,e)),t.u&&D(\"Patches\").M(n[G],e,t.u,t.s)):e=M(t,n,[]),S(t),t.u&&t.v(t.u,t.s),e!==X?e:void 0}function M(e,t,n){if(P(t))return t;var r=t[G];if(!r)return h(t,(function(a,o){return T(e,r,t,a,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return _(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=x(r.k):r.o;h(3===r.i?new Set(a):a,(function(t,o){return T(e,r,a,t,o,n)})),_(e,a,!1),n&&e.u&&D(\"Patches\").R(r,n,e.u,e.s)}return r.o}function T(e,t,n,r,a,o){if(d(a)){var i=M(e,a,o&&t&&3!==t.i&&!g(t.D,r)?o.concat(r):void 0);if(m(n,r,i),!d(i))return;e.m=!1}if(v(a)&&!P(a)){if(!e.h.F&&e._<1)return;M(e,a),t&&t.A.l||_(e,a)}}function _(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&k(t,n)}function L(e,t){var n=e[G];return(n?j(n):e)[t]}function W(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function I(e){e.P||(e.P=!0,e.l&&I(e.l))}function q(e){e.o||(e.o=x(e.t))}function z(e,t,n){var r=O(t)?D(\"MapSet\").N(t,n):w(t)?D(\"MapSet\").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:F(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=r,o=re;n&&(a=[r],o=ae);var i=Proxy.revocable(a,o),c=i.revoke,s=i.proxy;return r.k=s,r.j=c,s}(t,n):D(\"ES5\").J(t,n);return(n?n.A:F()).p.push(r),r}function V(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return x(e)}var U,K,H=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),J=\"undefined\"!=typeof Map,$=\"undefined\"!=typeof Set,Y=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,X=H?Symbol.for(\"immer-nothing\"):((U={})[\"immer-nothing\"]=!0,U),Z=H?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",G=H?Symbol.for(\"immer-state\"):\"__$immer_state\",Q=(\"undefined\"!=typeof Symbol&&Symbol.iterator,\"\"+Object.prototype.constructor),ee=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,te=Object.getOwnPropertyDescriptors||function(e){var t={};return ee(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},ne={},re={get:function(e,t){if(t===G)return e;var n=j(e);if(!g(n,t))return function(e,t,n){var r,a=W(t,n);return a?\"value\"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!v(r)?r:r===L(e.t,t)?(q(e),e.o[t]=z(e.A.h,r,e)):r},has:function(e,t){return t in j(e)},ownKeys:function(e){return Reflect.ownKeys(j(e))},set:function(e,t,n){var r=W(j(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var a=L(j(e),t),o=null==a?void 0:a[G];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(y(n,a)&&(void 0!==n||g(e.t,t)))return!0;q(e),I(e)}return e.o[t]===n&&\"number\"!=typeof n||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==L(e.t,t)||t in e.t?(e.D[t]=!1,q(e),I(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=j(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||\"length\"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){f(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){f(12)}},ae={};h(re,(function(e,t){ae[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ae.deleteProperty=function(e,t){return re.deleteProperty.call(this,e[0],t)},ae.set=function(e,t,n){return re.set.call(this,e[0],t,n,e[0])};var oe=new(function(){function e(e){var t=this;this.O=Y,this.F=!0,this.produce=function(e,n,r){if(\"function\"==typeof e&&\"function\"!=typeof n){var a=n;n=e;var o=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return o.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var i;if(\"function\"!=typeof n&&f(6),void 0!==r&&\"function\"!=typeof r&&f(7),v(e)){var c=B(t),s=z(t,e,void 0),u=!0;try{i=n(s),u=!1}finally{u?S(c):A(c)}return\"undefined\"!=typeof Promise&&i instanceof Promise?i.then((function(e){return C(c,r),R(e,c)}),(function(e){throw S(c),e})):(C(c,r),R(i,c))}if(!e||\"object\"!=typeof e){if((i=n(e))===X)return;return void 0===i&&(i=e),t.F&&k(i,!0),i}f(21,e)},this.produceWithPatches=function(e,n){return\"function\"==typeof e?function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(a))}))}:[t.produce(e,n,(function(e,t){r=e,a=t})),r,a];var r,a},\"boolean\"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),\"boolean\"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){v(e)||f(8),d(e)&&(e=function(e){return d(e)||f(22,e),function e(t){if(!v(t))return t;var n,r=t[G],a=p(t);if(r){if(!r.P&&(r.i<4||!D(\"ES5\").K(r)))return r.t;r.I=!0,n=V(t,a),r.I=!1}else n=V(t,a);return h(n,(function(t,a){r&&b(r.t,t)===a||m(n,t,e(a))})),3===a?new Set(n):n}(e)}(e));var t=B(this),n=z(this,e,void 0);return n[G].C=!0,A(t),n},t.finishDraft=function(e,t){var n=(e&&e[G]).A;return C(n,t),R(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Y&&f(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&\"replace\"===r.op){e=r.value;break}}var a=D(\"Patches\").$;return d(e)?a(e,t):this.produce(e,(function(e){return a(e,t.slice(n+1))}))},e}()),ie=oe.produce,ce=(oe.produceWithPatches.bind(oe),oe.setAutoFreeze.bind(oe),oe.setUseProxies.bind(oe),oe.applyPatches.bind(oe),oe.createDraft.bind(oe)),se=oe.finishDraft.bind(oe),ue=n(760),le=n.n(ue);function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var de=new WeakMap,ve=new WeakMap,he=new WeakMap,pe=new WeakMap,ge=new WeakMap,be=new WeakMap;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(){var e={children:[],operations:[],selection:null,marks:null,isInline:function(){return!1},isVoid:function(){return!1},onChange:function(){},apply:function(t){var n,r=Object(s.a)(_e.pathRefs(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;Ke.transform(a,t)}}catch(j){r.e(j)}finally{r.f()}var o,i=Object(s.a)(_e.pointRefs(e));try{for(i.s();!(o=i.n()).done;){var c=o.value;Ye.transform(c,t)}}catch(j){i.e(j)}finally{i.f()}var u,l=Object(s.a)(_e.rangeRefs(e));try{for(l.s();!(u=l.n()).done;){var f=u.value;Ge.transform(f,t)}}catch(j){l.e(j)}finally{l.f()}var d,v=new Set,h=[],p=function(e){if(e){var t=e.join(\",\");v.has(t)||(v.add(t),h.push(e))}},g=de.get(e)||[],b=we(t),m=Object(s.a)(g);try{for(m.s();!(d=m.n()).done;){var y=d.value;p(Ue.transform(y,t))}}catch(j){m.e(j)}finally{m.f()}var O,w=Object(s.a)(b);try{for(w.s();!(O=w.n()).done;){p(O.value)}}catch(j){w.e(j)}finally{w.f()}de.set(e,h),gt.transform(e,t),e.operations.push(t),_e.normalize(e),\"set_selection\"===t.type&&(e.marks=null),ve.get(e)||(ve.set(e,!0),Promise.resolve().then((function(){ve.set(e,!1),e.onChange(),e.operations=[]})))},addMark:function(t,n){var r=e.selection;if(r)if(Ze.isExpanded(r))gt.setNodes(e,Object(c.a)({},t,n),{match:tt.isText,split:!0});else{var a=ye(ye({},_e.marks(e)||{}),{},Object(c.a)({},t,n));e.marks=a,ve.get(e)||e.onChange()}},deleteBackward:function(t){var n=e.selection;n&&Ze.isCollapsed(n)&&gt.delete(e,{unit:t,reverse:!0})},deleteForward:function(t){var n=e.selection;n&&Ze.isCollapsed(n)&&gt.delete(e,{unit:t})},deleteFragment:function(t){var n=e.selection;n&&Ze.isExpanded(n)&&gt.delete(e,{reverse:\"backward\"===t})},getFragment:function(){var t=e.selection;return t?Ie.fragment(e,t):[]},insertBreak:function(){gt.splitNodes(e,{always:!0})},insertFragment:function(t){gt.insertFragment(e,t)},insertNode:function(t){gt.insertNodes(e,t)},insertText:function(t){var n=e.selection,r=e.marks;if(n){if(Ze.isCollapsed(n)){var a=_e.above(e,{match:function(t){return _e.isInline(e,t)},mode:\"highest\"});if(a){var o=Object(i.a)(a,2)[1];if(_e.isEnd(e,n.anchor,o)){var c=_e.after(e,o);gt.setSelection(e,{anchor:c,focus:c})}}}if(r){var s=ye({text:t},r);gt.insertNodes(e,s)}else gt.insertText(e,t);e.marks=null}},normalizeNode:function(t){var n=Object(i.a)(t,2),r=n[0],a=n[1];if(!tt.isText(r))if(Ne.isElement(r)&&0===r.children.length){gt.insertNodes(e,{text:\"\"},{at:a.concat(0),voids:!0})}else for(var o=!_e.isEditor(r)&&(Ne.isElement(r)&&(e.isInline(r)||0===r.children.length||tt.isText(r.children[0])||e.isInline(r.children[0]))),c=0,s=0;s<r.children.length;s++,c++){var u=Ie.get(e,a);if(!tt.isText(u)){var l=r.children[s],f=u.children[c-1],d=s===r.children.length-1;if((tt.isText(l)||Ne.isElement(l)&&e.isInline(l))!==o)gt.removeNodes(e,{at:a.concat(c),voids:!0}),c--;else if(Ne.isElement(l)){if(e.isInline(l))if(null!=f&&tt.isText(f)){if(d){gt.insertNodes(e,{text:\"\"},{at:a.concat(c+1),voids:!0}),c++}}else{gt.insertNodes(e,{text:\"\"},{at:a.concat(c),voids:!0}),c++}}else null!=f&&tt.isText(f)&&(tt.equals(l,f,{loose:!0})?(gt.mergeNodes(e,{at:a.concat(c),voids:!0}),c--):\"\"===f.text?(gt.removeNodes(e,{at:a.concat(c-1),voids:!0}),c--):d&&\"\"===l.text&&(gt.removeNodes(e,{at:a.concat(c),voids:!0}),c--))}}},removeMark:function(t){var n=e.selection;if(n)if(Ze.isExpanded(n))gt.unsetNodes(e,t,{match:tt.isText,split:!0});else{var r=ye({},_e.marks(e)||{});delete r[t],e.marks=r,ve.get(e)||e.onChange()}}};return e},we=function(e){switch(e.type){case\"insert_text\":case\"remove_text\":case\"set_node\":var t=e.path;return Ue.levels(t);case\"insert_node\":var n=e.node,r=e.path,a=Ue.levels(r),c=tt.isText(n)?[]:Array.from(Ie.nodes(n),(function(e){var t=Object(i.a)(e,2)[1];return r.concat(t)}));return[].concat(Object(o.a)(a),Object(o.a)(c));case\"merge_node\":var u=e.path,l=Ue.ancestors(u),f=Ue.previous(u);return[].concat(Object(o.a)(l),[f]);case\"move_node\":var d=e.path,v=e.newPath;if(Ue.equals(d,v))return[];var h,p=[],g=[],b=Object(s.a)(Ue.ancestors(d));try{for(b.s();!(h=b.n()).done;){var m=h.value,y=Ue.transform(m,e);p.push(y)}}catch(B){b.e(B)}finally{b.f()}var O,w=Object(s.a)(Ue.ancestors(v));try{for(w.s();!(O=w.n()).done;){var j=O.value,x=Ue.transform(j,e);g.push(x)}}catch(B){w.e(B)}finally{w.f()}var k=g[g.length-1],E=v[v.length-1],P=k.concat(E);return[].concat(p,g,[P]);case\"remove_node\":var D=e.path,F=Ue.ancestors(D);return Object(o.a)(F);case\"split_node\":var C=e.path,S=Ue.levels(C),A=Ue.next(C);return[].concat(Object(o.a)(S),[A]);default:return[]}};function je(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var xe=/\\s/,ke=/[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/,Ee=/['\\u2018\\u2019]/,Pe=function(e){for(var t=0,n=null,r=e.charCodeAt(0);r;)if(Ce(r)){var a=Se(r,e,t);if(\"SURR\"===n||\"BMP\"===n)break;t+=2,n=a?\"MOD\":\"SURR\",r=e.charCodeAt(t)}else if(8205!==r)if(Be(r)){if(n&&\"ZWJ\"!==n&&\"VAR\"!==n)break;t+=1,n=\"BMP\",r=e.charCodeAt(t)}else{if(!Ae(r)){if(\"MOD\"===n){t+=1;break}break}if(n&&\"ZWJ\"!==n)break;t+=1,n=\"VAR\",r=e.charCodeAt(t)}else t+=1,n=\"ZWJ\",r=e.charCodeAt(t);return t||1},De=function(e){for(var t,n=0,r=0,a=!1;t=e.charAt(r);){var o=Pe(t);t=e.slice(r,r+o);var i=e.slice(r+o);if(Fe(t,i))a=!0,n+=o;else{if(a)break;n+=o}r+=o}return n},Fe=function e(t,n){if(xe.test(t))return!1;if(Ee.test(t)){var r=n.charAt(0),a=Pe(r);if(e(r=n.slice(0,a),n.slice(a)))return!0}return!ke.test(t)},Ce=function(e){return 55296<=e&&e<=57343},Se=function(e,t,n){if(55356===e){var r=t.charCodeAt(n+1);return r<=57343&&r>=57339}return!1},Ae=function(e){return e<=65039&&e>=65024},Be=function(e){return 10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e},Ne={isAncestor:function(e){return Object(u.a)(e)&&Ie.isNodeList(e.children)},isElement:function(e){return Object(u.a)(e)&&Ie.isNodeList(e.children)&&!_e.isEditor(e)},isElementList:function(e){return Array.isArray(e)&&e.every((function(e){return Ne.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},matches:function(e,t){for(var n in t)if(\"children\"!==n&&e[n]!==t[n])return!1;return!0}};function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=new WeakMap,_e={above:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.voids,r=void 0!==n&&n,a=t.mode,o=void 0===a?\"lowest\":a,c=t.at,u=void 0===c?e.selection:c,l=t.match;if(u){var f,d=_e.path(e,u),v=\"lowest\"===o,h=Object(s.a)(_e.levels(e,{at:d,voids:r,match:l,reverse:v}));try{for(h.s();!(f=h.n()).done;){var p=Object(i.a)(f.value,2),g=p[0],b=p[1];if(!tt.isText(g)&&!Ue.equals(d,b))return[g,b]}}catch(m){h.e(m)}finally{h.f()}}},addMark:function(e,t,n){e.addMark(t,n)},after:function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=_e.point(e,t,{edge:\"end\"}),i=_e.end(e,[]),c={anchor:o,focus:i},u=a.distance,l=void 0===u?1:u,f=0,d=Object(s.a)(_e.positions(e,Me(Me({},a),{},{at:c})));try{for(d.s();!(r=d.n()).done;){var v=r.value;if(f>l)break;0!==f&&(n=v),f++}}catch(h){d.e(h)}finally{d.f()}return n},before:function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=_e.start(e,[]),i=_e.point(e,t,{edge:\"start\"}),c={anchor:o,focus:i},u=a.distance,l=void 0===u?1:u,f=0,d=Object(s.a)(_e.positions(e,Me(Me({},a),{},{at:c,reverse:!0})));try{for(d.s();!(r=d.n()).done;){var v=r.value;if(f>l)break;0!==f&&(n=v),f++}}catch(h){d.e(h)}finally{d.f()}return n},deleteBackward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.unit,r=void 0===n?\"character\":n;e.deleteBackward(r)},deleteForward:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.unit,r=void 0===n?\"character\":n;e.deleteForward(r)},deleteFragment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.direction,r=void 0===n?\"forward\":n;e.deleteFragment(r)},edges:function(e,t){return[_e.start(e,t),_e.end(e,t)]},end:function(e,t){return _e.point(e,t,{edge:\"end\"})},first:function(e,t){var n=_e.path(e,t,{edge:\"start\"});return _e.node(e,n)},fragment:function(e,t){var n=_e.range(e,t),r=Ie.fragment(e,n);return r},hasBlocks:function(e,t){return t.children.some((function(t){return _e.isBlock(e,t)}))},hasInlines:function(e,t){return t.children.some((function(t){return tt.isText(t)||_e.isInline(e,t)}))},hasTexts:function(e,t){return t.children.every((function(e){return tt.isText(e)}))},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t){e.insertFragment(t)},insertNode:function(e,t){e.insertNode(t)},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return Ne.isElement(t)&&!e.isInline(t)},isEditor:function(e){if(!Object(u.a)(e))return!1;var t=Te.get(e);if(void 0!==t)return t;var n=\"function\"===typeof e.addMark&&\"function\"===typeof e.apply&&\"function\"===typeof e.deleteBackward&&\"function\"===typeof e.deleteForward&&\"function\"===typeof e.deleteFragment&&\"function\"===typeof e.insertBreak&&\"function\"===typeof e.insertFragment&&\"function\"===typeof e.insertNode&&\"function\"===typeof e.insertText&&\"function\"===typeof e.isInline&&\"function\"===typeof e.isVoid&&\"function\"===typeof e.normalizeNode&&\"function\"===typeof e.onChange&&\"function\"===typeof e.removeMark&&(null===e.marks||Object(u.a)(e.marks))&&(null===e.selection||Ze.isRange(e.selection))&&Ie.isNodeList(e.children)&&Ve.isOperationList(e.operations);return Te.set(e,n),n},isEnd:function(e,t,n){var r=_e.end(e,n);return $e.equals(t,r)},isEdge:function(e,t,n){return _e.isStart(e,t,n)||_e.isEnd(e,t,n)},isEmpty:function(e,t){var n=t.children,r=Object(i.a)(n,1)[0];return 0===n.length||1===n.length&&tt.isText(r)&&\"\"===r.text&&!e.isVoid(t)},isInline:function(e,t){return Ne.isElement(t)&&e.isInline(t)},isNormalizing:function(e){var t=he.get(e);return void 0===t||t},isStart:function(e,t,n){if(0!==t.offset)return!1;var r=_e.start(e,n);return $e.equals(t,r)},isVoid:function(e,t){return Ne.isElement(t)&&e.isVoid(t)},last:function(e,t){var n=_e.path(e,t,{edge:\"end\"});return _e.node(e,n)},leaf:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=_e.path(e,t,n),a=Ie.leaf(e,r);return[a,r]},levels:a.a.mark((function(e){var t,n,r,o,c,u,l,f,d,v,h,p,g,b,m,y=arguments;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=y.length>1&&void 0!==y[1]?y[1]:{},n=t.at,r=void 0===n?e.selection:n,o=t.reverse,c=void 0!==o&&o,u=t.voids,l=void 0!==u&&u,null==(f=t.match)&&(f=function(){return!0}),r){a.next=6;break}return a.abrupt(\"return\");case 6:d=[],v=_e.path(e,r),h=Object(s.a)(Ie.levels(e,v)),a.prev=9,h.s();case 11:if((p=h.n()).done){a.next=20;break}if(g=Object(i.a)(p.value,2),b=g[0],m=g[1],f(b,m)){a.next=15;break}return a.abrupt(\"continue\",18);case 15:if(d.push([b,m]),l||!_e.isVoid(e,b)){a.next=18;break}return a.abrupt(\"break\",20);case 18:a.next=11;break;case 20:a.next=25;break;case 22:a.prev=22,a.t0=a.catch(9),h.e(a.t0);case 25:return a.prev=25,h.f(),a.finish(25);case 28:return c&&d.reverse(),a.delegateYield(d,\"t1\",30);case 30:case\"end\":return a.stop()}}),d,null,[[9,22,25,28]])})),marks:function(e){var t=e.marks,n=e.selection;if(!n)return null;if(t)return t;if(Ze.isExpanded(n)){var r=_e.nodes(e,{match:tt.isText}),a=Object(i.a)(r,1)[0];return a?je(Object(i.a)(a,1)[0],[\"text\"]):{}}var o=n.anchor,c=o.path,s=_e.leaf(e,c),u=Object(i.a)(s,1)[0];if(0===o.offset){var l=_e.previous(e,{at:c,match:tt.isText}),f=_e.above(e,{match:function(t){return _e.isBlock(e,t)}});if(l&&f){var d=Object(i.a)(l,2),v=d[0],h=d[1],p=Object(i.a)(f,2)[1];Ue.isAncestor(p,h)&&(u=v)}}return je(u,[\"text\"])},next:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?\"lowest\":n,a=t.voids,o=void 0!==a&&a,c=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var l=_e.after(e,u,{voids:o});if(l){var f=_e.last(e,[]),d=Object(i.a)(f,2),v=d[1],h=[l.path,v];if(Ue.isPath(u)&&0===u.length)throw new Error(\"Cannot get the next node from the root node!\");if(null==c)if(Ue.isPath(u)){var p=_e.parent(e,u),g=Object(i.a)(p,1),b=g[0];c=function(e){return b.children.includes(e)}}else c=function(){return!0};var m=_e.nodes(e,{at:h,match:c,mode:r,voids:o}),y=Object(i.a)(m,1),O=y[0];return O}}},node:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=_e.path(e,t,n),a=Ie.get(e,r);return[a,r]},nodes:a.a.mark((function e(t){var n,r,o,c,u,l,f,d,v,h,p,g,b,m,y,O,w,j,x,k,E,P,D,F,C,S,A=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=A.length>1&&void 0!==A[1]?A[1]:{},r=n.at,o=void 0===r?t.selection:r,c=n.mode,u=void 0===c?\"all\":c,l=n.universal,f=void 0!==l&&l,d=n.reverse,v=void 0!==d&&d,h=n.voids,p=void 0!==h&&h,(g=n.match)||(g=function(){return!0}),o){e.next=6;break}return e.abrupt(\"return\");case 6:Le.isSpan(o)?(b=o[0],m=o[1]):(y=_e.path(t,o,{edge:\"start\"}),O=_e.path(t,o,{edge:\"end\"}),b=v?O:y,m=v?y:O),w=Ie.nodes(t,{reverse:v,from:b,to:m,pass:function(e){var n=Object(i.a)(e,1)[0];return!p&&_e.isVoid(t,n)}}),j=[],k=Object(s.a)(w),e.prev=10,k.s();case 12:if((E=k.n()).done){e.next=37;break}if(P=Object(i.a)(E.value,2),D=P[0],F=P[1],C=x&&0===Ue.compare(F,x[1]),\"highest\"!==u||!C){e.next=17;break}return e.abrupt(\"continue\",35);case 17:if(g(D,F)){e.next=23;break}if(!f||C||!tt.isText(D)){e.next=22;break}return e.abrupt(\"return\");case 22:return e.abrupt(\"continue\",35);case 23:if(\"lowest\"!==u||!C){e.next=26;break}return x=[D,F],e.abrupt(\"continue\",35);case 26:if(!(S=\"lowest\"===u?x:[D,F])){e.next=34;break}if(!f){e.next=32;break}j.push(S),e.next=34;break;case 32:return e.next=34,S;case 34:x=[D,F];case 35:e.next=12;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(10),k.e(e.t0);case 42:return e.prev=42,k.f(),e.finish(42);case 45:if(\"lowest\"!==u||!x){e.next=52;break}if(!f){e.next=50;break}j.push(x),e.next=52;break;case 50:return e.next=52,x;case 52:if(!f){e.next=54;break}return e.delegateYield(j,\"t1\",54);case 54:case\"end\":return e.stop()}}),e,null,[[10,39,42,45]])})),normalize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force,r=void 0!==n&&n,a=function(e){return de.get(e)||[]};if(_e.isNormalizing(e)){if(r){var o=Array.from(Ie.nodes(e),(function(e){return Object(i.a)(e,2)[1]}));de.set(e,o)}0!==a(e).length&&_e.withoutNormalizing(e,(function(){var t,n=Object(s.a)(a(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Ie.has(e,r)){var o=_e.node(e,r),c=Object(i.a)(o,2),u=c[0];c[1];if(Ne.isElement(u)&&0===u.children.length){gt.insertNodes(e,{text:\"\"},{at:r.concat(0),voids:!0})}}}}catch(h){n.e(h)}finally{n.f()}for(var l=42*a(e).length,f=0;0!==a(e).length;){if(f>l)throw new Error(\"\\n            Could not completely normalize the editor after \".concat(l,\" iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\\n          \"));var d=a(e).pop();if(Ie.has(e,d)){var v=_e.node(e,d);e.normalizeNode(v)}f++}}))}},parent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=_e.path(e,t,n),a=Ue.parent(r),o=_e.node(e,a);return o},path:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.depth,a=n.edge;if(Ue.isPath(t))if(\"start\"===a){var o=Ie.first(e,t),c=Object(i.a)(o,2),s=c[1];t=s}else if(\"end\"===a){var u=Ie.last(e,t),l=Object(i.a)(u,2),f=l[1];t=f}return Ze.isRange(t)&&(t=\"start\"===a?Ze.start(t):\"end\"===a?Ze.end(t):Ue.common(t.anchor.path,t.focus.path)),$e.isPoint(t)&&(t=t.path),null!=r&&(t=t.slice(0,r)),t},hasPath:function(e,t){return Ie.has(e,t)},pathRef:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.affinity,a=void 0===r?\"forward\":r,o={current:t,affinity:a,unref:function(){var t=o.current;return _e.pathRefs(e).delete(o),o.current=null,t}},i=_e.pathRefs(e);return i.add(o),o},pathRefs:function(e){var t=pe.get(e);return t||(t=new Set,pe.set(e,t)),t},point:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.edge,a=void 0===r?\"start\":r;if(Ue.isPath(t)){var o;if(\"end\"===a){var c=Ie.last(e,t),s=Object(i.a)(c,2),u=s[1];o=u}else{var l=Ie.first(e,t),f=Object(i.a)(l,2),d=f[1];o=d}var v=Ie.get(e,o);if(!tt.isText(v))throw new Error(\"Cannot get the \".concat(a,\" point in the node at path [\").concat(t,\"] because it has no \").concat(a,\" text node.\"));return{path:o,offset:\"end\"===a?v.text.length:0}}if(Ze.isRange(t)){var h=Ze.edges(t),p=Object(i.a)(h,2),g=p[0],b=p[1];return\"start\"===a?g:b}return t},pointRef:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.affinity,a=void 0===r?\"forward\":r,o={current:t,affinity:a,unref:function(){var t=o.current;return _e.pointRefs(e).delete(o),o.current=null,t}},i=_e.pointRefs(e);return i.add(o),o},pointRefs:function(e){var t=ge.get(e);return t||(t=new Set,ge.set(e,t)),t},positions:a.a.mark((function e(t){var n,r,o,c,u,f,d,v,h,p,g,b,m,y,O,w,j,x,k,E,P,D,F,C,S,A,B,N,R,M=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R=function(e,t){return\"character\"===t?Pe(e):\"word\"===t?De(e):\"line\"===t||\"block\"===t?e.length:1},n=M.length>1&&void 0!==M[1]?M[1]:{},r=n.at,o=void 0===r?t.selection:r,c=n.unit,u=void 0===c?\"offset\":c,f=n.reverse,d=void 0!==f&&f,v=n.voids,h=void 0!==v&&v,o){e.next=5;break}return e.abrupt(\"return\");case 5:p=_e.range(t,o),g=Ze.edges(p),b=Object(i.a)(g,2),m=b[0],y=b[1],O=d?y:m,w=!1,j=\"\",x=0,k=0,E=0,P=Object(s.a)(_e.nodes(t,{at:o,reverse:d,voids:h})),e.prev=14,P.s();case 16:if((D=P.n()).done){e.next=51;break}if(F=Object(i.a)(D.value,2),C=F[0],S=F[1],!Ne.isElement(C)){e.next=26;break}if(h||!t.isVoid(C)){e.next=23;break}return e.next=22,_e.start(t,S);case 22:return e.abrupt(\"continue\",49);case 23:if(!t.isInline(C)){e.next=25;break}return e.abrupt(\"continue\",49);case 25:_e.hasInlines(t,C)&&(A=Ue.isAncestor(S,y.path)?y:_e.end(t,S),B=Ue.isAncestor(S,m.path)?m:_e.start(t,S),j=_e.string(t,{anchor:B,focus:A},{voids:h}),j=d?Object(l.reverse)(j):j,w=!0);case 26:if(!tt.isText(C)){e.next=49;break}if((N=Ue.equals(S,O.path))?(k=d?O.offset:C.text.length-O.offset,E=O.offset):(k=C.text.length,E=d?k:0),!N&&!w&&\"offset\"!==u){e.next=33;break}return e.next=32,{path:S,offset:E};case 32:w=!1;case 33:if(0!==x){e.next=39;break}if(\"\"!==j){e.next=37;break}return e.abrupt(\"break\",49);case 37:x=R(j,u),j=j.slice(x);case 39:if(E=d?E-x:E+x,!((k-=x)<0)){e.next=44;break}return x=-k,e.abrupt(\"break\",49);case 44:return x=0,e.next=47,{path:S,offset:E};case 47:e.next=33;break;case 49:e.next=16;break;case 51:e.next=56;break;case 53:e.prev=53,e.t0=e.catch(14),P.e(e.t0);case 56:return e.prev=56,P.f(),e.finish(56);case 59:case\"end\":return e.stop()}}),e,null,[[14,53,56,59]])})),previous:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?\"lowest\":n,a=t.voids,o=void 0!==a&&a,c=t.match,s=t.at,u=void 0===s?e.selection:s;if(u){var l=_e.before(e,u,{voids:o});if(l){var f=_e.first(e,[]),d=Object(i.a)(f,2),v=d[1],h=[l.path,v];if(Ue.isPath(u)&&0===u.length)throw new Error(\"Cannot get the previous node from the root node!\");if(null==c)if(Ue.isPath(u)){var p=_e.parent(e,u),g=Object(i.a)(p,1),b=g[0];c=function(e){return b.children.includes(e)}}else c=function(){return!0};var m=_e.nodes(e,{reverse:!0,at:h,match:c,mode:r,voids:o}),y=Object(i.a)(m,1),O=y[0];return O}}},range:function(e,t,n){return Ze.isRange(t)&&!n?t:{anchor:_e.start(e,t),focus:_e.end(e,n||t)}},rangeRef:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.affinity,a=void 0===r?\"forward\":r,o={current:t,affinity:a,unref:function(){var t=o.current;return _e.rangeRefs(e).delete(o),o.current=null,t}},i=_e.rangeRefs(e);return i.add(o),o},rangeRefs:function(e){var t=be.get(e);return t||(t=new Set,be.set(e,t)),t},removeMark:function(e,t){e.removeMark(t)},start:function(e,t){return _e.point(e,t,{edge:\"start\"})},string:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.voids,o=void 0!==a&&a,c=_e.range(e,t),u=Ze.edges(c),l=Object(i.a)(u,2),f=l[0],d=l[1],v=\"\",h=Object(s.a)(_e.nodes(e,{at:c,match:tt.isText,voids:o}));try{for(h.s();!(n=h.n()).done;){var p=Object(i.a)(n.value,2),g=p[0],b=p[1],m=g.text;Ue.equals(b,d.path)&&(m=m.slice(0,d.offset)),Ue.equals(b,f.path)&&(m=m.slice(f.offset)),v+=m}}catch(y){h.e(y)}finally{h.f()}return v},unhangRange:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.voids,a=void 0!==r&&r,o=Ze.edges(t),c=Object(i.a)(o,2),u=c[0],l=c[1];if(0!==u.offset||0!==l.offset||Ze.isCollapsed(t))return t;var f,d=_e.above(e,{at:l,match:function(t){return _e.isBlock(e,t)}}),v=d?d[1]:[],h=_e.start(e,[]),p={anchor:h,focus:l},g=!0,b=Object(s.a)(_e.nodes(e,{at:p,match:tt.isText,reverse:!0,voids:a}));try{for(b.s();!(f=b.n()).done;){var m=Object(i.a)(f.value,2),y=m[0],O=m[1];if(g)g=!1;else if(\"\"!==y.text||Ue.isBefore(O,v)){l={path:O,offset:y.text.length};break}}}catch(w){b.e(w)}finally{b.f()}return{anchor:u,focus:l}},void:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _e.above(e,Me(Me({},t),{},{match:function(t){return _e.isVoid(e,t)}}))},withoutNormalizing:function(e,t){var n=_e.isNormalizing(e);he.set(e,!1);try{t()}finally{he.set(e,n)}_e.normalize(e)}},Le={isSpan:function(e){return Array.isArray(e)&&2===e.length&&e.every(Ue.isPath)}},We=new WeakMap,Ie={ancestor:function(e,t){var n=Ie.get(e,t);if(tt.isText(n))throw new Error(\"Cannot get the ancestor node at path [\".concat(t,\"] because it refers to a text node instead: \").concat(n));return n},ancestors:a.a.mark((function e(t,n){var r,o,i,c,u,l,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=f.length>2&&void 0!==f[2]?f[2]:{},o=Object(s.a)(Ue.ancestors(n,r)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=12;break}return c=i.value,u=Ie.ancestor(t,c),l=[u,c],e.next=10,l;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.e(e.t0);case 17:return e.prev=17,o.f(),e.finish(17);case 20:case\"end\":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(tt.isText(e))throw new Error(\"Cannot get the child of a text node: \".concat(JSON.stringify(e)));var n=e.children[t];if(null==n)throw new Error(\"Cannot get child at index `\".concat(t,\"` in node: \").concat(JSON.stringify(e)));return n},children:a.a.mark((function(e,t){var n,r,o,i,c,s,u,l,f=arguments;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=f.length>2&&void 0!==f[2]?f[2]:{},r=n.reverse,o=void 0!==r&&r,i=Ie.ancestor(e,t),c=i.children,s=o?c.length-1:0;case 5:if(!(o?s>=0:s<c.length)){a.next=13;break}return u=Ie.child(i,s),l=t.concat(s),a.next=10,[u,l];case 10:s=o?s-1:s+1,a.next=5;break;case 13:case\"end\":return a.stop()}}),c)})),common:function(e,t,n){var r=Ue.common(t,n);return[Ie.get(e,r),r]},descendant:function(e,t){var n=Ie.get(e,t);if(_e.isEditor(n))throw new Error(\"Cannot get the descendant node at path [\".concat(t,\"] because it refers to the root editor node instead: \").concat(n));return n},descendants:a.a.mark((function e(t){var n,r,o,c,u,l,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.length>1&&void 0!==f[1]?f[1]:{},r=Object(s.a)(Ie.nodes(t,n)),e.prev=2,r.s();case 4:if((o=r.n()).done){e.next=11;break}if(c=Object(i.a)(o.value,2),u=c[0],0===(l=c[1]).length){e.next=9;break}return e.next=9,[u,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case\"end\":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:a.a.mark((function e(t){var n,r,o,c,u,l,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.length>1&&void 0!==f[1]?f[1]:{},r=Object(s.a)(Ie.nodes(t,n)),e.prev=2,r.s();case 4:if((o=r.n()).done){e.next=11;break}if(c=Object(i.a)(o.value,2),u=c[0],l=c[1],!Ne.isElement(u)){e.next=9;break}return e.next=9,[u,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case\"end\":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){return Ne.isAncestor(e)?je(e,[\"children\"]):je(e,[\"text\"])},first:function(e,t){for(var n=t.slice(),r=Ie.get(e,n);r&&!tt.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment:function(e,t){if(tt.isText(e))throw new Error(\"Cannot get a fragment starting from a root text node: \".concat(JSON.stringify(e)));return ie({children:e.children},(function(e){var n,r=Ze.edges(t),a=Object(i.a)(r,2),o=a[0],c=a[1],u=Ie.nodes(e,{reverse:!0,pass:function(e){var n=Object(i.a)(e,2)[1];return!Ze.includes(t,n)}}),l=Object(s.a)(u);try{for(l.s();!(n=l.n()).done;){var f=Object(i.a)(n.value,2)[1];if(!Ze.includes(t,f)){var d=Ie.parent(e,f),v=f[f.length-1];d.children.splice(v,1)}if(Ue.equals(f,c.path)){var h=Ie.leaf(e,f);h.text=h.text.slice(0,c.offset)}if(Ue.equals(f,o.path)){var p=Ie.leaf(e,f);p.text=p.text.slice(o.offset)}}}catch(g){l.e(g)}finally{l.f()}_e.isEditor(e)&&(e.selection=null)})).children},get:function(e,t){for(var n=e,r=0;r<t.length;r++){var a=t[r];if(tt.isText(n)||!n.children[a])throw new Error(\"Cannot find a descendant at path [\".concat(t,\"] in node: \").concat(JSON.stringify(e)));n=n.children[a]}return n},has:function(e,t){for(var n=e,r=0;r<t.length;r++){var a=t[r];if(tt.isText(n)||!n.children[a])return!1;n=n.children[a]}return!0},isNode:function(e){return tt.isText(e)||Ne.isElement(e)||_e.isEditor(e)},isNodeList:function(e){if(!Array.isArray(e))return!1;var t=We.get(e);if(void 0!==t)return t;var n=e.every((function(e){return Ie.isNode(e)}));return We.set(e,n),n},last:function(e,t){for(var n=t.slice(),r=Ie.get(e,n);r&&!tt.isText(r)&&0!==r.children.length;){var a=r.children.length-1;r=r.children[a],n.push(a)}return[r,n]},leaf:function(e,t){var n=Ie.get(e,t);if(!tt.isText(n))throw new Error(\"Cannot get the leaf node at path [\".concat(t,\"] because it refers to a non-leaf node: \").concat(n));return n},levels:a.a.mark((function e(t,n){var r,o,i,c,u,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=l.length>2&&void 0!==l[2]?l[2]:{},o=Object(s.a)(Ue.levels(n,r)),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=11;break}return c=i.value,u=Ie.get(t,c),e.next=9,[u,c];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),o.e(e.t0);case 16:return e.prev=16,o.f(),e.finish(16);case 19:case\"end\":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return Ne.isElement(e)&&Ne.isElementProps(t)&&Ne.matches(e,t)||tt.isText(e)&&tt.isTextProps(t)&&tt.matches(e,t)},nodes:a.a.mark((function e(t){var n,r,o,i,c,s,u,l,f,d,v,h,p,g=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g.length>1&&void 0!==g[1]?g[1]:{},r=n.pass,o=n.reverse,i=void 0!==o&&o,c=n.from,s=void 0===c?[]:c,u=n.to,l=new Set,f=[],d=t;case 6:if(!u||!(i?Ue.isBefore(f,u):Ue.isAfter(f,u))){e.next=9;break}return e.abrupt(\"break\",37);case 9:if(l.has(d)){e.next=12;break}return e.next=12,[d,f];case 12:if(l.has(d)||tt.isText(d)||0===d.children.length||null!=r&&!1!==r([d,f])){e.next=19;break}return l.add(d),v=i?d.children.length-1:0,Ue.isAncestor(f,s)&&(v=s[f.length]),f=f.concat(v),d=Ie.get(t,f),e.abrupt(\"continue\",6);case 19:if(0!==f.length){e.next=21;break}return e.abrupt(\"break\",37);case 21:if(i){e.next=27;break}if(h=Ue.next(f),!Ie.has(t,h)){e.next=27;break}return f=h,d=Ie.get(t,f),e.abrupt(\"continue\",6);case 27:if(!i||0===f[f.length-1]){e.next=32;break}return p=Ue.previous(f),f=p,d=Ie.get(t,f),e.abrupt(\"continue\",6);case 32:f=Ue.parent(f),d=Ie.get(t,f),l.add(d),e.next=6;break;case 37:case\"end\":return e.stop()}}),e)})),parent:function(e,t){var n=Ue.parent(t),r=Ie.get(e,n);if(tt.isText(r))throw new Error(\"Cannot get the parent of path [\".concat(t,\"] because it does not exist in the root.\"));return r},string:function(e){return tt.isText(e)?e.text:e.children.map(Ie.string).join(\"\")},texts:a.a.mark((function e(t){var n,r,o,c,u,l,f=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.length>1&&void 0!==f[1]?f[1]:{},r=Object(s.a)(Ie.nodes(t,n)),e.prev=2,r.s();case 4:if((o=r.n()).done){e.next=11;break}if(c=Object(i.a)(o.value,2),u=c[0],l=c[1],!tt.isText(u)){e.next=9;break}return e.next=9,[u,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case\"end\":return e.stop()}}),e,null,[[2,13,16,19]])}))};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ve={isNodeOperation:function(e){return Ve.isOperation(e)&&e.type.endsWith(\"_node\")},isOperation:function(e){if(!Object(u.a)(e))return!1;switch(e.type){case\"insert_node\":return Ue.isPath(e.path)&&Ie.isNode(e.node);case\"insert_text\":return\"number\"===typeof e.offset&&\"string\"===typeof e.text&&Ue.isPath(e.path);case\"merge_node\":return\"number\"===typeof e.position&&Ue.isPath(e.path)&&Object(u.a)(e.properties);case\"move_node\":return Ue.isPath(e.path)&&Ue.isPath(e.newPath);case\"remove_node\":return Ue.isPath(e.path)&&Ie.isNode(e.node);case\"remove_text\":return\"number\"===typeof e.offset&&\"string\"===typeof e.text&&Ue.isPath(e.path);case\"set_node\":return Ue.isPath(e.path)&&Object(u.a)(e.properties)&&Object(u.a)(e.newProperties);case\"set_selection\":return null===e.properties&&Ze.isRange(e.newProperties)||null===e.newProperties&&Ze.isRange(e.properties)||Object(u.a)(e.properties)&&Object(u.a)(e.newProperties);case\"split_node\":return Ue.isPath(e.path)&&\"number\"===typeof e.position&&Object(u.a)(e.properties);default:return!1}},isOperationList:function(e){return Array.isArray(e)&&e.every((function(e){return Ve.isOperation(e)}))},isSelectionOperation:function(e){return Ve.isOperation(e)&&e.type.endsWith(\"_selection\")},isTextOperation:function(e){return Ve.isOperation(e)&&e.type.endsWith(\"_text\")},inverse:function(e){switch(e.type){case\"insert_node\":return ze(ze({},e),{},{type:\"remove_node\"});case\"insert_text\":return ze(ze({},e),{},{type:\"remove_text\"});case\"merge_node\":return ze(ze({},e),{},{type:\"split_node\",path:Ue.previous(e.path)});case\"move_node\":var t=e.newPath,n=e.path;if(Ue.equals(t,n))return e;if(Ue.isSibling(n,t))return ze(ze({},e),{},{path:t,newPath:n});var r=Ue.transform(n,e),a=Ue.transform(Ue.next(n),e);return ze(ze({},e),{},{path:r,newPath:a});case\"remove_node\":return ze(ze({},e),{},{type:\"insert_node\"});case\"remove_text\":return ze(ze({},e),{},{type:\"insert_text\"});case\"set_node\":var o=e.properties,i=e.newProperties;return ze(ze({},e),{},{properties:i,newProperties:o});case\"set_selection\":var c=e.properties,s=e.newProperties;return ze(ze({},e),{},null==c?{properties:s,newProperties:null}:null==s?{properties:null,newProperties:c}:{properties:s,newProperties:c});case\"split_node\":return ze(ze({},e),{},{type:\"merge_node\",path:Ue.next(e.path)})}}},Ue={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.reverse,r=void 0!==n&&n,a=Ue.levels(e,t);return a=r?a.slice(1):a.slice(0,-1)},common:function(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var a=e[r];if(a!==t[r])break;n.push(a)}return n},compare:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter:function(e,t){var n=e.length-1,r=e.slice(0,n),a=t.slice(0,n),o=e[n],i=t[n];return Ue.equals(r,a)&&o>i},endsAt:function(e,t){var n=e.length,r=e.slice(0,n),a=t.slice(0,n);return Ue.equals(r,a)},endsBefore:function(e,t){var n=e.length-1,r=e.slice(0,n),a=t.slice(0,n),o=e[n],i=t[n];return Ue.equals(r,a)&&o<i},equals:function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===Ue.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===Ue.compare(e,t)},isBefore:function(e,t){return-1===Ue.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===Ue.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===Ue.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===Ue.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===Ue.compare(e,t)},isPath:function(e){return Array.isArray(e)&&(0===e.length||\"number\"===typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&Ue.equals(n,r)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.reverse,r=void 0!==n&&n,a=[],o=0;o<=e.length;o++)a.push(e.slice(0,o));return r&&a.reverse(),a},next:function(e){if(0===e.length)throw new Error(\"Cannot get the next path of a root path [\".concat(e,\"], because it has no next index.\"));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent:function(e){if(0===e.length)throw new Error(\"Cannot get the parent path of the root path [\".concat(e,\"].\"));return e.slice(0,-1)},previous:function(e){if(0===e.length)throw new Error(\"Cannot get the previous path of a root path [\".concat(e,\"], because it has no previous index.\"));var t=e[e.length-1];if(t<=0)throw new Error(\"Cannot get the previous path of a first child path [\".concat(e,\"] because it would result in a negative index.\"));return e.slice(0,-1).concat(t-1)},relative:function(e,t){if(!Ue.isAncestor(t,e)&&!Ue.equals(e,t))throw new Error(\"Cannot get the relative path of [\".concat(e,\"] inside ancestor [\").concat(t,\"], because it is not above or equal to the path.\"));return e.slice(t.length)},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ie(e,(function(r){var a=n.affinity,o=void 0===a?\"forward\":a;if(0!==e.length)switch(t.type){case\"insert_node\":var i=t.path;(Ue.equals(i,r)||Ue.endsBefore(i,r)||Ue.isAncestor(i,r))&&(r[i.length-1]+=1);break;case\"remove_node\":var c=t.path;if(Ue.equals(c,r)||Ue.isAncestor(c,r))return null;Ue.endsBefore(c,r)&&(r[c.length-1]-=1);break;case\"merge_node\":var s=t.path,u=t.position;Ue.equals(s,r)||Ue.endsBefore(s,r)?r[s.length-1]-=1:Ue.isAncestor(s,r)&&(r[s.length-1]-=1,r[s.length]+=u);break;case\"split_node\":var l=t.path,f=t.position;if(Ue.equals(l,r)){if(\"forward\"===o)r[r.length-1]+=1;else if(\"backward\"!==o)return null}else Ue.endsBefore(l,r)?r[l.length-1]+=1:Ue.isAncestor(l,r)&&e[l.length]>=f&&(r[l.length-1]+=1,r[l.length]-=f);break;case\"move_node\":var d=t.path,v=t.newPath;if(Ue.equals(d,v))return;if(Ue.isAncestor(d,r)||Ue.equals(d,r)){var h=v.slice();return Ue.endsBefore(d,v)&&d.length<v.length&&(h[d.length-1]-=1),h.concat(r.slice(d.length))}Ue.isSibling(d,v)&&(Ue.isAncestor(v,r)||Ue.equals(v,r))?Ue.endsBefore(d,r)?r[d.length-1]-=1:r[d.length-1]+=1:Ue.endsBefore(v,r)||Ue.equals(v,r)||Ue.isAncestor(v,r)?(Ue.endsBefore(d,r)&&(r[d.length-1]-=1),r[v.length-1]+=1):Ue.endsBefore(d,r)&&(Ue.equals(v,r)&&(r[v.length-1]+=1),r[d.length-1]-=1)}}))}},Ke={transform:function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=Ue.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}}};function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $e={compare:function(e,t){var n=Ue.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:function(e,t){return 1===$e.compare(e,t)},isBefore:function(e,t){return-1===$e.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&Ue.equals(e.path,t.path)},isPoint:function(e){return Object(u.a)(e)&&\"number\"===typeof e.offset&&Ue.isPath(e.path)},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ie(e,(function(e){var r=n.affinity,a=void 0===r?\"forward\":r,o=e.path,i=e.offset;switch(t.type){case\"insert_node\":case\"move_node\":e.path=Ue.transform(o,t,n);break;case\"insert_text\":Ue.equals(t.path,o)&&t.offset<=i&&(e.offset+=t.text.length);break;case\"merge_node\":Ue.equals(t.path,o)&&(e.offset+=t.position),e.path=Ue.transform(o,t,n);break;case\"remove_text\":Ue.equals(t.path,o)&&t.offset<=i&&(e.offset-=Math.min(i-t.offset,t.text.length));break;case\"remove_node\":if(Ue.equals(t.path,o)||Ue.isAncestor(t.path,o))return null;e.path=Ue.transform(o,t,n);break;case\"split_node\":if(Ue.equals(t.path,o)){if(t.position===i&&null==a)return null;(t.position<i||t.position===i&&\"forward\"===a)&&(e.offset-=t.position,e.path=Ue.transform(o,t,Je(Je({},n),{},{affinity:\"forward\"})))}else e.path=Ue.transform(o,t,n)}}))}},Ye={transform:function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=$e.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}}};function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ze={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.reverse,r=void 0!==n&&n,a=e.anchor,o=e.focus;return Ze.isBackward(e)===r?[a,o]:[o,a]},end:function(e){var t=Ze.edges(e),n=Object(i.a)(t,2)[1];return n},equals:function(e,t){return $e.equals(e.anchor,t.anchor)&&$e.equals(e.focus,t.focus)},includes:function(e,t){if(Ze.isRange(t)){if(Ze.includes(e,t.anchor)||Ze.includes(e,t.focus))return!0;var n=Ze.edges(e),r=Object(i.a)(n,2),a=r[0],o=r[1],c=Ze.edges(t),s=Object(i.a)(c,2),u=s[0],l=s[1];return $e.isBefore(a,u)&&$e.isAfter(o,l)}var f=Ze.edges(e),d=Object(i.a)(f,2),v=d[0],h=d[1],p=!1,g=!1;return $e.isPoint(t)?(p=$e.compare(t,v)>=0,g=$e.compare(t,h)<=0):(p=Ue.compare(t,v.path)>=0,g=Ue.compare(t,h.path)<=0),p&&g},intersection:function(e,t){var n=je(e,[\"anchor\",\"focus\"]),r=Ze.edges(e),a=Object(i.a)(r,2),o=a[0],c=a[1],s=Ze.edges(t),u=Object(i.a)(s,2),l=u[0],f=u[1],d=$e.isBefore(o,l)?l:o,v=$e.isBefore(c,f)?c:f;return $e.isBefore(v,d)?null:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({anchor:d,focus:v},n)},isBackward:function(e){var t=e.anchor,n=e.focus;return $e.isAfter(t,n)},isCollapsed:function(e){var t=e.anchor,n=e.focus;return $e.equals(t,n)},isExpanded:function(e){return!Ze.isCollapsed(e)},isForward:function(e){return!Ze.isBackward(e)},isRange:function(e){return Object(u.a)(e)&&$e.isPoint(e.anchor)&&$e.isPoint(e.focus)},points:a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,\"anchor\"];case 2:return e.next=4,[t.focus,\"focus\"];case 4:case\"end\":return e.stop()}}),e)})),start:function(e){var t=Ze.edges(e),n=Object(i.a)(t,1)[0];return n},transform:function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.affinity,i=void 0===o?\"inward\":o;return\"inward\"===i?Ze.isForward(e)?(n=\"forward\",r=\"backward\"):(n=\"backward\",r=\"forward\"):\"outward\"===i?Ze.isForward(e)?(n=\"backward\",r=\"forward\"):(n=\"forward\",r=\"backward\"):(n=i,r=i),ie(e,(function(e){var a=$e.transform(e.anchor,t,{affinity:n}),o=$e.transform(e.focus,t,{affinity:r});if(!a||!o)return null;e.anchor=a,e.focus=o}))}},Ge={transform:function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=Ze.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}}};function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt={equals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.loose,a=void 0!==r&&r;function o(e){return je(e,[\"text\"])}return le()(a?o(e):e,a?o(t):t)},isText:function(e){return Object(u.a)(e)&&\"string\"===typeof e.text},isTextList:function(e){return Array.isArray(e)&&e.every((function(e){return tt.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var n in t)if(\"text\"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations:function(e,t){var n,r=[et({},e)],a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o,c=n.value,u=je(c,[\"anchor\",\"focus\"]),l=Ze.edges(c),f=Object(i.a)(l,2),d=f[0],v=f[1],h=[],p=0,g=Object(s.a)(r);try{for(g.s();!(o=g.n()).done;){var b=o.value,m=b.text.length,y=p;if(p+=m,d.offset<=y&&v.offset>=p)Object.assign(b,u),h.push(b);else if(d.offset!==v.offset&&(d.offset===p||v.offset===y)||d.offset>p||v.offset<y||v.offset===y&&0!==y)h.push(b);else{var O=b,w=void 0,j=void 0;if(v.offset<p){var x=v.offset-y;j=et(et({},O),{},{text:O.text.slice(x)}),O=et(et({},O),{},{text:O.text.slice(0,x)})}if(d.offset>y){var k=d.offset-y;w=et(et({},O),{},{text:O.text.slice(0,k)}),O=et(et({},O),{},{text:O.text.slice(k)})}Object.assign(O,u),w&&h.push(w),h.push(O),j&&h.push(j)}}}catch(E){g.e(E)}finally{g.f()}r=h}}catch(E){a.e(E)}finally{a.f()}return r}};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it={insertNodes:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_e.withoutNormalizing(e,(function(){var r=n.hanging,a=void 0!==r&&r,o=n.voids,c=void 0!==o&&o,u=n.mode,l=void 0===u?\"lowest\":u,f=n.at,d=n.match,v=n.select;if(Ie.isNode(t)&&(t=[t]),0!==t.length){var h=t,p=Object(i.a)(h,1)[0];if(f||(f=e.selection?e.selection:e.children.length>0?_e.end(e,[]):[0],v=!0),null==v&&(v=!1),Ze.isRange(f))if(a||(f=_e.unhangRange(e,f)),Ze.isCollapsed(f))f=f.anchor;else{var g=Ze.edges(f),b=Object(i.a)(g,2)[1],m=_e.pointRef(e,b);gt.delete(e,{at:f}),f=m.unref()}if($e.isPoint(f)){null==d&&(d=tt.isText(p)?function(e){return tt.isText(e)}:e.isInline(p)?function(t){return tt.isText(t)||_e.isInline(e,t)}:function(t){return _e.isBlock(e,t)});var y=_e.nodes(e,{at:f.path,match:d,mode:l,voids:c}),O=Object(i.a)(y,1)[0];if(!O)return;var w=Object(i.a)(O,2)[1],j=_e.pathRef(e,w),x=_e.isEnd(e,f,w);gt.splitNodes(e,{at:f,match:d,mode:l,voids:c});var k=j.unref();f=x?Ue.next(k):k}var E=Ue.parent(f),P=f[f.length-1];if(c||!_e.void(e,{at:E})){var D,F=Object(s.a)(t);try{for(F.s();!(D=F.n()).done;){var C=D.value,S=E.concat(P);P++,e.apply({type:\"insert_node\",path:S,node:C})}}catch(B){F.e(B)}finally{F.f()}if(v){var A=_e.end(e,f);A&&gt.select(e,A)}}}}))},liftNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e.withoutNormalizing(e,(function(){var n=t.at,r=void 0===n?e.selection:n,a=t.mode,o=void 0===a?\"lowest\":a,c=t.voids,s=void 0!==c&&c,u=t.match;if(null==u&&(u=Ue.isPath(r)?ut(e,r):function(t){return _e.isBlock(e,t)}),r)for(var l=_e.nodes(e,{at:r,match:u,mode:o,voids:s}),f=0,d=Array.from(l,(function(t){var n=Object(i.a)(t,2)[1];return _e.pathRef(e,n)}));f<d.length;f++){var v=d[f].unref();if(v.length<2)throw new Error(\"Cannot lift node at a path [\".concat(v,\"] because it has a depth of less than `2`.\"));var h=_e.node(e,Ue.parent(v)),p=Object(i.a)(h,2),g=p[0],b=p[1],m=v[v.length-1],y=g.children.length;if(1===y){var O=Ue.next(b);gt.moveNodes(e,{at:v,to:O,voids:s}),gt.removeNodes(e,{at:b,voids:s})}else if(0===m)gt.moveNodes(e,{at:v,to:b,voids:s});else if(m===y-1){var w=Ue.next(b);gt.moveNodes(e,{at:v,to:w,voids:s})}else{var j=Ue.next(v),x=Ue.next(b);gt.splitNodes(e,{at:j,voids:s}),gt.moveNodes(e,{at:v,to:x,voids:s})}}}))},mergeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e.withoutNormalizing(e,(function(){var n=t.match,r=t.at,a=void 0===r?e.selection:r,o=t.hanging,c=void 0!==o&&o,s=t.voids,u=void 0!==s&&s,l=t.mode,f=void 0===l?\"lowest\":l;if(a){if(null==n)if(Ue.isPath(a)){var d=_e.parent(e,a),v=Object(i.a)(d,1)[0];n=function(e){return v.children.includes(e)}}else n=function(t){return _e.isBlock(e,t)};if(!c&&Ze.isRange(a)&&(a=_e.unhangRange(e,a)),Ze.isRange(a))if(Ze.isCollapsed(a))a=a.anchor;else{var h=Ze.edges(a),p=Object(i.a)(h,2)[1],g=_e.pointRef(e,p);gt.delete(e,{at:a}),a=g.unref(),null==t.at&&gt.select(e,a)}var b=_e.nodes(e,{at:a,match:n,voids:u,mode:f}),m=Object(i.a)(b,1)[0],y=_e.previous(e,{at:a,match:n,voids:u,mode:f});if(m&&y){var O=Object(i.a)(m,2),w=O[0],j=O[1],x=Object(i.a)(y,2),k=x[0],E=x[1];if(0!==j.length&&0!==E.length){var P,D,F=Ue.next(E),C=Ue.common(j,E),S=Ue.isSibling(j,E),A=Array.from(_e.levels(e,{at:j}),(function(e){return Object(i.a)(e,1)[0]})).slice(C.length).slice(0,-1),B=_e.above(e,{at:j,mode:\"highest\",match:function(t){return A.includes(t)&&ct(e,t)}}),N=B&&_e.pathRef(e,B[1]);if(tt.isText(w)&&tt.isText(k)){var R=je(w,[\"text\"]);D=k.text.length,P=R}else{if(!Ne.isElement(w)||!Ne.isElement(k))throw new Error(\"Cannot merge the node at path [\".concat(j,\"] with the previous sibling because it is not the same kind: \").concat(JSON.stringify(w),\" \").concat(JSON.stringify(k)));R=je(w,[\"children\"]);D=k.children.length,P=R}S||gt.moveNodes(e,{at:j,to:F,voids:u}),N&&gt.removeNodes(e,{at:N.current,voids:u}),Ne.isElement(k)&&_e.isEmpty(e,k)||tt.isText(k)&&\"\"===k.text?gt.removeNodes(e,{at:E,voids:u}):e.apply({type:\"merge_node\",path:F,position:D,properties:P}),N&&N.unref()}}}}))},moveNodes:function(e,t){_e.withoutNormalizing(e,(function(){var n=t.to,r=t.at,a=void 0===r?e.selection:r,o=t.mode,c=void 0===o?\"lowest\":o,s=t.voids,u=void 0!==s&&s,l=t.match;if(a){null==l&&(l=Ue.isPath(a)?ut(e,a):function(t){return _e.isBlock(e,t)});for(var f=_e.pathRef(e,n),d=_e.nodes(e,{at:a,match:l,mode:c,voids:u}),v=0,h=Array.from(d,(function(t){var n=Object(i.a)(t,2)[1];return _e.pathRef(e,n)}));v<h.length;v++){var p=h[v].unref(),g=f.current;0!==p.length&&e.apply({type:\"move_node\",path:p,newPath:g}),f.current&&Ue.isSibling(g,p)&&Ue.isAfter(g,p)&&(f.current=Ue.next(f.current))}f.unref()}}))},removeNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e.withoutNormalizing(e,(function(){var n=t.hanging,r=void 0!==n&&n,a=t.voids,o=void 0!==a&&a,c=t.mode,s=void 0===c?\"lowest\":c,u=t.at,l=void 0===u?e.selection:u,f=t.match;if(l){null==f&&(f=Ue.isPath(l)?ut(e,l):function(t){return _e.isBlock(e,t)}),!r&&Ze.isRange(l)&&(l=_e.unhangRange(e,l));for(var d=_e.nodes(e,{at:l,match:f,mode:s,voids:o}),v=0,h=Array.from(d,(function(t){var n=Object(i.a)(t,2)[1];return _e.pathRef(e,n)}));v<h.length;v++){var p=h[v].unref();if(p){var g=_e.node(e,p),b=Object(i.a)(g,1)[0];e.apply({type:\"remove_node\",path:p,node:b})}}}}))},setNodes:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_e.withoutNormalizing(e,(function(){var r=n.match,a=n.at,o=void 0===a?e.selection:a,c=n.hanging,u=void 0!==c&&c,l=n.mode,f=void 0===l?\"lowest\":l,d=n.split,v=void 0!==d&&d,h=n.voids,p=void 0!==h&&h;if(o){if(null==r&&(r=Ue.isPath(o)?ut(e,o):function(t){return _e.isBlock(e,t)}),!u&&Ze.isRange(o)&&(o=_e.unhangRange(e,o)),v&&Ze.isRange(o)){var g=_e.rangeRef(e,o,{affinity:\"inward\"}),b=Ze.edges(o),m=Object(i.a)(b,2),y=m[0],O=m[1],w=\"lowest\"===f?\"lowest\":\"highest\",j=_e.isEnd(e,O,O.path);gt.splitNodes(e,{at:O,match:r,mode:w,voids:p,always:!j});var x=_e.isStart(e,y,y.path);gt.splitNodes(e,{at:y,match:r,mode:w,voids:p,always:!x}),o=g.unref(),null==n.at&&gt.select(e,o)}var k,E=Object(s.a)(_e.nodes(e,{at:o,match:r,mode:f,voids:p}));try{for(E.s();!(k=E.n()).done;){var P=Object(i.a)(k.value,2),D=P[0],F=P[1],C={},S={};if(0!==F.length){for(var A in t)\"children\"!==A&&\"text\"!==A&&t[A]!==D[A]&&(D.hasOwnProperty(A)&&(C[A]=D[A]),S[A]=t[A]);0!==Object.keys(S).length&&e.apply({type:\"set_node\",path:F,properties:C,newProperties:S})}}}catch(B){E.e(B)}finally{E.f()}}}))},splitNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e.withoutNormalizing(e,(function(){var n=t.mode,r=void 0===n?\"lowest\":n,a=t.voids,o=void 0!==a&&a,c=t.match,u=t.at,l=void 0===u?e.selection:u,f=t.height,d=void 0===f?0:f,v=t.always,h=void 0!==v&&v;if(null==c&&(c=function(t){return _e.isBlock(e,t)}),Ze.isRange(l)&&(l=st(e,l)),Ue.isPath(l)){var p=l,g=_e.point(e,p),b=_e.parent(e,p),m=Object(i.a)(b,1)[0];c=function(e){return e===m},d=g.path.length-p.length+1,l=g,h=!0}if(l){var y=_e.pointRef(e,l,{affinity:\"backward\"}),O=_e.nodes(e,{at:l,match:c,mode:r,voids:o}),w=Object(i.a)(O,1)[0];if(w){var j=_e.void(e,{at:l,mode:\"highest\"});if(!o&&j){var x=Object(i.a)(j,2),k=x[0],E=x[1];if(Ne.isElement(k)&&e.isInline(k)){var P=_e.after(e,E);if(!P){var D=Ue.next(E);gt.insertNodes(e,{text:\"\"},{at:D,voids:o}),P=_e.point(e,D)}l=P,h=!0}d=l.path.length-E.length+1,h=!0}var F,C=_e.pointRef(e,l),S=l.path.length-d,A=Object(i.a)(w,2)[1],B=l.path.slice(0,S),N=0===d?l.offset:l.path[S]+0,R=Object(s.a)(_e.levels(e,{at:B,reverse:!0,voids:o}));try{for(R.s();!(F=R.n()).done;){var M=Object(i.a)(F.value,2),T=M[0],_=M[1],L=!1;if(_.length<A.length||0===_.length||!o&&_e.isVoid(e,T))break;var W=y.current,I=_e.isEnd(e,W,_);if(h||!y||!_e.isEdge(e,W,_)){L=!0;var q=Ie.extractProps(T);e.apply({type:\"split_node\",path:_,position:N,properties:q})}N=_[_.length-1]+(L||I?1:0)}}catch(V){R.e(V)}finally{R.f()}if(null==t.at){var z=C.current||_e.end(e,[]);gt.select(e,z)}y.unref(),C.unref()}}}))},unsetNodes:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var r,a={},o=Object(s.a)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;a[i]=null}}catch(c){o.e(c)}finally{o.f()}gt.setNodes(e,a,n)},unwrapNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e.withoutNormalizing(e,(function(){var n=t.mode,r=void 0===n?\"lowest\":n,a=t.split,o=void 0!==a&&a,c=t.voids,s=void 0!==c&&c,u=t.at,l=void 0===u?e.selection:u,f=t.match;if(l){null==f&&(f=Ue.isPath(l)?ut(e,l):function(t){return _e.isBlock(e,t)}),Ue.isPath(l)&&(l=_e.range(e,l));for(var d=Ze.isRange(l)?_e.rangeRef(e,l):null,v=_e.nodes(e,{at:l,match:f,mode:r,voids:s}),h=function(t){var n=t.unref(),r=_e.node(e,n),a=Object(i.a)(r,1)[0],c=_e.range(e,n);o&&d&&(c=Ze.intersection(d.current,c)),gt.liftNodes(e,{at:c,match:function(e){return Ne.isAncestor(a)&&a.children.includes(e)},voids:s})},p=0,g=Array.from(v,(function(t){var n=Object(i.a)(t,2)[1];return _e.pathRef(e,n)}));p<g.length;p++){h(g[p])}d&&d.unref()}}))},wrapNodes:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_e.withoutNormalizing(e,(function(){var r=n.mode,a=void 0===r?\"lowest\":r,o=n.split,c=void 0!==o&&o,s=n.voids,u=void 0!==s&&s,l=n.match,f=n.at,d=void 0===f?e.selection:f;if(d){if(null==l&&(l=Ue.isPath(d)?ut(e,d):e.isInline(t)?function(t){return _e.isInline(e,t)||tt.isText(t)}:function(t){return _e.isBlock(e,t)}),c&&Ze.isRange(d)){var v=Ze.edges(d),h=Object(i.a)(v,2),p=h[0],g=h[1],b=_e.rangeRef(e,d,{affinity:\"inward\"});gt.splitNodes(e,{at:g,match:l,voids:u}),gt.splitNodes(e,{at:p,match:l,voids:u}),d=b.unref(),null==n.at&&gt.select(e,d)}for(var m=0,y=Array.from(_e.nodes(e,{at:d,match:e.isInline(t)?function(t){return _e.isBlock(e,t)}:function(e){return _e.isEditor(e)},mode:\"lowest\",voids:u}));m<y.length;m++){var O=Object(i.a)(y[m],2)[1],w=Ze.isRange(d)?Ze.intersection(d,_e.range(e,O)):d;if(w){var j=Array.from(_e.nodes(e,{at:w,match:l,mode:a,voids:u}));j.length>0&&function(){var n=Object(i.a)(j,1)[0],r=j[j.length-1],a=Object(i.a)(n,2)[1],o=Object(i.a)(r,2)[1],c=Ue.equals(a,o)?Ue.parent(a):Ue.common(a,o),s=_e.range(e,a,o),l=_e.node(e,c),f=Object(i.a)(l,1)[0],d=c.length+1,v=Ue.next(o.slice(0,d)),h=ot(ot({},t),{},{children:[]});gt.insertNodes(e,h,{at:v,voids:u}),gt.moveNodes(e,{at:s,match:function(e){return Ne.isAncestor(f)&&f.children.includes(e)},to:v.concat(0),voids:u})}()}}}}))}},ct=function e(t,n){if(Ne.isElement(n)){var r=n;return!!_e.isVoid(t,n)||1===r.children.length&&e(t,r.children[0])}return!_e.isEditor(n)},st=function(e,t){if(Ze.isCollapsed(t))return t.anchor;var n=Ze.edges(t),r=Object(i.a)(n,2)[1],a=_e.pointRef(e,r);return gt.delete(e,{at:t}),a.unref()},ut=function(e,t){var n=_e.node(e,t),r=Object(i.a)(n,1)[0];return function(e){return e===r}};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dt={collapse:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.edge,r=void 0===n?\"anchor\":n,a=e.selection;if(a)if(\"anchor\"===r)gt.select(e,a.anchor);else if(\"focus\"===r)gt.select(e,a.focus);else if(\"start\"===r){var o=Ze.edges(a),c=Object(i.a)(o,1),s=c[0];gt.select(e,s)}else if(\"end\"===r){var u=Ze.edges(a),l=Object(i.a)(u,2),f=l[1];gt.select(e,f)}},deselect:function(e){var t=e.selection;t&&e.apply({type:\"set_selection\",properties:t,newProperties:null})},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.selection,r=t.distance,a=void 0===r?1:r,o=t.unit,i=void 0===o?\"character\":o,c=t.reverse,s=void 0!==c&&c,u=t.edge,l=void 0===u?null:u;if(n){\"start\"===l&&(l=Ze.isBackward(n)?\"focus\":\"anchor\"),\"end\"===l&&(l=Ze.isBackward(n)?\"anchor\":\"focus\");var f=n.anchor,d=n.focus,v={distance:a,unit:i},h={};if(null==l||\"anchor\"===l){var p=s?_e.before(e,f,v):_e.after(e,f,v);p&&(h.anchor=p)}if(null==l||\"focus\"===l){var g=s?_e.before(e,d,v):_e.after(e,d,v);g&&(h.focus=g)}gt.setSelection(e,h)}},select:function(e,t){var n=e.selection;if(t=_e.range(e,t),n)gt.setSelection(e,t);else{if(!Ze.isRange(t))throw new Error(\"When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: \".concat(JSON.stringify(t)));e.apply({type:\"set_selection\",properties:n,newProperties:t})}},setPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,a=n.edge,o=void 0===a?\"both\":a;if(r){\"start\"===o&&(o=Ze.isBackward(r)?\"focus\":\"anchor\"),\"end\"===o&&(o=Ze.isBackward(r)?\"anchor\":\"focus\");var i=r.anchor,s=r.focus,u=\"anchor\"===o?i:s;gt.setSelection(e,Object(c.a)({},\"anchor\"===o?\"anchor\":\"focus\",ft(ft({},u),t)))}},setSelection:function(e,t){var n=e.selection,r={},a={};if(n){for(var o in t)(\"anchor\"===o&&null!=t.anchor&&!$e.equals(t.anchor,n.anchor)||\"focus\"===o&&null!=t.focus&&!$e.equals(t.focus,n.focus)||\"anchor\"!==o&&\"focus\"!==o&&t[o]!==n[o])&&(r[o]=n[o],a[o]=t[o]);Object.keys(r).length>0&&e.apply({type:\"set_selection\",properties:r,newProperties:a})}}},vt={delete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_e.withoutNormalizing(e,(function(){var n=t.reverse,r=void 0!==n&&n,a=t.unit,o=void 0===a?\"character\":a,c=t.distance,u=void 0===c?1:c,l=t.voids,f=void 0!==l&&l,d=t.at,v=void 0===d?e.selection:d,h=t.hanging,p=void 0!==h&&h;if(v){if(Ze.isRange(v)&&Ze.isCollapsed(v)&&(v=v.anchor),$e.isPoint(v)){var g=_e.void(e,{at:v,mode:\"highest\"});if(!f&&g){v=Object(i.a)(g,2)[1]}else{var b={unit:o,distance:u};v={anchor:v,focus:r?_e.before(e,v,b)||_e.start(e,[]):_e.after(e,v,b)||_e.end(e,[])},p=!0}}if(Ue.isPath(v))gt.removeNodes(e,{at:v,voids:f});else if(!Ze.isCollapsed(v)){if(!p){var m=Ze.edges(v),y=Object(i.a)(m,2)[1],O=_e.end(e,[]);$e.equals(y,O)||(v=_e.unhangRange(e,v,{voids:f}))}var w=Ze.edges(v),j=Object(i.a)(w,2),x=j[0],k=j[1],E=_e.above(e,{match:function(t){return _e.isBlock(e,t)},at:x,voids:f}),P=_e.above(e,{match:function(t){return _e.isBlock(e,t)},at:k,voids:f}),D=E&&P&&!Ue.equals(E[1],P[1]),F=Ue.equals(x.path,k.path),C=f?null:_e.void(e,{at:x,mode:\"highest\"}),S=f?null:_e.void(e,{at:k,mode:\"highest\"});if(C){var A=_e.before(e,x);A&&E&&Ue.isAncestor(E[1],A.path)&&(x=A)}if(S){var B=_e.after(e,k);B&&P&&Ue.isAncestor(P[1],B.path)&&(k=B)}var N,R,M=[],T=Object(s.a)(_e.nodes(e,{at:v,voids:f}));try{for(T.s();!(R=T.n()).done;){var _=R.value,L=Object(i.a)(_,2),W=L[0],I=L[1];N&&0===Ue.compare(I,N)||(!f&&_e.isVoid(e,W)||!Ue.isCommon(I,x.path)&&!Ue.isCommon(I,k.path))&&(M.push(_),N=I)}}catch(ie){T.e(ie)}finally{T.f()}var q=Array.from(M,(function(t){var n=Object(i.a)(t,2)[1];return _e.pathRef(e,n)})),z=_e.pointRef(e,x),V=_e.pointRef(e,k);if(!F&&!C){var U=z.current,K=_e.leaf(e,U),H=Object(i.a)(K,1)[0],J=U.path,$=x.offset,Y=H.text.slice($);Y.length>0&&e.apply({type:\"remove_text\",path:J,offset:$,text:Y})}for(var X=0,Z=q;X<Z.length;X++){var G=Z[X].unref();gt.removeNodes(e,{at:G,voids:f})}if(!S){var Q=V.current,ee=_e.leaf(e,Q),te=Object(i.a)(ee,1)[0],ne=Q.path,re=F?x.offset:0,ae=te.text.slice(re,k.offset);ae.length>0&&e.apply({type:\"remove_text\",path:ne,offset:re,text:ae})}!F&&D&&V.current&&z.current&&gt.mergeNodes(e,{at:V.current,hanging:!0,voids:f});var oe=r?z.unref()||V.unref():V.unref()||z.unref();null==t.at&&oe&&gt.select(e,oe)}}}))},insertFragment:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_e.withoutNormalizing(e,(function(){var r=n.hanging,a=void 0!==r&&r,o=n.voids,c=void 0!==o&&o,u=n.at,l=void 0===u?e.selection:u;if(t.length&&l){if(Ze.isRange(l))if(a||(l=_e.unhangRange(e,l)),Ze.isCollapsed(l))l=l.anchor;else{var f=Ze.edges(l),d=Object(i.a)(f,2)[1];if(!c&&_e.void(e,{at:d}))return;var v=_e.pointRef(e,d);gt.delete(e,{at:l}),l=v.unref()}else Ue.isPath(l)&&(l=_e.start(e,l));if(c||!_e.void(e,{at:l})){var h=_e.above(e,{at:l,match:function(t){return _e.isInline(e,t)},mode:\"highest\",voids:c});if(h){var p=Object(i.a)(h,2)[1];if(_e.isEnd(e,l,p))l=_e.after(e,p);else if(_e.isStart(e,l,p)){l=_e.before(e,p)}}var g,b=_e.above(e,{match:function(t){return _e.isBlock(e,t)},at:l,voids:c}),m=Object(i.a)(b,2)[1],y=_e.isStart(e,l,m),O=_e.isEnd(e,l,m),w=!y||y&&O,j=!O,x=Ie.first({children:t},[]),k=Object(i.a)(x,2)[1],E=Ie.last({children:t},[]),P=Object(i.a)(E,2)[1],D=[],F=function(t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return!(w&&Ue.isAncestor(a,k)&&Ne.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(j&&Ue.isAncestor(a,P)&&Ne.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))},C=Object(s.a)(Ie.nodes({children:t},{pass:F}));try{for(C.s();!(g=C.n()).done;){var S=g.value;S[1].length>0&&F(S)&&D.push(S)}}catch(Y){C.e(Y)}finally{C.f()}for(var A=[],B=[],N=[],R=!0,M=!1,T=0,_=D;T<_.length;T++){var L=Object(i.a)(_[T],1)[0];Ne.isElement(L)&&!e.isInline(L)?(R=!1,M=!0,B.push(L)):R?A.push(L):N.push(L)}var W=_e.nodes(e,{at:l,match:function(t){return tt.isText(t)||_e.isInline(e,t)},mode:\"highest\",voids:c}),I=Object(i.a)(W,1)[0],q=Object(i.a)(I,2)[1],z=_e.isStart(e,l,q),V=_e.isEnd(e,l,q),U=_e.pathRef(e,O?Ue.next(m):m),K=_e.pathRef(e,V?Ue.next(q):q);gt.splitNodes(e,{at:l,match:function(t){return M?_e.isBlock(e,t):tt.isText(t)||_e.isInline(e,t)},mode:M?\"lowest\":\"highest\",voids:c});var H=_e.pathRef(e,!z||z&&V?Ue.next(q):q);if(gt.insertNodes(e,A,{at:H.current,match:function(t){return tt.isText(t)||_e.isInline(e,t)},mode:\"highest\",voids:c}),gt.insertNodes(e,B,{at:U.current,match:function(t){return _e.isBlock(e,t)},mode:\"lowest\",voids:c}),gt.insertNodes(e,N,{at:K.current,match:function(t){return tt.isText(t)||_e.isInline(e,t)},mode:\"highest\",voids:c}),!n.at){var J;J=N.length>0?Ue.previous(K.current):B.length>0?Ue.previous(U.current):Ue.previous(H.current);var $=_e.end(e,J);gt.select(e,$)}H.unref(),U.unref(),K.unref()}}}))},insertText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_e.withoutNormalizing(e,(function(){var r=n.voids,a=void 0!==r&&r,o=n.at,i=void 0===o?e.selection:o;if(i){if(Ue.isPath(i)&&(i=_e.range(e,i)),Ze.isRange(i))if(Ze.isCollapsed(i))i=i.anchor;else{var c=Ze.end(i);if(!a&&_e.void(e,{at:c}))return;var s=_e.pointRef(e,c);gt.delete(e,{at:i,voids:a}),i=s.unref(),gt.setSelection(e,{anchor:i,focus:i})}if(a||!_e.void(e,{at:i})){var u=i,l=u.path,f=u.offset;t.length>0&&e.apply({type:\"insert_text\",path:l,offset:f,text:t})}}}))}};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gt=pt(pt(pt(pt({},{transform:function(e,t){e.children=ce(e.children);var n=e.selection&&ce(e.selection);try{n=function(e,t,n){switch(n.type){case\"insert_node\":var r=n.path,a=n.node,c=Ie.parent(e,r),u=r[r.length-1];if(u>c.children.length)throw new Error('Cannot apply an \"insert_node\" operation at path ['.concat(r,\"] because the destination is past the end of the node.\"));if(c.children.splice(u,0,a),t){var l,f=Object(s.a)(Ze.points(t));try{for(f.s();!(l=f.n()).done;){var d=Object(i.a)(l.value,2),v=d[0];t[d[1]]=$e.transform(v,n)}}catch(Ke){f.e(Ke)}finally{f.f()}}break;case\"insert_text\":var h=n.path,p=n.offset,g=n.text;if(0===g.length)break;var b=Ie.leaf(e,h),m=b.text.slice(0,p),y=b.text.slice(p);if(b.text=m+g+y,t){var O,w=Object(s.a)(Ze.points(t));try{for(w.s();!(O=w.n()).done;){var j=Object(i.a)(O.value,2),x=j[0];t[j[1]]=$e.transform(x,n)}}catch(Ke){w.e(Ke)}finally{w.f()}}break;case\"merge_node\":var k=n.path,E=Ie.get(e,k),P=Ue.previous(k),D=Ie.get(e,P),F=Ie.parent(e,k),C=k[k.length-1];if(tt.isText(E)&&tt.isText(D))D.text+=E.text;else{if(tt.isText(E)||tt.isText(D))throw new Error('Cannot apply a \"merge_node\" operation at path ['.concat(k,\"] to nodes of different interfaces: \").concat(E,\" \").concat(D));var S;(S=D.children).push.apply(S,Object(o.a)(E.children))}if(F.children.splice(C,1),t){var A,B=Object(s.a)(Ze.points(t));try{for(B.s();!(A=B.n()).done;){var N=Object(i.a)(A.value,2),R=N[0];t[N[1]]=$e.transform(R,n)}}catch(Ke){B.e(Ke)}finally{B.f()}}break;case\"move_node\":var M=n.path,T=n.newPath;if(Ue.isAncestor(M,T))throw new Error(\"Cannot move a path [\".concat(M,\"] to new path [\").concat(T,\"] because the destination is inside itself.\"));var _=Ie.get(e,M),L=Ie.parent(e,M),W=M[M.length-1];L.children.splice(W,1);var I=Ue.transform(M,n),q=Ie.get(e,Ue.parent(I)),z=I[I.length-1];if(q.children.splice(z,0,_),t){var V,U=Object(s.a)(Ze.points(t));try{for(U.s();!(V=U.n()).done;){var K=Object(i.a)(V.value,2),H=K[0];t[K[1]]=$e.transform(H,n)}}catch(Ke){U.e(Ke)}finally{U.f()}}break;case\"remove_node\":var J=n.path,$=J[J.length-1];if(Ie.parent(e,J).children.splice($,1),t){var Y,X=Object(s.a)(Ze.points(t));try{for(X.s();!(Y=X.n()).done;){var Z=Object(i.a)(Y.value,2),G=Z[0],Q=Z[1],ee=$e.transform(G,n);if(null!=t&&null!=ee)t[Q]=ee;else{var te,ne=void 0,re=void 0,ae=Object(s.a)(Ie.texts(e));try{for(ae.s();!(te=ae.n()).done;){var oe=Object(i.a)(te.value,2),ie=oe[0],ce=oe[1];if(-1!==Ue.compare(ce,J)){re=[ie,ce];break}ne=[ie,ce]}}catch(Ke){ae.e(Ke)}finally{ae.f()}ne?(G.path=ne[1],G.offset=ne[0].text.length):re?(G.path=re[1],G.offset=0):t=null}}}catch(Ke){X.e(Ke)}finally{X.f()}}break;case\"remove_text\":var se=n.path,ue=n.offset,le=n.text;if(0===le.length)break;var fe=Ie.leaf(e,se),de=fe.text.slice(0,ue),ve=fe.text.slice(ue+le.length);if(fe.text=de+ve,t){var he,pe=Object(s.a)(Ze.points(t));try{for(pe.s();!(he=pe.n()).done;){var ge=Object(i.a)(he.value,2),be=ge[0];t[ge[1]]=$e.transform(be,n)}}catch(Ke){pe.e(Ke)}finally{pe.f()}}break;case\"set_node\":var me=n.path,ye=n.properties,Oe=n.newProperties;if(0===me.length)throw new Error(\"Cannot set properties on the root node!\");var we=Ie.get(e,me);for(var je in Oe){if(\"children\"===je||\"text\"===je)throw new Error('Cannot set the \"'.concat(je,'\" property of nodes!'));var xe=Oe[je];null==xe?delete we[je]:we[je]=xe}for(var ke in ye)Oe.hasOwnProperty(ke)||delete we[ke];break;case\"set_selection\":var Ee=n.newProperties;if(null==Ee)t=Ee;else{if(null==t){if(!Ze.isRange(Ee))throw new Error('Cannot apply an incomplete \"set_selection\" operation properties '.concat(JSON.stringify(Ee),\" when there is no current selection.\"));t=rt({},Ee)}for(var Pe in Ee){var De=Ee[Pe];if(null==De){if(\"anchor\"===Pe||\"focus\"===Pe)throw new Error('Cannot remove the \"'.concat(Pe,'\" selection property'));delete t[Pe]}else t[Pe]=De}}break;case\"split_node\":var Fe=n.path,Ce=n.position,Se=n.properties;if(0===Fe.length)throw new Error('Cannot apply a \"split_node\" operation at path ['.concat(Fe,\"] because the root node cannot be split.\"));var Ae,Be=Ie.get(e,Fe),Ne=Ie.parent(e,Fe),Re=Fe[Fe.length-1];if(tt.isText(Be)){var Me=Be.text.slice(0,Ce),Te=Be.text.slice(Ce);Be.text=Me,Ae=rt(rt({},Se),{},{text:Te})}else{var _e=Be.children.slice(0,Ce),Le=Be.children.slice(Ce);Be.children=_e,Ae=rt(rt({},Se),{},{children:Le})}if(Ne.children.splice(Re+1,0,Ae),t){var We,qe=Object(s.a)(Ze.points(t));try{for(qe.s();!(We=qe.n()).done;){var ze=Object(i.a)(We.value,2),Ve=ze[0];t[ze[1]]=$e.transform(Ve,n)}}catch(Ke){qe.e(Ke)}finally{qe.f()}}}return t}(e,n,t)}finally{e.children=se(e.children),e.selection=n?d(n)?se(n):n:null}}}),it),dt),vt)},362:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});for(var r=\"undefined\"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),a={alt:\"altKey\",control:\"ctrlKey\",meta:\"metaKey\",shift:\"shiftKey\"},o={add:\"+\",break:\"pause\",cmd:\"meta\",command:\"meta\",ctl:\"control\",ctrl:\"control\",del:\"delete\",down:\"arrowdown\",esc:\"escape\",ins:\"insert\",left:\"arrowleft\",mod:r?\"meta\":\"control\",opt:\"alt\",option:\"alt\",return:\"enter\",right:\"arrowright\",space:\" \",spacebar:\" \",up:\"arrowup\",win:\"meta\",windows:\"meta\"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27,\" \":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,\";\":186,\"=\":187,\",\":188,\"-\":189,\".\":190,\"/\":191,\"`\":192,\"[\":219,\"\\\\\":220,\"]\":221,\"'\":222},c=1;c<20;c++)i[\"f\"+c]=111+c;function s(e,t,n){t&&!(\"byKey\"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map((function(e){return u(e,t)})),a=function(e){return r.some((function(t){return l(t,e)}))};return null==n?a:a(n)}function u(e,t){var n=t&&t.byKey,r={},o=(e=e.replace(\"++\",\"+add\")).split(\"+\"),i=o.length;for(var c in a)r[a[c]]=!1;var s=!0,u=!1,l=void 0;try{for(var v,h=o[Symbol.iterator]();!(s=(v=h.next()).done);s=!0){var p=v.value,g=p.endsWith(\"?\")&&p.length>1;g&&(p=p.slice(0,-1));var b=d(p),m=a[b];1!==i&&m||(n?r.key=b:r.which=f(p)),m&&(r[m]=!g||null)}}catch(y){u=!0,l=y}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}return r}function l(e,t){for(var n in e){var r=e[n],a=void 0;if(null!=r&&((null!=(a=\"key\"===n&&null!=t.key?t.key.toLowerCase():\"which\"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&a!==r))return!1}return!0}function f(e){return e=d(e),i[e]||e.toUpperCase().charCodeAt(0)}function d(e){return e=e.toLowerCase(),e=o[e]||e}t.default=s,t.isHotkey=s,t.isCodeHotkey=function(e,t){return s(e,t)},t.isKeyHotkey=function(e,t){return s(e,{byKey:!0},t)},t.parseHotkey=u,t.compareHotkey=l,t.toKeyCode=f,t.toKeyName=d},393:function(e,t,n){\"use strict\";var r=/[\"'&<>]/;e.exports=function(e){var t,n=\"\"+e,a=r.exec(n);if(!a)return n;var o=\"\",i=0,c=0;for(i=a.index;i<n.length;i++){switch(n.charCodeAt(i)){case 34:t=\"&quot;\";break;case 38:t=\"&amp;\";break;case 39:t=\"&#39;\";break;case 60:t=\"&lt;\";break;case 62:t=\"&gt;\";break;default:continue}c!==i&&(o+=n.substring(c,i)),c=i+1,o+=t}return c!==i?o+n.substring(c,i):o}},394:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return l}));var r=n(423),a=n(534),o=n(326),i=function(e){return Object(a.a)(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||o.d.isOperationList(e.redos[0]))&&(0===e.undos.length||o.d.isOperationList(e.undos[0]))},c=(new WeakMap,new WeakMap),s=new WeakMap,u={isHistoryEditor:function(e){return i(e.history)&&o.a.isEditor(e)},isMerging:function(e){return s.get(e)},isSaving:function(e){return c.get(e)},redo:function(e){e.redo()},undo:function(e){e.undo()},withoutMerging:function(e,t){var n=u.isMerging(e);s.set(e,!1),t(),s.set(e,n)},withoutSaving:function(e,t){var n=u.isSaving(e);c.set(e,!1),t(),c.set(e,n)}},l=function(e){var t=e,n=t.apply;return t.history={undos:[],redos:[]},t.redo=function(){var e=t.history,n=e.redos;if(n.length>0){var a=n[n.length-1];u.withoutSaving(t,(function(){o.a.withoutNormalizing(t,(function(){var e,n=Object(r.a)(a);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.apply(o)}}catch(i){n.e(i)}finally{n.f()}}))})),e.redos.pop(),e.undos.push(a)}},t.undo=function(){var e=t.history,n=e.undos;if(n.length>0){var a=n[n.length-1];u.withoutSaving(t,(function(){o.a.withoutNormalizing(t,(function(){var e,n=a.map(o.d.inverse).reverse(),i=Object(r.a)(n);try{for(i.s();!(e=i.n()).done;){var c=e.value;t.apply(c)}}catch(s){i.e(s)}finally{i.f()}}))})),e.redos.push(a),e.undos.pop()}},t.apply=function(e){var r=t.operations,a=t.history,o=a.undos,i=o[o.length-1],c=i&&i[i.length-1],s=v(e,c),l=u.isSaving(t),p=u.isMerging(t);if(null==l&&(l=d(e)),l){if(null==p&&(p=null!=i&&(0!==r.length||(f(e,c)||s))),i&&p)s&&i.pop(),i.push(e);else{var g=[e];o.push(g)}for(;o.length>100;)o.shift();h(e)&&(a.redos=[])}n(e)},t},f=function(e,t){return\"set_selection\"===e.type||(!(!t||\"insert_text\"!==e.type||\"insert_text\"!==t.type||e.offset!==t.offset+t.text.length||!o.e.equals(e.path,t.path))||!(!t||\"remove_text\"!==e.type||\"remove_text\"!==t.type||e.offset+e.text.length!==t.offset||!o.e.equals(e.path,t.path)))},d=function(e,t){return\"set_selection\"!==e.type||null!=e.properties&&null!=e.newProperties},v=function(e,t){return!(!t||\"set_selection\"!==e.type||\"set_selection\"!==t.type)},h=function(e){return\"set_selection\"!==e.type}},395:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return D}));var r=n(59),a=n(423),o=n(164),i=n(163),c=n(161),s=n(534),u=n(326);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=new WeakMap,d=new WeakMap,v=function e(){Object(c.a)(this,e)},h=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=t.call(this);var a=r.offset,o=r.path;return e.offset=a,e.path=o,e}return n}(v),p=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(c.a)(this,n);var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=t.call(this);var a=r.offset,o=r.path;return e.offset=a,e.path=o,e}return n}(v),g=function(e){return d.get(e)};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=new WeakSet,O=function(e){var t,n=[],r=function e(t){if(null!=t){var r=n[n.length-1];if(\"string\"===typeof t){var a={text:t};y.add(a),t=a}if(u.g.isText(t)){var o=t;u.g.isText(r)&&y.has(r)&&y.has(o)&&u.g.equals(r,o,{loose:!0})?r.text+=o.text:n.push(o)}else if(u.b.isElement(t))n.push(t);else{if(!(t instanceof v))throw new Error(\"Unexpected hyperscript child object: \".concat(t));var i=n[n.length-1];u.g.isText(i)||(e(\"\"),i=n[n.length-1]),t instanceof h?function(e,t){var n=e.text.length;f.set(e,[n,t])}(i,t):t instanceof p&&function(e,t){var n=e.text.length;d.set(e,[n,t])}(i,t)}}},o=Object(a.a)(e.flat(1/0));try{for(o.s();!(t=o.n()).done;){r(t.value)}}catch(i){o.e(i)}finally{o.f()}return n};function w(e,t,n){return m(m({},t),{},{children:O(n)})}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k={anchor:function(e,t,n){return new h(t)},cursor:function(e,t,n){return[new h(t),new p(t)]},editor:function(e,t,n){var o,i,c=[],s=Object(a.a)(n);try{for(s.s();!(i=s.n()).done;){var l=i.value;u.f.isRange(l)?o=l:c.push(l)}}catch(D){s.e(D)}finally{s.f()}var d=O(c),v={},h=Object(u.i)();Object.assign(h,t),h.children=d;var p,b,m=Object(a.a)(u.c.texts(h));try{for(m.s();!(p=m.n()).done;){var y=Object(r.a)(p.value,2),w=y[0],j=y[1],x=(b=w,f.get(b)),k=g(w);if(null!=x){var E=Object(r.a)(x,1)[0];v.anchor={path:j,offset:E}}if(null!=k){var P=Object(r.a)(k,1)[0];v.focus={path:j,offset:P}}}}catch(D){m.e(D)}finally{m.f()}if(v.anchor&&!v.focus)throw new Error(\"Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.\");if(!v.anchor&&v.focus)throw new Error(\"Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.\");return null!=o?h.selection=o:u.f.isRange(v)&&(h.selection=v),h},element:w,focus:function(e,t,n){return new p(t)},fragment:function(e,t,n){return O(n)},selection:function(e,t,n){var r=n.find((function(e){return e instanceof h})),a=n.find((function(e){return e instanceof p}));if(!r||null==r.offset||null==r.path)throw new Error(\"The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.\");if(!a||null==a.offset||null==a.path)throw new Error(\"The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.\");return m({anchor:{offset:r.offset,path:r.path},focus:{offset:a.offset,path:a.path}},t)},text:function(e,t,n){var a=O(n);if(a.length>1)throw new Error(\"The <text> hyperscript tag must only contain a single node's worth of children.\");var o=Object(r.a)(a,1)[0];if(null==o&&(o={text:\"\"}),!u.g.isText(o))throw new Error(\"\\n    The <text> hyperscript tag can only contain text content as children.\");return y.delete(o),Object.assign(o,t),o}},E=function(e){return function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var i=e[t];if(!i)throw new Error(\"No hyperscript creator found for tag: <\".concat(t,\">\"));null==n&&(n={}),Object(s.a)(n)||(a=[n].concat(a),n={});var c=i(t,n,a=a.filter((function(e){return Boolean(e)})).flat());return c}},P=function(e){var t={},n=function(n){var r=e[n];if(\"object\"!==typeof r)throw new Error(\"Properties specified for a hyperscript shorthand should be an object, but for the custom element <\".concat(n,\">  tag you passed: \").concat(r));t[n]=function(e,t,n){return w(0,x(x({},r),t),n)}};for(var r in e)n(r);return t},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.elements,n=void 0===t?{}:t,r=P(n),a=x(x(x({},k),r),e.creators),o=E(a);return o}()},397:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return st})),n.d(t,\"b\",(function(){return at})),n.d(t,\"c\",(function(){return Pe})),n.d(t,\"d\",(function(){return ct}));var r=n(180),a=n(161),o=n(1),i=n(423),c=n(59),s=n(0),u=n.n(s),l=n(326),f=n(761),d=n.n(f),v=n(762),h=n.n(v);function p(e){return\"object\"==typeof e&&null!=e&&1===e.nodeType}function g(e,t){return(!t||\"hidden\"!==e)&&\"visible\"!==e&&\"clip\"!==e}function b(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n=getComputedStyle(e,null);return g(n.overflowY,t)||g(n.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function m(e,t,n,r,a,o,i,c){return o<e&&i>t||o>e&&i<t?0:o<=e&&c<=n||i>=t&&c>=n?o-e-r:i>t&&c<n||o<e&&c>n?i-t+a:0}var y=function(e,t){var n=window,r=t.scrollMode,a=t.block,o=t.inline,i=t.boundary,c=t.skipOverflowHiddenElements,s=\"function\"==typeof i?i:function(e){return e!==i};if(!p(e))throw new TypeError(\"Invalid target\");for(var u=document.scrollingElement||document.documentElement,l=[],f=e;p(f)&&s(f);){if((f=f.parentElement)===u){l.push(f);break}null!=f&&f===document.body&&b(f)&&!b(document.documentElement)||null!=f&&b(f,c)&&l.push(f)}for(var d=n.visualViewport?n.visualViewport.width:innerWidth,v=n.visualViewport?n.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,g=window.scrollY||pageYOffset,y=e.getBoundingClientRect(),O=y.height,w=y.width,j=y.top,x=y.right,k=y.bottom,E=y.left,P=\"start\"===a||\"nearest\"===a?j:\"end\"===a?k:j+O/2,D=\"center\"===o?E+w/2:\"end\"===o?x:E,F=[],C=0;C<l.length;C++){var S=l[C],A=S.getBoundingClientRect(),B=A.height,N=A.width,R=A.top,M=A.right,T=A.bottom,_=A.left;if(\"if-needed\"===r&&j>=0&&E>=0&&k<=v&&x<=d&&j>=R&&k<=T&&E>=_&&x<=M)return F;var L=getComputedStyle(S),W=parseInt(L.borderLeftWidth,10),I=parseInt(L.borderTopWidth,10),q=parseInt(L.borderRightWidth,10),z=parseInt(L.borderBottomWidth,10),V=0,U=0,K=\"offsetWidth\"in S?S.offsetWidth-S.clientWidth-W-q:0,H=\"offsetHeight\"in S?S.offsetHeight-S.clientHeight-I-z:0;if(u===S)V=\"start\"===a?P:\"end\"===a?P-v:\"nearest\"===a?m(g,g+v,v,I,z,g+P,g+P+O,O):P-v/2,U=\"start\"===o?D:\"center\"===o?D-d/2:\"end\"===o?D-d:m(h,h+d,d,W,q,h+D,h+D+w,w),V=Math.max(0,V+g),U=Math.max(0,U+h);else{V=\"start\"===a?P-R-I:\"end\"===a?P-T+z+H:\"nearest\"===a?m(R,T,B,I,z+H,P,P+O,O):P-(R+B/2)+H/2,U=\"start\"===o?D-_-W:\"center\"===o?D-(_+N/2)+K/2:\"end\"===o?D-M+q+K:m(_,M,N,W,q+K,D,D+w,w);var J=S.scrollLeft,$=S.scrollTop;P+=$-(V=Math.max(0,Math.min($+V,S.scrollHeight-B+H))),D+=J-(U=Math.max(0,Math.min(J+U,S.scrollWidth-N+K)))}F.push({el:S,top:V,left:U})}return F};function O(e){return e===Object(e)&&0!==Object.keys(e).length}var w=function(e,t){var n=!e.ownerDocument.documentElement.contains(e);if(O(t)&&\"function\"===typeof t.behavior)return t.behavior(n?[]:y(e,t));if(!n){var r=function(e){return!1===e?{block:\"end\",inline:\"nearest\"}:O(e)?e:{block:\"start\",inline:\"nearest\"}}(t);return function(e,t){void 0===t&&(t=\"auto\");var n=\"scrollBehavior\"in document.body.style;e.forEach((function(e){var r=e.el,a=e.top,o=e.left;r.scroll&&n?r.scroll({top:a,left:o,behavior:t}):(r.scrollTop=a,r.scrollLeft=o)}))}(y(e,r),r.behavior)}},j=n(362),x=\"Invariant failed\";var k=function(e,t){if(!e)throw new Error(x)},E=n(27),P=n.n(E);function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var C=function(e){var t=e.isLast,n=e.leaf,r=e.parent,a=e.text,o=pe(),i=He.findPath(o,a),c=l.e.parent(i);return o.isVoid(r)?u.a.createElement(A,{length:l.c.string(r).length}):\"\"!==n.text||r.children[r.children.length-1]!==a||o.isInline(r)||\"\"!==l.a.string(o,c)?\"\"===n.text?u.a.createElement(A,null):t&&\"\\n\"===n.text.slice(-1)?u.a.createElement(S,{isTrailing:!0,text:n.text}):u.a.createElement(S,{text:n.text}):u.a.createElement(A,{isLineBreak:!0})},S=function(e){var t=e.text,n=e.isTrailing,r=void 0!==n&&n;return u.a.createElement(\"span\",{\"data-slate-string\":!0},t,r?\"\\n\":null)},A=function(e){var t=e.length,n=void 0===t?0:t,r=e.isLineBreak,a=void 0!==r&&r;return u.a.createElement(\"span\",{\"data-slate-zero-width\":a?\"n\":\"z\",\"data-slate-length\":n},\"\\ufeff\",a?u.a.createElement(\"br\",null):null)},B=new WeakMap,N=new WeakMap,R=new WeakMap,M=new WeakMap,T=new WeakMap,_=new WeakMap,L=new WeakMap,W=new WeakMap,I=new WeakMap,q=new WeakMap,z=new WeakMap,V=new WeakMap,U=Symbol(\"placeholder\"),K=0,H=function(e){var t=e.leaf,n=e.isLast,r=e.text,a=e.parent,o=e.renderPlaceholder,i=e.renderLeaf,c=void 0===i?function(e){return u.a.createElement($,Object.assign({},e))}:i,l=Object(s.useRef)(null);Object(s.useEffect)((function(){var e=null===l||void 0===l?void 0:l.current,t=document.querySelector('[data-slate-editor=\"true\"]');if(e&&t)return t.style.minHeight=\"\".concat(e.clientHeight,\"px\"),function(){t.style.minHeight=\"auto\"}}),[l,t]);var f=u.a.createElement(C,{key:K++,isLast:n,leaf:t,parent:a,text:r});if(t[U]){var d={children:t.placeholder,attributes:{\"data-slate-placeholder\":!0,style:{position:\"absolute\",pointerEvents:\"none\",width:\"100%\",maxWidth:\"100%\",display:\"block\",opacity:\"0.333\",userSelect:\"none\",textDecoration:\"none\"},contentEditable:!1,ref:l}};f=u.a.createElement(u.a.Fragment,null,o(d),f)}return c({attributes:{\"data-slate-leaf\":!0},children:f,leaf:t,text:r})},J=u.a.memo(H,(function(e,t){return t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&t.leaf.text===e.leaf.text&&l.g.matches(t.leaf,e.leaf)&&t.leaf[U]===e.leaf[U]})),$=function(e){var t=e.attributes,n=e.children;return u.a.createElement(\"span\",Object.assign({},t),n)},Y=(\"undefined\"!==typeof navigator&&\"undefined\"!==typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,\"undefined\"!==typeof navigator&&/Mac OS X/.test(navigator.userAgent)),X=\"undefined\"!==typeof navigator&&/Android/.test(navigator.userAgent),Z=\"undefined\"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),G=\"undefined\"!==typeof navigator&&/Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent),Q=\"undefined\"!==typeof navigator&&/Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),ee=\"undefined\"!==typeof navigator&&/Chrome/i.test(navigator.userAgent),te=\"undefined\"!==typeof navigator&&/Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),ne=\"undefined\"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),re=!(\"undefined\"===typeof window||\"undefined\"===typeof window.document||\"undefined\"===typeof window.document.createElement),ae=!te&&!Q&&\"undefined\"!==typeof globalThis&&globalThis.InputEvent&&\"function\"===typeof globalThis.InputEvent.prototype.getTargetRanges,oe=re?s.useLayoutEffect:s.useEffect,ie=function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(n){return t.hasOwnProperty(n)&&e[n]===t[n]}))},ce=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],a=t[n],o=F(r,[\"anchor\",\"focus\"]),i=F(a,[\"anchor\",\"focus\"]);if(!l.f.equals(r,a)||r[U]!==a[U]||!ie(o,i))return!1}return!0},se=function(e){for(var t=e.decorations,n=e.isLast,r=e.parent,a=e.renderPlaceholder,o=e.renderLeaf,i=e.text,c=pe(),f=Object(s.useRef)(null),d=l.g.decorations(i,t),v=He.findKey(c,i),h=[],p=0;p<d.length;p++){var g=d[p];h.push(u.a.createElement(J,{isLast:n&&p===d.length-1,key:\"\".concat(v.id,\"-\").concat(p),renderPlaceholder:a,leaf:g,text:i,parent:r,renderLeaf:o}))}return oe((function(){f.current?(_.set(v,f.current),L.set(i,f.current),T.set(f.current,i)):(_.delete(v),L.delete(i))})),u.a.createElement(\"span\",{\"data-slate-node\":\"text\",ref:f},h)},ue=u.a.memo(se,(function(e,t){return t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&ce(t.decorations,e.decorations)})),le=Object(s.createContext)(!1),fe=function(e){var t=e.decorations,n=e.element,r=e.renderElement,a=void 0===r?function(e){return u.a.createElement(ve,Object.assign({},e))}:r,o=e.renderPlaceholder,i=e.renderLeaf,f=e.selection,v=Object(s.useRef)(null),h=pe(),p=ke(),g=h.isInline(n),b=He.findKey(h,n),m=be({decorations:t,node:n,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:f}),y={\"data-slate-node\":\"element\",ref:v};if(g&&(y[\"data-slate-inline\"]=!0),!g&&l.a.hasInlines(h,n)){var O=l.c.string(n),w=d()(O);\"rtl\"===w&&(y.dir=w)}if(l.a.isVoid(h,n)){y[\"data-slate-void\"]=!0,!p&&g&&(y.contentEditable=!1);var j=g?\"span\":\"div\",x=l.c.texts(n),k=Object(c.a)(x,1),E=Object(c.a)(k[0],1)[0];m=p?null:u.a.createElement(j,{\"data-slate-spacer\":!0,style:{height:\"0\",color:\"transparent\",outline:\"none\",position:\"absolute\"}},u.a.createElement(ue,{renderPlaceholder:o,decorations:[],isLast:!1,parent:n,text:E})),B.set(E,0),N.set(E,n)}return oe((function(){v.current?(_.set(b,v.current),L.set(n,v.current),T.set(v.current,n)):(_.delete(b),L.delete(n))})),u.a.createElement(le.Provider,{value:!!f},a({attributes:y,children:m,element:n}))},de=u.a.memo(fe,(function(e,t){return e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&ce(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&l.f.equals(e.selection,t.selection))})),ve=function(e){var t=e.attributes,n=e.children,r=e.element,a=pe().isInline(r)?\"span\":\"div\";return u.a.createElement(a,Object.assign({},t,{style:{position:\"relative\"}}),n)},he=Object(s.createContext)(null),pe=function(){var e=Object(s.useContext)(he);if(!e)throw new Error(\"The `useSlateStatic` hook must be used inside the <Slate> component's context.\");return e},ge=Object(s.createContext)((function(){return[]})),be=function(e){for(var t=e.decorations,n=e.node,r=e.renderElement,a=e.renderPlaceholder,o=e.renderLeaf,c=e.selection,f=Object(s.useContext)(ge),d=pe(),v=He.findPath(d,n),h=[],p=l.b.isElement(n)&&!d.isInline(n)&&l.a.hasInlines(d,n),g=0;g<n.children.length;g++){var b,m=v.concat(g),y=n.children[g],O=He.findKey(d,y),w=l.a.range(d,m),j=c&&l.f.intersection(w,c),x=f([y,m]),k=Object(i.a)(t);try{for(k.s();!(b=k.n()).done;){var E=b.value,P=l.f.intersection(E,w);P&&x.push(P)}}catch(D){k.e(D)}finally{k.f()}l.b.isElement(y)?h.push(u.a.createElement(de,{decorations:x,element:y,key:O.id,renderElement:r,renderPlaceholder:a,renderLeaf:o,selection:j})):h.push(u.a.createElement(ue,{decorations:x,key:O.id,isLast:p&&g===n.children.length-1,parent:n,renderPlaceholder:a,renderLeaf:o,text:y})),B.set(y,g),N.set(y,n)}return h},me={bold:\"mod+b\",compose:[\"down\",\"left\",\"right\",\"up\",\"backspace\",\"enter\"],moveBackward:\"left\",moveForward:\"right\",moveWordBackward:\"ctrl+left\",moveWordForward:\"ctrl+right\",deleteBackward:\"shift?+backspace\",deleteForward:\"shift?+delete\",extendBackward:\"shift+left\",extendForward:\"shift+right\",italic:\"mod+i\",splitBlock:\"shift?+enter\",undo:\"mod+z\"},ye={moveLineBackward:\"opt+up\",moveLineForward:\"opt+down\",moveWordBackward:\"opt+left\",moveWordForward:\"opt+right\",deleteBackward:[\"ctrl+backspace\",\"ctrl+h\"],deleteForward:[\"ctrl+delete\",\"ctrl+d\"],deleteLineBackward:\"cmd+shift?+backspace\",deleteLineForward:[\"cmd+shift?+delete\",\"ctrl+k\"],deleteWordBackward:\"opt+shift?+backspace\",deleteWordForward:\"opt+shift?+delete\",extendLineBackward:\"opt+shift+up\",extendLineForward:\"opt+shift+down\",redo:\"cmd+shift+z\",transposeCharacter:\"ctrl+t\"},Oe={deleteWordBackward:\"ctrl+shift?+backspace\",deleteWordForward:\"ctrl+shift?+delete\",redo:[\"ctrl+y\",\"ctrl+shift+z\"]},we=function(e){var t=me[e],n=ye[e],r=Oe[e],a=t&&Object(j.isKeyHotkey)(t),o=n&&Object(j.isKeyHotkey)(n),i=r&&Object(j.isKeyHotkey)(r);return function(e){return!(!a||!a(e))||(!!(Y&&o&&o(e))||!(Y||!i||!i(e)))}},je={isBold:we(\"bold\"),isCompose:we(\"compose\"),isMoveBackward:we(\"moveBackward\"),isMoveForward:we(\"moveForward\"),isDeleteBackward:we(\"deleteBackward\"),isDeleteForward:we(\"deleteForward\"),isDeleteLineBackward:we(\"deleteLineBackward\"),isDeleteLineForward:we(\"deleteLineForward\"),isDeleteWordBackward:we(\"deleteWordBackward\"),isDeleteWordForward:we(\"deleteWordForward\"),isExtendBackward:we(\"extendBackward\"),isExtendForward:we(\"extendForward\"),isExtendLineBackward:we(\"extendLineBackward\"),isExtendLineForward:we(\"extendLineForward\"),isItalic:we(\"italic\"),isMoveLineBackward:we(\"moveLineBackward\"),isMoveLineForward:we(\"moveLineForward\"),isMoveWordBackward:we(\"moveWordBackward\"),isMoveWordForward:we(\"moveWordForward\"),isRedo:we(\"redo\"),isSplitBlock:we(\"splitBlock\"),isTransposeCharacter:we(\"transposeCharacter\"),isUndo:we(\"undo\")},xe=Object(s.createContext)(!1),ke=function(){return Object(s.useContext)(xe)},Ee=Object(s.createContext)(null),Pe=function(){var e=Object(s.useContext)(Ee);if(!e)throw new Error(\"The `useSlate` hook must be used inside the <SlateProvider> component's context.\");return Object(c.a)(e,1)[0]},De=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||null},Fe=function(e){return Ce(e)&&1===e.nodeType},Ce=function(e){var t=De(e);return!!t&&e instanceof t.Node},Se=function(e){var t=e&&e.anchorNode&&De(e.anchorNode);return!!t&&e instanceof t.Selection},Ae=function(e){return Ce(e)&&3===e.nodeType},Be=function(e,t,n){for(var r,a=e.childNodes,o=a[t],i=t,c=!1,s=!1;(Ce(r=o)&&8===r.nodeType||Fe(o)&&0===o.childNodes.length||Fe(o)&&\"false\"===o.getAttribute(\"contenteditable\"))&&(!c||!s);)i>=a.length?(c=!0,i=t-1,n=\"backward\"):i<0?(s=!0,i=t+1,n=\"forward\"):(o=a[i],t=i,i+=\"forward\"===n?1:-1);return[o,t]},Ne=function(e,t,n){var r=Be(e,t,n);return Object(c.a)(r,1)[0]},Re=function e(t){var n=\"\";if(Ae(t)&&t.nodeValue)return t.nodeValue;if(Fe(t)){for(var r=0,a=Array.from(t.childNodes);r<a.length;r++){n+=e(a[r])}var o=getComputedStyle(t).getPropertyValue(\"display\");\"block\"!==o&&\"list\"!==o&&\"BR\"!==t.tagName||(n+=\"\\n\")}return n};function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e=function(e){var t=e.attributes,n=e.children;return u.a.createElement(\"span\",Object.assign({},t),n)},Le=function(){return[]},We=function(e,t){return Ce(t)&&He.hasDOMNode(e,t)},Ie=function(e,t){return Ce(t)&&He.hasDOMNode(e,t,{editable:!0})},qe=function(e,t){var n=We(e,t)&&He.toSlateNode(e,t);return l.a.isVoid(e,n)},ze=function(e,t){if(!t)return!1;var n=t(e);return null!=n?n:e.isDefaultPrevented()||e.isPropagationStopped()},Ve=function(e,t){if(!t)return!1;var n=t(e);return null!=n?n:e.defaultPrevented},Ue=0,Ke=function e(){Object(a.a)(this,e),this.id=\"\".concat(Ue++)},He={getWindow:function(e){var t=R.get(e);if(!t)throw new Error(\"Unable to find a host window element for this editor\");return t},findKey:function(e,t){var n=W.get(t);return n||(n=new Ke,W.set(t,n)),n},findPath:function(e,t){for(var n=[],r=t;;){var a=N.get(r);if(null==a){if(l.a.isEditor(r))return n;break}var o=B.get(r);if(null==o)break;n.unshift(o),r=a}throw new Error(\"Unable to find the path for Slate node: \".concat(JSON.stringify(t)))},findDocumentOrShadowRoot:function(e){var t=He.toDOMNode(e,e),n=t.getRootNode();if(t.ownerDocument!==document)return t.ownerDocument;if(!(n instanceof Document||n instanceof ShadowRoot))throw new Error(\"Unable to find DocumentOrShadowRoot for editor element: \".concat(t));return void 0===n.getSelection&&null!==t.ownerDocument?t.ownerDocument:n},isFocused:function(e){return!!q.get(e)},isReadOnly:function(e){return!!I.get(e)},blur:function(e){var t=He.toDOMNode(e,e),n=He.findDocumentOrShadowRoot(e);q.set(e,!1),n.activeElement===t&&t.blur()},focus:function(e){var t=He.toDOMNode(e,e),n=He.findDocumentOrShadowRoot(e);q.set(e,!0),n.activeElement!==t&&t.focus({preventScroll:!0})},deselect:function(e){He.toDOMNode(e,e);var t=e.selection,n=He.findDocumentOrShadowRoot(e).getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),t&&l.h.deselect(e)},hasDOMNode:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.editable,o=void 0!==a&&a,i=He.toDOMNode(e,e);try{n=Fe(t)?t:t.parentElement}catch(c){if(!c.message.includes('Permission denied to access property \"nodeType\"'))throw c}return!!n&&(n.closest(\"[data-slate-editor]\")===i&&(!o||n.isContentEditable||!!n.getAttribute(\"data-slate-zero-width\")))},insertData:function(e,t){e.insertData(t)},setFragmentData:function(e,t){e.setFragmentData(t)},toDOMNode:function(e,t){var n=l.a.isEditor(t)?M.get(e):_.get(He.findKey(e,t));if(!n)throw new Error(\"Cannot resolve a DOM node from Slate node: \".concat(JSON.stringify(t)));return n},toDOMPoint:function(e,t){var n,r=l.a.node(e,t.path),a=Object(c.a)(r,1)[0],o=He.toDOMNode(e,a);l.a.void(e,{at:t})&&(t={path:t.path,offset:0});for(var i=0,s=0,u=Array.from(o.querySelectorAll(\"[data-slate-string], [data-slate-zero-width]\"));s<u.length;s++){var f=u[s],d=f.childNodes[0];if(null!=d&&null!=d.textContent){var v=d.textContent.length,h=f.getAttribute(\"data-slate-length\"),p=i+(null==h?v:parseInt(h,10));if(t.offset<=p){n=[d,Math.min(v,Math.max(0,t.offset-i))];break}i=p}}if(!n)throw new Error(\"Cannot resolve a DOM point from Slate point: \".concat(JSON.stringify(t)));return n},toDOMRange:function(e,t){var n=t.anchor,r=t.focus,a=l.f.isBackward(t),o=He.toDOMPoint(e,n),i=l.f.isCollapsed(t)?o:He.toDOMPoint(e,r),s=He.getWindow(e).document.createRange(),u=a?i:o,f=Object(c.a)(u,2),d=f[0],v=f[1],h=a?o:i,p=Object(c.a)(h,2),g=p[0],b=p[1],m=!!(Fe(d)?d:d.parentElement).getAttribute(\"data-slate-zero-width\"),y=!!(Fe(g)?g:g.parentElement).getAttribute(\"data-slate-zero-width\");return s.setStart(d,m?1:v),s.setEnd(g,y?1:b),s},toSlateNode:function(e,t){var n=Fe(t)?t:t.parentElement;n&&!n.hasAttribute(\"data-slate-node\")&&(n=n.closest(\"[data-slate-node]\"));var r=n?T.get(n):null;if(!r)throw new Error(\"Cannot resolve a Slate node from DOM node: \".concat(n));return r},findEventRange:function(e,t){\"nativeEvent\"in t&&(t=t.nativeEvent);var n=t,r=n.clientX,a=n.clientY,o=n.target;if(null==r||null==a)throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(t));var i,c=He.toSlateNode(e,t.target),s=He.findPath(e,c);if(l.a.isVoid(e,c)){var u=o.getBoundingClientRect(),f=e.isInline(c)?r-u.left<u.left+u.width-r:a-u.top<u.top+u.height-a,d=l.a.point(e,s,{edge:f?\"start\":\"end\"}),v=f?l.a.before(e,d):l.a.after(e,d);if(v)return l.a.range(e,v)}var h=window.document;if(h.caretRangeFromPoint)i=h.caretRangeFromPoint(r,a);else{var p=h.caretPositionFromPoint(r,a);p&&((i=h.createRange()).setStart(p.offsetNode,p.offset),i.setEnd(p.offsetNode,p.offset))}if(!i)throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(t));return He.toSlateRange(e,i,{exactMatch:!1})},toSlatePoint:function(e,t,n){var a=n?t:function(e){var t=Object(c.a)(e,2),n=t[0],r=t[1];if(Fe(n)&&n.childNodes.length){var a=r===n.childNodes.length,o=a?r-1:r,i=Be(n,o,a?\"backward\":\"forward\"),s=Object(c.a)(i,2);for(n=s[0],a=(o=s[1])<r;Fe(n)&&n.childNodes.length;){var u=a?n.childNodes.length-1:0;n=Ne(n,u,a?\"backward\":\"forward\")}r=a&&null!=n.textContent?n.textContent.length:0}return[n,r]}(t),o=Object(c.a)(a,2),i=o[0],s=o[1],u=i.parentNode,l=null,f=0;if(u){var d=u.closest('[data-slate-void=\"true\"]'),v=u.closest(\"[data-slate-leaf]\"),h=null;if(v){l=v.closest('[data-slate-node=\"text\"]');var p=He.getWindow(e).document.createRange();p.setStart(l,0),p.setEnd(i,s);var g=p.cloneContents();[].concat(Object(r.a)(Array.prototype.slice.call(g.querySelectorAll(\"[data-slate-zero-width]\"))),Object(r.a)(Array.prototype.slice.call(g.querySelectorAll(\"[contenteditable=false]\")))).forEach((function(e){e.parentNode.removeChild(e)})),f=g.textContent.length,h=l}else d&&((v=d.querySelector(\"[data-slate-leaf]\"))?(l=v.closest('[data-slate-node=\"text\"]'),f=(h=v).textContent.length,h.querySelectorAll(\"[data-slate-zero-width]\").forEach((function(e){f-=e.textContent.length}))):f=1);h&&f===h.textContent.length&&u.hasAttribute(\"data-slate-zero-width\")&&f--}if(!l){if(n)return null;throw new Error(\"Cannot resolve a Slate point from DOM point: \".concat(t))}var b=He.toSlateNode(e,l);return{path:He.findPath(e,b),offset:f}},toSlateRange:function(e,t,n){var r,a,o,i,c,s=n.exactMatch;if((Se(t)?t.anchorNode:t.startContainer)&&(Se(t)?(r=t.anchorNode,a=t.anchorOffset,o=t.focusNode,i=t.focusOffset,c=ee&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(r=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,c=t.collapsed)),null==r||null==o||null==a||null==i)throw new Error(\"Cannot resolve a Slate range from DOM range: \".concat(t));var u=He.toSlatePoint(e,[r,a],s);if(!u)return null;var l=c?u:He.toSlatePoint(e,[o,i],s);return l?{anchor:u,focus:l}:null},hasRange:function(e,t){var n=t.anchor,r=t.focus;return l.a.hasPath(e,n.path)&&l.a.hasPath(e,r.path)}};function Je(e,t){if(e===t)return null;var n=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length!==t.length?n:null}(e,t);if(null===n)return null;var r=function(e,t,n){for(var r=e.length,a=t.length,o=Math.min(r,a,n),i=0;i<o;i++)if(e.charAt(r-i-1)!==t.charAt(a-i-1))return i;return e.length!==t.length?o:null}(e,t,Math.min(e.length-n,t.length-n));return null===r?null:{start:n,end:r}}function $e(e,t){return e.slice(t.start,e.length-t.end)}function Ye(e,t){var n=He.toSlateNode(e,t);if(l.g.isText(n)){var r=n.text,a=t.textContent;if(a.endsWith(\"\\n\")&&(a=a.slice(0,a.length-1)),a!==r){var o=function(e,t){if(void 0===e||void 0===t)return null;var n=Je(e,t);if(null==n)return null;var r=$e(t,n),a=$e(e,n);return{start:n.start,end:e.length-n.end,insertText:r,removeText:a}}(r,a);if(null!==o)return{text:o,path:He.findPath(e,n)}}}}function Xe(e,t,n){var r=n.path,a=n.text,o={anchor:{path:r,offset:a.start},focus:{path:r,offset:a.end}};if(!t||!l.f.isCollapsed(t))return o;var i=a.insertText,s=a.removeText;if((1===i.length||1===s.length)&&l.e.equals(t.anchor.path,r)){var u=Array.from(l.a.nodes(e,{at:t,match:l.g.isText})),f=Object(c.a)(u,1)[0];if(f){var d=Object(c.a)(f,1)[0],v=t.anchor,h=d.text[v.offset-1],p=d.text[v.offset];if(1===i.length&&i===p)return t;if(1===s.length&&s===h)return{anchor:{path:r,offset:v.offset-1},focus:{path:r,offset:v.offset}}}}return o}function Ze(e){try{var t=V.get(e);t&&t()}catch(n){console.error(n)}}var Ge=function e(t){var n=this;Object(a.a)(this,e),this.editor=t,this.flush=function(e){try{n.reconcileMutations(e)}catch(t){console.error(t),Ze(n.editor)}},this.reconcileMutations=function(e){var t=function(e,t){var n=[],r=[],a=[],o=[];return t.forEach((function(t){switch(t.type){case\"childList\":t.addedNodes.length&&t.addedNodes.forEach((function(e){n.push(e)})),t.removedNodes.forEach((function(e){r.push(e)}));break;case\"characterData\":o.push(t);var i=t.target.parentNode;if(!i)return;var c=Ye(e,i);if(!c)return;if(a.some((function(e){var t=e.path;return l.e.equals(t,c.path)})))return;a.push(c)}})),{addedNodes:n,removedNodes:r,insertedText:a,characterDataMutations:o}}(n.editor,e),r=t.insertedText,a=t.removedNodes;if(function(e,t){var n=e.selection,r=t.removedNodes;return!!n&&l.f.isExpanded(n)&&r.length>0}(n.editor,t)){var o=function(e){return e.reduce((function(e,t){var n=t.text;return\"\".concat(e).concat(n.insertText)}),\"\")}(r);n.replaceExpandedSelection(o)}else!function(e,t){var n=t.addedNodes,r=e.selection,a=r?l.c.parent(e,r.anchor.path):null,o=a?He.toDOMNode(e,a):null;return!!o&&n.some((function(e){return e instanceof HTMLElement&&e.tagName===(null===o||void 0===o?void 0:o.tagName)}))}(n.editor,t)?!function(e,t){var n=t.addedNodes,r=t.characterDataMutations;return t.removedNodes.length>0&&0===n.length&&r.length>0}(n.editor,t)?(n.editor,t.removedNodes.length>0?n.deleteBackward():(n.editor,t.insertedText.length>0&&n.insertText(r))):n.removeLeafNodes(a):n.insertBreak()},this.insertText=function(e){var t=n.editor.selection;e.forEach((function(e){l.h.insertText(n.editor,e.text.insertText,{at:Xe(n.editor,t,e)})}))},this.insertBreak=function(){var e=n.editor.selection;l.a.insertBreak(n.editor),Ze(n.editor),e&&setTimeout((function(){n.editor.selection&&l.f.equals(e,n.editor.selection)&&l.h.move(n.editor)}),100)},this.replaceExpandedSelection=function(e){l.a.deleteFragment(n.editor),e.length&&l.a.insertText(n.editor,e),Ze(n.editor)},this.deleteBackward=function(){l.a.deleteBackward(n.editor),He.focus(n.editor),Ze(n.editor)},this.removeLeafNodes=function(e){var t,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=He.toSlateNode(n.editor,a);if(o){var c=He.findPath(n.editor,o);l.h.delete(n.editor,{at:c}),Ze(n.editor)}}}catch(s){r.e(s)}finally{r.f()}},this.editor=t};var Qe={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function et(e){var t=pe(),n=Object(s.useState)((function(){return new Ge(t)})),r=Object(c.a)(n,1)[0],a=function(){var e=pe(),t=Object(s.useRef)(!1),n=Object(s.useRef)(null),r=Object(s.useCallback)((function(){if(!1===t.current){var r=He.getWindow(e);t.current=!0,n.current&&r.cancelAnimationFrame(n.current),n.current=r.requestAnimationFrame((function(){t.current=!1,n.current=null}))}}),[]);return Object(s.useEffect)((function(){t.current&&(t.current=!1)})),{receivedUserInput:t,onUserInput:r}}(),o=a.receivedUserInput,i=a.onUserInput,u=Object(s.useRef)(null),l=Object(s.useRef)(!1);return function(e,t,n){var r=Object(s.useState)((function(){return new MutationObserver(t)})),a=Object(c.a)(r,1)[0];oe((function(){a.disconnect()})),Object(s.useEffect)((function(){if(!e.current)throw new Error(\"Failed to attach MutationObserver, `node` is undefined\");return a.observe(e.current,n),a.disconnect.bind(a)}))}(e,Object(s.useCallback)((function(e){o.current&&(l.current=!0,r.flush(e),u.current&&clearTimeout(u.current),u.current=setTimeout((function(){l.current=!1,u.current=null}),250))}),[]),Qe),{isReconciling:l,onUserInput:i}}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rt=Object(s.createContext)(!1),at=function(e){var t=e.editor,n=e.children,a=e.onChange,o=e.value,i=F(e,[\"editor\",\"children\",\"onChange\",\"value\"]),f=Object(s.useState)(0),d=Object(c.a)(f,2),v=d[0],h=d[1],p=Object(s.useMemo)((function(){return k(l.c.isNodeList(o),\"[Slate] value is invalid! Expected a list of elements but got: \".concat(JSON.stringify(o))),k(l.a.isEditor(t),\"[Slate] editor is invalid! you passed: \".concat(JSON.stringify(t))),t.children=o,Object.assign(t,i),[t]}),[v,o].concat(Object(r.a)(Object.values(i)))),g=Object(s.useCallback)((function(){a(t.children),h(v+1)}),[v,a]);z.set(t,g),Object(s.useEffect)((function(){return function(){z.set(t,(function(){}))}}),[]);var b=Object(s.useState)(He.isFocused(t)),m=Object(c.a)(b,2),y=m[0],O=m[1];return Object(s.useEffect)((function(){O(He.isFocused(t))})),oe((function(){var e=function(){return O(He.isFocused(t))};return document.addEventListener(\"focus\",e,!0),function(){return document.removeEventListener(\"focus\",e,!0)}}),[]),oe((function(){var e=function(){return O(He.isFocused(t))};return document.addEventListener(\"blur\",e,!0),function(){return document.removeEventListener(\"blur\",e,!0)}}),[]),u.a.createElement(Ee.Provider,{value:p},u.a.createElement(he.Provider,{value:t},u.a.createElement(rt.Provider,{value:y},n)))},ot=function(e,t){var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},it=function(e,t,n){var r=He.toDOMRange(e,t).getBoundingClientRect(),a=He.toDOMRange(e,n).getBoundingClientRect();return ot(r,a)&&ot(a,r)},ct=function(e){var t=e,n=t.apply,r=t.onChange,a=t.deleteBackward;return t.deleteBackward=function(n){if(\"line\"!==n)return a(n);if(e.selection&&l.f.isCollapsed(e.selection)){var r=l.a.above(e,{match:function(t){return l.a.isBlock(e,t)},at:e.selection});if(r){var o=Object(c.a)(r,2)[1],i=l.a.range(e,o,e.selection.anchor),s=function(e,t){var n=l.a.range(e,l.f.end(t)),r=Array.from(l.a.positions(e,{at:t})),a=0,o=r.length,i=Math.floor(o/2);if(it(e,l.a.range(e,r[a]),n))return l.a.range(e,r[a],n);if(r.length<2)return l.a.range(e,r[r.length-1],n);for(;i!==r.length&&i!==a;)it(e,l.a.range(e,r[i]),n)?o=i:a=i,i=Math.floor((a+o)/2);return l.a.range(e,r[o],n)}(t,i);l.f.isCollapsed(s)||l.h.delete(e,{at:s})}}},t.apply=function(e){var r=[];switch(e.type){case\"insert_text\":case\"remove_text\":case\"set_node\":var a,o=Object(i.a)(l.a.levels(t,{at:e.path}));try{for(o.s();!(a=o.n()).done;){var s=Object(c.a)(a.value,2),u=s[0],f=s[1],d=He.findKey(t,u);r.push([f,d])}}catch(B){o.e(B)}finally{o.f()}break;case\"insert_node\":case\"remove_node\":case\"merge_node\":case\"split_node\":var v,h=Object(i.a)(l.a.levels(t,{at:l.e.parent(e.path)}));try{for(h.s();!(v=h.n()).done;){var p=Object(c.a)(v.value,2),g=p[0],b=p[1],m=He.findKey(t,g);r.push([b,m])}}catch(B){h.e(B)}finally{h.f()}break;case\"move_node\":var y,O=Object(i.a)(l.a.levels(t,{at:l.e.common(l.e.parent(e.path),l.e.parent(e.newPath))}));try{for(O.s();!(y=O.n()).done;){var w=Object(c.a)(y.value,2),j=w[0],x=w[1],k=He.findKey(t,j);r.push([x,k])}}catch(B){O.e(B)}finally{O.f()}}n(e);for(var E=0,P=r;E<P.length;E++){var D=Object(c.a)(P[E],2),F=D[0],C=D[1],S=l.a.node(t,F),A=Object(c.a)(S,1)[0];W.set(A,C)}},t.setFragmentData=function(e){var n=t.selection;if(n){var r=l.f.edges(n),a=Object(c.a)(r,2),o=a[0],i=a[1],s=l.a.void(t,{at:o.path}),u=l.a.void(t,{at:i.path});if(!l.f.isCollapsed(n)||s){var f=He.toDOMRange(t,n),d=f.cloneContents(),v=d.childNodes[0];if(d.childNodes.forEach((function(e){e.textContent&&\"\"!==e.textContent.trim()&&(v=e)})),u){var h=Object(c.a)(u,1)[0],p=f.cloneRange(),g=He.toDOMNode(t,h);p.setEndAfter(g),d=p.cloneContents()}if(s&&(v=d.querySelector(\"[data-slate-spacer]\")),Array.from(d.querySelectorAll(\"[data-slate-zero-width]\")).forEach((function(e){var t=\"n\"===e.getAttribute(\"data-slate-zero-width\");e.textContent=t?\"\\n\":\"\"})),Ae(v)){var b=document.createElement(\"span\");b.style.whiteSpace=\"pre\",b.appendChild(v),d.appendChild(b),v=b}var m=t.getFragment(),y=JSON.stringify(m),O=window.btoa(encodeURIComponent(y));v.setAttribute(\"data-slate-fragment\",O),e.setData(\"application/x-slate-fragment\",O);var w=document.createElement(\"div\");w.appendChild(d),w.setAttribute(\"hidden\",\"true\"),document.body.appendChild(w),e.setData(\"text/html\",w.innerHTML),e.setData(\"text/plain\",Re(w)),document.body.removeChild(w)}}},t.insertData=function(e){var n=e.getData(\"application/x-slate-fragment\");if(n){var r=decodeURIComponent(window.atob(n)),a=JSON.parse(r);t.insertFragment(a)}else{var o=e.getData(\"text/plain\");if(o){var c,s=o.split(/\\r\\n|\\r|\\n/),u=!1,f=Object(i.a)(s);try{for(f.s();!(c=f.n()).done;){var d=c.value;u&&l.h.splitNodes(t,{always:!0}),t.insertText(d),u=!0}}catch(v){f.e(v)}finally{f.f()}}}},t.onChange=function(){P.a.unstable_batchedUpdates((function(){var e=z.get(t);e&&e(),r()}))},t},st=X?function(e){var t=e.autoFocus,n=e.decorate,r=void 0===n?Le:n,a=e.onDOMBeforeInput,i=e.placeholder,f=e.readOnly,d=void 0!==f&&f,v=e.renderElement,p=e.renderLeaf,g=e.renderPlaceholder,b=void 0===g?function(e){return u.a.createElement(_e,Object.assign({},e))}:g,m=e.style,y=void 0===m?{}:m,O=e.as,j=void 0===O?\"div\":O,x=F(e,[\"autoFocus\",\"decorate\",\"onDOMBeforeInput\",\"placeholder\",\"readOnly\",\"renderElement\",\"renderLeaf\",\"renderPlaceholder\",\"style\",\"as\"]),k=Pe(),E=Object(s.useRef)(null),P=et(E);I.set(k,d);var D=Object(s.useMemo)((function(){return{isUpdatingSelection:!1,latestElement:null}}),[]),C=Object(s.useState)(0),S=Object(c.a)(C,2),A=S[0],B=S[1],N=Object(s.useCallback)((function(){B((function(e){return e+1}))}),[A]);oe((function(){var e;E.current&&(e=De(E.current))?(R.set(k,e),M.set(k,E.current),L.set(k,E.current),T.set(E.current,k),V.set(k,N)):(L.delete(k),V.delete(k));try{var t=k.selection,n=He.findDocumentOrShadowRoot(k).getSelection();if(!n||!He.isFocused(k))return;var r=\"None\"!==n.type;if(!t&&!r)return;var a=M.get(k),o=!1;if(a.contains(n.anchorNode)&&a.contains(n.focusNode)&&(o=!0),r&&o&&t){var i=He.toSlateRange(k,n,{exactMatch:!0});if(i&&l.f.equals(i,t))return}if(t&&!He.hasRange(k,t))return void(k.selection=He.toSlateRange(k,n,{exactMatch:!1}));var c=He.toDOMNode(k,k);D.isUpdatingSelection=!0;var s=t&&He.toDOMRange(k,t);if(s){l.f.isBackward(t)?n.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):n.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset);var u=s.startContainer.parentElement;u.getBoundingClientRect=s.getBoundingClientRect.bind(s),w(u,{scrollMode:\"if-needed\",boundary:c}),delete u.getBoundingClientRect}else n.removeAllRanges();setTimeout((function(){D.isUpdatingSelection=!1}))}catch(f){D.isUpdatingSelection=!1}})),Object(s.useEffect)((function(){E.current&&t&&E.current.focus()}),[t]);var _=Object(s.useCallback)((function(e){d||!Ie(k,e.target)||Ve(e,a)||P.onUserInput()}),[d,a]);oe((function(){var e=E.current;return null===e||void 0===e||e.addEventListener(\"beforeinput\",_),function(){return null===e||void 0===e?void 0:e.removeEventListener(\"beforeinput\",_)}}),[A,a]);var W=Object(s.useCallback)(h()((function(){try{if(!d&&!D.isUpdatingSelection&&!P.isReconciling.current){var e=He.findDocumentOrShadowRoot(k),t=e.activeElement,n=He.toDOMNode(k,k),r=e.getSelection();if(t===n?(D.latestElement=t,q.set(k,!0)):q.delete(k),!r)return l.h.deselect(k);var a=r.anchorNode,o=r.focusNode,i=Ie(k,a)||qe(k,a),c=Ie(k,o)||qe(k,o);if(i&&c){var s=He.toSlateRange(k,r,{exactMatch:!1});l.h.select(k,s)}else l.h.deselect(k)}}catch(u){}}),100),[d]);oe((function(){var e=He.getWindow(k);return e.document.addEventListener(\"selectionchange\",W),function(){e.document.removeEventListener(\"selectionchange\",W)}}));var z=r([k,[]]);if(i&&1===k.children.length&&1===Array.from(l.c.texts(k)).length&&\"\"===l.c.string(k)){var K,H=l.a.start(k,[]);z.push((K={},Object(o.a)(K,U,!0),Object(o.a)(K,\"placeholder\",i),Object(o.a)(K,\"anchor\",H),Object(o.a)(K,\"focus\",H),K))}return u.a.createElement(xe.Provider,{value:d},u.a.createElement(ge.Provider,{value:r},u.a.createElement(j,Object.assign({key:A,role:d?void 0:\"textbox\"},x,{spellCheck:x.spellCheck,autoCorrect:x.autoCorrect,autoCapitalize:x.autoCapitalize,\"data-slate-editor\":!0,\"data-slate-node\":\"value\",contentEditable:!d||void 0,suppressContentEditableWarning:!0,ref:E,style:nt({position:\"relative\",outline:\"none\",whiteSpace:\"pre-wrap\",wordWrap:\"break-word\"},y),onCopy:Object(s.useCallback)((function(e){Ie(k,e.target)&&!ze(e,x.onCopy)&&(e.preventDefault(),He.setFragmentData(k,e.clipboardData))}),[x.onCopy]),onCut:Object(s.useCallback)((function(e){if(!d&&Ie(k,e.target)&&!ze(e,x.onCut)){e.preventDefault(),He.setFragmentData(k,e.clipboardData);var t=k.selection;if(t)if(l.f.isExpanded(t))l.a.deleteFragment(k);else{var n=l.c.parent(k,t.anchor.path);l.a.isVoid(k,n)&&l.h.delete(k)}}}),[d,x.onCut]),onFocus:Object(s.useCallback)((function(e){if(!d&&!D.isUpdatingSelection&&Ie(k,e.target)&&!ze(e,x.onFocus)){var t=He.findDocumentOrShadowRoot(k);D.latestElement=t.activeElement,q.set(k,!0)}}),[d,x.onFocus]),onBlur:Object(s.useCallback)((function(e){if(!d&&!D.isUpdatingSelection&&Ie(k,e.target)&&!ze(e,x.onBlur)){var t=He.findDocumentOrShadowRoot(k);if(D.latestElement!==t.activeElement){var n=e.relatedTarget;if(n!==He.toDOMNode(k,k)&&(!Fe(n)||!n.hasAttribute(\"data-slate-spacer\"))){if(null!=n&&Ce(n)&&He.hasDOMNode(k,n)){var r=He.toSlateNode(k,n);if(l.b.isElement(r)&&!k.isVoid(r))return}q.delete(k)}}}}),[d,x.onBlur]),onPaste:Object(s.useCallback)((function(e){!Ie(k,e.target)||ze(e,x.onPaste)||d||(e.preventDefault(),He.insertData(k,e.clipboardData))}),[d,x.onPaste])}),be({decorations:z,node:k,renderElement:v,renderPlaceholder:b,renderLeaf:p,selection:k.selection}))))}:function(e){var t=e.autoFocus,n=e.decorate,r=void 0===n?Le:n,a=e.onDOMBeforeInput,i=e.placeholder,f=e.readOnly,v=void 0!==f&&f,p=e.renderElement,g=e.renderLeaf,b=e.renderPlaceholder,m=void 0===b?function(e){return u.a.createElement(_e,Object.assign({},e))}:b,y=e.style,O=void 0===y?{}:y,j=e.as,x=void 0===j?\"div\":j,k=F(e,[\"autoFocus\",\"decorate\",\"onDOMBeforeInput\",\"placeholder\",\"readOnly\",\"renderElement\",\"renderLeaf\",\"renderPlaceholder\",\"style\",\"as\"]),E=Pe(),P=Object(s.useRef)(null);I.set(E,v);var D=Object(s.useMemo)((function(){return{isComposing:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null}}),[]);oe((function(){var e;P.current&&(e=De(P.current))?(R.set(E,e),M.set(E,P.current),L.set(E,P.current),T.set(P.current,E)):L.delete(E);var t=E.selection,n=He.findDocumentOrShadowRoot(E).getSelection();if(!D.isComposing&&n&&He.isFocused(E)){var r=\"None\"!==n.type;if(t||r){var a=M.get(E),o=!1;if(a.contains(n.anchorNode)&&a.contains(n.focusNode)&&(o=!0),r&&o&&t){var i=He.toSlateRange(E,n,{exactMatch:!0});if(i&&l.f.equals(i,t))return}if(!t||He.hasRange(E,t)){var c=He.toDOMNode(E,E);D.isUpdatingSelection=!0;var s=t&&He.toDOMRange(E,t);if(s){l.f.isBackward(t)?n.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):n.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset);var u=s.startContainer.parentElement;u.getBoundingClientRect=s.getBoundingClientRect.bind(s),w(u,{scrollMode:\"if-needed\",boundary:c}),delete u.getBoundingClientRect}else n.removeAllRanges();setTimeout((function(){s&&Z&&c.focus(),D.isUpdatingSelection=!1}))}else E.selection=He.toSlateRange(E,n,{exactMatch:!1})}}})),Object(s.useEffect)((function(){P.current&&t&&P.current.focus()}),[t]);var C=Object(s.useCallback)((function(e){if(!v&&Ie(E,e.target)&&!Ve(e,a)){var t=E.selection,n=e.inputType,r=e.dataTransfer||e.data||void 0;if(\"insertCompositionText\"===n||\"deleteCompositionText\"===n)return;if(e.preventDefault(),!n.startsWith(\"delete\")||n.startsWith(\"deleteBy\")){var o=e.getTargetRanges(),i=Object(c.a)(o,1)[0];if(i){var s=He.toSlateRange(E,i,{exactMatch:!1});t&&l.f.equals(t,s)||l.h.select(E,s)}}if(t&&l.f.isExpanded(t)&&n.startsWith(\"delete\")){var u=n.endsWith(\"Backward\")?\"backward\":\"forward\";return void l.a.deleteFragment(E,{direction:u})}switch(n){case\"deleteByComposition\":case\"deleteByCut\":case\"deleteByDrag\":l.a.deleteFragment(E);break;case\"deleteContent\":case\"deleteContentForward\":l.a.deleteForward(E);break;case\"deleteContentBackward\":l.a.deleteBackward(E);break;case\"deleteEntireSoftLine\":l.a.deleteBackward(E,{unit:\"line\"}),l.a.deleteForward(E,{unit:\"line\"});break;case\"deleteHardLineBackward\":l.a.deleteBackward(E,{unit:\"block\"});break;case\"deleteSoftLineBackward\":l.a.deleteBackward(E,{unit:\"line\"});break;case\"deleteHardLineForward\":l.a.deleteForward(E,{unit:\"block\"});break;case\"deleteSoftLineForward\":l.a.deleteForward(E,{unit:\"line\"});break;case\"deleteWordBackward\":l.a.deleteBackward(E,{unit:\"word\"});break;case\"deleteWordForward\":l.a.deleteForward(E,{unit:\"word\"});break;case\"insertLineBreak\":case\"insertParagraph\":l.a.insertBreak(E);break;case\"insertFromComposition\":case\"insertFromDrop\":case\"insertFromPaste\":case\"insertFromYank\":case\"insertReplacementText\":case\"insertText\":\"insertFromComposition\"===n&&(D.isComposing=!1),r instanceof He.getWindow(E).DataTransfer?He.insertData(E,r):\"string\"===typeof r&&l.a.insertText(E,r)}}}),[v,a]);oe((function(){return P.current&&ae&&P.current.addEventListener(\"beforeinput\",C),function(){P.current&&ae&&P.current.removeEventListener(\"beforeinput\",C)}}),[C]);var S=Object(s.useCallback)(h()((function(){if(!v&&!D.isComposing&&!D.isUpdatingSelection&&!D.isDraggingInternally){var e=He.findDocumentOrShadowRoot(E),t=e.activeElement,n=He.toDOMNode(E,E),r=e.getSelection();if(t===n?(D.latestElement=t,q.set(E,!0)):q.delete(E),!r)return l.h.deselect(E);var a=r.anchorNode,o=r.focusNode,i=Ie(E,a)||qe(E,a),c=Ie(E,o)||qe(E,o);if(i&&c){var s=He.toSlateRange(E,r,{exactMatch:!1});l.h.select(E,s)}else l.h.deselect(E)}}),100),[v]);oe((function(){var e=He.getWindow(E);return e.document.addEventListener(\"selectionchange\",S),function(){e.document.removeEventListener(\"selectionchange\",S)}}),[S]);var A=r([E,[]]);if(i&&1===E.children.length&&1===Array.from(l.c.texts(E)).length&&\"\"===l.c.string(E)){var B,N=l.a.start(E,[]);A.push((B={},Object(o.a)(B,U,!0),Object(o.a)(B,\"placeholder\",i),Object(o.a)(B,\"anchor\",N),Object(o.a)(B,\"focus\",N),B))}return u.a.createElement(xe.Provider,{value:v},u.a.createElement(ge.Provider,{value:r},u.a.createElement(x,Object.assign({\"data-gramm\":!1,role:v?void 0:\"textbox\"},k,{spellCheck:!!ae&&k.spellCheck,autoCorrect:ae?k.autoCorrect:\"false\",autoCapitalize:ae?k.autoCapitalize:\"false\",\"data-slate-editor\":!0,\"data-slate-node\":\"value\",contentEditable:!v||void 0,suppressContentEditableWarning:!0,ref:P,style:Te({position:\"relative\",outline:\"none\",whiteSpace:\"pre-wrap\",wordWrap:\"break-word\"},O),onBeforeInput:Object(s.useCallback)((function(e){if(!ae&&!v&&!ze(e,k.onBeforeInput)&&Ie(E,e.target)&&(e.preventDefault(),!D.isComposing)){var t=e.data;l.a.insertText(E,t)}}),[v]),onBlur:Object(s.useCallback)((function(e){if(!v&&!D.isUpdatingSelection&&Ie(E,e.target)&&!ze(e,k.onBlur)){var t=He.findDocumentOrShadowRoot(E);if(D.latestElement!==t.activeElement){var n=e.relatedTarget;if(n!==He.toDOMNode(E,E)&&(!Fe(n)||!n.hasAttribute(\"data-slate-spacer\"))){if(null!=n&&Ce(n)&&He.hasDOMNode(E,n)){var r=He.toSlateNode(E,n);if(l.b.isElement(r)&&!E.isVoid(r))return}if(G){var a=t.getSelection();null===a||void 0===a||a.removeAllRanges()}q.delete(E)}}}}),[v,k.onBlur]),onClick:Object(s.useCallback)((function(e){if(!v&&We(E,e.target)&&!ze(e,k.onClick)&&Ce(e.target)){var t=He.toSlateNode(E,e.target),n=He.findPath(E,t),r=l.a.start(E,n),a=l.a.end(E,n),o=l.a.void(E,{at:r}),i=l.a.void(E,{at:a});if(o&&i&&l.e.equals(o[1],i[1])){var c=l.a.range(E,r);l.h.select(E,c)}}}),[v,k.onClick]),onCompositionEnd:Object(s.useCallback)((function(e){Ie(E,e.target)&&!ze(e,k.onCompositionEnd)&&(D.isComposing=!1,G||ne||!e.data||l.a.insertText(E,e.data))}),[k.onCompositionEnd]),onCompositionUpdate:Object(s.useCallback)((function(e){Ie(E,e.target)&&!ze(e,k.onCompositionUpdate)&&(D.isComposing=!0)}),[k.onCompositionUpdate]),onCompositionStart:Object(s.useCallback)((function(e){if(Ie(E,e.target)&&!ze(e,k.onCompositionStart)){var t=E.selection;t&&l.f.isExpanded(t)&&l.a.deleteFragment(E)}}),[k.onCompositionStart]),onCopy:Object(s.useCallback)((function(e){Ie(E,e.target)&&!ze(e,k.onCopy)&&(e.preventDefault(),He.setFragmentData(E,e.clipboardData))}),[k.onCopy]),onCut:Object(s.useCallback)((function(e){if(!v&&Ie(E,e.target)&&!ze(e,k.onCut)){e.preventDefault(),He.setFragmentData(E,e.clipboardData);var t=E.selection;if(t)if(l.f.isExpanded(t))l.a.deleteFragment(E);else{var n=l.c.parent(E,t.anchor.path);l.a.isVoid(E,n)&&l.h.delete(E)}}}),[v,k.onCut]),onDragOver:Object(s.useCallback)((function(e){if(We(E,e.target)&&!ze(e,k.onDragOver)){var t=He.toSlateNode(E,e.target);l.a.isVoid(E,t)&&e.preventDefault()}}),[k.onDragOver]),onDragStart:Object(s.useCallback)((function(e){if(We(E,e.target)&&!ze(e,k.onDragStart)){var t=He.toSlateNode(E,e.target),n=He.findPath(E,t);if(l.a.isVoid(E,t)||l.a.void(E,{at:n,voids:!0})){var r=l.a.range(E,n);l.h.select(E,r)}D.isDraggingInternally=!0,He.setFragmentData(E,e.dataTransfer)}}),[k.onDragStart]),onDrop:Object(s.useCallback)((function(e){if(!v&&We(E,e.target)&&!ze(e,k.onDrop)){e.preventDefault();var t=E.selection,n=He.findEventRange(E,e),r=e.dataTransfer;l.h.select(E,n),D.isDraggingInternally&&(t&&l.h.delete(E,{at:t}),D.isDraggingInternally=!1),He.insertData(E,r),He.isFocused(E)||He.focus(E)}}),[v,k.onDrop]),onDragEnd:Object(s.useCallback)((function(e){!v&&D.isDraggingInternally&&We(E,e.target)&&!ze(e,k.onDragEnd)&&(D.isDraggingInternally=!1)}),[v,k.onDragEnd]),onFocus:Object(s.useCallback)((function(e){if(!v&&!D.isUpdatingSelection&&Ie(E,e.target)&&!ze(e,k.onFocus)){var t=He.toDOMNode(E,E),n=He.findDocumentOrShadowRoot(E);if(D.latestElement=n.activeElement,Z&&e.target!==t)return void t.focus();q.set(E,!0)}}),[v,k.onFocus]),onKeyDown:Object(s.useCallback)((function(e){if(!v&&Ie(E,e.target)&&!ze(e,k.onKeyDown)){var t=e.nativeEvent,n=E.selection,r=E.children[null!==n?n.focus.path[0]:0],a=\"rtl\"===d()(l.c.string(r));if(je.isRedo(t)){e.preventDefault();var o=E;return void(\"function\"===typeof o.redo&&o.redo())}if(je.isUndo(t)){e.preventDefault();var i=E;return void(\"function\"===typeof i.undo&&i.undo())}if(je.isMoveLineBackward(t))return e.preventDefault(),void l.h.move(E,{unit:\"line\",reverse:!0});if(je.isMoveLineForward(t))return e.preventDefault(),void l.h.move(E,{unit:\"line\"});if(je.isExtendLineBackward(t))return e.preventDefault(),void l.h.move(E,{unit:\"line\",edge:\"focus\",reverse:!0});if(je.isExtendLineForward(t))return e.preventDefault(),void l.h.move(E,{unit:\"line\",edge:\"focus\"});if(je.isMoveBackward(t))return e.preventDefault(),void(n&&l.f.isCollapsed(n)?l.h.move(E,{reverse:!a}):l.h.collapse(E,{edge:\"start\"}));if(je.isMoveForward(t))return e.preventDefault(),void(n&&l.f.isCollapsed(n)?l.h.move(E,{reverse:a}):l.h.collapse(E,{edge:\"end\"}));if(je.isMoveWordBackward(t))return e.preventDefault(),n&&l.f.isExpanded(n)&&l.h.collapse(E,{edge:\"focus\"}),void l.h.move(E,{unit:\"word\",reverse:!a});if(je.isMoveWordForward(t))return e.preventDefault(),n&&l.f.isExpanded(n)&&l.h.collapse(E,{edge:\"focus\"}),void l.h.move(E,{unit:\"word\",reverse:a});if(ae){if((ee||G)&&n&&(je.isDeleteBackward(t)||je.isDeleteForward(t))&&l.f.isCollapsed(n)){var c=l.c.parent(E,n.anchor.path);if(l.b.isElement(c)&&l.a.isVoid(E,c)&&l.a.isInline(E,c))return e.preventDefault(),void l.h.delete(E,{unit:\"block\"})}}else{if(je.isBold(t)||je.isItalic(t)||je.isTransposeCharacter(t))return void e.preventDefault();if(je.isSplitBlock(t))return e.preventDefault(),void l.a.insertBreak(E);if(je.isDeleteBackward(t))return e.preventDefault(),void(n&&l.f.isExpanded(n)?l.a.deleteFragment(E,{direction:\"backward\"}):l.a.deleteBackward(E));if(je.isDeleteForward(t))return e.preventDefault(),void(n&&l.f.isExpanded(n)?l.a.deleteFragment(E,{direction:\"forward\"}):l.a.deleteForward(E));if(je.isDeleteLineBackward(t))return e.preventDefault(),void(n&&l.f.isExpanded(n)?l.a.deleteFragment(E,{direction:\"backward\"}):l.a.deleteBackward(E,{unit:\"line\"}));if(je.isDeleteLineForward(t))return e.preventDefault(),void(n&&l.f.isExpanded(n)?l.a.deleteFragment(E,{direction:\"forward\"}):l.a.deleteForward(E,{unit:\"line\"}));if(je.isDeleteWordBackward(t))return e.preventDefault(),void(n&&l.f.isExpanded(n)?l.a.deleteFragment(E,{direction:\"backward\"}):l.a.deleteBackward(E,{unit:\"word\"}));if(je.isDeleteWordForward(t))return e.preventDefault(),void(n&&l.f.isExpanded(n)?l.a.deleteFragment(E,{direction:\"forward\"}):l.a.deleteForward(E,{unit:\"word\"}))}}}),[v,k.onKeyDown]),onPaste:Object(s.useCallback)((function(e){v||!Ie(E,e.target)||ze(e,k.onPaste)||ae&&!function(e){return e.clipboardData&&\"\"!==e.clipboardData.getData(\"text/plain\")&&1===e.clipboardData.types.length}(e.nativeEvent)||(e.preventDefault(),He.insertData(E,e.clipboardData))}),[v,k.onPaste])}),be({decorations:A,node:E,renderElement:p,renderPlaceholder:m,renderLeaf:g,selection:E.selection}))))}},398:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return f})),n.d(t,\"b\",(function(){return l}));var r=n(36),a=n(31),o=n(29);function i(e,t){if(void 0===e.inserted[t.name])return e.insert(\"\",t,e.sheet,!0)}function c(e,t,n){var r=[],a=Object(o.a)(e,r,n);return r.length<2?n:a+t(r)}var s=function e(t){for(var n=\"\",r=0;r<t.length;r++){var a=t[r];if(null!=a){var o=void 0;switch(typeof a){case\"boolean\":break;case\"object\":if(Array.isArray(a))o=e(a);else for(var i in o=\"\",a)a[i]&&i&&(o&&(o+=\" \"),o+=i);break;default:o=a}o&&(n&&(n+=\" \"),n+=o)}}return n},u=function(e){var t=Object(r.a)(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Object(a.a)(n,t.registered,void 0);return Object(o.b)(t,i,!1),t.key+\"-\"+i.name};return{css:n,cx:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return c(t.registered,n,s(r))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=Object(a.a)(n,t.registered);i(t,o)},keyframes:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=Object(a.a)(n,t.registered),c=\"animation-\"+o.name;return i(t,{name:o.name,styles:\"@keyframes \"+c+\"{\"+o.styles+\"}\"}),c},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:o.a.bind(null,t.registered),merge:c.bind(null,t.registered,n)}}({key:\"css\"}),l=(u.flush,u.hydrate,u.cx),f=(u.merge,u.getRegisteredStyles,u.injectGlobal,u.keyframes,u.css);u.sheet,u.cache},534:function(e,t,n){\"use strict\";function r(e){return!0===(null!=(t=e)&&\"object\"===typeof t&&!1===Array.isArray(t))&&\"[object Object]\"===Object.prototype.toString.call(e);var t}t.a=function(e){var t,n;return!1!==r(e)&&(\"function\"===typeof(t=e.constructor)&&(!1!==r(n=t.prototype)&&!1!==n.hasOwnProperty(\"isPrototypeOf\")))}},535:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}},588:function(e,t,n){var r=n(765),a=\"object\"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function(\"return this\")();e.exports=o},589:function(e,t,n){var r=n(588).Symbol;e.exports=r},759:function(e,t,n){(function(e,r){var a;!function(o){var i=t,c=(e&&e.exports,\"object\"==typeof r&&r);c.global!==c&&c.window;var s=/([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g,u=/([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])/g,l={version:\"0.2.0\",reverse:function e(t){for(var n=\"\",r=(t=t.replace(s,(function(t,n,r){return e(r)+n})).replace(u,\"$2$1\")).length;r--;)n+=t.charAt(r);return n}};void 0===(a=function(){return l}.call(t,n,t,e))||(e.exports=a)}()}).call(this,n(109)(e),n(60))},760:function(e,t,n){\"use strict\";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&\"object\"==typeof t&&\"object\"==typeof n){if(t.constructor!==n.constructor)return!1;var r,a,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(a=r;0!==a--;)if(!e(t[a],n[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(a=r;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,o[a]))return!1;for(a=r;0!==a--;){var i=o[a];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}},761:function(e,t,n){\"use strict\";e.exports=function(e){if(e=String(e||\"\"),o.test(e))return\"rtl\";if(i.test(e))return\"ltr\";return\"neutral\"};var r=\"\\u0591-\\u07ff\\ufb1d-\\ufdfd\\ufe70-\\ufefc\",a=\"A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02b8\\u0300-\\u0590\\u0800-\\u1fff\\u200e\\u2c00-\\ufb1c\\ufe00-\\ufe6f\\ufefd-\\uffff\",o=new RegExp(\"^[^\"+a+\"]*[\"+r+\"]\"),i=new RegExp(\"^[^\"+r+\"]*[\"+a+\"]\")},762:function(e,t,n){var r=n(763),a=n(535);e.exports=function(e,t,n){var o=!0,i=!0;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");return a(n)&&(o=\"leading\"in n?!!n.leading:o,i=\"trailing\"in n?!!n.trailing:i),r(e,t,{leading:o,maxWait:t,trailing:i})}},763:function(e,t,n){var r=n(535),a=n(764),o=n(766),i=Math.max,c=Math.min;e.exports=function(e,t,n){var s,u,l,f,d,v,h=0,p=!1,g=!1,b=!0;if(\"function\"!=typeof e)throw new TypeError(\"Expected a function\");function m(t){var n=s,r=u;return s=u=void 0,h=t,f=e.apply(r,n)}function y(e){return h=e,d=setTimeout(w,t),p?m(e):f}function O(e){var n=e-v;return void 0===v||n>=t||n<0||g&&e-h>=l}function w(){var e=a();if(O(e))return j(e);d=setTimeout(w,function(e){var n=t-(e-v);return g?c(n,l-(e-h)):n}(e))}function j(e){return d=void 0,b&&s?m(e):(s=u=void 0,f)}function x(){var e=a(),n=O(e);if(s=arguments,u=this,v=e,n){if(void 0===d)return y(v);if(g)return clearTimeout(d),d=setTimeout(w,t),m(v)}return void 0===d&&(d=setTimeout(w,t)),f}return t=o(t)||0,r(n)&&(p=!!n.leading,l=(g=\"maxWait\"in n)?i(o(n.maxWait)||0,t):l,b=\"trailing\"in n?!!n.trailing:b),x.cancel=function(){void 0!==d&&clearTimeout(d),h=0,s=v=u=d=void 0},x.flush=function(){return void 0===d?f:j(a())},x}},764:function(e,t,n){var r=n(588);e.exports=function(){return r.Date.now()}},765:function(e,t,n){(function(t){var n=\"object\"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(60))},766:function(e,t,n){var r=n(767),a=n(535),o=n(769),i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if(\"number\"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t=\"function\"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+\"\":t}if(\"string\"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||s.test(e)?u(e.slice(2),n?2:8):i.test(e)?NaN:+e}},767:function(e,t,n){var r=n(768),a=/^\\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(a,\"\"):e}},768:function(e,t){var n=/\\s/;e.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},769:function(e,t,n){var r=n(770),a=n(773);e.exports=function(e){return\"symbol\"==typeof e||a(e)&&\"[object Symbol]\"==r(e)}},770:function(e,t,n){var r=n(589),a=n(771),o=n(772),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?\"[object Undefined]\":\"[object Null]\":i&&i in Object(e)?a(e):o(e)}},771:function(e,t,n){var r=n(589),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(s){}var a=i.call(e);return r&&(t?e[c]=n:delete e[c]),a}},772:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},773:function(e,t){e.exports=function(e){return null!=e&&\"object\"==typeof e}}}]);","name":"static/js/2.6eb32afc.chunk.js","map":{"version":3,"sources":["static/js/2.6eb32afc.chunk.js"],"names":["this","push","326","module","__webpack_exports__","__webpack_require__","d","Editor","Element","Node","Operation","Path","Range","Text","Transforms","index_es_createEditor","regenerator","regenerator_default","n","toConsumableArray","slicedToArray","defineProperty","createForOfIteratorHelper","index_es","esrever","immer_esm_n","r","arguments","length","t","Array","e","Error","map","join","immer_esm_r","Q","immer_esm_t","Object","getPrototypeOf","hasOwnProperty","call","constructor","Function","toString","Z","isArray","L","immer_esm_s","v","immer_esm_i","immer_esm_o","keys","nn","forEach","i","u","has","prototype","immer_esm_a","get","f","set","delete","add","c","X","Map","q","Set","immer_esm_p","o","l","slice","rn","writable","configurable","enumerable","value","create","immer_esm_d","y","clear","h","freeze","isFrozen","b","tn","immer_esm_","U","j","s","g","O","p","S","w","m","_","P","M","x","H","A","I","k","R","a","D","concat","F","z","getOwnPropertyDescriptor","immer_esm_k","E","N","T","C","en","on","Proxy","revocable","revoke","proxy","J","from","G","W","Symbol","B","Reflect","for","iterator","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","deleteProperty","setPrototypeOf","apply","an","produce","Promise","then","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","K","finishDraft","applyPatches","path","op","$","fn","ln","bind","dn","fast_deep_equal","fast_deep_equal_default","_defineProperty","obj","key","DIRTY_PATHS","WeakMap","FLUSHING","NORMALIZING","PATH_REFS","POINT_REFS","RANGE_REFS","object","enumerableOnly","symbols","filter","sym","_objectSpread","target","source","defineProperties","editor","children","operations","selection","marks","isInline","isVoid","onChange","_step","_iterator","pathRefs","done","ref","PathRef","transform","err","_step2","_iterator2","pointRefs","_ref","PointRef","_step3","_iterator3","rangeRefs","_ref2","RangeRef","_step4","dirtyPaths","oldDirtyPaths","newDirtyPaths","index_es_getDirtyPaths","_iterator4","_step5","_iterator5","normalize","type","resolve","addMark","isExpanded","setNodes","match","isText","split","deleteBackward","unit","isCollapsed","reverse","deleteForward","deleteFragment","direction","getFragment","fragment","insertBreak","splitNodes","always","insertFragment","insertNode","node","insertNodes","insertText","text","inline","above","mode","inlinePath","isEnd","anchor","point","after","setSelection","focus","normalizeNode","entry","_entry","isElement","at","voids","shouldHaveInlines","isEditor","currentNode","_child","prev","isLast","removeNodes","equals","loose","mergeNodes","removeMark","unsetNodes","levels","_path2","descendants","nodes","_ref3","_path3","ancestors","previousPath","previous","_path4","newPath","_step6","oldAncestors","newAncestors","_iterator6","ancestor","_step7","_iterator7","_ancestor","_p","newParent","newIndex","resultPath","_path5","_ancestors","_path6","_levels","nextPath","next","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","SPACE","PUNCTUATION","CHAMELEON","getCharacterDistance","offset","charCode","charCodeAt","isSurrogate","modifier","isModifier","isBMPEmoji","isVariationSelector","getWordDistance","char","started","charAt","rest","isWordCharacter","remaining","test","code","isAncestor","isNodeList","isElementList","every","val","isElementProps","props","undefined","matches","element","ownKeys$1","_objectSpread$1","IS_EDITOR_CACHE","options","_options$voids","_options$mode","_options$at","_step8","_iterator8","_step8$value","_step9","edge","end","range","_options$distance","distance","_iterator9","positions","before","_step10","start","_options$distance2","_iterator10","_options$unit","_options$unit2","_options$direction","edges","first","hasBlocks","some","isBlock","hasInlines","hasTexts","cachedIsEditor","isRange","isOperationList","Point","isEdge","isStart","isEmpty","isNormalizing","last","leaf","mark","_options$at2","_options$reverse","_options$voids2","_iterator11","_step11","_step11$value","_args","wrap","_context","abrupt","t0","finish","delegateYield","stop","_Editor$nodes","_Editor$leaf","block","_prev2","prevNode","prevPath","blockPath","_options$mode2","_options$voids3","_options$at3","pointAfterLocation","_Editor$last","_Editor$last2","to","span","isPath","_Editor$parent","parent","_Editor$parent2","includes","_Editor$nodes3","_Editor$nodes4","_options$at4","_options$mode3","_options$universal","universal","_options$reverse2","_options$voids4","nodeEntries","hit","_iterator12","_step12","_step12$value","isLower","emit","_args2","_context2","Span","isSpan","pass","compare","_options$force","force","getDirtyPaths","allPaths","withoutNormalizing","_step13","_iterator13","dirtyPath","_Editor$node","_Editor$node2","max","_dirtyPath","pop","parentPath","depth","_Node$first","_Node$first2","firstPath","_Node$last","_Node$last2","lastPath","common","isPoint","hasPath","pathRef","_options$affinity","affinity","current","unref","refs","_options$edge","_Node$last3","_Node$last4","_Node$first3","_Node$first4","_Range$edges","_Range$edges2","pointRef","_options$affinity2","_options$at5","_options$unit3","_options$reverse3","reverse$1","_options$voids5","_Range$edges3","_Range$edges4","isNewBlock","blockText","leafTextRemaining","leafTextOffset","_iterator14","_step14","_step14$value","isFirst","calcDistance","_args3","_context3","string","_options$mode4","_options$voids6","_options$at6","pointBeforeLocation","_Editor$first","_Editor$first2","_Editor$parent3","_Editor$parent4","_Editor$nodes5","_Editor$nodes6","rangeRef","_options$affinity3","_step15","_options$voids7","_Range$edges5","_Range$edges6","_iterator15","_step15$value","unhangRange","_options$voids8","_Range$edges7","_Range$edges8","_step16","endBlock","skip","_iterator16","_step16$value","isBefore","void","IS_NODE_LIST_CACHE","root","_iterator17","_step17","_args4","_context4","child","index","JSON","stringify","_options$reverse4","childPath","_args5","_context5","another","descendant","_iterator18","_step18","_step18$value","_args6","_context6","elements","_iterator19","_step19","_step19$value","_args7","_context7","extractProps","_step20","_Range$edges9","_Range$edges10","_iterator20","splice","_leaf","isNode","cachedResult","_iterator21","_step21","_args8","_context8","isTextProps","_options$reverse5","_options$from","visited","nextIndex","_newPath","_args9","_context9","isAfter","texts","_iterator22","_step22","_step22$value","_args10","_context10","ownKeys$2","_objectSpread$2","isNodeOperation","isOperation","endsWith","position","properties","newProperties","isSelectionOperation","isTextOperation","inverse","isSibling","inversePath","inverseNewPath","_properties","_newProperties","_options$reverse6","paths","av","min","Math","endsAfter","as","bs","bv","endsAt","endsBefore","hasPrevious","isChild","isCommon","isDescendant","isParent","_options$reverse7","list","relative","operation","_options$affinity4","_op","_op2","_op3","_position","_op4","onp","copy","ownKeys$3","_objectSpread$3","result","_options$affinity5","ownKeys$4","_options$reverse8","isBackward","_Range$edges11","_Range$edges13","_Range$edges14","rs","re","_Range$edges15","_Range$edges16","ts","te","_Range$edges17","_Range$edges18","isAfterStart","isBeforeEnd","intersection","_Range$edges19","_Range$edges20","s1","e1","_Range$edges21","_Range$edges22","s2","e2","_objectSpread$4","isForward","points","_context11","_Range$edges23","affinityAnchor","affinityFocus","_options$affinity6","ownKeys$5","_objectSpread$5","_options$loose","omitText","isTextList","decorations","_decorations","_step23","leaves","_iterator23","_step24","dec","_Range$edges25","_Range$edges26","_iterator24","assign","middle","off","_off","ownKeys$6","_objectSpread$6","ownKeys$7","_objectSpread$7","NodeTransforms","_options$hanging","hanging","_options$voids9","_options$mode5","select","_nodes","_Range$edges27","_Editor$nodes7","_matchPath","isAtEnd","_step33","_iterator33","_node","_path","liftNodes","_options$at7","_options$mode6","_options$voids10","index_es_matchPath","_i","_pathRefs","parentNodeEntry","_parentNodeEntry","toPath","moveNodes","_toPath","splitPath","_toPath2","_options$at8","_options$hanging2","_options$voids11","_options$mode7","_Editor$parent5","_Range$edges29","_Editor$nodes9","_current","_prev3","commonPath","isPreviousSibling","emptyAncestor","hasSingleChildNest","emptyRef","_options$at9","_options$mode8","_options$voids12","toRef","targets","_i2","_pathRefs2","_options$hanging3","_options$voids13","_options$mode9","_options$at10","depths","_i3","_pathRefs3","_ref4","_Editor$node3","_options$at11","_options$hanging4","_options$mode10","_options$split","_options$voids14","_Range$edges31","_Range$edges32","splitMode","endAtEndOfNode","startAtStartOfNode","_step34","_iterator34","_step34$value","_options$mode11","_options$voids15","_options$at12","_options$height","height","_options$always","index_es_deleteRange","_Editor$parent7","beforeRef","_Editor$nodes11","highest","voidMatch","_voidMatch","voidNode","voidPath","afterPath","_step35","afterRef","highestPath","lowestPath","_iterator35","_step35$value","_point","_point2","_step36","_iterator36","unwrapNodes","_options$mode12","_options$split2","_options$voids16","_options$at13","_loop","_Editor$node5","_i4","_pathRefs4","_ref5","wrapNodes","_options$mode13","_options$split3","_options$voids17","_options$at14","_Range$edges33","_Range$edges34","_i5","_roots","rootPath","commonNodeEntry","commonNode","wrapperPath","wrapper","_Range$edges35","_Editor$node7","ownKeys$8","_objectSpread$8","SelectionTransforms","collapse","_options$edge2","_Range$edges37","_Range$edges38","_Range$edges39","_Range$edges40","deselect","move","_options$distance3","_options$unit4","_options$reverse9","_options$edge3","opts","setPoint","_options$edge4","oldProps","newProps","TextTransforms","_options$reverse10","_options$unit5","_options$distance4","_options$voids18","_options$at15","_options$hanging5","furthestVoid","_Range$edges41","_end","endOfDoc","_Range$edges43","_Range$edges44","startBlock","isAcrossBlocks","isSingleText","startVoid","endVoid","_step37","_iterator37","_entry3","startRef","endRef","_Editor$leaf3","_i6","_pathRefs5","_Editor$leaf5","_node2","_offset","_text","_options$hanging6","_options$voids19","_options$at16","_Range$edges45","inlineElementMatch","_inlinePath","_step38","blockMatch","isBlockStart","isBlockEnd","mergeStart","mergeEnd","_Node$first5","_Node$last5","matcher","_ref16","_iterator38","starts","middles","ends","starting","_i7","_matches2","_Editor$nodes13","inlineMatch","isInlineStart","isInlineEnd","middleRef","_end2","_options$voids20","_options$at17","_at","ownKeys$9","_objectSpread$9","_step25","_iterator25","_step25$value","_step26","_iterator26","_step26$value","_parent","_index","_prev$children","_step27","_iterator27","_step27$value","_node3","_parent2","_index2","truePath","_step28","_iterator28","_step28$value","_point3","_index3","_step29","_iterator29","_step29$value","_point4","_key4","_step30","_prev","_iterator30","_step30$value","_node4","_before","_after","_step31","_iterator31","_step31$value","_point5","_node5","_key6","_key7","_key8","_value","_path7","newNode","_node6","_parent4","_index4","_before2","_after2","_before3","_after3","_step32","_iterator32","_step32$value","_point6","index_es_applyToDraft","362","exports","IS_MAC","window","navigator","platform","MODIFIERS","alt","control","meta","shift","ALIASES","break","cmd","command","ctl","ctrl","del","down","esc","ins","left","mod","opt","option","return","right","space","spacebar","up","win","windows","CODES","backspace","tab","enter","pause","capslock","escape"," ","pageup","pagedown","home","arrowleft","arrowup","arrowright","arrowdown","insert","numlock","scrolllock",";","=",",","-",".","/","`","[","\\","]","'","isHotkey","hotkey","event","array","parseHotkey","check","compareHotkey","byKey","ret","values","replace","_iteratorNormalCompletion","_didIteratorError","_iteratorError","optional","name","toKeyName","which","toKeyCode","expected","actual","toLowerCase","toUpperCase","default","isCodeHotkey","isKeyHotkey","393","matchHtmlRegExp","str","exec","html","lastIndex","substring","394","withHistory","_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__","is_plain_object__WEBPACK_IMPORTED_MODULE_1__","slate__WEBPACK_IMPORTED_MODULE_2__","History","redos","undos","SAVING","MERGING","HistoryEditor","isHistoryEditor","history","isMerging","isSaving","redo","undo","withoutMerging","withoutSaving","batch","inverseOps","lastBatch","lastOp","overwrite","shouldOverwrite","save","merge","shouldSave","shouldMerge","shouldClear","395","jsx","_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__","_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__","_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__","_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","is_plain_object__WEBPACK_IMPORTED_MODULE_5__","slate__WEBPACK_IMPORTED_MODULE_6__","ANCHOR","FOCUS","Token","AnchorToken","_Token","_super","_this","FocusToken","_Token2","_super2","_this2","getFocusOffset","STRINGS","WeakSet","resolveDescendants","addChild","token","addAnchorToken","addFocusToken","flat","Infinity","createElement","tagName","attributes","DEFAULT_CREATORS","cursor","selectionChild","otherChildren","_step3$value","find","createFactory","creators","_len","_key","creator","Boolean","normalizeElements","_options$elements","elementCreators","createHyperscript","397","Editable$1","index_es_Slate","index_es_useSlate","index_es_withReact","classCallCheck","react","react_default","node_modules_direction","direction_default","throttle","throttle_default","nodeType","index_module_e","index_module_n","clientHeight","scrollHeight","clientWidth","scrollWidth","getComputedStyle","overflowY","overflowX","ownerDocument","defaultView","frameElement","index_module_r","index_module","scrollMode","boundary","skipOverflowHiddenElements","TypeError","document","scrollingElement","documentElement","parentElement","body","visualViewport","width","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","getBoundingClientRect","top","bottom","V","Y","parseInt","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","offsetWidth","offsetHeight","scrollLeft","scrollTop","el","isOptionsObject","es","targetIsDetached","contains","behavior","computeOptions","getOptions","actions","canSmoothScroll","style","scroll","defaultBehavior","lib","prefix","tiny_invariant_esm","condition","message","react_dom","react_dom_default","index_es_String","index_es_useSlateStatic","ReactEditor","findPath","index_es_ZeroWidthString","index_es_TextString","isTrailing","isLineBreak","_props$isTrailing","data-slate-string","_props$length","_props$isLineBreak","data-slate-zero-width","data-slate-length","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","ELEMENT_TO_NODE","KEY_TO_ELEMENT","NODE_TO_ELEMENT","NODE_TO_KEY","IS_READ_ONLY","IS_FOCUSED","EDITOR_TO_ON_CHANGE","EDITOR_TO_RESTORE_DOM","PLACEHOLDER_SYMBOL","keyForString","index_es_Leaf","renderPlaceholder","_props$renderLeaf","renderLeaf","index_es_DefaultLeaf","placeholderRef","placeholderEl","editorEl","querySelector","minHeight","placeholderProps","placeholder","data-slate-placeholder","pointerEvents","maxWidth","display","opacity","userSelect","textDecoration","contentEditable","Fragment","data-slate-leaf","MemoizedLeaf","memo","IS_APPLE","userAgent","MSStream","IS_ANDROID","IS_FIREFOX","IS_SAFARI","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_FIREFOX_LEGACY","CAN_USE_DOM","HAS_BEFORE_INPUT_SUPPORT","globalThis","InputEvent","getTargetRanges","useIsomorphicLayoutEffect","shallowCompare","obj1","obj2","index_es_isDecoratorRangeListEqual","other","rangeOwnProps","otherOwnProps","index_es_Text","findKey","id","data-slate-node","MemoizedText","SelectedContext","index_es_Element","_props$renderElement","renderElement","index_es_DefaultElement","readOnly","index_es_useReadOnly","index_es_useChildren","dir","Tag","_Node$texts","_Node$texts2","data-slate-spacer","color","outline","Provider","MemoizedElement","EditorContext","DecorateContext","decorate","isLeafBlock","sel","ds","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","extendBackward","extendForward","italic","splitBlock","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","transposeCharacter","WINDOWS_HOTKEYS","index_es_create","generic","apple","isGeneric","isApple","isWindows","Hotkeys","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSplitBlock","isTransposeCharacter","isUndo","ReadOnlyContext","SlateContext","context","getDefaultView","isDOMElement","isDOMNode","isDOMSelection","anchorNode","Selection","isDOMText","getEditableChildAndIndex","childNodes","triedForward","triedBackward","getAttribute","index_es_getEditableChild","_getEditableChildAndI3","getPlainText","domNode","nodeValue","_Array$from","getPropertyValue","index_es_DefaultPlaceholder","defaultDecorate","hasTarget","hasDOMNode","hasEditableTarget","editable","index_es_isTargetInsideVoid","slateNode","toSlateNode","isEventHandled","handler","shouldTreatEventAsHandled","isDefaultPrevented","isPropagationStopped","isDOMEventHandled","defaultPrevented","index_es_n","index_es_Key","Key","getWindow","unshift","findDocumentOrShadowRoot","toDOMNode","getRootNode","Document","ShadowRoot","getSelection","isFocused","isReadOnly","blur","activeElement","preventScroll","domSelection","rangeCount","removeAllRanges","targetEl","_options$editable","closest","isContentEditable","insertData","data","setFragmentData","toDOMPoint","domPoint","_texts","querySelectorAll","textContent","attr","toDOMRange","domAnchor","domFocus","domRange","createRange","_ref8","_ref9","startNode","startOffset","_ref10","_ref11","endNode","endOffset","isStartAtZeroWidth","isEndAtZeroWidth","setStart","setEnd","domEl","hasAttribute","findEventRange","nativeEvent","_event","clientX","clientY","rect","isPrev","caretRangeFromPoint","caretPositionFromPoint","offsetNode","toSlateRange","exactMatch","toSlatePoint","_ref12","_domPoint","_getEditableChildAndI","_getEditableChildAndI2","index_es_normalizeDOMPoint","_ref13","nearestNode","nearestOffset","parentNode","textNode","leafNode","contents","cloneContents","removeChild","anchorOffset","focusNode","focusOffset","startContainer","shadowRoot","endContainer","collapsed","hasRange","getDiffOffsets","getDiffStart","prevLength","nextLength","getDiffEnd","sliceText","offsets","getTextInsertion","prevText","nextText","textDiff","removeText","diffText","normalizeTextInsertionRange","insertionRange","_Array$from2","characterBeforeAnchor","characterAfterAnchor","restoreDOM","onRestoreDOM","console","error","index_es_AndroidInputManager","AndroidInputManager","flush","mutations","reconcileMutations","mutationData","addedNodes","removedNodes","insertedText","characterDataMutations","mutation","addedNode","removedNode","textInsertion","gatherMutationData","index_es_isReplaceExpandedSelection","reduce","acc","combineInsertedText","replaceExpandedSelection","parentDOMNode","HTMLElement","index_es_isLineBreak","_ref7","isRemoveLeafNodes","removeLeafNodes","insertion","setTimeout","MUTATION_OBSERVER_CONFIG","childList","characterData","characterDataOldValue","subtree","useAndroidInputManager","_useState3","inputManager","_useTrackUserInput","receivedUserInput","animationFrameRef","onUserInput","cancelAnimationFrame","requestAnimationFrame","useTrackUserInput","timeoutId","isReconciling","callback","_useState","MutationObserver","mutationObserver","disconnect","observe","useMutationObserver","clearTimeout","FocusedContext","_useState7","_useState8","setKey","onContextChange","_useState9","_useState10","setIsFocused","addEventListener","removeEventListener","doRectsIntersect","compareRect","areRangesSameLine","range1","range2","rect1","rect2","parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","parentRange","parentRangeBoundary","floor","index_es_findCurrentLineRange","_step4$value","_step5$value","_key2","_matches","_matches$_i","_key3","attach","trim","cloneRange","setEndAfter","zw","isNewline","whiteSpace","appendChild","encoded","btoa","encodeURIComponent","setAttribute","setData","div","innerHTML","getData","decoded","decodeURIComponent","atob","parsed","parse","lines","line","unstable_batchedUpdates","autoFocus","_props$decorate2","propsOnDOMBeforeInput","onDOMBeforeInput","_props$readOnly2","_props$renderPlacehol2","_props$style2","_props$as2","Component","state","isUpdatingSelection","latestElement","_useState5","_useState6","contentKey","setContentKey","hasDomSelection","editorElement","hasDomSelectionInEditor","slateRange","newDomRange","setBaseAndExtent","leafEl","_unused","onDOMSelectionChange","anchorNodeSelectable","focusNodeSelectable","_unused2","_decorations$push2","role","spellCheck","autoCorrect","autoCapitalize","data-slate-editor","suppressContentEditableWarning","wordWrap","onCopy","preventDefault","clipboardData","onCut","onFocus","onBlur","relatedTarget","onPaste","_props$decorate","_props$readOnly","_props$renderPlacehol","_props$style","_props$as","isComposing","isDraggingInternally","inputType","dataTransfer","startsWith","_event$getTargetRange","targetRange","DataTransfer","_decorations$push","data-gramm","onBeforeInput","onClick","_start","onCompositionEnd","onCompositionUpdate","onCompositionStart","onDragOver","onDragStart","onDrop","draggedRange","onDragEnd","onKeyDown","isRTL","maybeHistoryEditor","_maybeHistoryEditor","types","isPlainTextOnlyPaste","398","emotion_css_esm_css","emotion_css_esm_cx","emotion_cache_browser_esm","emotion_serialize_browser_esm","emotion_utils_browser_esm","insertWithoutScoping","cache","serialized","inserted","sheet","registered","css","className","registeredStyles","rawClassName","classnames","args","cls","arg","toAdd","_createEmotion","speedy","isSpeedy","compat","cx","_len4","injectGlobal","_len3","keyframes","_len2","animation","styles","hydrate","ids","getRegisteredStyles","emotion_css_create_instance_esm","534","isObjectObject","ctor","prot","535","588","freeGlobal","freeSelf","self","589","759","global","__WEBPACK_AMD_DEFINE_RESULT__","freeExports","regexSymbolWithCombiningMarks","regexSurrogatePair","version","$0","$1","$2","760","equal","RegExp","flags","valueOf","761","String","rtl","ltr","RTL","LTR","762","debounce","isObject","func","wait","leading","trailing","maxWait","763","now","toNumber","nativeMax","nativeMin","lastArgs","lastThis","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","time","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","cancel","764","Date","765","766","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","767","trimmedEndIndex","reTrimStart","768","reWhitespace","769","baseGetTag","isObjectLike","770","getRawTag","objectToString","symToStringTag","toStringTag","771","objectProto","nativeObjectToString","isOwn","tag","unmasked","772","773"],"mappings":"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"},"input":"(this[\"webpackJsonpcodefluent\"] = this[\"webpackJsonpcodefluent\"] || []).push([[2],{\n\n/***/ 326:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ Editor; });\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* binding */ Element; });\n__webpack_require__.d(__webpack_exports__, \"c\", function() { return /* binding */ Node; });\n__webpack_require__.d(__webpack_exports__, \"d\", function() { return /* binding */ Operation; });\n__webpack_require__.d(__webpack_exports__, \"e\", function() { return /* binding */ Path; });\n__webpack_require__.d(__webpack_exports__, \"f\", function() { return /* binding */ Range; });\n__webpack_require__.d(__webpack_exports__, \"g\", function() { return /* binding */ Text; });\n__webpack_require__.d(__webpack_exports__, \"h\", function() { return /* binding */ Transforms; });\n__webpack_require__.d(__webpack_exports__, \"i\", function() { return /* binding */ index_es_createEditor; });\n\n// UNUSED EXPORTS: Location, PathRef, Point, PointRef, RangeRef, Span\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(178);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(180);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(59);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(423);\n\n// EXTERNAL MODULE: ./node_modules/is-plain-object/index.es.js\nvar index_es = __webpack_require__(534);\n\n// EXTERNAL MODULE: ./node_modules/esrever/esrever.js\nvar esrever = __webpack_require__(759);\n\n// CONCATENATED MODULE: ./node_modules/slate/node_modules/immer/dist/immer.esm.js\nfunction immer_esm_n(n) {\n  for (var r = arguments.length, t = Array(r > 1 ? r - 1 : 0), e = 1; e < r; e++) {\n    t[e - 1] = arguments[e];\n  }\n\n  if (false) { var i, o; }\n\n  throw Error(\"[Immer] minified error nr: \" + n + (t.length ? \" \" + t.map(function (n) {\n    return \"'\" + n + \"'\";\n  }).join(\",\") : \"\") + \". Find the full error at: https://bit.ly/3cXEKWf\");\n}\n\nfunction immer_esm_r(n) {\n  return !!n && !!n[Q];\n}\n\nfunction immer_esm_t(n) {\n  return !!n && (function (n) {\n    if (!n || \"object\" != typeof n) return !1;\n    var r = Object.getPrototypeOf(n);\n    if (null === r) return !0;\n    var t = Object.hasOwnProperty.call(r, \"constructor\") && r.constructor;\n    return \"function\" == typeof t && Function.toString.call(t) === Z;\n  }(n) || Array.isArray(n) || !!n[L] || !!n.constructor[L] || immer_esm_s(n) || v(n));\n}\n\nfunction immer_esm_e(t) {\n  return immer_esm_r(t) || immer_esm_n(23, t), t[Q].t;\n}\n\nfunction immer_esm_i(n, r, t) {\n  void 0 === t && (t = !1), 0 === immer_esm_o(n) ? (t ? Object.keys : nn)(n).forEach(function (e) {\n    t && \"symbol\" == typeof e || r(e, n[e], n);\n  }) : n.forEach(function (t, e) {\n    return r(e, t, n);\n  });\n}\n\nfunction immer_esm_o(n) {\n  var r = n[Q];\n  return r ? r.i > 3 ? r.i - 4 : r.i : Array.isArray(n) ? 1 : immer_esm_s(n) ? 2 : v(n) ? 3 : 0;\n}\n\nfunction u(n, r) {\n  return 2 === immer_esm_o(n) ? n.has(r) : Object.prototype.hasOwnProperty.call(n, r);\n}\n\nfunction immer_esm_a(n, r) {\n  return 2 === immer_esm_o(n) ? n.get(r) : n[r];\n}\n\nfunction f(n, r, t) {\n  var e = immer_esm_o(n);\n  2 === e ? n.set(r, t) : 3 === e ? (n.delete(r), n.add(t)) : n[r] = t;\n}\n\nfunction c(n, r) {\n  return n === r ? 0 !== n || 1 / n == 1 / r : n != n && r != r;\n}\n\nfunction immer_esm_s(n) {\n  return X && n instanceof Map;\n}\n\nfunction v(n) {\n  return q && n instanceof Set;\n}\n\nfunction immer_esm_p(n) {\n  return n.o || n.t;\n}\n\nfunction l(n) {\n  if (Array.isArray(n)) return Array.prototype.slice.call(n);\n  var r = rn(n);\n  delete r[Q];\n\n  for (var t = nn(r), e = 0; e < t.length; e++) {\n    var i = t[e],\n        o = r[i];\n    !1 === o.writable && (o.writable = !0, o.configurable = !0), (o.get || o.set) && (r[i] = {\n      configurable: !0,\n      writable: !0,\n      enumerable: o.enumerable,\n      value: n[i]\n    });\n  }\n\n  return Object.create(Object.getPrototypeOf(n), r);\n}\n\nfunction immer_esm_d(n, e) {\n  return void 0 === e && (e = !1), y(n) || immer_esm_r(n) || !immer_esm_t(n) ? n : (immer_esm_o(n) > 1 && (n.set = n.add = n.clear = n.delete = h), Object.freeze(n), e && immer_esm_i(n, function (n, r) {\n    return immer_esm_d(r, !0);\n  }, !0), n);\n}\n\nfunction h() {\n  immer_esm_n(2);\n}\n\nfunction y(n) {\n  return null == n || \"object\" != typeof n || Object.isFrozen(n);\n}\n\nfunction b(r) {\n  var t = tn[r];\n  return t || immer_esm_n(18, r), t;\n}\n\nfunction immer_esm_m(n, r) {\n  tn[n] || (tn[n] = r);\n}\n\nfunction immer_esm_() {\n  return  true || false, U;\n}\n\nfunction j(n, r) {\n  r && (b(\"Patches\"), n.u = [], n.s = [], n.v = r);\n}\n\nfunction g(n) {\n  O(n), n.p.forEach(S), n.p = null;\n}\n\nfunction O(n) {\n  n === U && (U = n.l);\n}\n\nfunction w(n) {\n  return U = {\n    p: [],\n    l: U,\n    h: n,\n    m: !0,\n    _: 0\n  };\n}\n\nfunction S(n) {\n  var r = n[Q];\n  0 === r.i || 1 === r.i ? r.j() : r.g = !0;\n}\n\nfunction P(r, e) {\n  e._ = e.p.length;\n  var i = e.p[0],\n      o = void 0 !== r && r !== i;\n  return e.h.O || b(\"ES5\").S(e, r, o), o ? (i[Q].P && (g(e), immer_esm_n(4)), immer_esm_t(r) && (r = M(e, r), e.l || x(e, r)), e.u && b(\"Patches\").M(i[Q], r, e.u, e.s)) : r = M(e, i, []), g(e), e.u && e.v(e.u, e.s), r !== H ? r : void 0;\n}\n\nfunction M(n, r, t) {\n  if (y(r)) return r;\n  var e = r[Q];\n  if (!e) return immer_esm_i(r, function (i, o) {\n    return A(n, e, r, i, o, t);\n  }, !0), r;\n  if (e.A !== n) return r;\n  if (!e.P) return x(n, e.t, !0), e.t;\n\n  if (!e.I) {\n    e.I = !0, e.A._--;\n    var o = 4 === e.i || 5 === e.i ? e.o = l(e.k) : e.o;\n    immer_esm_i(3 === e.i ? new Set(o) : o, function (r, i) {\n      return A(n, e, o, r, i, t);\n    }), x(n, o, !1), t && n.u && b(\"Patches\").R(e, t, n.u, n.s);\n  }\n\n  return e.o;\n}\n\nfunction A(e, i, o, a, c, s) {\n  if ( false && false, immer_esm_r(c)) {\n    var v = M(e, c, s && i && 3 !== i.i && !u(i.D, a) ? s.concat(a) : void 0);\n    if (f(o, a, v), !immer_esm_r(v)) return;\n    e.m = !1;\n  }\n\n  if (immer_esm_t(c) && !y(c)) {\n    if (!e.h.F && e._ < 1) return;\n    M(e, c), i && i.A.l || x(e, c);\n  }\n}\n\nfunction x(n, r, t) {\n  void 0 === t && (t = !1), n.h.F && n.m && immer_esm_d(r, t);\n}\n\nfunction z(n, r) {\n  var t = n[Q];\n  return (t ? immer_esm_p(t) : n)[r];\n}\n\nfunction I(n, r) {\n  if (r in n) for (var t = Object.getPrototypeOf(n); t;) {\n    var e = Object.getOwnPropertyDescriptor(t, r);\n    if (e) return e;\n    t = Object.getPrototypeOf(t);\n  }\n}\n\nfunction immer_esm_k(n) {\n  n.P || (n.P = !0, n.l && immer_esm_k(n.l));\n}\n\nfunction E(n) {\n  n.o || (n.o = l(n.t));\n}\n\nfunction R(n, r, t) {\n  var e = immer_esm_s(r) ? b(\"MapSet\").N(r, t) : v(r) ? b(\"MapSet\").T(r, t) : n.O ? function (n, r) {\n    var t = Array.isArray(n),\n        e = {\n      i: t ? 1 : 0,\n      A: r ? r.A : immer_esm_(),\n      P: !1,\n      I: !1,\n      D: {},\n      l: r,\n      t: n,\n      k: null,\n      o: null,\n      j: null,\n      C: !1\n    },\n        i = e,\n        o = en;\n    t && (i = [e], o = on);\n    var u = Proxy.revocable(i, o),\n        a = u.revoke,\n        f = u.proxy;\n    return e.k = f, e.j = a, f;\n  }(r, t) : b(\"ES5\").J(r, t);\n  return (t ? t.A : immer_esm_()).p.push(e), e;\n}\n\nfunction D(e) {\n  return immer_esm_r(e) || immer_esm_n(22, e), function n(r) {\n    if (!immer_esm_t(r)) return r;\n    var e,\n        u = r[Q],\n        c = immer_esm_o(r);\n\n    if (u) {\n      if (!u.P && (u.i < 4 || !b(\"ES5\").K(u))) return u.t;\n      u.I = !0, e = F(r, c), u.I = !1;\n    } else e = F(r, c);\n\n    return immer_esm_i(e, function (r, t) {\n      u && immer_esm_a(u.t, r) === t || f(e, r, n(t));\n    }), 3 === c ? new Set(e) : e;\n  }(e);\n}\n\nfunction F(n, r) {\n  switch (r) {\n    case 2:\n      return new Map(n);\n\n    case 3:\n      return Array.from(n);\n  }\n\n  return l(n);\n}\n\nfunction N() {\n  function t(n, r) {\n    var t = s[n];\n    return t ? t.enumerable = r : s[n] = t = {\n      configurable: !0,\n      enumerable: r,\n      get: function get() {\n        var r = this[Q];\n        return  false && false, en.get(r, n);\n      },\n      set: function set(r) {\n        var t = this[Q];\n         false && false, en.set(t, n, r);\n      }\n    }, t;\n  }\n\n  function e(n) {\n    for (var r = n.length - 1; r >= 0; r--) {\n      var t = n[r][Q];\n      if (!t.P) switch (t.i) {\n        case 5:\n          a(t) && immer_esm_k(t);\n          break;\n\n        case 4:\n          o(t) && immer_esm_k(t);\n      }\n    }\n  }\n\n  function o(n) {\n    for (var r = n.t, t = n.k, e = nn(t), i = e.length - 1; i >= 0; i--) {\n      var o = e[i];\n\n      if (o !== Q) {\n        var a = r[o];\n        if (void 0 === a && !u(r, o)) return !0;\n        var f = t[o],\n            s = f && f[Q];\n        if (s ? s.t !== a : !c(f, a)) return !0;\n      }\n    }\n\n    var v = !!r[Q];\n    return e.length !== nn(r).length + (v ? 0 : 1);\n  }\n\n  function a(n) {\n    var r = n.k;\n    if (r.length !== n.t.length) return !0;\n    var t = Object.getOwnPropertyDescriptor(r, r.length - 1);\n    return !(!t || t.get);\n  }\n\n  function f(r) {\n    r.g && immer_esm_n(3, JSON.stringify(immer_esm_p(r)));\n  }\n\n  var s = {};\n  immer_esm_m(\"ES5\", {\n    J: function J(n, r) {\n      var e = Array.isArray(n),\n          i = function (n, r) {\n        if (n) {\n          for (var e = Array(r.length), i = 0; i < r.length; i++) {\n            Object.defineProperty(e, \"\" + i, t(i, !0));\n          }\n\n          return e;\n        }\n\n        var o = rn(r);\n        delete o[Q];\n\n        for (var u = nn(o), a = 0; a < u.length; a++) {\n          var f = u[a];\n          o[f] = t(f, n || !!o[f].enumerable);\n        }\n\n        return Object.create(Object.getPrototypeOf(r), o);\n      }(e, n),\n          o = {\n        i: e ? 5 : 4,\n        A: r ? r.A : immer_esm_(),\n        P: !1,\n        I: !1,\n        D: {},\n        l: r,\n        t: n,\n        k: i,\n        o: null,\n        g: !1,\n        C: !1\n      };\n\n      return Object.defineProperty(i, Q, {\n        value: o,\n        writable: !0\n      }), i;\n    },\n    S: function S(n, t, o) {\n      o ? immer_esm_r(t) && t[Q].A === n && e(n.p) : (n.u && function n(r) {\n        if (r && \"object\" == typeof r) {\n          var t = r[Q];\n\n          if (t) {\n            var e = t.t,\n                o = t.k,\n                f = t.D,\n                c = t.i;\n            if (4 === c) immer_esm_i(o, function (r) {\n              r !== Q && (void 0 !== e[r] || u(e, r) ? f[r] || n(o[r]) : (f[r] = !0, immer_esm_k(t)));\n            }), immer_esm_i(e, function (n) {\n              void 0 !== o[n] || u(o, n) || (f[n] = !1, immer_esm_k(t));\n            });else if (5 === c) {\n              if (a(t) && (immer_esm_k(t), f.length = !0), o.length < e.length) for (var s = o.length; s < e.length; s++) {\n                f[s] = !1;\n              } else for (var v = e.length; v < o.length; v++) {\n                f[v] = !0;\n              }\n\n              for (var p = Math.min(o.length, e.length), l = 0; l < p; l++) {\n                void 0 === f[l] && n(o[l]);\n              }\n            }\n          }\n        }\n      }(n.p[0]), e(n.p));\n    },\n    K: function K(n) {\n      return 4 === n.i ? o(n) : a(n);\n    }\n  });\n}\n\nfunction T() {\n  function e(n) {\n    if (!immer_esm_t(n)) return n;\n    if (Array.isArray(n)) return n.map(e);\n    if (immer_esm_s(n)) return new Map(Array.from(n.entries()).map(function (n) {\n      return [n[0], e(n[1])];\n    }));\n    if (v(n)) return new Set(Array.from(n).map(e));\n    var r = Object.create(Object.getPrototypeOf(n));\n\n    for (var i in n) {\n      r[i] = e(n[i]);\n    }\n\n    return r;\n  }\n\n  function f(n) {\n    return immer_esm_r(n) ? e(n) : n;\n  }\n\n  var c = \"add\";\n  immer_esm_m(\"Patches\", {\n    $: function $(r, t) {\n      return t.forEach(function (t) {\n        for (var i = t.path, u = t.op, f = r, s = 0; s < i.length - 1; s++) {\n          var v = immer_esm_o(f),\n              p = i[s];\n          0 !== v && 1 !== v || \"__proto__\" !== p && \"constructor\" !== p || immer_esm_n(24), \"function\" == typeof f && \"prototype\" === p && immer_esm_n(24), \"object\" != typeof (f = immer_esm_a(f, p)) && immer_esm_n(15, i.join(\"/\"));\n        }\n\n        var l = immer_esm_o(f),\n            d = e(t.value),\n            h = i[i.length - 1];\n\n        switch (u) {\n          case \"replace\":\n            switch (l) {\n              case 2:\n                return f.set(h, d);\n\n              case 3:\n                immer_esm_n(16);\n\n              default:\n                return f[h] = d;\n            }\n\n          case c:\n            switch (l) {\n              case 1:\n                return f.splice(h, 0, d);\n\n              case 2:\n                return f.set(h, d);\n\n              case 3:\n                return f.add(d);\n\n              default:\n                return f[h] = d;\n            }\n\n          case \"remove\":\n            switch (l) {\n              case 1:\n                return f.splice(h, 1);\n\n              case 2:\n                return f.delete(h);\n\n              case 3:\n                return f.delete(t.value);\n\n              default:\n                return delete f[h];\n            }\n\n          default:\n            immer_esm_n(17, u);\n        }\n      }), r;\n    },\n    R: function R(n, r, t, e) {\n      switch (n.i) {\n        case 0:\n        case 4:\n        case 2:\n          return function (n, r, t, e) {\n            var o = n.t,\n                s = n.o;\n            immer_esm_i(n.D, function (n, i) {\n              var v = immer_esm_a(o, n),\n                  p = immer_esm_a(s, n),\n                  l = i ? u(o, n) ? \"replace\" : c : \"remove\";\n\n              if (v !== p || \"replace\" !== l) {\n                var d = r.concat(n);\n                t.push(\"remove\" === l ? {\n                  op: l,\n                  path: d\n                } : {\n                  op: l,\n                  path: d,\n                  value: p\n                }), e.push(l === c ? {\n                  op: \"remove\",\n                  path: d\n                } : \"remove\" === l ? {\n                  op: c,\n                  path: d,\n                  value: f(v)\n                } : {\n                  op: \"replace\",\n                  path: d,\n                  value: f(v)\n                });\n              }\n            });\n          }(n, r, t, e);\n\n        case 5:\n        case 1:\n          return function (n, r, t, e) {\n            var i = n.t,\n                o = n.D,\n                u = n.o;\n\n            if (u.length < i.length) {\n              var a = [u, i];\n              i = a[0], u = a[1];\n              var s = [e, t];\n              t = s[0], e = s[1];\n            }\n\n            for (var v = 0; v < i.length; v++) {\n              if (o[v] && u[v] !== i[v]) {\n                var p = r.concat([v]);\n                t.push({\n                  op: \"replace\",\n                  path: p,\n                  value: f(u[v])\n                }), e.push({\n                  op: \"replace\",\n                  path: p,\n                  value: f(i[v])\n                });\n              }\n            }\n\n            for (var l = i.length; l < u.length; l++) {\n              var d = r.concat([l]);\n              t.push({\n                op: c,\n                path: d,\n                value: f(u[l])\n              });\n            }\n\n            i.length < u.length && e.push({\n              op: \"replace\",\n              path: r.concat([\"length\"]),\n              value: i.length\n            });\n          }(n, r, t, e);\n\n        case 3:\n          return function (n, r, t, e) {\n            var i = n.t,\n                o = n.o,\n                u = 0;\n            i.forEach(function (n) {\n              if (!o.has(n)) {\n                var i = r.concat([u]);\n                t.push({\n                  op: \"remove\",\n                  path: i,\n                  value: n\n                }), e.unshift({\n                  op: c,\n                  path: i,\n                  value: n\n                });\n              }\n\n              u++;\n            }), u = 0, o.forEach(function (n) {\n              if (!i.has(n)) {\n                var o = r.concat([u]);\n                t.push({\n                  op: c,\n                  path: o,\n                  value: n\n                }), e.unshift({\n                  op: \"remove\",\n                  path: o,\n                  value: n\n                });\n              }\n\n              u++;\n            });\n          }(n, r, t, e);\n      }\n    },\n    M: function M(n, r, t, e) {\n      t.push({\n        op: \"replace\",\n        path: [],\n        value: r\n      }), e.push({\n        op: \"replace\",\n        path: [],\n        value: n.t\n      });\n    }\n  });\n}\n\nfunction C() {\n  function r(n, r) {\n    function t() {\n      this.constructor = n;\n    }\n\n    _a(n, r), n.prototype = (t.prototype = r.prototype, new t());\n  }\n\n  function e(n) {\n    n.o || (n.D = new Map(), n.o = new Map(n.t));\n  }\n\n  function o(n) {\n    n.o || (n.o = new Set(), n.t.forEach(function (r) {\n      if (immer_esm_t(r)) {\n        var e = R(n.A.h, r, n);\n        n.p.set(r, e), n.o.add(e);\n      } else n.o.add(r);\n    }));\n  }\n\n  function u(r) {\n    r.g && immer_esm_n(3, JSON.stringify(immer_esm_p(r)));\n  }\n\n  var _a = function a(n, r) {\n    return (_a = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (n, r) {\n      n.__proto__ = r;\n    } || function (n, r) {\n      for (var t in r) {\n        r.hasOwnProperty(t) && (n[t] = r[t]);\n      }\n    })(n, r);\n  },\n      f = function () {\n    function n(n, r) {\n      return this[Q] = {\n        i: 2,\n        l: r,\n        A: r ? r.A : immer_esm_(),\n        P: !1,\n        I: !1,\n        o: void 0,\n        D: void 0,\n        t: n,\n        k: this,\n        C: !1,\n        g: !1\n      }, this;\n    }\n\n    r(n, Map);\n    var o = n.prototype;\n    return Object.defineProperty(o, \"size\", {\n      get: function get() {\n        return immer_esm_p(this[Q]).size;\n      }\n    }), o.has = function (n) {\n      return immer_esm_p(this[Q]).has(n);\n    }, o.set = function (n, r) {\n      var t = this[Q];\n      return u(t), immer_esm_p(t).has(n) && immer_esm_p(t).get(n) === r || (e(t), immer_esm_k(t), t.D.set(n, !0), t.o.set(n, r), t.D.set(n, !0)), this;\n    }, o.delete = function (n) {\n      if (!this.has(n)) return !1;\n      var r = this[Q];\n      return u(r), e(r), immer_esm_k(r), r.D.set(n, !1), r.o.delete(n), !0;\n    }, o.clear = function () {\n      var n = this[Q];\n      u(n), immer_esm_p(n).size && (e(n), immer_esm_k(n), n.D = new Map(), immer_esm_i(n.t, function (r) {\n        n.D.set(r, !1);\n      }), n.o.clear());\n    }, o.forEach = function (n, r) {\n      var t = this;\n      immer_esm_p(this[Q]).forEach(function (e, i) {\n        n.call(r, t.get(i), i, t);\n      });\n    }, o.get = function (n) {\n      var r = this[Q];\n      u(r);\n      var i = immer_esm_p(r).get(n);\n      if (r.I || !immer_esm_t(i)) return i;\n      if (i !== r.t.get(n)) return i;\n      var o = R(r.A.h, i, r);\n      return e(r), r.o.set(n, o), o;\n    }, o.keys = function () {\n      return immer_esm_p(this[Q]).keys();\n    }, o.values = function () {\n      var n,\n          r = this,\n          t = this.keys();\n      return (n = {})[V] = function () {\n        return r.values();\n      }, n.next = function () {\n        var n = t.next();\n        return n.done ? n : {\n          done: !1,\n          value: r.get(n.value)\n        };\n      }, n;\n    }, o.entries = function () {\n      var n,\n          r = this,\n          t = this.keys();\n      return (n = {})[V] = function () {\n        return r.entries();\n      }, n.next = function () {\n        var n = t.next();\n        if (n.done) return n;\n        var e = r.get(n.value);\n        return {\n          done: !1,\n          value: [n.value, e]\n        };\n      }, n;\n    }, o[V] = function () {\n      return this.entries();\n    }, n;\n  }(),\n      c = function () {\n    function n(n, r) {\n      return this[Q] = {\n        i: 3,\n        l: r,\n        A: r ? r.A : immer_esm_(),\n        P: !1,\n        I: !1,\n        o: void 0,\n        t: n,\n        k: this,\n        p: new Map(),\n        g: !1,\n        C: !1\n      }, this;\n    }\n\n    r(n, Set);\n    var t = n.prototype;\n    return Object.defineProperty(t, \"size\", {\n      get: function get() {\n        return immer_esm_p(this[Q]).size;\n      }\n    }), t.has = function (n) {\n      var r = this[Q];\n      return u(r), r.o ? !!r.o.has(n) || !(!r.p.has(n) || !r.o.has(r.p.get(n))) : r.t.has(n);\n    }, t.add = function (n) {\n      var r = this[Q];\n      return u(r), this.has(n) || (o(r), immer_esm_k(r), r.o.add(n)), this;\n    }, t.delete = function (n) {\n      if (!this.has(n)) return !1;\n      var r = this[Q];\n      return u(r), o(r), immer_esm_k(r), r.o.delete(n) || !!r.p.has(n) && r.o.delete(r.p.get(n));\n    }, t.clear = function () {\n      var n = this[Q];\n      u(n), immer_esm_p(n).size && (o(n), immer_esm_k(n), n.o.clear());\n    }, t.values = function () {\n      var n = this[Q];\n      return u(n), o(n), n.o.values();\n    }, t.entries = function () {\n      var n = this[Q];\n      return u(n), o(n), n.o.entries();\n    }, t.keys = function () {\n      return this.values();\n    }, t[V] = function () {\n      return this.values();\n    }, t.forEach = function (n, r) {\n      for (var t = this.values(), e = t.next(); !e.done;) {\n        n.call(r, e.value, e.value, this), e = t.next();\n      }\n    }, n;\n  }();\n\n  immer_esm_m(\"MapSet\", {\n    N: function N(n, r) {\n      return new f(n, r);\n    },\n    T: function T(n, r) {\n      return new c(n, r);\n    }\n  });\n}\n\nfunction J() {\n  N(), C(), T();\n}\n\nfunction K(n) {\n  return n;\n}\n\nfunction $(n) {\n  return n;\n}\n\nvar G,\n    U,\n    W = \"undefined\" != typeof Symbol && \"symbol\" == typeof Symbol(\"x\"),\n    X = \"undefined\" != typeof Map,\n    q = \"undefined\" != typeof Set,\n    B = \"undefined\" != typeof Proxy && void 0 !== Proxy.revocable && \"undefined\" != typeof Reflect,\n    H = W ? Symbol.for(\"immer-nothing\") : ((G = {})[\"immer-nothing\"] = !0, G),\n    L = W ? Symbol.for(\"immer-draftable\") : \"__$immer_draftable\",\n    Q = W ? Symbol.for(\"immer-state\") : \"__$immer_state\",\n    V = \"undefined\" != typeof Symbol && Symbol.iterator || \"@@iterator\",\n    Y = {\n  0: \"Illegal state\",\n  1: \"Immer drafts cannot have computed properties\",\n  2: \"This object has been frozen and should not be mutated\",\n  3: function _(n) {\n    return \"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" + n;\n  },\n  4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n  5: \"Immer forbids circular references\",\n  6: \"The first or second argument to `produce` must be a function\",\n  7: \"The third argument to `produce` must be a function or undefined\",\n  8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n  9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n  10: \"The given draft is already finalized\",\n  11: \"Object.defineProperty() cannot be used on an Immer draft\",\n  12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n  13: \"Immer only supports deleting array indices\",\n  14: \"Immer only supports setting array indices and the 'length' property\",\n  15: function _(n) {\n    return \"Cannot apply patch, path doesn't resolve: \" + n;\n  },\n  16: 'Sets cannot have \"replace\" patches.',\n  17: function _(n) {\n    return \"Unsupported patch operation: \" + n;\n  },\n  18: function _(n) {\n    return \"The plugin for '\" + n + \"' has not been loaded into Immer. To enable the plugin, import and call `enable\" + n + \"()` when initializing your application.\";\n  },\n  20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n  21: function _(n) {\n    return \"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\" + n + \"'\";\n  },\n  22: function _(n) {\n    return \"'current' expects a draft, got: \" + n;\n  },\n  23: function _(n) {\n    return \"'original' expects a draft, got: \" + n;\n  },\n  24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n},\n    Z = \"\" + Object.prototype.constructor,\n    nn = \"undefined\" != typeof Reflect && Reflect.ownKeys ? Reflect.ownKeys : void 0 !== Object.getOwnPropertySymbols ? function (n) {\n  return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n));\n} : Object.getOwnPropertyNames,\n    rn = Object.getOwnPropertyDescriptors || function (n) {\n  var r = {};\n  return nn(n).forEach(function (t) {\n    r[t] = Object.getOwnPropertyDescriptor(n, t);\n  }), r;\n},\n    tn = {},\n    en = {\n  get: function get(n, r) {\n    if (r === Q) return n;\n    var e = immer_esm_p(n);\n    if (!u(e, r)) return function (n, r, t) {\n      var e,\n          i = I(r, t);\n      return i ? \"value\" in i ? i.value : null === (e = i.get) || void 0 === e ? void 0 : e.call(n.k) : void 0;\n    }(n, e, r);\n    var i = e[r];\n    return n.I || !immer_esm_t(i) ? i : i === z(n.t, r) ? (E(n), n.o[r] = R(n.A.h, i, n)) : i;\n  },\n  has: function has(n, r) {\n    return r in immer_esm_p(n);\n  },\n  ownKeys: function ownKeys(n) {\n    return Reflect.ownKeys(immer_esm_p(n));\n  },\n  set: function set(n, r, t) {\n    var e = I(immer_esm_p(n), r);\n    if (null == e ? void 0 : e.set) return e.set.call(n.k, t), !0;\n\n    if (!n.P) {\n      var i = z(immer_esm_p(n), r),\n          o = null == i ? void 0 : i[Q];\n      if (o && o.t === t) return n.o[r] = t, n.D[r] = !1, !0;\n      if (c(t, i) && (void 0 !== t || u(n.t, r))) return !0;\n      E(n), immer_esm_k(n);\n    }\n\n    return n.o[r] === t && \"number\" != typeof t || (n.o[r] = t, n.D[r] = !0, !0);\n  },\n  deleteProperty: function deleteProperty(n, r) {\n    return void 0 !== z(n.t, r) || r in n.t ? (n.D[r] = !1, E(n), immer_esm_k(n)) : delete n.D[r], n.o && delete n.o[r], !0;\n  },\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(n, r) {\n    var t = immer_esm_p(n),\n        e = Reflect.getOwnPropertyDescriptor(t, r);\n    return e ? {\n      writable: !0,\n      configurable: 1 !== n.i || \"length\" !== r,\n      enumerable: e.enumerable,\n      value: t[r]\n    } : e;\n  },\n  defineProperty: function defineProperty() {\n    immer_esm_n(11);\n  },\n  getPrototypeOf: function getPrototypeOf(n) {\n    return Object.getPrototypeOf(n.t);\n  },\n  setPrototypeOf: function setPrototypeOf() {\n    immer_esm_n(12);\n  }\n},\n    on = {};\n\nimmer_esm_i(en, function (n, r) {\n  on[n] = function () {\n    return arguments[0] = arguments[0][0], r.apply(this, arguments);\n  };\n}), on.deleteProperty = function (r, t) {\n  return  false && false, en.deleteProperty.call(this, r[0], t);\n}, on.set = function (r, t, e) {\n  return  false && false, en.set.call(this, r[0], t, e, r[0]);\n};\n\nvar un = function () {\n  function e(r) {\n    var e = this;\n    this.O = B, this.F = !0, this.produce = function (r, i, o) {\n      if (\"function\" == typeof r && \"function\" != typeof i) {\n        var u = i;\n        i = r;\n        var a = e;\n        return function (n) {\n          var r = this;\n          void 0 === n && (n = u);\n\n          for (var t = arguments.length, e = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++) {\n            e[o - 1] = arguments[o];\n          }\n\n          return a.produce(n, function (n) {\n            var t;\n            return (t = i).call.apply(t, [r, n].concat(e));\n          });\n        };\n      }\n\n      var f;\n\n      if (\"function\" != typeof i && immer_esm_n(6), void 0 !== o && \"function\" != typeof o && immer_esm_n(7), immer_esm_t(r)) {\n        var c = w(e),\n            s = R(e, r, void 0),\n            v = !0;\n\n        try {\n          f = i(s), v = !1;\n        } finally {\n          v ? g(c) : O(c);\n        }\n\n        return \"undefined\" != typeof Promise && f instanceof Promise ? f.then(function (n) {\n          return j(c, o), P(n, c);\n        }, function (n) {\n          throw g(c), n;\n        }) : (j(c, o), P(f, c));\n      }\n\n      if (!r || \"object\" != typeof r) {\n        if ((f = i(r)) === H) return;\n        return void 0 === f && (f = r), e.F && immer_esm_d(f, !0), f;\n      }\n\n      immer_esm_n(21, r);\n    }, this.produceWithPatches = function (n, r) {\n      return \"function\" == typeof n ? function (r) {\n        for (var t = arguments.length, i = Array(t > 1 ? t - 1 : 0), o = 1; o < t; o++) {\n          i[o - 1] = arguments[o];\n        }\n\n        return e.produceWithPatches(r, function (r) {\n          return n.apply(void 0, [r].concat(i));\n        });\n      } : [e.produce(n, r, function (n, r) {\n        t = n, i = r;\n      }), t, i];\n      var t, i;\n    }, \"boolean\" == typeof (null == r ? void 0 : r.useProxies) && this.setUseProxies(r.useProxies), \"boolean\" == typeof (null == r ? void 0 : r.autoFreeze) && this.setAutoFreeze(r.autoFreeze);\n  }\n\n  var i = e.prototype;\n  return i.createDraft = function (e) {\n    immer_esm_t(e) || immer_esm_n(8), immer_esm_r(e) && (e = D(e));\n    var i = w(this),\n        o = R(this, e, void 0);\n    return o[Q].C = !0, O(i), o;\n  }, i.finishDraft = function (r, t) {\n    var e = r && r[Q];\n     false && (false);\n    var i = e.A;\n    return j(i, t), P(void 0, i);\n  }, i.setAutoFreeze = function (n) {\n    this.F = n;\n  }, i.setUseProxies = function (r) {\n    r && !B && immer_esm_n(20), this.O = r;\n  }, i.applyPatches = function (n, t) {\n    var e;\n\n    for (e = t.length - 1; e >= 0; e--) {\n      var i = t[e];\n\n      if (0 === i.path.length && \"replace\" === i.op) {\n        n = i.value;\n        break;\n      }\n    }\n\n    var o = b(\"Patches\").$;\n    return immer_esm_r(n) ? o(n, t) : this.produce(n, function (n) {\n      return o(n, t.slice(e + 1));\n    });\n  }, e;\n}(),\n    an = new un(),\n    fn = an.produce,\n    cn = an.produceWithPatches.bind(an),\n    sn = an.setAutoFreeze.bind(an),\n    vn = an.setUseProxies.bind(an),\n    pn = an.applyPatches.bind(an),\n    ln = an.createDraft.bind(an),\n    dn = an.finishDraft.bind(an);\n\n/* harmony default export */ var immer_esm = (fn);\n\n// EXTERNAL MODULE: ./node_modules/fast-deep-equal/index.js\nvar fast_deep_equal = __webpack_require__(760);\nvar fast_deep_equal_default = /*#__PURE__*/__webpack_require__.n(fast_deep_equal);\n\n// CONCATENATED MODULE: ./node_modules/slate/dist/index.es.js\n\n\n\n\n\n\n\n\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DIRTY_PATHS = new WeakMap();\nvar FLUSHING = new WeakMap();\nvar NORMALIZING = new WeakMap();\nvar PATH_REFS = new WeakMap();\nvar POINT_REFS = new WeakMap();\nvar RANGE_REFS = new WeakMap();\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\r\n * Create a new Slate `Editor` object.\r\n */\n\n\nvar index_es_createEditor = function createEditor() {\n  var editor = {\n    children: [],\n    operations: [],\n    selection: null,\n    marks: null,\n    isInline: function isInline() {\n      return false;\n    },\n    isVoid: function isVoid() {\n      return false;\n    },\n    onChange: function onChange() {},\n    apply: function apply(op) {\n      var _iterator = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.pathRefs(editor)),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var ref = _step.value;\n          PathRef.transform(ref, op);\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.pointRefs(editor)),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _ref = _step2.value;\n          PointRef.transform(_ref, op);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.rangeRefs(editor)),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _ref2 = _step3.value;\n          RangeRef.transform(_ref2, op);\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n\n      var set = new Set();\n      var dirtyPaths = [];\n\n      var add = function add(path) {\n        if (path) {\n          var key = path.join(',');\n\n          if (!set.has(key)) {\n            set.add(key);\n            dirtyPaths.push(path);\n          }\n        }\n      };\n\n      var oldDirtyPaths = DIRTY_PATHS.get(editor) || [];\n      var newDirtyPaths = index_es_getDirtyPaths(op);\n\n      var _iterator4 = Object(createForOfIteratorHelper[\"a\" /* default */])(oldDirtyPaths),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var path = _step4.value;\n          var newPath = Path.transform(path, op);\n          add(newPath);\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n\n      var _iterator5 = Object(createForOfIteratorHelper[\"a\" /* default */])(newDirtyPaths),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _path = _step5.value;\n          add(_path);\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n\n      DIRTY_PATHS.set(editor, dirtyPaths);\n      Transforms.transform(editor, op);\n      editor.operations.push(op);\n      Editor.normalize(editor); // Clear any formats applied to the cursor if the selection changes.\n\n      if (op.type === 'set_selection') {\n        editor.marks = null;\n      }\n\n      if (!FLUSHING.get(editor)) {\n        FLUSHING.set(editor, true);\n        Promise.resolve().then(function () {\n          FLUSHING.set(editor, false);\n          editor.onChange();\n          editor.operations = [];\n        });\n      }\n    },\n    addMark: function addMark(key, value) {\n      var selection = editor.selection;\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.setNodes(editor, Object(defineProperty[\"a\" /* default */])({}, key, value), {\n            match: Text.isText,\n            split: true\n          });\n        } else {\n          var marks = _objectSpread(_objectSpread({}, Editor.marks(editor) || {}), {}, Object(defineProperty[\"a\" /* default */])({}, key, value));\n\n          editor.marks = marks;\n\n          if (!FLUSHING.get(editor)) {\n            editor.onChange();\n          }\n        }\n      }\n    },\n    deleteBackward: function deleteBackward(unit) {\n      var selection = editor.selection;\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, {\n          unit: unit,\n          reverse: true\n        });\n      }\n    },\n    deleteForward: function deleteForward(unit) {\n      var selection = editor.selection;\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, {\n          unit: unit\n        });\n      }\n    },\n    deleteFragment: function deleteFragment(direction) {\n      var selection = editor.selection;\n\n      if (selection && Range.isExpanded(selection)) {\n        Transforms.delete(editor, {\n          reverse: direction === 'backward'\n        });\n      }\n    },\n    getFragment: function getFragment() {\n      var selection = editor.selection;\n\n      if (selection) {\n        return Node.fragment(editor, selection);\n      }\n\n      return [];\n    },\n    insertBreak: function insertBreak() {\n      Transforms.splitNodes(editor, {\n        always: true\n      });\n    },\n    insertFragment: function insertFragment(fragment) {\n      Transforms.insertFragment(editor, fragment);\n    },\n    insertNode: function insertNode(node) {\n      Transforms.insertNodes(editor, node);\n    },\n    insertText: function insertText(text) {\n      var selection = editor.selection,\n          marks = editor.marks;\n\n      if (selection) {\n        // If the cursor is at the end of an inline, move it outside of\n        // the inline before inserting\n        if (Range.isCollapsed(selection)) {\n          var inline = Editor.above(editor, {\n            match: function match(n) {\n              return Editor.isInline(editor, n);\n            },\n            mode: 'highest'\n          });\n\n          if (inline) {\n            var _inline = Object(slicedToArray[\"a\" /* default */])(inline, 2),\n                inlinePath = _inline[1];\n\n            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n              var point = Editor.after(editor, inlinePath);\n              Transforms.setSelection(editor, {\n                anchor: point,\n                focus: point\n              });\n            }\n          }\n        }\n\n        if (marks) {\n          var node = _objectSpread({\n            text: text\n          }, marks);\n\n          Transforms.insertNodes(editor, node);\n        } else {\n          Transforms.insertText(editor, text);\n        }\n\n        editor.marks = null;\n      }\n    },\n    normalizeNode: function normalizeNode(entry) {\n      var _entry = Object(slicedToArray[\"a\" /* default */])(entry, 2),\n          node = _entry[0],\n          path = _entry[1]; // There are no core normalizations for text nodes.\n\n\n      if (Text.isText(node)) {\n        return;\n      } // Ensure that block and inline nodes have at least one text child.\n\n\n      if (Element.isElement(node) && node.children.length === 0) {\n        var child = {\n          text: ''\n        };\n        Transforms.insertNodes(editor, child, {\n          at: path.concat(0),\n          voids: true\n        });\n        return;\n      } // Determine whether the node should have block or inline children.\n\n\n      var shouldHaveInlines = Editor.isEditor(node) ? false : Element.isElement(node) && (editor.isInline(node) || node.children.length === 0 || Text.isText(node.children[0]) || editor.isInline(node.children[0])); // Since we'll be applying operations while iterating, keep track of an\n      // index that accounts for any added/removed nodes.\n\n      var n = 0;\n\n      for (var i = 0; i < node.children.length; i++, n++) {\n        var currentNode = Node.get(editor, path);\n        if (Text.isText(currentNode)) continue;\n        var _child = node.children[i];\n        var prev = currentNode.children[n - 1];\n        var isLast = i === node.children.length - 1;\n        var isInlineOrText = Text.isText(_child) || Element.isElement(_child) && editor.isInline(_child); // Only allow block nodes in the top-level children and parent blocks\n        // that only contain block nodes. Similarly, only allow inline nodes in\n        // other inline nodes, or parent blocks that only contain inlines and\n        // text.\n\n        if (isInlineOrText !== shouldHaveInlines) {\n          Transforms.removeNodes(editor, {\n            at: path.concat(n),\n            voids: true\n          });\n          n--;\n        } else if (Element.isElement(_child)) {\n          // Ensure that inline nodes are surrounded by text nodes.\n          if (editor.isInline(_child)) {\n            if (prev == null || !Text.isText(prev)) {\n              var newChild = {\n                text: ''\n              };\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n),\n                voids: true\n              });\n              n++;\n            } else if (isLast) {\n              var _newChild = {\n                text: ''\n              };\n              Transforms.insertNodes(editor, _newChild, {\n                at: path.concat(n + 1),\n                voids: true\n              });\n              n++;\n            }\n          }\n        } else {\n          // Merge adjacent text nodes that are empty or match.\n          if (prev != null && Text.isText(prev)) {\n            if (Text.equals(_child, prev, {\n              loose: true\n            })) {\n              Transforms.mergeNodes(editor, {\n                at: path.concat(n),\n                voids: true\n              });\n              n--;\n            } else if (prev.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n - 1),\n                voids: true\n              });\n              n--;\n            } else if (isLast && _child.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n),\n                voids: true\n              });\n              n--;\n            }\n          }\n        }\n      }\n    },\n    removeMark: function removeMark(key) {\n      var selection = editor.selection;\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.unsetNodes(editor, key, {\n            match: Text.isText,\n            split: true\n          });\n        } else {\n          var marks = _objectSpread({}, Editor.marks(editor) || {});\n\n          delete marks[key];\n          editor.marks = marks;\n\n          if (!FLUSHING.get(editor)) {\n            editor.onChange();\n          }\n        }\n      }\n    }\n  };\n  return editor;\n};\n/**\r\n * Get the \"dirty\" paths generated from an operation.\r\n */\n\n\nvar index_es_getDirtyPaths = function getDirtyPaths(op) {\n  switch (op.type) {\n    case 'insert_text':\n    case 'remove_text':\n    case 'set_node':\n      {\n        var path = op.path;\n        return Path.levels(path);\n      }\n\n    case 'insert_node':\n      {\n        var node = op.node,\n            _path2 = op.path;\n        var levels = Path.levels(_path2);\n        var descendants = Text.isText(node) ? [] : Array.from(Node.nodes(node), function (_ref3) {\n          var _ref6 = Object(slicedToArray[\"a\" /* default */])(_ref3, 2),\n              p = _ref6[1];\n\n          return _path2.concat(p);\n        });\n        return [].concat(Object(toConsumableArray[\"a\" /* default */])(levels), Object(toConsumableArray[\"a\" /* default */])(descendants));\n      }\n\n    case 'merge_node':\n      {\n        var _path3 = op.path;\n        var ancestors = Path.ancestors(_path3);\n        var previousPath = Path.previous(_path3);\n        return [].concat(Object(toConsumableArray[\"a\" /* default */])(ancestors), [previousPath]);\n      }\n\n    case 'move_node':\n      {\n        var _path4 = op.path,\n            newPath = op.newPath;\n\n        if (Path.equals(_path4, newPath)) {\n          return [];\n        }\n\n        var oldAncestors = [];\n        var newAncestors = [];\n\n        var _iterator6 = Object(createForOfIteratorHelper[\"a\" /* default */])(Path.ancestors(_path4)),\n            _step6;\n\n        try {\n          for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n            var ancestor = _step6.value;\n            var p = Path.transform(ancestor, op);\n            oldAncestors.push(p);\n          }\n        } catch (err) {\n          _iterator6.e(err);\n        } finally {\n          _iterator6.f();\n        }\n\n        var _iterator7 = Object(createForOfIteratorHelper[\"a\" /* default */])(Path.ancestors(newPath)),\n            _step7;\n\n        try {\n          for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n            var _ancestor = _step7.value;\n\n            var _p = Path.transform(_ancestor, op);\n\n            newAncestors.push(_p);\n          }\n        } catch (err) {\n          _iterator7.e(err);\n        } finally {\n          _iterator7.f();\n        }\n\n        var newParent = newAncestors[newAncestors.length - 1];\n        var newIndex = newPath[newPath.length - 1];\n        var resultPath = newParent.concat(newIndex);\n        return [].concat(oldAncestors, newAncestors, [resultPath]);\n      }\n\n    case 'remove_node':\n      {\n        var _path5 = op.path;\n\n        var _ancestors = Path.ancestors(_path5);\n\n        return Object(toConsumableArray[\"a\" /* default */])(_ancestors);\n      }\n\n    case 'split_node':\n      {\n        var _path6 = op.path;\n\n        var _levels = Path.levels(_path6);\n\n        var nextPath = Path.next(_path6);\n        return [].concat(Object(toConsumableArray[\"a\" /* default */])(_levels), [nextPath]);\n      }\n\n    default:\n      {\n        return [];\n      }\n  }\n};\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n/**\r\n * Constants for string distance checking.\r\n */\n\n\nvar SPACE = /\\s/;\nvar PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\nvar CHAMELEON = /['\\u2018\\u2019]/;\nvar SURROGATE_START = 0xd800;\nvar SURROGATE_END = 0xdfff;\nvar ZERO_WIDTH_JOINER = 0x200d;\n/**\r\n * Get the distance to the end of the first character in a string of text.\r\n */\n\nvar getCharacterDistance = function getCharacterDistance(text) {\n  var offset = 0; // prev types:\n  // SURR: surrogate pair\n  // MOD: modifier (technically also surrogate pair)\n  // ZWJ: zero width joiner\n  // VAR: variation selector\n  // BMP: sequenceable character from basic multilingual plane\n\n  var prev = null;\n  var charCode = text.charCodeAt(0);\n\n  while (charCode) {\n    if (isSurrogate(charCode)) {\n      var modifier = isModifier(charCode, text, offset); // Early returns are the heart of this function, where we decide if previous and current\n      // codepoints should form a single character (in terms of how many of them should selection\n      // jump over).\n\n      if (prev === 'SURR' || prev === 'BMP') {\n        break;\n      }\n\n      offset += 2;\n      prev = modifier ? 'MOD' : 'SURR';\n      charCode = text.charCodeAt(offset); // Absolutely fine to `continue` without any checks because if `charCode` is NaN (which\n      // is the case when out of `text` range), next `while` loop won\"t execute and we\"re done.\n\n      continue;\n    }\n\n    if (charCode === ZERO_WIDTH_JOINER) {\n      offset += 1;\n      prev = 'ZWJ';\n      charCode = text.charCodeAt(offset);\n      continue;\n    }\n\n    if (isBMPEmoji(charCode)) {\n      if (prev && prev !== 'ZWJ' && prev !== 'VAR') {\n        break;\n      }\n\n      offset += 1;\n      prev = 'BMP';\n      charCode = text.charCodeAt(offset);\n      continue;\n    }\n\n    if (isVariationSelector(charCode)) {\n      if (prev && prev !== 'ZWJ') {\n        break;\n      }\n\n      offset += 1;\n      prev = 'VAR';\n      charCode = text.charCodeAt(offset);\n      continue;\n    } // Modifier 'groups up' with what ever character is before that (even whitespace), need to\n    // look ahead.\n\n\n    if (prev === 'MOD') {\n      offset += 1;\n      break;\n    } // If while loop ever gets here, we're done (e.g latin chars).\n\n\n    break;\n  }\n\n  return offset || 1;\n};\n/**\r\n * Get the distance to the end of the first word in a string of text.\r\n */\n\n\nvar getWordDistance = function getWordDistance(text) {\n  var length = 0;\n  var i = 0;\n  var started = false;\n  var char;\n\n  while (char = text.charAt(i)) {\n    var l = getCharacterDistance(char);\n    char = text.slice(i, i + l);\n    var rest = text.slice(i + l);\n\n    if (isWordCharacter(char, rest)) {\n      started = true;\n      length += l;\n    } else if (!started) {\n      length += l;\n    } else {\n      break;\n    }\n\n    i += l;\n  }\n\n  return length;\n};\n/**\r\n * Check if a character is a word character. The `remaining` argument is used\r\n * because sometimes you must read subsequent characters to truly determine it.\r\n */\n\n\nvar isWordCharacter = function isWordCharacter(char, remaining) {\n  if (SPACE.test(char)) {\n    return false;\n  } // Chameleons count as word characters as long as they're in a word, so\n  // recurse to see if the next one is a word character or not.\n\n\n  if (CHAMELEON.test(char)) {\n    var next = remaining.charAt(0);\n    var length = getCharacterDistance(next);\n    next = remaining.slice(0, length);\n    var rest = remaining.slice(length);\n\n    if (isWordCharacter(next, rest)) {\n      return true;\n    }\n  }\n\n  if (PUNCTUATION.test(char)) {\n    return false;\n  }\n\n  return true;\n};\n/**\r\n * Determines if `code` is a surrogate\r\n */\n\n\nvar isSurrogate = function isSurrogate(code) {\n  return SURROGATE_START <= code && code <= SURROGATE_END;\n};\n/**\r\n * Does `code` form Modifier with next one.\r\n *\r\n * https://emojipedia.org/modifiers/\r\n */\n\n\nvar isModifier = function isModifier(code, text, offset) {\n  if (code === 0xd83c) {\n    var next = text.charCodeAt(offset + 1);\n    return next <= 0xdfff && next >= 0xdffb;\n  }\n\n  return false;\n};\n/**\r\n * Is `code` a Variation Selector.\r\n *\r\n * https://codepoints.net/variation_selectors\r\n */\n\n\nvar isVariationSelector = function isVariationSelector(code) {\n  return code <= 0xfe0f && code >= 0xfe00;\n};\n/**\r\n * Is `code` one of the BMP codes used in emoji sequences.\r\n *\r\n * https://emojipedia.org/emoji-zwj-sequences/\r\n */\n\n\nvar isBMPEmoji = function isBMPEmoji(code) {\n  // This requires tiny bit of maintanance, better ideas?\n  // Fortunately it only happens if new Unicode Standard\n  // is released. Fails gracefully if upkeep lags behind,\n  // same way Slate previously behaved with all emojis.\n  return code === 0x2764 || // heart (❤)\n  code === 0x2642 || // male (♂)\n  code === 0x2640 || // female (♀)\n  code === 0x2620 || // scull (☠)\n  code === 0x2695 || // medical (⚕)\n  code === 0x2708 || // plane (✈️)\n  code === 0x25ef // large circle (◯)\n  ;\n};\n\nvar Element = {\n  /**\r\n   * Check if a value implements the 'Ancestor' interface.\r\n   */\n  isAncestor: function isAncestor(value) {\n    return Object(index_es[\"a\" /* default */])(value) && Node.isNodeList(value.children);\n  },\n\n  /**\r\n   * Check if a value implements the `Element` interface.\r\n   */\n  isElement: function isElement(value) {\n    return Object(index_es[\"a\" /* default */])(value) && Node.isNodeList(value.children) && !Editor.isEditor(value);\n  },\n\n  /**\r\n   * Check if a value is an array of `Element` objects.\r\n   */\n  isElementList: function isElementList(value) {\n    return Array.isArray(value) && value.every(function (val) {\n      return Element.isElement(val);\n    });\n  },\n\n  /**\r\n   * Check if a set of props is a partial of Element.\r\n   */\n  isElementProps: function isElementProps(props) {\n    return props.children !== undefined;\n  },\n\n  /**\r\n   * Check if an element matches set of properties.\r\n   *\r\n   * Note: this checks custom properties, and it does not ensure that any\r\n   * children are equivalent.\r\n   */\n  matches: function matches(element, props) {\n    for (var key in props) {\n      if (key === 'children') {\n        continue;\n      }\n\n      if (element[key] !== props[key]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n};\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar IS_EDITOR_CACHE = new WeakMap();\nvar Editor = {\n  /**\r\n   * Get the ancestor above a location in the document.\r\n   */\n  above: function above(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$voids = options.voids,\n        voids = _options$voids === void 0 ? false : _options$voids,\n        _options$mode = options.mode,\n        mode = _options$mode === void 0 ? 'lowest' : _options$mode,\n        _options$at = options.at,\n        at = _options$at === void 0 ? editor.selection : _options$at,\n        match = options.match;\n\n    if (!at) {\n      return;\n    }\n\n    var path = Editor.path(editor, at);\n    var reverse = mode === 'lowest';\n\n    var _iterator8 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.levels(editor, {\n      at: path,\n      voids: voids,\n      match: match,\n      reverse: reverse\n    })),\n        _step8;\n\n    try {\n      for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n        var _step8$value = Object(slicedToArray[\"a\" /* default */])(_step8.value, 2),\n            n = _step8$value[0],\n            p = _step8$value[1];\n\n        if (!Text.isText(n) && !Path.equals(path, p)) {\n          return [n, p];\n        }\n      }\n    } catch (err) {\n      _iterator8.e(err);\n    } finally {\n      _iterator8.f();\n    }\n  },\n\n  /**\r\n   * Add a custom property to the leaf text nodes in the current selection.\r\n   *\r\n   * If the selection is currently collapsed, the marks will be added to the\r\n   * `editor.marks` property instead, and applied when text is inserted next.\r\n   */\n  addMark: function addMark(editor, key, value) {\n    editor.addMark(key, value);\n  },\n\n  /**\r\n   * Get the point after a location.\r\n   */\n  after: function after(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var anchor = Editor.point(editor, at, {\n      edge: 'end'\n    });\n    var focus = Editor.end(editor, []);\n    var range = {\n      anchor: anchor,\n      focus: focus\n    };\n    var _options$distance = options.distance,\n        distance = _options$distance === void 0 ? 1 : _options$distance;\n    var d = 0;\n    var target;\n\n    var _iterator9 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.positions(editor, _objectSpread$1(_objectSpread$1({}, options), {}, {\n      at: range\n    }))),\n        _step9;\n\n    try {\n      for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n        var p = _step9.value;\n\n        if (d > distance) {\n          break;\n        }\n\n        if (d !== 0) {\n          target = p;\n        }\n\n        d++;\n      }\n    } catch (err) {\n      _iterator9.e(err);\n    } finally {\n      _iterator9.f();\n    }\n\n    return target;\n  },\n\n  /**\r\n   * Get the point before a location.\r\n   */\n  before: function before(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var anchor = Editor.start(editor, []);\n    var focus = Editor.point(editor, at, {\n      edge: 'start'\n    });\n    var range = {\n      anchor: anchor,\n      focus: focus\n    };\n    var _options$distance2 = options.distance,\n        distance = _options$distance2 === void 0 ? 1 : _options$distance2;\n    var d = 0;\n    var target;\n\n    var _iterator10 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.positions(editor, _objectSpread$1(_objectSpread$1({}, options), {}, {\n      at: range,\n      reverse: true\n    }))),\n        _step10;\n\n    try {\n      for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n        var p = _step10.value;\n\n        if (d > distance) {\n          break;\n        }\n\n        if (d !== 0) {\n          target = p;\n        }\n\n        d++;\n      }\n    } catch (err) {\n      _iterator10.e(err);\n    } finally {\n      _iterator10.f();\n    }\n\n    return target;\n  },\n\n  /**\r\n   * Delete content in the editor backward from the current selection.\r\n   */\n  deleteBackward: function deleteBackward(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$unit = options.unit,\n        unit = _options$unit === void 0 ? 'character' : _options$unit;\n    editor.deleteBackward(unit);\n  },\n\n  /**\r\n   * Delete content in the editor forward from the current selection.\r\n   */\n  deleteForward: function deleteForward(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$unit2 = options.unit,\n        unit = _options$unit2 === void 0 ? 'character' : _options$unit2;\n    editor.deleteForward(unit);\n  },\n\n  /**\r\n   * Delete the content in the current selection.\r\n   */\n  deleteFragment: function deleteFragment(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$direction = options.direction,\n        direction = _options$direction === void 0 ? 'forward' : _options$direction;\n    editor.deleteFragment(direction);\n  },\n\n  /**\r\n   * Get the start and end points of a location.\r\n   */\n  edges: function edges(editor, at) {\n    return [Editor.start(editor, at), Editor.end(editor, at)];\n  },\n\n  /**\r\n   * Get the end point of a location.\r\n   */\n  end: function end(editor, at) {\n    return Editor.point(editor, at, {\n      edge: 'end'\n    });\n  },\n\n  /**\r\n   * Get the first node at a location.\r\n   */\n  first: function first(editor, at) {\n    var path = Editor.path(editor, at, {\n      edge: 'start'\n    });\n    return Editor.node(editor, path);\n  },\n\n  /**\r\n   * Get the fragment at a location.\r\n   */\n  fragment: function fragment(editor, at) {\n    var range = Editor.range(editor, at);\n    var fragment = Node.fragment(editor, range);\n    return fragment;\n  },\n\n  /**\r\n   * Check if a node has block children.\r\n   */\n  hasBlocks: function hasBlocks(editor, element) {\n    return element.children.some(function (n) {\n      return Editor.isBlock(editor, n);\n    });\n  },\n\n  /**\r\n   * Check if a node has inline and text children.\r\n   */\n  hasInlines: function hasInlines(editor, element) {\n    return element.children.some(function (n) {\n      return Text.isText(n) || Editor.isInline(editor, n);\n    });\n  },\n\n  /**\r\n   * Check if a node has text children.\r\n   */\n  hasTexts: function hasTexts(editor, element) {\n    return element.children.every(function (n) {\n      return Text.isText(n);\n    });\n  },\n\n  /**\r\n   * Insert a block break at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertBreak: function insertBreak(editor) {\n    editor.insertBreak();\n  },\n\n  /**\r\n   * Insert a fragment at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertFragment: function insertFragment(editor, fragment) {\n    editor.insertFragment(fragment);\n  },\n\n  /**\r\n   * Insert a node at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertNode: function insertNode(editor, node) {\n    editor.insertNode(node);\n  },\n\n  /**\r\n   * Insert text at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertText: function insertText(editor, text) {\n    editor.insertText(text);\n  },\n\n  /**\r\n   * Check if a value is a block `Element` object.\r\n   */\n  isBlock: function isBlock(editor, value) {\n    return Element.isElement(value) && !editor.isInline(value);\n  },\n\n  /**\r\n   * Check if a value is an `Editor` object.\r\n   */\n  isEditor: function isEditor(value) {\n    if (!Object(index_es[\"a\" /* default */])(value)) return false;\n    var cachedIsEditor = IS_EDITOR_CACHE.get(value);\n\n    if (cachedIsEditor !== undefined) {\n      return cachedIsEditor;\n    }\n\n    var isEditor = typeof value.addMark === 'function' && typeof value.apply === 'function' && typeof value.deleteBackward === 'function' && typeof value.deleteForward === 'function' && typeof value.deleteFragment === 'function' && typeof value.insertBreak === 'function' && typeof value.insertFragment === 'function' && typeof value.insertNode === 'function' && typeof value.insertText === 'function' && typeof value.isInline === 'function' && typeof value.isVoid === 'function' && typeof value.normalizeNode === 'function' && typeof value.onChange === 'function' && typeof value.removeMark === 'function' && (value.marks === null || Object(index_es[\"a\" /* default */])(value.marks)) && (value.selection === null || Range.isRange(value.selection)) && Node.isNodeList(value.children) && Operation.isOperationList(value.operations);\n    IS_EDITOR_CACHE.set(value, isEditor);\n    return isEditor;\n  },\n\n  /**\r\n   * Check if a point is the end point of a location.\r\n   */\n  isEnd: function isEnd(editor, point, at) {\n    var end = Editor.end(editor, at);\n    return Point.equals(point, end);\n  },\n\n  /**\r\n   * Check if a point is an edge of a location.\r\n   */\n  isEdge: function isEdge(editor, point, at) {\n    return Editor.isStart(editor, point, at) || Editor.isEnd(editor, point, at);\n  },\n\n  /**\r\n   * Check if an element is empty, accounting for void nodes.\r\n   */\n  isEmpty: function isEmpty(editor, element) {\n    var children = element.children;\n\n    var _children = Object(slicedToArray[\"a\" /* default */])(children, 1),\n        first = _children[0];\n\n    return children.length === 0 || children.length === 1 && Text.isText(first) && first.text === '' && !editor.isVoid(element);\n  },\n\n  /**\r\n   * Check if a value is an inline `Element` object.\r\n   */\n  isInline: function isInline(editor, value) {\n    return Element.isElement(value) && editor.isInline(value);\n  },\n\n  /**\r\n   * Check if the editor is currently normalizing after each operation.\r\n   */\n  isNormalizing: function isNormalizing(editor) {\n    var isNormalizing = NORMALIZING.get(editor);\n    return isNormalizing === undefined ? true : isNormalizing;\n  },\n\n  /**\r\n   * Check if a point is the start point of a location.\r\n   */\n  isStart: function isStart(editor, point, at) {\n    // PERF: If the offset isn't `0` we know it's not the start.\n    if (point.offset !== 0) {\n      return false;\n    }\n\n    var start = Editor.start(editor, at);\n    return Point.equals(point, start);\n  },\n\n  /**\r\n   * Check if a value is a void `Element` object.\r\n   */\n  isVoid: function isVoid(editor, value) {\n    return Element.isElement(value) && editor.isVoid(value);\n  },\n\n  /**\r\n   * Get the last node at a location.\r\n   */\n  last: function last(editor, at) {\n    var path = Editor.path(editor, at, {\n      edge: 'end'\n    });\n    return Editor.node(editor, path);\n  },\n\n  /**\r\n   * Get the leaf text node at a location.\r\n   */\n  leaf: function leaf(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var path = Editor.path(editor, at, options);\n    var node = Node.leaf(editor, path);\n    return [node, path];\n  },\n\n  /**\r\n   * Iterate through all of the levels at a location.\r\n   */\n  levels: /*#__PURE__*/regenerator_default.a.mark(function levels(editor) {\n    var options,\n        _options$at2,\n        at,\n        _options$reverse,\n        reverse,\n        _options$voids2,\n        voids,\n        match,\n        levels,\n        path,\n        _iterator11,\n        _step11,\n        _step11$value,\n        n,\n        p,\n        _args = arguments;\n\n    return regenerator_default.a.wrap(function levels$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            options = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            _options$at2 = options.at, at = _options$at2 === void 0 ? editor.selection : _options$at2, _options$reverse = options.reverse, reverse = _options$reverse === void 0 ? false : _options$reverse, _options$voids2 = options.voids, voids = _options$voids2 === void 0 ? false : _options$voids2;\n            match = options.match;\n\n            if (match == null) {\n              match = function match() {\n                return true;\n              };\n            }\n\n            if (at) {\n              _context.next = 6;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 6:\n            levels = [];\n            path = Editor.path(editor, at);\n            _iterator11 = Object(createForOfIteratorHelper[\"a\" /* default */])(Node.levels(editor, path));\n            _context.prev = 9;\n\n            _iterator11.s();\n\n          case 11:\n            if ((_step11 = _iterator11.n()).done) {\n              _context.next = 20;\n              break;\n            }\n\n            _step11$value = Object(slicedToArray[\"a\" /* default */])(_step11.value, 2), n = _step11$value[0], p = _step11$value[1];\n\n            if (match(n, p)) {\n              _context.next = 15;\n              break;\n            }\n\n            return _context.abrupt(\"continue\", 18);\n\n          case 15:\n            levels.push([n, p]);\n\n            if (!(!voids && Editor.isVoid(editor, n))) {\n              _context.next = 18;\n              break;\n            }\n\n            return _context.abrupt(\"break\", 20);\n\n          case 18:\n            _context.next = 11;\n            break;\n\n          case 20:\n            _context.next = 25;\n            break;\n\n          case 22:\n            _context.prev = 22;\n            _context.t0 = _context[\"catch\"](9);\n\n            _iterator11.e(_context.t0);\n\n          case 25:\n            _context.prev = 25;\n\n            _iterator11.f();\n\n            return _context.finish(25);\n\n          case 28:\n            if (reverse) {\n              levels.reverse();\n            }\n\n            return _context.delegateYield(levels, \"t1\", 30);\n\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, levels, null, [[9, 22, 25, 28]]);\n  }),\n\n  /**\r\n   * Get the marks that would be added to text at the current selection.\r\n   */\n  marks: function marks(editor) {\n    var marks = editor.marks,\n        selection = editor.selection;\n\n    if (!selection) {\n      return null;\n    }\n\n    if (marks) {\n      return marks;\n    }\n\n    if (Range.isExpanded(selection)) {\n      var _Editor$nodes = Editor.nodes(editor, {\n        match: Text.isText\n      }),\n          _Editor$nodes2 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes, 1),\n          match = _Editor$nodes2[0];\n\n      if (match) {\n        var _match = Object(slicedToArray[\"a\" /* default */])(match, 1),\n            _node = _match[0];\n\n        var _rest = _objectWithoutProperties(_node, [\"text\"]);\n\n        return _rest;\n      } else {\n        return {};\n      }\n    }\n\n    var anchor = selection.anchor;\n    var path = anchor.path;\n\n    var _Editor$leaf = Editor.leaf(editor, path),\n        _Editor$leaf2 = Object(slicedToArray[\"a\" /* default */])(_Editor$leaf, 1),\n        node = _Editor$leaf2[0];\n\n    if (anchor.offset === 0) {\n      var prev = Editor.previous(editor, {\n        at: path,\n        match: Text.isText\n      });\n      var block = Editor.above(editor, {\n        match: function match(n) {\n          return Editor.isBlock(editor, n);\n        }\n      });\n\n      if (prev && block) {\n        var _prev2 = Object(slicedToArray[\"a\" /* default */])(prev, 2),\n            prevNode = _prev2[0],\n            prevPath = _prev2[1];\n\n        var _block = Object(slicedToArray[\"a\" /* default */])(block, 2),\n            blockPath = _block[1];\n\n        if (Path.isAncestor(blockPath, prevPath)) {\n          node = prevNode;\n        }\n      }\n    }\n\n    var rest = _objectWithoutProperties(node, [\"text\"]);\n\n    return rest;\n  },\n\n  /**\r\n   * Get the matching node in the branch of the document after a location.\r\n   */\n  next: function next(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$mode2 = options.mode,\n        mode = _options$mode2 === void 0 ? 'lowest' : _options$mode2,\n        _options$voids3 = options.voids,\n        voids = _options$voids3 === void 0 ? false : _options$voids3;\n    var match = options.match,\n        _options$at3 = options.at,\n        at = _options$at3 === void 0 ? editor.selection : _options$at3;\n\n    if (!at) {\n      return;\n    }\n\n    var pointAfterLocation = Editor.after(editor, at, {\n      voids: voids\n    });\n    if (!pointAfterLocation) return;\n\n    var _Editor$last = Editor.last(editor, []),\n        _Editor$last2 = Object(slicedToArray[\"a\" /* default */])(_Editor$last, 2),\n        to = _Editor$last2[1];\n\n    var span = [pointAfterLocation.path, to];\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(\"Cannot get the next node from the root node!\");\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        var _Editor$parent = Editor.parent(editor, at),\n            _Editor$parent2 = Object(slicedToArray[\"a\" /* default */])(_Editor$parent, 1),\n            parent = _Editor$parent2[0];\n\n        match = function match(n) {\n          return parent.children.includes(n);\n        };\n      } else {\n        match = function match() {\n          return true;\n        };\n      }\n    }\n\n    var _Editor$nodes3 = Editor.nodes(editor, {\n      at: span,\n      match: match,\n      mode: mode,\n      voids: voids\n    }),\n        _Editor$nodes4 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes3, 1),\n        next = _Editor$nodes4[0];\n\n    return next;\n  },\n\n  /**\r\n   * Get the node at a location.\r\n   */\n  node: function node(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var path = Editor.path(editor, at, options);\n    var node = Node.get(editor, path);\n    return [node, path];\n  },\n\n  /**\r\n   * Iterate through all of the nodes in the Editor.\r\n   */\n  nodes: /*#__PURE__*/regenerator_default.a.mark(function nodes(editor) {\n    var options,\n        _options$at4,\n        at,\n        _options$mode3,\n        mode,\n        _options$universal,\n        universal,\n        _options$reverse2,\n        reverse,\n        _options$voids4,\n        voids,\n        match,\n        from,\n        to,\n        first,\n        last,\n        nodeEntries,\n        matches,\n        hit,\n        _iterator12,\n        _step12,\n        _step12$value,\n        node,\n        path,\n        isLower,\n        emit,\n        _args2 = arguments;\n\n    return regenerator_default.a.wrap(function nodes$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            options = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : {};\n            _options$at4 = options.at, at = _options$at4 === void 0 ? editor.selection : _options$at4, _options$mode3 = options.mode, mode = _options$mode3 === void 0 ? 'all' : _options$mode3, _options$universal = options.universal, universal = _options$universal === void 0 ? false : _options$universal, _options$reverse2 = options.reverse, reverse = _options$reverse2 === void 0 ? false : _options$reverse2, _options$voids4 = options.voids, voids = _options$voids4 === void 0 ? false : _options$voids4;\n            match = options.match;\n\n            if (!match) {\n              match = function match() {\n                return true;\n              };\n            }\n\n            if (at) {\n              _context2.next = 6;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 6:\n            if (Span.isSpan(at)) {\n              from = at[0];\n              to = at[1];\n            } else {\n              first = Editor.path(editor, at, {\n                edge: 'start'\n              });\n              last = Editor.path(editor, at, {\n                edge: 'end'\n              });\n              from = reverse ? last : first;\n              to = reverse ? first : last;\n            }\n\n            nodeEntries = Node.nodes(editor, {\n              reverse: reverse,\n              from: from,\n              to: to,\n              pass: function pass(_ref) {\n                var _ref7 = Object(slicedToArray[\"a\" /* default */])(_ref, 1),\n                    n = _ref7[0];\n\n                return voids ? false : Editor.isVoid(editor, n);\n              }\n            });\n            matches = [];\n            _iterator12 = Object(createForOfIteratorHelper[\"a\" /* default */])(nodeEntries);\n            _context2.prev = 10;\n\n            _iterator12.s();\n\n          case 12:\n            if ((_step12 = _iterator12.n()).done) {\n              _context2.next = 37;\n              break;\n            }\n\n            _step12$value = Object(slicedToArray[\"a\" /* default */])(_step12.value, 2), node = _step12$value[0], path = _step12$value[1];\n            isLower = hit && Path.compare(path, hit[1]) === 0; // In highest mode any node lower than the last hit is not a match.\n\n            if (!(mode === 'highest' && isLower)) {\n              _context2.next = 17;\n              break;\n            }\n\n            return _context2.abrupt(\"continue\", 35);\n\n          case 17:\n            if (match(node, path)) {\n              _context2.next = 23;\n              break;\n            }\n\n            if (!(universal && !isLower && Text.isText(node))) {\n              _context2.next = 22;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 22:\n            return _context2.abrupt(\"continue\", 35);\n\n          case 23:\n            if (!(mode === 'lowest' && isLower)) {\n              _context2.next = 26;\n              break;\n            }\n\n            hit = [node, path];\n            return _context2.abrupt(\"continue\", 35);\n\n          case 26:\n            // In lowest mode we emit the last hit, once it's guaranteed lowest.\n            emit = mode === 'lowest' ? hit : [node, path];\n\n            if (!emit) {\n              _context2.next = 34;\n              break;\n            }\n\n            if (!universal) {\n              _context2.next = 32;\n              break;\n            }\n\n            matches.push(emit);\n            _context2.next = 34;\n            break;\n\n          case 32:\n            _context2.next = 34;\n            return emit;\n\n          case 34:\n            hit = [node, path];\n\n          case 35:\n            _context2.next = 12;\n            break;\n\n          case 37:\n            _context2.next = 42;\n            break;\n\n          case 39:\n            _context2.prev = 39;\n            _context2.t0 = _context2[\"catch\"](10);\n\n            _iterator12.e(_context2.t0);\n\n          case 42:\n            _context2.prev = 42;\n\n            _iterator12.f();\n\n            return _context2.finish(42);\n\n          case 45:\n            if (!(mode === 'lowest' && hit)) {\n              _context2.next = 52;\n              break;\n            }\n\n            if (!universal) {\n              _context2.next = 50;\n              break;\n            }\n\n            matches.push(hit);\n            _context2.next = 52;\n            break;\n\n          case 50:\n            _context2.next = 52;\n            return hit;\n\n          case 52:\n            if (!universal) {\n              _context2.next = 54;\n              break;\n            }\n\n            return _context2.delegateYield(matches, \"t1\", 54);\n\n          case 54:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, nodes, null, [[10, 39, 42, 45]]);\n  }),\n\n  /**\r\n   * Normalize any dirty objects in the editor.\r\n   */\n  normalize: function normalize(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$force = options.force,\n        force = _options$force === void 0 ? false : _options$force;\n\n    var getDirtyPaths = function getDirtyPaths(editor) {\n      return DIRTY_PATHS.get(editor) || [];\n    };\n\n    if (!Editor.isNormalizing(editor)) {\n      return;\n    }\n\n    if (force) {\n      var allPaths = Array.from(Node.nodes(editor), function (_ref2) {\n        var _ref8 = Object(slicedToArray[\"a\" /* default */])(_ref2, 2),\n            p = _ref8[1];\n\n        return p;\n      });\n      DIRTY_PATHS.set(editor, allPaths);\n    }\n\n    if (getDirtyPaths(editor).length === 0) {\n      return;\n    }\n\n    Editor.withoutNormalizing(editor, function () {\n      /*\r\n        Fix dirty elements with no children.\r\n        editor.normalizeNode() does fix this, but some normalization fixes also require it to work.\r\n        Running an initial pass avoids the catch-22 race condition.\r\n      */\n      var _iterator13 = Object(createForOfIteratorHelper[\"a\" /* default */])(getDirtyPaths(editor)),\n          _step13;\n\n      try {\n        for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n          var dirtyPath = _step13.value;\n\n          if (Node.has(editor, dirtyPath)) {\n            var _Editor$node = Editor.node(editor, dirtyPath),\n                _Editor$node2 = Object(slicedToArray[\"a\" /* default */])(_Editor$node, 2),\n                node = _Editor$node2[0],\n                _ = _Editor$node2[1]; // Add a text child to elements with no children.\n            // This is safe to do in any order, by definition it can't cause other paths to change.\n\n\n            if (Element.isElement(node) && node.children.length === 0) {\n              var child = {\n                text: ''\n              };\n              Transforms.insertNodes(editor, child, {\n                at: dirtyPath.concat(0),\n                voids: true\n              });\n            }\n          }\n        }\n      } catch (err) {\n        _iterator13.e(err);\n      } finally {\n        _iterator13.f();\n      }\n\n      var max = getDirtyPaths(editor).length * 42; // HACK: better way?\n\n      var m = 0;\n\n      while (getDirtyPaths(editor).length !== 0) {\n        if (m > max) {\n          throw new Error(\"\\n            Could not completely normalize the editor after \".concat(max, \" iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\\n          \"));\n        }\n\n        var _dirtyPath = getDirtyPaths(editor).pop(); // If the node doesn't exist in the tree, it does not need to be normalized.\n\n\n        if (Node.has(editor, _dirtyPath)) {\n          var entry = Editor.node(editor, _dirtyPath);\n          editor.normalizeNode(entry);\n        }\n\n        m++;\n      }\n    });\n  },\n\n  /**\r\n   * Get the parent node of a location.\r\n   */\n  parent: function parent(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var path = Editor.path(editor, at, options);\n    var parentPath = Path.parent(path);\n    var entry = Editor.node(editor, parentPath);\n    return entry;\n  },\n\n  /**\r\n   * Get the path of a location.\r\n   */\n  path: function path(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var depth = options.depth,\n        edge = options.edge;\n\n    if (Path.isPath(at)) {\n      if (edge === 'start') {\n        var _Node$first = Node.first(editor, at),\n            _Node$first2 = Object(slicedToArray[\"a\" /* default */])(_Node$first, 2),\n            firstPath = _Node$first2[1];\n\n        at = firstPath;\n      } else if (edge === 'end') {\n        var _Node$last = Node.last(editor, at),\n            _Node$last2 = Object(slicedToArray[\"a\" /* default */])(_Node$last, 2),\n            lastPath = _Node$last2[1];\n\n        at = lastPath;\n      }\n    }\n\n    if (Range.isRange(at)) {\n      if (edge === 'start') {\n        at = Range.start(at);\n      } else if (edge === 'end') {\n        at = Range.end(at);\n      } else {\n        at = Path.common(at.anchor.path, at.focus.path);\n      }\n    }\n\n    if (Point.isPoint(at)) {\n      at = at.path;\n    }\n\n    if (depth != null) {\n      at = at.slice(0, depth);\n    }\n\n    return at;\n  },\n  hasPath: function hasPath(editor, path) {\n    return Node.has(editor, path);\n  },\n\n  /**\r\n   * Create a mutable ref for a `Path` object, which will stay in sync as new\r\n   * operations are applied to the editor.\r\n   */\n  pathRef: function pathRef(editor, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$affinity = options.affinity,\n        affinity = _options$affinity === void 0 ? 'forward' : _options$affinity;\n    var ref = {\n      current: path,\n      affinity: affinity,\n      unref: function unref() {\n        var current = ref.current;\n        var pathRefs = Editor.pathRefs(editor);\n        pathRefs.delete(ref);\n        ref.current = null;\n        return current;\n      }\n    };\n    var refs = Editor.pathRefs(editor);\n    refs.add(ref);\n    return ref;\n  },\n\n  /**\r\n   * Get the set of currently tracked path refs of the editor.\r\n   */\n  pathRefs: function pathRefs(editor) {\n    var refs = PATH_REFS.get(editor);\n\n    if (!refs) {\n      refs = new Set();\n      PATH_REFS.set(editor, refs);\n    }\n\n    return refs;\n  },\n\n  /**\r\n   * Get the start or end point of a location.\r\n   */\n  point: function point(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$edge = options.edge,\n        edge = _options$edge === void 0 ? 'start' : _options$edge;\n\n    if (Path.isPath(at)) {\n      var path;\n\n      if (edge === 'end') {\n        var _Node$last3 = Node.last(editor, at),\n            _Node$last4 = Object(slicedToArray[\"a\" /* default */])(_Node$last3, 2),\n            lastPath = _Node$last4[1];\n\n        path = lastPath;\n      } else {\n        var _Node$first3 = Node.first(editor, at),\n            _Node$first4 = Object(slicedToArray[\"a\" /* default */])(_Node$first3, 2),\n            firstPath = _Node$first4[1];\n\n        path = firstPath;\n      }\n\n      var node = Node.get(editor, path);\n\n      if (!Text.isText(node)) {\n        throw new Error(\"Cannot get the \".concat(edge, \" point in the node at path [\").concat(at, \"] because it has no \").concat(edge, \" text node.\"));\n      }\n\n      return {\n        path: path,\n        offset: edge === 'end' ? node.text.length : 0\n      };\n    }\n\n    if (Range.isRange(at)) {\n      var _Range$edges = Range.edges(at),\n          _Range$edges2 = Object(slicedToArray[\"a\" /* default */])(_Range$edges, 2),\n          start = _Range$edges2[0],\n          end = _Range$edges2[1];\n\n      return edge === 'start' ? start : end;\n    }\n\n    return at;\n  },\n\n  /**\r\n   * Create a mutable ref for a `Point` object, which will stay in sync as new\r\n   * operations are applied to the editor.\r\n   */\n  pointRef: function pointRef(editor, point) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$affinity2 = options.affinity,\n        affinity = _options$affinity2 === void 0 ? 'forward' : _options$affinity2;\n    var ref = {\n      current: point,\n      affinity: affinity,\n      unref: function unref() {\n        var current = ref.current;\n        var pointRefs = Editor.pointRefs(editor);\n        pointRefs.delete(ref);\n        ref.current = null;\n        return current;\n      }\n    };\n    var refs = Editor.pointRefs(editor);\n    refs.add(ref);\n    return ref;\n  },\n\n  /**\r\n   * Get the set of currently tracked point refs of the editor.\r\n   */\n  pointRefs: function pointRefs(editor) {\n    var refs = POINT_REFS.get(editor);\n\n    if (!refs) {\n      refs = new Set();\n      POINT_REFS.set(editor, refs);\n    }\n\n    return refs;\n  },\n\n  /**\r\n   * Return all the positions in `at` range where a `Point` can be placed.\r\n   *\r\n   * By default, moves forward by individual offsets at a time, but\r\n   * the `unit` option can be used to to move by character, word, line, or block.\r\n   *\r\n   * The `reverse` option can be used to change iteration direction.\r\n   *\r\n   * Note: By default void nodes are treated as a single point and iteration\r\n   * will not happen inside their content unless you pass in true for the\r\n   * `voids` option, then iteration will occur.\r\n   */\n  positions: /*#__PURE__*/regenerator_default.a.mark(function positions(editor) {\n    var options,\n        _options$at5,\n        at,\n        _options$unit3,\n        unit,\n        _options$reverse3,\n        reverse$1,\n        _options$voids5,\n        voids,\n        range,\n        _Range$edges3,\n        _Range$edges4,\n        start,\n        end,\n        first,\n        isNewBlock,\n        blockText,\n        distance,\n        leafTextRemaining,\n        leafTextOffset,\n        _iterator14,\n        _step14,\n        _step14$value,\n        node,\n        path,\n        e,\n        s,\n        isFirst,\n        calcDistance,\n        _args3 = arguments;\n\n    return regenerator_default.a.wrap(function positions$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            calcDistance = function _calcDistance(text, unit) {\n              if (unit === 'character') {\n                return getCharacterDistance(text);\n              } else if (unit === 'word') {\n                return getWordDistance(text);\n              } else if (unit === 'line' || unit === 'block') {\n                return text.length;\n              }\n\n              return 1;\n            };\n\n            options = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : {};\n            _options$at5 = options.at, at = _options$at5 === void 0 ? editor.selection : _options$at5, _options$unit3 = options.unit, unit = _options$unit3 === void 0 ? 'offset' : _options$unit3, _options$reverse3 = options.reverse, reverse$1 = _options$reverse3 === void 0 ? false : _options$reverse3, _options$voids5 = options.voids, voids = _options$voids5 === void 0 ? false : _options$voids5;\n\n            if (at) {\n              _context3.next = 5;\n              break;\n            }\n\n            return _context3.abrupt(\"return\");\n\n          case 5:\n            /**\r\n             * Algorithm notes:\r\n             *\r\n             * Each step `distance` is dynamic depending on the underlying text\r\n             * and the `unit` specified.  Each step, e.g., a line or word, may\r\n             * span multiple text nodes, so we iterate through the text both on\r\n             * two levels in step-sync:\r\n             *\r\n             * `leafText` stores the text on a text leaf level, and is advanced\r\n             * through using the counters `leafTextOffset` and `leafTextRemaining`.\r\n             *\r\n             * `blockText` stores the text on a block level, and is shortened\r\n             * by `distance` every time it is advanced.\r\n             *\r\n             * We only maintain a window of one blockText and one leafText because\r\n             * a block node always appears before all of its leaf nodes.\r\n             */\n            range = Editor.range(editor, at);\n            _Range$edges3 = Range.edges(range), _Range$edges4 = Object(slicedToArray[\"a\" /* default */])(_Range$edges3, 2), start = _Range$edges4[0], end = _Range$edges4[1];\n            first = reverse$1 ? end : start;\n            isNewBlock = false;\n            blockText = '';\n            distance = 0; // Distance for leafText to catch up to blockText.\n\n            leafTextRemaining = 0;\n            leafTextOffset = 0; // Iterate through all nodes in range, grabbing entire textual content\n            // of block nodes in blockText, and text nodes in leafText.\n            // Exploits the fact that nodes are sequenced in such a way that we first\n            // encounter the block node, then all of its text nodes, so when iterating\n            // through the blockText and leafText we just need to remember a window of\n            // one block node and leaf node, respectively.\n\n            _iterator14 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.nodes(editor, {\n              at: at,\n              reverse: reverse$1,\n              voids: voids\n            }));\n            _context3.prev = 14;\n\n            _iterator14.s();\n\n          case 16:\n            if ((_step14 = _iterator14.n()).done) {\n              _context3.next = 51;\n              break;\n            }\n\n            _step14$value = Object(slicedToArray[\"a\" /* default */])(_step14.value, 2), node = _step14$value[0], path = _step14$value[1];\n\n            if (!Element.isElement(node)) {\n              _context3.next = 26;\n              break;\n            }\n\n            if (!(!voids && editor.isVoid(node))) {\n              _context3.next = 23;\n              break;\n            }\n\n            _context3.next = 22;\n            return Editor.start(editor, path);\n\n          case 22:\n            return _context3.abrupt(\"continue\", 49);\n\n          case 23:\n            if (!editor.isInline(node)) {\n              _context3.next = 25;\n              break;\n            }\n\n            return _context3.abrupt(\"continue\", 49);\n\n          case 25:\n            // Block element node - set `blockText` to its text content.\n            if (Editor.hasInlines(editor, node)) {\n              // We always exhaust block nodes before encountering a new one:\n              //   console.assert(blockText === '',\n              //     `blockText='${blockText}' - `+\n              //     `not exhausted before new block node`, path)\n              // Ensure range considered is capped to `range`, in the\n              // start/end edge cases where block extends beyond range.\n              // Equivalent to this, but presumably more performant:\n              //   blockRange = Editor.range(editor, ...Editor.edges(editor, path))\n              //   blockRange = Range.intersection(range, blockRange) // intersect\n              //   blockText = Editor.string(editor, blockRange, { voids })\n              e = Path.isAncestor(path, end.path) ? end : Editor.end(editor, path);\n              s = Path.isAncestor(path, start.path) ? start : Editor.start(editor, path);\n              blockText = Editor.string(editor, {\n                anchor: s,\n                focus: e\n              }, {\n                voids: voids\n              });\n              blockText = reverse$1 ? Object(esrever[\"reverse\"])(blockText) : blockText;\n              isNewBlock = true;\n            }\n\n          case 26:\n            if (!Text.isText(node)) {\n              _context3.next = 49;\n              break;\n            }\n\n            isFirst = Path.equals(path, first.path); // Proof that we always exhaust text nodes before encountering a new one:\n            //   console.assert(leafTextRemaining <= 0,\n            //     `leafTextRemaining=${leafTextRemaining} - `+\n            //     `not exhausted before new leaf text node`, path)\n            // Reset `leafText` counters for new text node.\n\n            if (isFirst) {\n              leafTextRemaining = reverse$1 ? first.offset : node.text.length - first.offset;\n              leafTextOffset = first.offset; // Works for reverse too.\n            } else {\n              leafTextRemaining = node.text.length;\n              leafTextOffset = reverse$1 ? leafTextRemaining : 0;\n            } // Yield position at the start of node (potentially).\n\n\n            if (!(isFirst || isNewBlock || unit === 'offset')) {\n              _context3.next = 33;\n              break;\n            }\n\n            _context3.next = 32;\n            return {\n              path: path,\n              offset: leafTextOffset\n            };\n\n          case 32:\n            isNewBlock = false;\n\n          case 33:\n            if (false) {}\n\n            if (!(distance === 0)) {\n              _context3.next = 39;\n              break;\n            }\n\n            if (!(blockText === '')) {\n              _context3.next = 37;\n              break;\n            }\n\n            return _context3.abrupt(\"break\", 49);\n\n          case 37:\n            distance = calcDistance(blockText, unit);\n            blockText = blockText.slice(distance);\n\n          case 39:\n            // Advance `leafText` by the current `distance`.\n            leafTextOffset = reverse$1 ? leafTextOffset - distance : leafTextOffset + distance;\n            leafTextRemaining = leafTextRemaining - distance; // If `leafText` is exhausted, break to get a new leaf node\n            // and set distance to the overflow amount, so we'll (maybe)\n            // catch up to blockText in the next leaf text node.\n\n            if (!(leafTextRemaining < 0)) {\n              _context3.next = 44;\n              break;\n            }\n\n            distance = -leafTextRemaining;\n            return _context3.abrupt(\"break\", 49);\n\n          case 44:\n            // Successfully walked `distance` offsets through `leafText`\n            // to catch up with `blockText`, so we can reset `distance`\n            // and yield this position in this node.\n            distance = 0;\n            _context3.next = 47;\n            return {\n              path: path,\n              offset: leafTextOffset\n            };\n\n          case 47:\n            _context3.next = 33;\n            break;\n\n          case 49:\n            _context3.next = 16;\n            break;\n\n          case 51:\n            _context3.next = 56;\n            break;\n\n          case 53:\n            _context3.prev = 53;\n            _context3.t0 = _context3[\"catch\"](14);\n\n            _iterator14.e(_context3.t0);\n\n          case 56:\n            _context3.prev = 56;\n\n            _iterator14.f();\n\n            return _context3.finish(56);\n\n          case 59:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, positions, null, [[14, 53, 56, 59]]);\n  }),\n\n  /**\r\n   * Get the matching node in the branch of the document before a location.\r\n   */\n  previous: function previous(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$mode4 = options.mode,\n        mode = _options$mode4 === void 0 ? 'lowest' : _options$mode4,\n        _options$voids6 = options.voids,\n        voids = _options$voids6 === void 0 ? false : _options$voids6;\n    var match = options.match,\n        _options$at6 = options.at,\n        at = _options$at6 === void 0 ? editor.selection : _options$at6;\n\n    if (!at) {\n      return;\n    }\n\n    var pointBeforeLocation = Editor.before(editor, at, {\n      voids: voids\n    });\n\n    if (!pointBeforeLocation) {\n      return;\n    }\n\n    var _Editor$first = Editor.first(editor, []),\n        _Editor$first2 = Object(slicedToArray[\"a\" /* default */])(_Editor$first, 2),\n        to = _Editor$first2[1]; // The search location is from the start of the document to the path of\n    // the point before the location passed in\n\n\n    var span = [pointBeforeLocation.path, to];\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(\"Cannot get the previous node from the root node!\");\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        var _Editor$parent3 = Editor.parent(editor, at),\n            _Editor$parent4 = Object(slicedToArray[\"a\" /* default */])(_Editor$parent3, 1),\n            parent = _Editor$parent4[0];\n\n        match = function match(n) {\n          return parent.children.includes(n);\n        };\n      } else {\n        match = function match() {\n          return true;\n        };\n      }\n    }\n\n    var _Editor$nodes5 = Editor.nodes(editor, {\n      reverse: true,\n      at: span,\n      match: match,\n      mode: mode,\n      voids: voids\n    }),\n        _Editor$nodes6 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes5, 1),\n        previous = _Editor$nodes6[0];\n\n    return previous;\n  },\n\n  /**\r\n   * Get a range of a location.\r\n   */\n  range: function range(editor, at, to) {\n    if (Range.isRange(at) && !to) {\n      return at;\n    }\n\n    var start = Editor.start(editor, at);\n    var end = Editor.end(editor, to || at);\n    return {\n      anchor: start,\n      focus: end\n    };\n  },\n\n  /**\r\n   * Create a mutable ref for a `Range` object, which will stay in sync as new\r\n   * operations are applied to the editor.\r\n   */\n  rangeRef: function rangeRef(editor, range) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$affinity3 = options.affinity,\n        affinity = _options$affinity3 === void 0 ? 'forward' : _options$affinity3;\n    var ref = {\n      current: range,\n      affinity: affinity,\n      unref: function unref() {\n        var current = ref.current;\n        var rangeRefs = Editor.rangeRefs(editor);\n        rangeRefs.delete(ref);\n        ref.current = null;\n        return current;\n      }\n    };\n    var refs = Editor.rangeRefs(editor);\n    refs.add(ref);\n    return ref;\n  },\n\n  /**\r\n   * Get the set of currently tracked range refs of the editor.\r\n   */\n  rangeRefs: function rangeRefs(editor) {\n    var refs = RANGE_REFS.get(editor);\n\n    if (!refs) {\n      refs = new Set();\n      RANGE_REFS.set(editor, refs);\n    }\n\n    return refs;\n  },\n\n  /**\r\n   * Remove a custom property from all of the leaf text nodes in the current\r\n   * selection.\r\n   *\r\n   * If the selection is currently collapsed, the removal will be stored on\r\n   * `editor.marks` and applied to the text inserted next.\r\n   */\n  removeMark: function removeMark(editor, key) {\n    editor.removeMark(key);\n  },\n\n  /**\r\n   * Get the start point of a location.\r\n   */\n  start: function start(editor, at) {\n    return Editor.point(editor, at, {\n      edge: 'start'\n    });\n  },\n\n  /**\r\n   * Get the text string content of a location.\r\n   *\r\n   * Note: by default the text of void nodes is considered to be an empty\r\n   * string, regardless of content, unless you pass in true for the voids option\r\n   */\n  string: function string(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$voids7 = options.voids,\n        voids = _options$voids7 === void 0 ? false : _options$voids7;\n    var range = Editor.range(editor, at);\n\n    var _Range$edges5 = Range.edges(range),\n        _Range$edges6 = Object(slicedToArray[\"a\" /* default */])(_Range$edges5, 2),\n        start = _Range$edges6[0],\n        end = _Range$edges6[1];\n\n    var text = '';\n\n    var _iterator15 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.nodes(editor, {\n      at: range,\n      match: Text.isText,\n      voids: voids\n    })),\n        _step15;\n\n    try {\n      for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n        var _step15$value = Object(slicedToArray[\"a\" /* default */])(_step15.value, 2),\n            node = _step15$value[0],\n            path = _step15$value[1];\n\n        var t = node.text;\n\n        if (Path.equals(path, end.path)) {\n          t = t.slice(0, end.offset);\n        }\n\n        if (Path.equals(path, start.path)) {\n          t = t.slice(start.offset);\n        }\n\n        text += t;\n      }\n    } catch (err) {\n      _iterator15.e(err);\n    } finally {\n      _iterator15.f();\n    }\n\n    return text;\n  },\n\n  /**\r\n   * Convert a range into a non-hanging one.\r\n   */\n  unhangRange: function unhangRange(editor, range) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$voids8 = options.voids,\n        voids = _options$voids8 === void 0 ? false : _options$voids8;\n\n    var _Range$edges7 = Range.edges(range),\n        _Range$edges8 = Object(slicedToArray[\"a\" /* default */])(_Range$edges7, 2),\n        start = _Range$edges8[0],\n        end = _Range$edges8[1]; // PERF: exit early if we can guarantee that the range isn't hanging.\n\n\n    if (start.offset !== 0 || end.offset !== 0 || Range.isCollapsed(range)) {\n      return range;\n    }\n\n    var endBlock = Editor.above(editor, {\n      at: end,\n      match: function match(n) {\n        return Editor.isBlock(editor, n);\n      }\n    });\n    var blockPath = endBlock ? endBlock[1] : [];\n    var first = Editor.start(editor, []);\n    var before = {\n      anchor: first,\n      focus: end\n    };\n    var skip = true;\n\n    var _iterator16 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.nodes(editor, {\n      at: before,\n      match: Text.isText,\n      reverse: true,\n      voids: voids\n    })),\n        _step16;\n\n    try {\n      for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n        var _step16$value = Object(slicedToArray[\"a\" /* default */])(_step16.value, 2),\n            node = _step16$value[0],\n            path = _step16$value[1];\n\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (node.text !== '' || Path.isBefore(path, blockPath)) {\n          end = {\n            path: path,\n            offset: node.text.length\n          };\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator16.e(err);\n    } finally {\n      _iterator16.f();\n    }\n\n    return {\n      anchor: start,\n      focus: end\n    };\n  },\n\n  /**\r\n   * Match a void node in the current branch of the editor.\r\n   */\n  void: function _void(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return Editor.above(editor, _objectSpread$1(_objectSpread$1({}, options), {}, {\n      match: function match(n) {\n        return Editor.isVoid(editor, n);\n      }\n    }));\n  },\n\n  /**\r\n   * Call a function, deferring normalization until after it completes.\r\n   */\n  withoutNormalizing: function withoutNormalizing(editor, fn) {\n    var value = Editor.isNormalizing(editor);\n    NORMALIZING.set(editor, false);\n\n    try {\n      fn();\n    } finally {\n      NORMALIZING.set(editor, value);\n    }\n\n    Editor.normalize(editor);\n  }\n};\nvar Location = {\n  /**\r\n   * Check if a value implements the `Location` interface.\r\n   */\n  isLocation: function isLocation(value) {\n    return Path.isPath(value) || Point.isPoint(value) || Range.isRange(value);\n  }\n};\nvar Span = {\n  /**\r\n   * Check if a value implements the `Span` interface.\r\n   */\n  isSpan: function isSpan(value) {\n    return Array.isArray(value) && value.length === 2 && value.every(Path.isPath);\n  }\n};\nvar IS_NODE_LIST_CACHE = new WeakMap();\nvar Node = {\n  /**\r\n   * Get the node at a specific path, asserting that it's an ancestor node.\r\n   */\n  ancestor: function ancestor(root, path) {\n    var node = Node.get(root, path);\n\n    if (Text.isText(node)) {\n      throw new Error(\"Cannot get the ancestor node at path [\".concat(path, \"] because it refers to a text node instead: \").concat(node));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Return a generator of all the ancestor nodes above a specific path.\r\n   *\r\n   * By default the order is bottom-up, from lowest to highest ancestor in\r\n   * the tree, but you can pass the `reverse: true` option to go top-down.\r\n   */\n  ancestors: /*#__PURE__*/regenerator_default.a.mark(function ancestors(root, path) {\n    var options,\n        _iterator17,\n        _step17,\n        p,\n        n,\n        entry,\n        _args4 = arguments;\n\n    return regenerator_default.a.wrap(function ancestors$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            options = _args4.length > 2 && _args4[2] !== undefined ? _args4[2] : {};\n            _iterator17 = Object(createForOfIteratorHelper[\"a\" /* default */])(Path.ancestors(path, options));\n            _context4.prev = 2;\n\n            _iterator17.s();\n\n          case 4:\n            if ((_step17 = _iterator17.n()).done) {\n              _context4.next = 12;\n              break;\n            }\n\n            p = _step17.value;\n            n = Node.ancestor(root, p);\n            entry = [n, p];\n            _context4.next = 10;\n            return entry;\n\n          case 10:\n            _context4.next = 4;\n            break;\n\n          case 12:\n            _context4.next = 17;\n            break;\n\n          case 14:\n            _context4.prev = 14;\n            _context4.t0 = _context4[\"catch\"](2);\n\n            _iterator17.e(_context4.t0);\n\n          case 17:\n            _context4.prev = 17;\n\n            _iterator17.f();\n\n            return _context4.finish(17);\n\n          case 20:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, ancestors, null, [[2, 14, 17, 20]]);\n  }),\n\n  /**\r\n   * Get the child of a node at a specific index.\r\n   */\n  child: function child(root, index) {\n    if (Text.isText(root)) {\n      throw new Error(\"Cannot get the child of a text node: \".concat(JSON.stringify(root)));\n    }\n\n    var c = root.children[index];\n\n    if (c == null) {\n      throw new Error(\"Cannot get child at index `\".concat(index, \"` in node: \").concat(JSON.stringify(root)));\n    }\n\n    return c;\n  },\n\n  /**\r\n   * Iterate over the children of a node at a specific path.\r\n   */\n  children: /*#__PURE__*/regenerator_default.a.mark(function children(root, path) {\n    var options,\n        _options$reverse4,\n        reverse,\n        ancestor,\n        children,\n        index,\n        child,\n        childPath,\n        _args5 = arguments;\n\n    return regenerator_default.a.wrap(function children$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            options = _args5.length > 2 && _args5[2] !== undefined ? _args5[2] : {};\n            _options$reverse4 = options.reverse, reverse = _options$reverse4 === void 0 ? false : _options$reverse4;\n            ancestor = Node.ancestor(root, path);\n            children = ancestor.children;\n            index = reverse ? children.length - 1 : 0;\n\n          case 5:\n            if (!(reverse ? index >= 0 : index < children.length)) {\n              _context5.next = 13;\n              break;\n            }\n\n            child = Node.child(ancestor, index);\n            childPath = path.concat(index);\n            _context5.next = 10;\n            return [child, childPath];\n\n          case 10:\n            index = reverse ? index - 1 : index + 1;\n            _context5.next = 5;\n            break;\n\n          case 13:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, children);\n  }),\n\n  /**\r\n   * Get an entry for the common ancesetor node of two paths.\r\n   */\n  common: function common(root, path, another) {\n    var p = Path.common(path, another);\n    var n = Node.get(root, p);\n    return [n, p];\n  },\n\n  /**\r\n   * Get the node at a specific path, asserting that it's a descendant node.\r\n   */\n  descendant: function descendant(root, path) {\n    var node = Node.get(root, path);\n\n    if (Editor.isEditor(node)) {\n      throw new Error(\"Cannot get the descendant node at path [\".concat(path, \"] because it refers to the root editor node instead: \").concat(node));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Return a generator of all the descendant node entries inside a root node.\r\n   */\n  descendants: /*#__PURE__*/regenerator_default.a.mark(function descendants(root) {\n    var options,\n        _iterator18,\n        _step18,\n        _step18$value,\n        node,\n        path,\n        _args6 = arguments;\n\n    return regenerator_default.a.wrap(function descendants$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            options = _args6.length > 1 && _args6[1] !== undefined ? _args6[1] : {};\n            _iterator18 = Object(createForOfIteratorHelper[\"a\" /* default */])(Node.nodes(root, options));\n            _context6.prev = 2;\n\n            _iterator18.s();\n\n          case 4:\n            if ((_step18 = _iterator18.n()).done) {\n              _context6.next = 11;\n              break;\n            }\n\n            _step18$value = Object(slicedToArray[\"a\" /* default */])(_step18.value, 2), node = _step18$value[0], path = _step18$value[1];\n\n            if (!(path.length !== 0)) {\n              _context6.next = 9;\n              break;\n            }\n\n            _context6.next = 9;\n            return [node, path];\n\n          case 9:\n            _context6.next = 4;\n            break;\n\n          case 11:\n            _context6.next = 16;\n            break;\n\n          case 13:\n            _context6.prev = 13;\n            _context6.t0 = _context6[\"catch\"](2);\n\n            _iterator18.e(_context6.t0);\n\n          case 16:\n            _context6.prev = 16;\n\n            _iterator18.f();\n\n            return _context6.finish(16);\n\n          case 19:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, descendants, null, [[2, 13, 16, 19]]);\n  }),\n\n  /**\r\n   * Return a generator of all the element nodes inside a root node. Each iteration\r\n   * will return an `ElementEntry` tuple consisting of `[Element, Path]`. If the\r\n   * root node is an element it will be included in the iteration as well.\r\n   */\n  elements: /*#__PURE__*/regenerator_default.a.mark(function elements(root) {\n    var options,\n        _iterator19,\n        _step19,\n        _step19$value,\n        node,\n        path,\n        _args7 = arguments;\n\n    return regenerator_default.a.wrap(function elements$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            options = _args7.length > 1 && _args7[1] !== undefined ? _args7[1] : {};\n            _iterator19 = Object(createForOfIteratorHelper[\"a\" /* default */])(Node.nodes(root, options));\n            _context7.prev = 2;\n\n            _iterator19.s();\n\n          case 4:\n            if ((_step19 = _iterator19.n()).done) {\n              _context7.next = 11;\n              break;\n            }\n\n            _step19$value = Object(slicedToArray[\"a\" /* default */])(_step19.value, 2), node = _step19$value[0], path = _step19$value[1];\n\n            if (!Element.isElement(node)) {\n              _context7.next = 9;\n              break;\n            }\n\n            _context7.next = 9;\n            return [node, path];\n\n          case 9:\n            _context7.next = 4;\n            break;\n\n          case 11:\n            _context7.next = 16;\n            break;\n\n          case 13:\n            _context7.prev = 13;\n            _context7.t0 = _context7[\"catch\"](2);\n\n            _iterator19.e(_context7.t0);\n\n          case 16:\n            _context7.prev = 16;\n\n            _iterator19.f();\n\n            return _context7.finish(16);\n\n          case 19:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, elements, null, [[2, 13, 16, 19]]);\n  }),\n\n  /**\r\n   * Extract props from a Node.\r\n   */\n  extractProps: function extractProps(node) {\n    if (Element.isAncestor(node)) {\n      var properties = _objectWithoutProperties(node, [\"children\"]);\n\n      return properties;\n    } else {\n      var properties = _objectWithoutProperties(node, [\"text\"]);\n\n      return properties;\n    }\n  },\n\n  /**\r\n   * Get the first node entry in a root node from a path.\r\n   */\n  first: function first(root, path) {\n    var p = path.slice();\n    var n = Node.get(root, p);\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break;\n      } else {\n        n = n.children[0];\n        p.push(0);\n      }\n    }\n\n    return [n, p];\n  },\n\n  /**\r\n   * Get the sliced fragment represented by a range inside a root node.\r\n   */\n  fragment: function fragment(root, range) {\n    if (Text.isText(root)) {\n      throw new Error(\"Cannot get a fragment starting from a root text node: \".concat(JSON.stringify(root)));\n    }\n\n    var newRoot = fn({\n      children: root.children\n    }, function (r) {\n      var _Range$edges9 = Range.edges(range),\n          _Range$edges10 = Object(slicedToArray[\"a\" /* default */])(_Range$edges9, 2),\n          start = _Range$edges10[0],\n          end = _Range$edges10[1];\n\n      var nodeEntries = Node.nodes(r, {\n        reverse: true,\n        pass: function pass(_ref) {\n          var _ref9 = Object(slicedToArray[\"a\" /* default */])(_ref, 2),\n              path = _ref9[1];\n\n          return !Range.includes(range, path);\n        }\n      });\n\n      var _iterator20 = Object(createForOfIteratorHelper[\"a\" /* default */])(nodeEntries),\n          _step20;\n\n      try {\n        for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n          var _step20$value = Object(slicedToArray[\"a\" /* default */])(_step20.value, 2),\n              path = _step20$value[1];\n\n          if (!Range.includes(range, path)) {\n            var parent = Node.parent(r, path);\n            var index = path[path.length - 1];\n            parent.children.splice(index, 1);\n          }\n\n          if (Path.equals(path, end.path)) {\n            var leaf = Node.leaf(r, path);\n            leaf.text = leaf.text.slice(0, end.offset);\n          }\n\n          if (Path.equals(path, start.path)) {\n            var _leaf = Node.leaf(r, path);\n\n            _leaf.text = _leaf.text.slice(start.offset);\n          }\n        }\n      } catch (err) {\n        _iterator20.e(err);\n      } finally {\n        _iterator20.f();\n      }\n\n      if (Editor.isEditor(r)) {\n        r.selection = null;\n      }\n    });\n    return newRoot.children;\n  },\n\n  /**\r\n   * Get the descendant node referred to by a specific path. If the path is an\r\n   * empty array, it refers to the root node itself.\r\n   */\n  get: function get(root, path) {\n    var node = root;\n\n    for (var i = 0; i < path.length; i++) {\n      var p = path[i];\n\n      if (Text.isText(node) || !node.children[p]) {\n        throw new Error(\"Cannot find a descendant at path [\".concat(path, \"] in node: \").concat(JSON.stringify(root)));\n      }\n\n      node = node.children[p];\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Check if a descendant node exists at a specific path.\r\n   */\n  has: function has(root, path) {\n    var node = root;\n\n    for (var i = 0; i < path.length; i++) {\n      var p = path[i];\n\n      if (Text.isText(node) || !node.children[p]) {\n        return false;\n      }\n\n      node = node.children[p];\n    }\n\n    return true;\n  },\n\n  /**\r\n   * Check if a value implements the `Node` interface.\r\n   */\n  isNode: function isNode(value) {\n    return Text.isText(value) || Element.isElement(value) || Editor.isEditor(value);\n  },\n\n  /**\r\n   * Check if a value is a list of `Node` objects.\r\n   */\n  isNodeList: function isNodeList(value) {\n    if (!Array.isArray(value)) {\n      return false;\n    }\n\n    var cachedResult = IS_NODE_LIST_CACHE.get(value);\n\n    if (cachedResult !== undefined) {\n      return cachedResult;\n    }\n\n    var isNodeList = value.every(function (val) {\n      return Node.isNode(val);\n    });\n    IS_NODE_LIST_CACHE.set(value, isNodeList);\n    return isNodeList;\n  },\n\n  /**\r\n   * Get the last node entry in a root node from a path.\r\n   */\n  last: function last(root, path) {\n    var p = path.slice();\n    var n = Node.get(root, p);\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break;\n      } else {\n        var i = n.children.length - 1;\n        n = n.children[i];\n        p.push(i);\n      }\n    }\n\n    return [n, p];\n  },\n\n  /**\r\n   * Get the node at a specific path, ensuring it's a leaf text node.\r\n   */\n  leaf: function leaf(root, path) {\n    var node = Node.get(root, path);\n\n    if (!Text.isText(node)) {\n      throw new Error(\"Cannot get the leaf node at path [\".concat(path, \"] because it refers to a non-leaf node: \").concat(node));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Return a generator of the in a branch of the tree, from a specific path.\r\n   *\r\n   * By default the order is top-down, from lowest to highest node in the tree,\r\n   * but you can pass the `reverse: true` option to go bottom-up.\r\n   */\n  levels: /*#__PURE__*/regenerator_default.a.mark(function levels(root, path) {\n    var options,\n        _iterator21,\n        _step21,\n        p,\n        n,\n        _args8 = arguments;\n\n    return regenerator_default.a.wrap(function levels$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            options = _args8.length > 2 && _args8[2] !== undefined ? _args8[2] : {};\n            _iterator21 = Object(createForOfIteratorHelper[\"a\" /* default */])(Path.levels(path, options));\n            _context8.prev = 2;\n\n            _iterator21.s();\n\n          case 4:\n            if ((_step21 = _iterator21.n()).done) {\n              _context8.next = 11;\n              break;\n            }\n\n            p = _step21.value;\n            n = Node.get(root, p);\n            _context8.next = 9;\n            return [n, p];\n\n          case 9:\n            _context8.next = 4;\n            break;\n\n          case 11:\n            _context8.next = 16;\n            break;\n\n          case 13:\n            _context8.prev = 13;\n            _context8.t0 = _context8[\"catch\"](2);\n\n            _iterator21.e(_context8.t0);\n\n          case 16:\n            _context8.prev = 16;\n\n            _iterator21.f();\n\n            return _context8.finish(16);\n\n          case 19:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, levels, null, [[2, 13, 16, 19]]);\n  }),\n\n  /**\r\n   * Check if a node matches a set of props.\r\n   */\n  matches: function matches(node, props) {\n    return Element.isElement(node) && Element.isElementProps(props) && Element.matches(node, props) || Text.isText(node) && Text.isTextProps(props) && Text.matches(node, props);\n  },\n\n  /**\r\n   * Return a generator of all the node entries of a root node. Each entry is\r\n   * returned as a `[Node, Path]` tuple, with the path referring to the node's\r\n   * position inside the root node.\r\n   */\n  nodes: /*#__PURE__*/regenerator_default.a.mark(function nodes(root) {\n    var options,\n        pass,\n        _options$reverse5,\n        reverse,\n        _options$from,\n        from,\n        to,\n        visited,\n        p,\n        n,\n        nextIndex,\n        newPath,\n        _newPath,\n        _args9 = arguments;\n\n    return regenerator_default.a.wrap(function nodes$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            options = _args9.length > 1 && _args9[1] !== undefined ? _args9[1] : {};\n            pass = options.pass, _options$reverse5 = options.reverse, reverse = _options$reverse5 === void 0 ? false : _options$reverse5;\n            _options$from = options.from, from = _options$from === void 0 ? [] : _options$from, to = options.to;\n            visited = new Set();\n            p = [];\n            n = root;\n\n          case 6:\n            if (false) {}\n\n            if (!(to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to)))) {\n              _context9.next = 9;\n              break;\n            }\n\n            return _context9.abrupt(\"break\", 37);\n\n          case 9:\n            if (visited.has(n)) {\n              _context9.next = 12;\n              break;\n            }\n\n            _context9.next = 12;\n            return [n, p];\n\n          case 12:\n            if (!(!visited.has(n) && !Text.isText(n) && n.children.length !== 0 && (pass == null || pass([n, p]) === false))) {\n              _context9.next = 19;\n              break;\n            }\n\n            visited.add(n);\n            nextIndex = reverse ? n.children.length - 1 : 0;\n\n            if (Path.isAncestor(p, from)) {\n              nextIndex = from[p.length];\n            }\n\n            p = p.concat(nextIndex);\n            n = Node.get(root, p);\n            return _context9.abrupt(\"continue\", 6);\n\n          case 19:\n            if (!(p.length === 0)) {\n              _context9.next = 21;\n              break;\n            }\n\n            return _context9.abrupt(\"break\", 37);\n\n          case 21:\n            if (reverse) {\n              _context9.next = 27;\n              break;\n            }\n\n            newPath = Path.next(p);\n\n            if (!Node.has(root, newPath)) {\n              _context9.next = 27;\n              break;\n            }\n\n            p = newPath;\n            n = Node.get(root, p);\n            return _context9.abrupt(\"continue\", 6);\n\n          case 27:\n            if (!(reverse && p[p.length - 1] !== 0)) {\n              _context9.next = 32;\n              break;\n            }\n\n            _newPath = Path.previous(p);\n            p = _newPath;\n            n = Node.get(root, p);\n            return _context9.abrupt(\"continue\", 6);\n\n          case 32:\n            // Otherwise we're going upward...\n            p = Path.parent(p);\n            n = Node.get(root, p);\n            visited.add(n);\n            _context9.next = 6;\n            break;\n\n          case 37:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, nodes);\n  }),\n\n  /**\r\n   * Get the parent of a node at a specific path.\r\n   */\n  parent: function parent(root, path) {\n    var parentPath = Path.parent(path);\n    var p = Node.get(root, parentPath);\n\n    if (Text.isText(p)) {\n      throw new Error(\"Cannot get the parent of path [\".concat(path, \"] because it does not exist in the root.\"));\n    }\n\n    return p;\n  },\n\n  /**\r\n   * Get the concatenated text string of a node's content.\r\n   *\r\n   * Note that this will not include spaces or line breaks between block nodes.\r\n   * It is not a user-facing string, but a string for performing offset-related\r\n   * computations for a node.\r\n   */\n  string: function string(node) {\n    if (Text.isText(node)) {\n      return node.text;\n    } else {\n      return node.children.map(Node.string).join('');\n    }\n  },\n\n  /**\r\n   * Return a generator of all leaf text nodes in a root node.\r\n   */\n  texts: /*#__PURE__*/regenerator_default.a.mark(function texts(root) {\n    var options,\n        _iterator22,\n        _step22,\n        _step22$value,\n        node,\n        path,\n        _args10 = arguments;\n\n    return regenerator_default.a.wrap(function texts$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            options = _args10.length > 1 && _args10[1] !== undefined ? _args10[1] : {};\n            _iterator22 = Object(createForOfIteratorHelper[\"a\" /* default */])(Node.nodes(root, options));\n            _context10.prev = 2;\n\n            _iterator22.s();\n\n          case 4:\n            if ((_step22 = _iterator22.n()).done) {\n              _context10.next = 11;\n              break;\n            }\n\n            _step22$value = Object(slicedToArray[\"a\" /* default */])(_step22.value, 2), node = _step22$value[0], path = _step22$value[1];\n\n            if (!Text.isText(node)) {\n              _context10.next = 9;\n              break;\n            }\n\n            _context10.next = 9;\n            return [node, path];\n\n          case 9:\n            _context10.next = 4;\n            break;\n\n          case 11:\n            _context10.next = 16;\n            break;\n\n          case 13:\n            _context10.prev = 13;\n            _context10.t0 = _context10[\"catch\"](2);\n\n            _iterator22.e(_context10.t0);\n\n          case 16:\n            _context10.prev = 16;\n\n            _iterator22.f();\n\n            return _context10.finish(16);\n\n          case 19:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, texts, null, [[2, 13, 16, 19]]);\n  })\n};\n\nfunction ownKeys$2(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$2(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$2(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar Operation = {\n  /**\r\n   * Check of a value is a `NodeOperation` object.\r\n   */\n  isNodeOperation: function isNodeOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_node');\n  },\n\n  /**\r\n   * Check of a value is an `Operation` object.\r\n   */\n  isOperation: function isOperation(value) {\n    if (!Object(index_es[\"a\" /* default */])(value)) {\n      return false;\n    }\n\n    switch (value.type) {\n      case 'insert_node':\n        return Path.isPath(value.path) && Node.isNode(value.node);\n\n      case 'insert_text':\n        return typeof value.offset === 'number' && typeof value.text === 'string' && Path.isPath(value.path);\n\n      case 'merge_node':\n        return typeof value.position === 'number' && Path.isPath(value.path) && Object(index_es[\"a\" /* default */])(value.properties);\n\n      case 'move_node':\n        return Path.isPath(value.path) && Path.isPath(value.newPath);\n\n      case 'remove_node':\n        return Path.isPath(value.path) && Node.isNode(value.node);\n\n      case 'remove_text':\n        return typeof value.offset === 'number' && typeof value.text === 'string' && Path.isPath(value.path);\n\n      case 'set_node':\n        return Path.isPath(value.path) && Object(index_es[\"a\" /* default */])(value.properties) && Object(index_es[\"a\" /* default */])(value.newProperties);\n\n      case 'set_selection':\n        return value.properties === null && Range.isRange(value.newProperties) || value.newProperties === null && Range.isRange(value.properties) || Object(index_es[\"a\" /* default */])(value.properties) && Object(index_es[\"a\" /* default */])(value.newProperties);\n\n      case 'split_node':\n        return Path.isPath(value.path) && typeof value.position === 'number' && Object(index_es[\"a\" /* default */])(value.properties);\n\n      default:\n        return false;\n    }\n  },\n\n  /**\r\n   * Check if a value is a list of `Operation` objects.\r\n   */\n  isOperationList: function isOperationList(value) {\n    return Array.isArray(value) && value.every(function (val) {\n      return Operation.isOperation(val);\n    });\n  },\n\n  /**\r\n   * Check of a value is a `SelectionOperation` object.\r\n   */\n  isSelectionOperation: function isSelectionOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_selection');\n  },\n\n  /**\r\n   * Check of a value is a `TextOperation` object.\r\n   */\n  isTextOperation: function isTextOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_text');\n  },\n\n  /**\r\n   * Invert an operation, returning a new operation that will exactly undo the\r\n   * original when applied.\r\n   */\n  inverse: function inverse(op) {\n    switch (op.type) {\n      case 'insert_node':\n        {\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            type: 'remove_node'\n          });\n        }\n\n      case 'insert_text':\n        {\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            type: 'remove_text'\n          });\n        }\n\n      case 'merge_node':\n        {\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            type: 'split_node',\n            path: Path.previous(op.path)\n          });\n        }\n\n      case 'move_node':\n        {\n          var newPath = op.newPath,\n              path = op.path; // PERF: in this case the move operation is a no-op anyways.\n\n          if (Path.equals(newPath, path)) {\n            return op;\n          } // If the move happens completely within a single parent the path and\n          // newPath are stable with respect to each other.\n\n\n          if (Path.isSibling(path, newPath)) {\n            return _objectSpread$2(_objectSpread$2({}, op), {}, {\n              path: newPath,\n              newPath: path\n            });\n          } // If the move does not happen within a single parent it is possible\n          // for the move to impact the true path to the location where the node\n          // was removed from and where it was inserted. We have to adjust for this\n          // and find the original path. We can accomplish this (only in non-sibling)\n          // moves by looking at the impact of the move operation on the node\n          // after the original move path.\n\n\n          var inversePath = Path.transform(path, op);\n          var inverseNewPath = Path.transform(Path.next(path), op);\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            path: inversePath,\n            newPath: inverseNewPath\n          });\n        }\n\n      case 'remove_node':\n        {\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            type: 'insert_node'\n          });\n        }\n\n      case 'remove_text':\n        {\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            type: 'insert_text'\n          });\n        }\n\n      case 'set_node':\n        {\n          var properties = op.properties,\n              newProperties = op.newProperties;\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            properties: newProperties,\n            newProperties: properties\n          });\n        }\n\n      case 'set_selection':\n        {\n          var _properties = op.properties,\n              _newProperties = op.newProperties;\n\n          if (_properties == null) {\n            return _objectSpread$2(_objectSpread$2({}, op), {}, {\n              properties: _newProperties,\n              newProperties: null\n            });\n          } else if (_newProperties == null) {\n            return _objectSpread$2(_objectSpread$2({}, op), {}, {\n              properties: null,\n              newProperties: _properties\n            });\n          } else {\n            return _objectSpread$2(_objectSpread$2({}, op), {}, {\n              properties: _newProperties,\n              newProperties: _properties\n            });\n          }\n        }\n\n      case 'split_node':\n        {\n          return _objectSpread$2(_objectSpread$2({}, op), {}, {\n            type: 'merge_node',\n            path: Path.next(op.path)\n          });\n        }\n    }\n  }\n};\nvar Path = {\n  /**\r\n   * Get a list of ancestor paths for a given path.\r\n   *\r\n   * The paths are sorted from deepest to shallowest ancestor. However, if the\r\n   * `reverse: true` option is passed, they are reversed.\r\n   */\n  ancestors: function ancestors(path) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$reverse6 = options.reverse,\n        reverse = _options$reverse6 === void 0 ? false : _options$reverse6;\n    var paths = Path.levels(path, options);\n\n    if (reverse) {\n      paths = paths.slice(1);\n    } else {\n      paths = paths.slice(0, -1);\n    }\n\n    return paths;\n  },\n\n  /**\r\n   * Get the common ancestor path of two paths.\r\n   */\n  common: function common(path, another) {\n    var common = [];\n\n    for (var i = 0; i < path.length && i < another.length; i++) {\n      var av = path[i];\n      var bv = another[i];\n\n      if (av !== bv) {\n        break;\n      }\n\n      common.push(av);\n    }\n\n    return common;\n  },\n\n  /**\r\n   * Compare a path to another, returning an integer indicating whether the path\r\n   * was before, at, or after the other.\r\n   *\r\n   * Note: Two paths of unequal length can still receive a `0` result if one is\r\n   * directly above or below the other. If you want exact matching, use\r\n   * [[Path.equals]] instead.\r\n   */\n  compare: function compare(path, another) {\n    var min = Math.min(path.length, another.length);\n\n    for (var i = 0; i < min; i++) {\n      if (path[i] < another[i]) return -1;\n      if (path[i] > another[i]) return 1;\n    }\n\n    return 0;\n  },\n\n  /**\r\n   * Check if a path ends after one of the indexes in another.\r\n   */\n  endsAfter: function endsAfter(path, another) {\n    var i = path.length - 1;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    var av = path[i];\n    var bv = another[i];\n    return Path.equals(as, bs) && av > bv;\n  },\n\n  /**\r\n   * Check if a path ends at one of the indexes in another.\r\n   */\n  endsAt: function endsAt(path, another) {\n    var i = path.length;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    return Path.equals(as, bs);\n  },\n\n  /**\r\n   * Check if a path ends before one of the indexes in another.\r\n   */\n  endsBefore: function endsBefore(path, another) {\n    var i = path.length - 1;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    var av = path[i];\n    var bv = another[i];\n    return Path.equals(as, bs) && av < bv;\n  },\n\n  /**\r\n   * Check if a path is exactly equal to another.\r\n   */\n  equals: function equals(path, another) {\n    return path.length === another.length && path.every(function (n, i) {\n      return n === another[i];\n    });\n  },\n\n  /**\r\n   * Check if the path of previous sibling node exists\r\n   */\n  hasPrevious: function hasPrevious(path) {\n    return path[path.length - 1] > 0;\n  },\n\n  /**\r\n   * Check if a path is after another.\r\n   */\n  isAfter: function isAfter(path, another) {\n    return Path.compare(path, another) === 1;\n  },\n\n  /**\r\n   * Check if a path is an ancestor of another.\r\n   */\n  isAncestor: function isAncestor(path, another) {\n    return path.length < another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is before another.\r\n   */\n  isBefore: function isBefore(path, another) {\n    return Path.compare(path, another) === -1;\n  },\n\n  /**\r\n   * Check if a path is a child of another.\r\n   */\n  isChild: function isChild(path, another) {\n    return path.length === another.length + 1 && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is equal to or an ancestor of another.\r\n   */\n  isCommon: function isCommon(path, another) {\n    return path.length <= another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is a descendant of another.\r\n   */\n  isDescendant: function isDescendant(path, another) {\n    return path.length > another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is the parent of another.\r\n   */\n  isParent: function isParent(path, another) {\n    return path.length + 1 === another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check is a value implements the `Path` interface.\r\n   */\n  isPath: function isPath(value) {\n    return Array.isArray(value) && (value.length === 0 || typeof value[0] === 'number');\n  },\n\n  /**\r\n   * Check if a path is a sibling of another.\r\n   */\n  isSibling: function isSibling(path, another) {\n    if (path.length !== another.length) {\n      return false;\n    }\n\n    var as = path.slice(0, -1);\n    var bs = another.slice(0, -1);\n    var al = path[path.length - 1];\n    var bl = another[another.length - 1];\n    return al !== bl && Path.equals(as, bs);\n  },\n\n  /**\r\n   * Get a list of paths at every level down to a path. Note: this is the same\r\n   * as `Path.ancestors`, but including the path itself.\r\n   *\r\n   * The paths are sorted from shallowest to deepest. However, if the `reverse:\r\n   * true` option is passed, they are reversed.\r\n   */\n  levels: function levels(path) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$reverse7 = options.reverse,\n        reverse = _options$reverse7 === void 0 ? false : _options$reverse7;\n    var list = [];\n\n    for (var i = 0; i <= path.length; i++) {\n      list.push(path.slice(0, i));\n    }\n\n    if (reverse) {\n      list.reverse();\n    }\n\n    return list;\n  },\n\n  /**\r\n   * Given a path, get the path to the next sibling node.\r\n   */\n  next: function next(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the next path of a root path [\".concat(path, \"], because it has no next index.\"));\n    }\n\n    var last = path[path.length - 1];\n    return path.slice(0, -1).concat(last + 1);\n  },\n\n  /**\r\n   * Given a path, return a new path referring to the parent node above it.\r\n   */\n  parent: function parent(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the parent path of the root path [\".concat(path, \"].\"));\n    }\n\n    return path.slice(0, -1);\n  },\n\n  /**\r\n   * Given a path, get the path to the previous sibling node.\r\n   */\n  previous: function previous(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the previous path of a root path [\".concat(path, \"], because it has no previous index.\"));\n    }\n\n    var last = path[path.length - 1];\n\n    if (last <= 0) {\n      throw new Error(\"Cannot get the previous path of a first child path [\".concat(path, \"] because it would result in a negative index.\"));\n    }\n\n    return path.slice(0, -1).concat(last - 1);\n  },\n\n  /**\r\n   * Get a path relative to an ancestor.\r\n   */\n  relative: function relative(path, ancestor) {\n    if (!Path.isAncestor(ancestor, path) && !Path.equals(path, ancestor)) {\n      throw new Error(\"Cannot get the relative path of [\".concat(path, \"] inside ancestor [\").concat(ancestor, \"], because it is not above or equal to the path.\"));\n    }\n\n    return path.slice(ancestor.length);\n  },\n\n  /**\r\n   * Transform a path by an operation.\r\n   */\n  transform: function transform(path, operation) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return fn(path, function (p) {\n      var _options$affinity4 = options.affinity,\n          affinity = _options$affinity4 === void 0 ? 'forward' : _options$affinity4; // PERF: Exit early if the operation is guaranteed not to have an effect.\n\n      if (path.length === 0) {\n        return;\n      }\n\n      switch (operation.type) {\n        case 'insert_node':\n          {\n            var op = operation.path;\n\n            if (Path.equals(op, p) || Path.endsBefore(op, p) || Path.isAncestor(op, p)) {\n              p[op.length - 1] += 1;\n            }\n\n            break;\n          }\n\n        case 'remove_node':\n          {\n            var _op = operation.path;\n\n            if (Path.equals(_op, p) || Path.isAncestor(_op, p)) {\n              return null;\n            } else if (Path.endsBefore(_op, p)) {\n              p[_op.length - 1] -= 1;\n            }\n\n            break;\n          }\n\n        case 'merge_node':\n          {\n            var _op2 = operation.path,\n                position = operation.position;\n\n            if (Path.equals(_op2, p) || Path.endsBefore(_op2, p)) {\n              p[_op2.length - 1] -= 1;\n            } else if (Path.isAncestor(_op2, p)) {\n              p[_op2.length - 1] -= 1;\n              p[_op2.length] += position;\n            }\n\n            break;\n          }\n\n        case 'split_node':\n          {\n            var _op3 = operation.path,\n                _position = operation.position;\n\n            if (Path.equals(_op3, p)) {\n              if (affinity === 'forward') {\n                p[p.length - 1] += 1;\n              } else if (affinity === 'backward') ;else {\n                return null;\n              }\n            } else if (Path.endsBefore(_op3, p)) {\n              p[_op3.length - 1] += 1;\n            } else if (Path.isAncestor(_op3, p) && path[_op3.length] >= _position) {\n              p[_op3.length - 1] += 1;\n              p[_op3.length] -= _position;\n            }\n\n            break;\n          }\n\n        case 'move_node':\n          {\n            var _op4 = operation.path,\n                onp = operation.newPath; // If the old and new path are the same, it's a no-op.\n\n            if (Path.equals(_op4, onp)) {\n              return;\n            }\n\n            if (Path.isAncestor(_op4, p) || Path.equals(_op4, p)) {\n              var copy = onp.slice();\n\n              if (Path.endsBefore(_op4, onp) && _op4.length < onp.length) {\n                copy[_op4.length - 1] -= 1;\n              }\n\n              return copy.concat(p.slice(_op4.length));\n            } else if (Path.isSibling(_op4, onp) && (Path.isAncestor(onp, p) || Path.equals(onp, p))) {\n              if (Path.endsBefore(_op4, p)) {\n                p[_op4.length - 1] -= 1;\n              } else {\n                p[_op4.length - 1] += 1;\n              }\n            } else if (Path.endsBefore(onp, p) || Path.equals(onp, p) || Path.isAncestor(onp, p)) {\n              if (Path.endsBefore(_op4, p)) {\n                p[_op4.length - 1] -= 1;\n              }\n\n              p[onp.length - 1] += 1;\n            } else if (Path.endsBefore(_op4, p)) {\n              if (Path.equals(onp, p)) {\n                p[onp.length - 1] += 1;\n              }\n\n              p[_op4.length - 1] -= 1;\n            }\n\n            break;\n          }\n      }\n    });\n  }\n};\nvar PathRef = {\n  /**\r\n   * Transform the path ref's current value by an operation.\r\n   */\n  transform: function transform(ref, op) {\n    var current = ref.current,\n        affinity = ref.affinity;\n\n    if (current == null) {\n      return;\n    }\n\n    var path = Path.transform(current, op, {\n      affinity: affinity\n    });\n    ref.current = path;\n\n    if (path == null) {\n      ref.unref();\n    }\n  }\n};\n\nfunction ownKeys$3(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$3(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$3(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$3(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar Point = {\n  /**\r\n   * Compare a point to another, returning an integer indicating whether the\r\n   * point was before, at, or after the other.\r\n   */\n  compare: function compare(point, another) {\n    var result = Path.compare(point.path, another.path);\n\n    if (result === 0) {\n      if (point.offset < another.offset) return -1;\n      if (point.offset > another.offset) return 1;\n      return 0;\n    }\n\n    return result;\n  },\n\n  /**\r\n   * Check if a point is after another.\r\n   */\n  isAfter: function isAfter(point, another) {\n    return Point.compare(point, another) === 1;\n  },\n\n  /**\r\n   * Check if a point is before another.\r\n   */\n  isBefore: function isBefore(point, another) {\n    return Point.compare(point, another) === -1;\n  },\n\n  /**\r\n   * Check if a point is exactly equal to another.\r\n   */\n  equals: function equals(point, another) {\n    // PERF: ensure the offsets are equal first since they are cheaper to check.\n    return point.offset === another.offset && Path.equals(point.path, another.path);\n  },\n\n  /**\r\n   * Check if a value implements the `Point` interface.\r\n   */\n  isPoint: function isPoint(value) {\n    return Object(index_es[\"a\" /* default */])(value) && typeof value.offset === 'number' && Path.isPath(value.path);\n  },\n\n  /**\r\n   * Transform a point by an operation.\r\n   */\n  transform: function transform(point, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return fn(point, function (p) {\n      var _options$affinity5 = options.affinity,\n          affinity = _options$affinity5 === void 0 ? 'forward' : _options$affinity5;\n      var path = p.path,\n          offset = p.offset;\n\n      switch (op.type) {\n        case 'insert_node':\n        case 'move_node':\n          {\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n\n        case 'insert_text':\n          {\n            if (Path.equals(op.path, path) && op.offset <= offset) {\n              p.offset += op.text.length;\n            }\n\n            break;\n          }\n\n        case 'merge_node':\n          {\n            if (Path.equals(op.path, path)) {\n              p.offset += op.position;\n            }\n\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n\n        case 'remove_text':\n          {\n            if (Path.equals(op.path, path) && op.offset <= offset) {\n              p.offset -= Math.min(offset - op.offset, op.text.length);\n            }\n\n            break;\n          }\n\n        case 'remove_node':\n          {\n            if (Path.equals(op.path, path) || Path.isAncestor(op.path, path)) {\n              return null;\n            }\n\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n\n        case 'split_node':\n          {\n            if (Path.equals(op.path, path)) {\n              if (op.position === offset && affinity == null) {\n                return null;\n              } else if (op.position < offset || op.position === offset && affinity === 'forward') {\n                p.offset -= op.position;\n                p.path = Path.transform(path, op, _objectSpread$3(_objectSpread$3({}, options), {}, {\n                  affinity: 'forward'\n                }));\n              }\n            } else {\n              p.path = Path.transform(path, op, options);\n            }\n\n            break;\n          }\n      }\n    });\n  }\n};\nvar PointRef = {\n  /**\r\n   * Transform the point ref's current value by an operation.\r\n   */\n  transform: function transform(ref, op) {\n    var current = ref.current,\n        affinity = ref.affinity;\n\n    if (current == null) {\n      return;\n    }\n\n    var point = Point.transform(current, op, {\n      affinity: affinity\n    });\n    ref.current = point;\n\n    if (point == null) {\n      ref.unref();\n    }\n  }\n};\n\nfunction ownKeys$4(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$4(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$4(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$4(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar Range = {\n  /**\r\n   * Get the start and end points of a range, in the order in which they appear\r\n   * in the document.\r\n   */\n  edges: function edges(range) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$reverse8 = options.reverse,\n        reverse = _options$reverse8 === void 0 ? false : _options$reverse8;\n    var anchor = range.anchor,\n        focus = range.focus;\n    return Range.isBackward(range) === reverse ? [anchor, focus] : [focus, anchor];\n  },\n\n  /**\r\n   * Get the end point of a range.\r\n   */\n  end: function end(range) {\n    var _Range$edges11 = Range.edges(range),\n        _Range$edges12 = Object(slicedToArray[\"a\" /* default */])(_Range$edges11, 2),\n        end = _Range$edges12[1];\n\n    return end;\n  },\n\n  /**\r\n   * Check if a range is exactly equal to another.\r\n   */\n  equals: function equals(range, another) {\n    return Point.equals(range.anchor, another.anchor) && Point.equals(range.focus, another.focus);\n  },\n\n  /**\r\n   * Check if a range includes a path, a point or part of another range.\r\n   */\n  includes: function includes(range, target) {\n    if (Range.isRange(target)) {\n      if (Range.includes(range, target.anchor) || Range.includes(range, target.focus)) {\n        return true;\n      }\n\n      var _Range$edges13 = Range.edges(range),\n          _Range$edges14 = Object(slicedToArray[\"a\" /* default */])(_Range$edges13, 2),\n          rs = _Range$edges14[0],\n          re = _Range$edges14[1];\n\n      var _Range$edges15 = Range.edges(target),\n          _Range$edges16 = Object(slicedToArray[\"a\" /* default */])(_Range$edges15, 2),\n          ts = _Range$edges16[0],\n          te = _Range$edges16[1];\n\n      return Point.isBefore(rs, ts) && Point.isAfter(re, te);\n    }\n\n    var _Range$edges17 = Range.edges(range),\n        _Range$edges18 = Object(slicedToArray[\"a\" /* default */])(_Range$edges17, 2),\n        start = _Range$edges18[0],\n        end = _Range$edges18[1];\n\n    var isAfterStart = false;\n    var isBeforeEnd = false;\n\n    if (Point.isPoint(target)) {\n      isAfterStart = Point.compare(target, start) >= 0;\n      isBeforeEnd = Point.compare(target, end) <= 0;\n    } else {\n      isAfterStart = Path.compare(target, start.path) >= 0;\n      isBeforeEnd = Path.compare(target, end.path) <= 0;\n    }\n\n    return isAfterStart && isBeforeEnd;\n  },\n\n  /**\r\n   * Get the intersection of a range with another.\r\n   */\n  intersection: function intersection(range, another) {\n    var rest = _objectWithoutProperties(range, [\"anchor\", \"focus\"]);\n\n    var _Range$edges19 = Range.edges(range),\n        _Range$edges20 = Object(slicedToArray[\"a\" /* default */])(_Range$edges19, 2),\n        s1 = _Range$edges20[0],\n        e1 = _Range$edges20[1];\n\n    var _Range$edges21 = Range.edges(another),\n        _Range$edges22 = Object(slicedToArray[\"a\" /* default */])(_Range$edges21, 2),\n        s2 = _Range$edges22[0],\n        e2 = _Range$edges22[1];\n\n    var start = Point.isBefore(s1, s2) ? s2 : s1;\n    var end = Point.isBefore(e1, e2) ? e1 : e2;\n\n    if (Point.isBefore(end, start)) {\n      return null;\n    } else {\n      return _objectSpread$4({\n        anchor: start,\n        focus: end\n      }, rest);\n    }\n  },\n\n  /**\r\n   * Check if a range is backward, meaning that its anchor point appears in the\r\n   * document _after_ its focus point.\r\n   */\n  isBackward: function isBackward(range) {\n    var anchor = range.anchor,\n        focus = range.focus;\n    return Point.isAfter(anchor, focus);\n  },\n\n  /**\r\n   * Check if a range is collapsed, meaning that both its anchor and focus\r\n   * points refer to the exact same position in the document.\r\n   */\n  isCollapsed: function isCollapsed(range) {\n    var anchor = range.anchor,\n        focus = range.focus;\n    return Point.equals(anchor, focus);\n  },\n\n  /**\r\n   * Check if a range is expanded.\r\n   *\r\n   * This is the opposite of [[Range.isCollapsed]] and is provided for legibility.\r\n   */\n  isExpanded: function isExpanded(range) {\n    return !Range.isCollapsed(range);\n  },\n\n  /**\r\n   * Check if a range is forward.\r\n   *\r\n   * This is the opposite of [[Range.isBackward]] and is provided for legibility.\r\n   */\n  isForward: function isForward(range) {\n    return !Range.isBackward(range);\n  },\n\n  /**\r\n   * Check if a value implements the [[Range]] interface.\r\n   */\n  isRange: function isRange(value) {\n    return Object(index_es[\"a\" /* default */])(value) && Point.isPoint(value.anchor) && Point.isPoint(value.focus);\n  },\n\n  /**\r\n   * Iterate through all of the point entries in a range.\r\n   */\n  points: /*#__PURE__*/regenerator_default.a.mark(function points(range) {\n    return regenerator_default.a.wrap(function points$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.next = 2;\n            return [range.anchor, 'anchor'];\n\n          case 2:\n            _context11.next = 4;\n            return [range.focus, 'focus'];\n\n          case 4:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, points);\n  }),\n\n  /**\r\n   * Get the start point of a range.\r\n   */\n  start: function start(range) {\n    var _Range$edges23 = Range.edges(range),\n        _Range$edges24 = Object(slicedToArray[\"a\" /* default */])(_Range$edges23, 1),\n        start = _Range$edges24[0];\n\n    return start;\n  },\n\n  /**\r\n   * Transform a range by an operation.\r\n   */\n  transform: function transform(range, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$affinity6 = options.affinity,\n        affinity = _options$affinity6 === void 0 ? 'inward' : _options$affinity6;\n    var affinityAnchor;\n    var affinityFocus;\n\n    if (affinity === 'inward') {\n      if (Range.isForward(range)) {\n        affinityAnchor = 'forward';\n        affinityFocus = 'backward';\n      } else {\n        affinityAnchor = 'backward';\n        affinityFocus = 'forward';\n      }\n    } else if (affinity === 'outward') {\n      if (Range.isForward(range)) {\n        affinityAnchor = 'backward';\n        affinityFocus = 'forward';\n      } else {\n        affinityAnchor = 'forward';\n        affinityFocus = 'backward';\n      }\n    } else {\n      affinityAnchor = affinity;\n      affinityFocus = affinity;\n    }\n\n    return fn(range, function (r) {\n      var anchor = Point.transform(r.anchor, op, {\n        affinity: affinityAnchor\n      });\n      var focus = Point.transform(r.focus, op, {\n        affinity: affinityFocus\n      });\n\n      if (!anchor || !focus) {\n        return null;\n      }\n\n      r.anchor = anchor;\n      r.focus = focus;\n    });\n  }\n};\nvar RangeRef = {\n  /**\r\n   * Transform the range ref's current value by an operation.\r\n   */\n  transform: function transform(ref, op) {\n    var current = ref.current,\n        affinity = ref.affinity;\n\n    if (current == null) {\n      return;\n    }\n\n    var path = Range.transform(current, op, {\n      affinity: affinity\n    });\n    ref.current = path;\n\n    if (path == null) {\n      ref.unref();\n    }\n  }\n};\n\nfunction ownKeys$5(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$5(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$5(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$5(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar Text = {\n  /**\r\n   * Check if two text nodes are equal.\r\n   */\n  equals: function equals(text, another) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$loose = options.loose,\n        loose = _options$loose === void 0 ? false : _options$loose;\n\n    function omitText(obj) {\n      var rest = _objectWithoutProperties(obj, [\"text\"]);\n\n      return rest;\n    }\n\n    return fast_deep_equal_default()(loose ? omitText(text) : text, loose ? omitText(another) : another);\n  },\n\n  /**\r\n   * Check if a value implements the `Text` interface.\r\n   */\n  isText: function isText(value) {\n    return Object(index_es[\"a\" /* default */])(value) && typeof value.text === 'string';\n  },\n\n  /**\r\n   * Check if a value is a list of `Text` objects.\r\n   */\n  isTextList: function isTextList(value) {\n    return Array.isArray(value) && value.every(function (val) {\n      return Text.isText(val);\n    });\n  },\n\n  /**\r\n   * Check if some props are a partial of Text.\r\n   */\n  isTextProps: function isTextProps(props) {\n    return props.text !== undefined;\n  },\n\n  /**\r\n   * Check if an text matches set of properties.\r\n   *\r\n   * Note: this is for matching custom properties, and it does not ensure that\r\n   * the `text` property are two nodes equal.\r\n   */\n  matches: function matches(text, props) {\n    for (var key in props) {\n      if (key === 'text') {\n        continue;\n      }\n\n      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n   * Get the leaves for a text node given decorations.\r\n   */\n  decorations: function decorations(node, _decorations) {\n    var leaves = [_objectSpread$5({}, node)];\n\n    var _iterator23 = Object(createForOfIteratorHelper[\"a\" /* default */])(_decorations),\n        _step23;\n\n    try {\n      for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n        var dec = _step23.value;\n\n        var rest = _objectWithoutProperties(dec, [\"anchor\", \"focus\"]);\n\n        var _Range$edges25 = Range.edges(dec),\n            _Range$edges26 = Object(slicedToArray[\"a\" /* default */])(_Range$edges25, 2),\n            start = _Range$edges26[0],\n            end = _Range$edges26[1];\n\n        var next = [];\n        var o = 0;\n\n        var _iterator24 = Object(createForOfIteratorHelper[\"a\" /* default */])(leaves),\n            _step24;\n\n        try {\n          for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n            var leaf = _step24.value;\n            var length = leaf.text.length;\n            var offset = o;\n            o += length; // If the range encompases the entire leaf, add the range.\n\n            if (start.offset <= offset && end.offset >= o) {\n              Object.assign(leaf, rest);\n              next.push(leaf);\n              continue;\n            } // If the range expanded and match the leaf, or starts after, or ends before it, continue.\n\n\n            if (start.offset !== end.offset && (start.offset === o || end.offset === offset) || start.offset > o || end.offset < offset || end.offset === offset && offset !== 0) {\n              next.push(leaf);\n              continue;\n            } // Otherwise we need to split the leaf, at the start, end, or both,\n            // and add the range to the middle intersecting section. Do the end\n            // split first since we don't need to update the offset that way.\n\n\n            var middle = leaf;\n            var before = void 0;\n            var after = void 0;\n\n            if (end.offset < o) {\n              var off = end.offset - offset;\n              after = _objectSpread$5(_objectSpread$5({}, middle), {}, {\n                text: middle.text.slice(off)\n              });\n              middle = _objectSpread$5(_objectSpread$5({}, middle), {}, {\n                text: middle.text.slice(0, off)\n              });\n            }\n\n            if (start.offset > offset) {\n              var _off = start.offset - offset;\n\n              before = _objectSpread$5(_objectSpread$5({}, middle), {}, {\n                text: middle.text.slice(0, _off)\n              });\n              middle = _objectSpread$5(_objectSpread$5({}, middle), {}, {\n                text: middle.text.slice(_off)\n              });\n            }\n\n            Object.assign(middle, rest);\n\n            if (before) {\n              next.push(before);\n            }\n\n            next.push(middle);\n\n            if (after) {\n              next.push(after);\n            }\n          }\n        } catch (err) {\n          _iterator24.e(err);\n        } finally {\n          _iterator24.f();\n        }\n\n        leaves = next;\n      }\n    } catch (err) {\n      _iterator23.e(err);\n    } finally {\n      _iterator23.f();\n    }\n\n    return leaves;\n  }\n};\n\nfunction ownKeys$6(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$6(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$6(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$6(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar index_es_applyToDraft = function applyToDraft(editor, selection, op) {\n  switch (op.type) {\n    case 'insert_node':\n      {\n        var path = op.path,\n            node = op.node;\n        var parent = Node.parent(editor, path);\n        var index = path[path.length - 1];\n\n        if (index > parent.children.length) {\n          throw new Error(\"Cannot apply an \\\"insert_node\\\" operation at path [\".concat(path, \"] because the destination is past the end of the node.\"));\n        }\n\n        parent.children.splice(index, 0, node);\n\n        if (selection) {\n          var _iterator25 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step25;\n\n          try {\n            for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n              var _step25$value = Object(slicedToArray[\"a\" /* default */])(_step25.value, 2),\n                  point = _step25$value[0],\n                  key = _step25$value[1];\n\n              selection[key] = Point.transform(point, op);\n            }\n          } catch (err) {\n            _iterator25.e(err);\n          } finally {\n            _iterator25.f();\n          }\n        }\n\n        break;\n      }\n\n    case 'insert_text':\n      {\n        var _path = op.path,\n            offset = op.offset,\n            text = op.text;\n        if (text.length === 0) break;\n\n        var _node = Node.leaf(editor, _path);\n\n        var before = _node.text.slice(0, offset);\n\n        var after = _node.text.slice(offset);\n\n        _node.text = before + text + after;\n\n        if (selection) {\n          var _iterator26 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step26;\n\n          try {\n            for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n              var _step26$value = Object(slicedToArray[\"a\" /* default */])(_step26.value, 2),\n                  _point = _step26$value[0],\n                  _key = _step26$value[1];\n\n              selection[_key] = Point.transform(_point, op);\n            }\n          } catch (err) {\n            _iterator26.e(err);\n          } finally {\n            _iterator26.f();\n          }\n        }\n\n        break;\n      }\n\n    case 'merge_node':\n      {\n        var _path2 = op.path;\n\n        var _node2 = Node.get(editor, _path2);\n\n        var prevPath = Path.previous(_path2);\n        var prev = Node.get(editor, prevPath);\n\n        var _parent = Node.parent(editor, _path2);\n\n        var _index = _path2[_path2.length - 1];\n\n        if (Text.isText(_node2) && Text.isText(prev)) {\n          prev.text += _node2.text;\n        } else if (!Text.isText(_node2) && !Text.isText(prev)) {\n          var _prev$children;\n\n          (_prev$children = prev.children).push.apply(_prev$children, Object(toConsumableArray[\"a\" /* default */])(_node2.children));\n        } else {\n          throw new Error(\"Cannot apply a \\\"merge_node\\\" operation at path [\".concat(_path2, \"] to nodes of different interfaces: \").concat(_node2, \" \").concat(prev));\n        }\n\n        _parent.children.splice(_index, 1);\n\n        if (selection) {\n          var _iterator27 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step27;\n\n          try {\n            for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n              var _step27$value = Object(slicedToArray[\"a\" /* default */])(_step27.value, 2),\n                  _point2 = _step27$value[0],\n                  _key2 = _step27$value[1];\n\n              selection[_key2] = Point.transform(_point2, op);\n            }\n          } catch (err) {\n            _iterator27.e(err);\n          } finally {\n            _iterator27.f();\n          }\n        }\n\n        break;\n      }\n\n    case 'move_node':\n      {\n        var _path3 = op.path,\n            newPath = op.newPath;\n\n        if (Path.isAncestor(_path3, newPath)) {\n          throw new Error(\"Cannot move a path [\".concat(_path3, \"] to new path [\").concat(newPath, \"] because the destination is inside itself.\"));\n        }\n\n        var _node3 = Node.get(editor, _path3);\n\n        var _parent2 = Node.parent(editor, _path3);\n\n        var _index2 = _path3[_path3.length - 1]; // This is tricky, but since the `path` and `newPath` both refer to\n        // the same snapshot in time, there's a mismatch. After either\n        // removing the original position, the second step's path can be out\n        // of date. So instead of using the `op.newPath` directly, we\n        // transform `op.path` to ascertain what the `newPath` would be after\n        // the operation was applied.\n\n        _parent2.children.splice(_index2, 1);\n\n        var truePath = Path.transform(_path3, op);\n        var newParent = Node.get(editor, Path.parent(truePath));\n        var newIndex = truePath[truePath.length - 1];\n        newParent.children.splice(newIndex, 0, _node3);\n\n        if (selection) {\n          var _iterator28 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step28;\n\n          try {\n            for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n              var _step28$value = Object(slicedToArray[\"a\" /* default */])(_step28.value, 2),\n                  _point3 = _step28$value[0],\n                  _key3 = _step28$value[1];\n\n              selection[_key3] = Point.transform(_point3, op);\n            }\n          } catch (err) {\n            _iterator28.e(err);\n          } finally {\n            _iterator28.f();\n          }\n        }\n\n        break;\n      }\n\n    case 'remove_node':\n      {\n        var _path4 = op.path;\n        var _index3 = _path4[_path4.length - 1];\n\n        var _parent3 = Node.parent(editor, _path4);\n\n        _parent3.children.splice(_index3, 1); // Transform all of the points in the value, but if the point was in the\n        // node that was removed we need to update the range or remove it.\n\n\n        if (selection) {\n          var _iterator29 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step29;\n\n          try {\n            for (_iterator29.s(); !(_step29 = _iterator29.n()).done;) {\n              var _step29$value = Object(slicedToArray[\"a\" /* default */])(_step29.value, 2),\n                  _point4 = _step29$value[0],\n                  _key4 = _step29$value[1];\n\n              var result = Point.transform(_point4, op);\n\n              if (selection != null && result != null) {\n                selection[_key4] = result;\n              } else {\n                var _prev = void 0;\n\n                var next = void 0;\n\n                var _iterator30 = Object(createForOfIteratorHelper[\"a\" /* default */])(Node.texts(editor)),\n                    _step30;\n\n                try {\n                  for (_iterator30.s(); !(_step30 = _iterator30.n()).done;) {\n                    var _step30$value = Object(slicedToArray[\"a\" /* default */])(_step30.value, 2),\n                        n = _step30$value[0],\n                        p = _step30$value[1];\n\n                    if (Path.compare(p, _path4) === -1) {\n                      _prev = [n, p];\n                    } else {\n                      next = [n, p];\n                      break;\n                    }\n                  }\n                } catch (err) {\n                  _iterator30.e(err);\n                } finally {\n                  _iterator30.f();\n                }\n\n                if (_prev) {\n                  _point4.path = _prev[1];\n                  _point4.offset = _prev[0].text.length;\n                } else if (next) {\n                  _point4.path = next[1];\n                  _point4.offset = 0;\n                } else {\n                  selection = null;\n                }\n              }\n            }\n          } catch (err) {\n            _iterator29.e(err);\n          } finally {\n            _iterator29.f();\n          }\n        }\n\n        break;\n      }\n\n    case 'remove_text':\n      {\n        var _path5 = op.path,\n            _offset = op.offset,\n            _text = op.text;\n        if (_text.length === 0) break;\n\n        var _node4 = Node.leaf(editor, _path5);\n\n        var _before = _node4.text.slice(0, _offset);\n\n        var _after = _node4.text.slice(_offset + _text.length);\n\n        _node4.text = _before + _after;\n\n        if (selection) {\n          var _iterator31 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step31;\n\n          try {\n            for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n              var _step31$value = Object(slicedToArray[\"a\" /* default */])(_step31.value, 2),\n                  _point5 = _step31$value[0],\n                  _key5 = _step31$value[1];\n\n              selection[_key5] = Point.transform(_point5, op);\n            }\n          } catch (err) {\n            _iterator31.e(err);\n          } finally {\n            _iterator31.f();\n          }\n        }\n\n        break;\n      }\n\n    case 'set_node':\n      {\n        var _path6 = op.path,\n            properties = op.properties,\n            newProperties = op.newProperties;\n\n        if (_path6.length === 0) {\n          throw new Error(\"Cannot set properties on the root node!\");\n        }\n\n        var _node5 = Node.get(editor, _path6);\n\n        for (var _key6 in newProperties) {\n          if (_key6 === 'children' || _key6 === 'text') {\n            throw new Error(\"Cannot set the \\\"\".concat(_key6, \"\\\" property of nodes!\"));\n          }\n\n          var value = newProperties[_key6];\n\n          if (value == null) {\n            delete _node5[_key6];\n          } else {\n            _node5[_key6] = value;\n          }\n        } // properties that were previously defined, but are now missing, must be deleted\n\n\n        for (var _key7 in properties) {\n          if (!newProperties.hasOwnProperty(_key7)) {\n            delete _node5[_key7];\n          }\n        }\n\n        break;\n      }\n\n    case 'set_selection':\n      {\n        var _newProperties = op.newProperties;\n\n        if (_newProperties == null) {\n          selection = _newProperties;\n        } else {\n          if (selection == null) {\n            if (!Range.isRange(_newProperties)) {\n              throw new Error(\"Cannot apply an incomplete \\\"set_selection\\\" operation properties \".concat(JSON.stringify(_newProperties), \" when there is no current selection.\"));\n            }\n\n            selection = _objectSpread$6({}, _newProperties);\n          }\n\n          for (var _key8 in _newProperties) {\n            var _value = _newProperties[_key8];\n\n            if (_value == null) {\n              if (_key8 === 'anchor' || _key8 === 'focus') {\n                throw new Error(\"Cannot remove the \\\"\".concat(_key8, \"\\\" selection property\"));\n              }\n\n              delete selection[_key8];\n            } else {\n              selection[_key8] = _value;\n            }\n          }\n        }\n\n        break;\n      }\n\n    case 'split_node':\n      {\n        var _path7 = op.path,\n            position = op.position,\n            _properties = op.properties;\n\n        if (_path7.length === 0) {\n          throw new Error(\"Cannot apply a \\\"split_node\\\" operation at path [\".concat(_path7, \"] because the root node cannot be split.\"));\n        }\n\n        var _node6 = Node.get(editor, _path7);\n\n        var _parent4 = Node.parent(editor, _path7);\n\n        var _index4 = _path7[_path7.length - 1];\n        var newNode;\n\n        if (Text.isText(_node6)) {\n          var _before2 = _node6.text.slice(0, position);\n\n          var _after2 = _node6.text.slice(position);\n\n          _node6.text = _before2;\n          newNode = _objectSpread$6(_objectSpread$6({}, _properties), {}, {\n            text: _after2\n          });\n        } else {\n          var _before3 = _node6.children.slice(0, position);\n\n          var _after3 = _node6.children.slice(position);\n\n          _node6.children = _before3;\n          newNode = _objectSpread$6(_objectSpread$6({}, _properties), {}, {\n            children: _after3\n          });\n        }\n\n        _parent4.children.splice(_index4 + 1, 0, newNode);\n\n        if (selection) {\n          var _iterator32 = Object(createForOfIteratorHelper[\"a\" /* default */])(Range.points(selection)),\n              _step32;\n\n          try {\n            for (_iterator32.s(); !(_step32 = _iterator32.n()).done;) {\n              var _step32$value = Object(slicedToArray[\"a\" /* default */])(_step32.value, 2),\n                  _point6 = _step32$value[0],\n                  _key9 = _step32$value[1];\n\n              selection[_key9] = Point.transform(_point6, op);\n            }\n          } catch (err) {\n            _iterator32.e(err);\n          } finally {\n            _iterator32.f();\n          }\n        }\n\n        break;\n      }\n  }\n\n  return selection;\n};\n\nvar GeneralTransforms = {\n  /**\r\n   * Transform the editor by an operation.\r\n   */\n  transform: function transform(editor, op) {\n    editor.children = ln(editor.children);\n    var selection = editor.selection && ln(editor.selection);\n\n    try {\n      selection = index_es_applyToDraft(editor, selection, op);\n    } finally {\n      editor.children = dn(editor.children);\n\n      if (selection) {\n        editor.selection = immer_esm_r(selection) ? dn(selection) : selection;\n      } else {\n        editor.selection = null;\n      }\n    }\n  }\n};\n\nfunction ownKeys$7(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$7(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$7(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$7(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar NodeTransforms = {\n  /**\r\n   * Insert nodes at a specific location in the Editor.\r\n   */\n  insertNodes: function insertNodes(editor, nodes) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$hanging = options.hanging,\n          hanging = _options$hanging === void 0 ? false : _options$hanging,\n          _options$voids9 = options.voids,\n          voids = _options$voids9 === void 0 ? false : _options$voids9,\n          _options$mode5 = options.mode,\n          mode = _options$mode5 === void 0 ? 'lowest' : _options$mode5;\n      var at = options.at,\n          match = options.match,\n          select = options.select;\n\n      if (Node.isNode(nodes)) {\n        nodes = [nodes];\n      }\n\n      if (nodes.length === 0) {\n        return;\n      }\n\n      var _nodes = nodes,\n          _nodes2 = Object(slicedToArray[\"a\" /* default */])(_nodes, 1),\n          node = _nodes2[0]; // By default, use the selection as the target location. But if there is\n      // no selection, insert at the end of the document since that is such a\n      // common use case when inserting from a non-selected state.\n\n\n      if (!at) {\n        if (editor.selection) {\n          at = editor.selection;\n        } else if (editor.children.length > 0) {\n          at = Editor.end(editor, []);\n        } else {\n          at = [0];\n        }\n\n        select = true;\n      }\n\n      if (select == null) {\n        select = false;\n      }\n\n      if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at);\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var _Range$edges27 = Range.edges(at),\n              _Range$edges28 = Object(slicedToArray[\"a\" /* default */])(_Range$edges27, 2),\n              end = _Range$edges28[1];\n\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at: at\n          });\n          at = pointRef.unref();\n        }\n      }\n\n      if (Point.isPoint(at)) {\n        if (match == null) {\n          if (Text.isText(node)) {\n            match = function match(n) {\n              return Text.isText(n);\n            };\n          } else if (editor.isInline(node)) {\n            match = function match(n) {\n              return Text.isText(n) || Editor.isInline(editor, n);\n            };\n          } else {\n            match = function match(n) {\n              return Editor.isBlock(editor, n);\n            };\n          }\n        }\n\n        var _Editor$nodes7 = Editor.nodes(editor, {\n          at: at.path,\n          match: match,\n          mode: mode,\n          voids: voids\n        }),\n            _Editor$nodes8 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes7, 1),\n            entry = _Editor$nodes8[0];\n\n        if (entry) {\n          var _entry2 = Object(slicedToArray[\"a\" /* default */])(entry, 2),\n              _matchPath = _entry2[1];\n\n          var pathRef = Editor.pathRef(editor, _matchPath);\n          var isAtEnd = Editor.isEnd(editor, at, _matchPath);\n          Transforms.splitNodes(editor, {\n            at: at,\n            match: match,\n            mode: mode,\n            voids: voids\n          });\n          var path = pathRef.unref();\n          at = isAtEnd ? Path.next(path) : path;\n        } else {\n          return;\n        }\n      }\n\n      var parentPath = Path.parent(at);\n      var index = at[at.length - 1];\n\n      if (!voids && Editor.void(editor, {\n        at: parentPath\n      })) {\n        return;\n      }\n\n      var _iterator33 = Object(createForOfIteratorHelper[\"a\" /* default */])(nodes),\n          _step33;\n\n      try {\n        for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n          var _node = _step33.value;\n\n          var _path = parentPath.concat(index);\n\n          index++;\n          editor.apply({\n            type: 'insert_node',\n            path: _path,\n            node: _node\n          });\n        }\n      } catch (err) {\n        _iterator33.e(err);\n      } finally {\n        _iterator33.f();\n      }\n\n      if (select) {\n        var point = Editor.end(editor, at);\n\n        if (point) {\n          Transforms.select(editor, point);\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Lift nodes at a specific location upwards in the document tree, splitting\r\n   * their parent in two if necessary.\r\n   */\n  liftNodes: function liftNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$at7 = options.at,\n          at = _options$at7 === void 0 ? editor.selection : _options$at7,\n          _options$mode6 = options.mode,\n          mode = _options$mode6 === void 0 ? 'lowest' : _options$mode6,\n          _options$voids10 = options.voids,\n          voids = _options$voids10 === void 0 ? false : _options$voids10;\n      var match = options.match;\n\n      if (match == null) {\n        match = Path.isPath(at) ? index_es_matchPath(editor, at) : function (n) {\n          return Editor.isBlock(editor, n);\n        };\n      }\n\n      if (!at) {\n        return;\n      }\n\n      var matches = Editor.nodes(editor, {\n        at: at,\n        match: match,\n        mode: mode,\n        voids: voids\n      });\n      var pathRefs = Array.from(matches, function (_ref) {\n        var _ref10 = Object(slicedToArray[\"a\" /* default */])(_ref, 2),\n            p = _ref10[1];\n\n        return Editor.pathRef(editor, p);\n      });\n\n      for (var _i = 0, _pathRefs = pathRefs; _i < _pathRefs.length; _i++) {\n        var pathRef = _pathRefs[_i];\n        var path = pathRef.unref();\n\n        if (path.length < 2) {\n          throw new Error(\"Cannot lift node at a path [\".concat(path, \"] because it has a depth of less than `2`.\"));\n        }\n\n        var parentNodeEntry = Editor.node(editor, Path.parent(path));\n\n        var _parentNodeEntry = Object(slicedToArray[\"a\" /* default */])(parentNodeEntry, 2),\n            parent = _parentNodeEntry[0],\n            parentPath = _parentNodeEntry[1];\n\n        var index = path[path.length - 1];\n        var length = parent.children.length;\n\n        if (length === 1) {\n          var toPath = Path.next(parentPath);\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: toPath,\n            voids: voids\n          });\n          Transforms.removeNodes(editor, {\n            at: parentPath,\n            voids: voids\n          });\n        } else if (index === 0) {\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: parentPath,\n            voids: voids\n          });\n        } else if (index === length - 1) {\n          var _toPath = Path.next(parentPath);\n\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: _toPath,\n            voids: voids\n          });\n        } else {\n          var splitPath = Path.next(path);\n\n          var _toPath2 = Path.next(parentPath);\n\n          Transforms.splitNodes(editor, {\n            at: splitPath,\n            voids: voids\n          });\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: _toPath2,\n            voids: voids\n          });\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Merge a node at a location with the previous node of the same depth,\r\n   * removing any empty containing nodes after the merge if necessary.\r\n   */\n  mergeNodes: function mergeNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var match = options.match,\n          _options$at8 = options.at,\n          at = _options$at8 === void 0 ? editor.selection : _options$at8;\n      var _options$hanging2 = options.hanging,\n          hanging = _options$hanging2 === void 0 ? false : _options$hanging2,\n          _options$voids11 = options.voids,\n          voids = _options$voids11 === void 0 ? false : _options$voids11,\n          _options$mode7 = options.mode,\n          mode = _options$mode7 === void 0 ? 'lowest' : _options$mode7;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          var _Editor$parent5 = Editor.parent(editor, at),\n              _Editor$parent6 = Object(slicedToArray[\"a\" /* default */])(_Editor$parent5, 1),\n              parent = _Editor$parent6[0];\n\n          match = function match(n) {\n            return parent.children.includes(n);\n          };\n        } else {\n          match = function match(n) {\n            return Editor.isBlock(editor, n);\n          };\n        }\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at);\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var _Range$edges29 = Range.edges(at),\n              _Range$edges30 = Object(slicedToArray[\"a\" /* default */])(_Range$edges29, 2),\n              end = _Range$edges30[1];\n\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at: at\n          });\n          at = pointRef.unref();\n\n          if (options.at == null) {\n            Transforms.select(editor, at);\n          }\n        }\n      }\n\n      var _Editor$nodes9 = Editor.nodes(editor, {\n        at: at,\n        match: match,\n        voids: voids,\n        mode: mode\n      }),\n          _Editor$nodes10 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes9, 1),\n          current = _Editor$nodes10[0];\n\n      var prev = Editor.previous(editor, {\n        at: at,\n        match: match,\n        voids: voids,\n        mode: mode\n      });\n\n      if (!current || !prev) {\n        return;\n      }\n\n      var _current = Object(slicedToArray[\"a\" /* default */])(current, 2),\n          node = _current[0],\n          path = _current[1];\n\n      var _prev3 = Object(slicedToArray[\"a\" /* default */])(prev, 2),\n          prevNode = _prev3[0],\n          prevPath = _prev3[1];\n\n      if (path.length === 0 || prevPath.length === 0) {\n        return;\n      }\n\n      var newPath = Path.next(prevPath);\n      var commonPath = Path.common(path, prevPath);\n      var isPreviousSibling = Path.isSibling(path, prevPath);\n      var levels = Array.from(Editor.levels(editor, {\n        at: path\n      }), function (_ref2) {\n        var _ref11 = Object(slicedToArray[\"a\" /* default */])(_ref2, 1),\n            n = _ref11[0];\n\n        return n;\n      }).slice(commonPath.length).slice(0, -1); // Determine if the merge will leave an ancestor of the path empty as a\n      // result, in which case we'll want to remove it after merging.\n\n      var emptyAncestor = Editor.above(editor, {\n        at: path,\n        mode: 'highest',\n        match: function match(n) {\n          return levels.includes(n) && hasSingleChildNest(editor, n);\n        }\n      });\n      var emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1]);\n      var properties;\n      var position; // Ensure that the nodes are equivalent, and figure out what the position\n      // and extra properties of the merge will be.\n\n      if (Text.isText(node) && Text.isText(prevNode)) {\n        var rest = _objectWithoutProperties(node, [\"text\"]);\n\n        position = prevNode.text.length;\n        properties = rest;\n      } else if (Element.isElement(node) && Element.isElement(prevNode)) {\n        var rest = _objectWithoutProperties(node, [\"children\"]);\n\n        position = prevNode.children.length;\n        properties = rest;\n      } else {\n        throw new Error(\"Cannot merge the node at path [\".concat(path, \"] with the previous sibling because it is not the same kind: \").concat(JSON.stringify(node), \" \").concat(JSON.stringify(prevNode)));\n      } // If the node isn't already the next sibling of the previous node, move\n      // it so that it is before merging.\n\n\n      if (!isPreviousSibling) {\n        Transforms.moveNodes(editor, {\n          at: path,\n          to: newPath,\n          voids: voids\n        });\n      } // If there was going to be an empty ancestor of the node that was merged,\n      // we remove it from the tree.\n\n\n      if (emptyRef) {\n        Transforms.removeNodes(editor, {\n          at: emptyRef.current,\n          voids: voids\n        });\n      } // If the target node that we're merging with is empty, remove it instead\n      // of merging the two. This is a common rich text editor behavior to\n      // prevent losing formatting when deleting entire nodes when you have a\n      // hanging selection.\n\n\n      if (Element.isElement(prevNode) && Editor.isEmpty(editor, prevNode) || Text.isText(prevNode) && prevNode.text === '') {\n        Transforms.removeNodes(editor, {\n          at: prevPath,\n          voids: voids\n        });\n      } else {\n        editor.apply({\n          type: 'merge_node',\n          path: newPath,\n          position: position,\n          properties: properties\n        });\n      }\n\n      if (emptyRef) {\n        emptyRef.unref();\n      }\n    });\n  },\n\n  /**\r\n   * Move the nodes at a location to a new location.\r\n   */\n  moveNodes: function moveNodes(editor, options) {\n    Editor.withoutNormalizing(editor, function () {\n      var to = options.to,\n          _options$at9 = options.at,\n          at = _options$at9 === void 0 ? editor.selection : _options$at9,\n          _options$mode8 = options.mode,\n          mode = _options$mode8 === void 0 ? 'lowest' : _options$mode8,\n          _options$voids12 = options.voids,\n          voids = _options$voids12 === void 0 ? false : _options$voids12;\n      var match = options.match;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? index_es_matchPath(editor, at) : function (n) {\n          return Editor.isBlock(editor, n);\n        };\n      }\n\n      var toRef = Editor.pathRef(editor, to);\n      var targets = Editor.nodes(editor, {\n        at: at,\n        match: match,\n        mode: mode,\n        voids: voids\n      });\n      var pathRefs = Array.from(targets, function (_ref3) {\n        var _ref12 = Object(slicedToArray[\"a\" /* default */])(_ref3, 2),\n            p = _ref12[1];\n\n        return Editor.pathRef(editor, p);\n      });\n\n      for (var _i2 = 0, _pathRefs2 = pathRefs; _i2 < _pathRefs2.length; _i2++) {\n        var pathRef = _pathRefs2[_i2];\n        var path = pathRef.unref();\n        var newPath = toRef.current;\n\n        if (path.length !== 0) {\n          editor.apply({\n            type: 'move_node',\n            path: path,\n            newPath: newPath\n          });\n        }\n\n        if (toRef.current && Path.isSibling(newPath, path) && Path.isAfter(newPath, path)) {\n          // When performing a sibling move to a later index, the path at the destination is shifted\n          // to before the insertion point instead of after. To ensure our group of nodes are inserted\n          // in the correct order we increment toRef to account for that\n          toRef.current = Path.next(toRef.current);\n        }\n      }\n\n      toRef.unref();\n    });\n  },\n\n  /**\r\n   * Remove the nodes at a specific location in the document.\r\n   */\n  removeNodes: function removeNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$hanging3 = options.hanging,\n          hanging = _options$hanging3 === void 0 ? false : _options$hanging3,\n          _options$voids13 = options.voids,\n          voids = _options$voids13 === void 0 ? false : _options$voids13,\n          _options$mode9 = options.mode,\n          mode = _options$mode9 === void 0 ? 'lowest' : _options$mode9;\n      var _options$at10 = options.at,\n          at = _options$at10 === void 0 ? editor.selection : _options$at10,\n          match = options.match;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? index_es_matchPath(editor, at) : function (n) {\n          return Editor.isBlock(editor, n);\n        };\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at);\n      }\n\n      var depths = Editor.nodes(editor, {\n        at: at,\n        match: match,\n        mode: mode,\n        voids: voids\n      });\n      var pathRefs = Array.from(depths, function (_ref4) {\n        var _ref13 = Object(slicedToArray[\"a\" /* default */])(_ref4, 2),\n            p = _ref13[1];\n\n        return Editor.pathRef(editor, p);\n      });\n\n      for (var _i3 = 0, _pathRefs3 = pathRefs; _i3 < _pathRefs3.length; _i3++) {\n        var pathRef = _pathRefs3[_i3];\n        var path = pathRef.unref();\n\n        if (path) {\n          var _Editor$node3 = Editor.node(editor, path),\n              _Editor$node4 = Object(slicedToArray[\"a\" /* default */])(_Editor$node3, 1),\n              node = _Editor$node4[0];\n\n          editor.apply({\n            type: 'remove_node',\n            path: path,\n            node: node\n          });\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Set new properties on the nodes at a location.\r\n   */\n  setNodes: function setNodes(editor, props) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var match = options.match,\n          _options$at11 = options.at,\n          at = _options$at11 === void 0 ? editor.selection : _options$at11;\n      var _options$hanging4 = options.hanging,\n          hanging = _options$hanging4 === void 0 ? false : _options$hanging4,\n          _options$mode10 = options.mode,\n          mode = _options$mode10 === void 0 ? 'lowest' : _options$mode10,\n          _options$split = options.split,\n          split = _options$split === void 0 ? false : _options$split,\n          _options$voids14 = options.voids,\n          voids = _options$voids14 === void 0 ? false : _options$voids14;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? index_es_matchPath(editor, at) : function (n) {\n          return Editor.isBlock(editor, n);\n        };\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at);\n      }\n\n      if (split && Range.isRange(at)) {\n        var rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward'\n        });\n\n        var _Range$edges31 = Range.edges(at),\n            _Range$edges32 = Object(slicedToArray[\"a\" /* default */])(_Range$edges31, 2),\n            start = _Range$edges32[0],\n            end = _Range$edges32[1];\n\n        var splitMode = mode === 'lowest' ? 'lowest' : 'highest';\n        var endAtEndOfNode = Editor.isEnd(editor, end, end.path);\n        Transforms.splitNodes(editor, {\n          at: end,\n          match: match,\n          mode: splitMode,\n          voids: voids,\n          always: !endAtEndOfNode\n        });\n        var startAtStartOfNode = Editor.isStart(editor, start, start.path);\n        Transforms.splitNodes(editor, {\n          at: start,\n          match: match,\n          mode: splitMode,\n          voids: voids,\n          always: !startAtStartOfNode\n        });\n        at = rangeRef.unref();\n\n        if (options.at == null) {\n          Transforms.select(editor, at);\n        }\n      }\n\n      var _iterator34 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.nodes(editor, {\n        at: at,\n        match: match,\n        mode: mode,\n        voids: voids\n      })),\n          _step34;\n\n      try {\n        for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n          var _step34$value = Object(slicedToArray[\"a\" /* default */])(_step34.value, 2),\n              node = _step34$value[0],\n              path = _step34$value[1];\n\n          var properties = {};\n          var newProperties = {}; // You can't set properties on the editor node.\n\n          if (path.length === 0) {\n            continue;\n          }\n\n          for (var k in props) {\n            if (k === 'children' || k === 'text') {\n              continue;\n            }\n\n            if (props[k] !== node[k]) {\n              // Omit new properties from the old property list rather than set them to undefined\n              if (node.hasOwnProperty(k)) properties[k] = node[k];\n              newProperties[k] = props[k];\n            }\n          }\n\n          if (Object.keys(newProperties).length !== 0) {\n            editor.apply({\n              type: 'set_node',\n              path: path,\n              properties: properties,\n              newProperties: newProperties\n            });\n          }\n        }\n      } catch (err) {\n        _iterator34.e(err);\n      } finally {\n        _iterator34.f();\n      }\n    });\n  },\n\n  /**\r\n   * Split the nodes at a specific location.\r\n   */\n  splitNodes: function splitNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$mode11 = options.mode,\n          mode = _options$mode11 === void 0 ? 'lowest' : _options$mode11,\n          _options$voids15 = options.voids,\n          voids = _options$voids15 === void 0 ? false : _options$voids15;\n      var match = options.match,\n          _options$at12 = options.at,\n          at = _options$at12 === void 0 ? editor.selection : _options$at12,\n          _options$height = options.height,\n          height = _options$height === void 0 ? 0 : _options$height,\n          _options$always = options.always,\n          always = _options$always === void 0 ? false : _options$always;\n\n      if (match == null) {\n        match = function match(n) {\n          return Editor.isBlock(editor, n);\n        };\n      }\n\n      if (Range.isRange(at)) {\n        at = index_es_deleteRange(editor, at);\n      } // If the target is a path, the default height-skipping and position\n      // counters need to account for us potentially splitting at a non-leaf.\n\n\n      if (Path.isPath(at)) {\n        var path = at;\n        var point = Editor.point(editor, path);\n\n        var _Editor$parent7 = Editor.parent(editor, path),\n            _Editor$parent8 = Object(slicedToArray[\"a\" /* default */])(_Editor$parent7, 1),\n            parent = _Editor$parent8[0];\n\n        match = function match(n) {\n          return n === parent;\n        };\n\n        height = point.path.length - path.length + 1;\n        at = point;\n        always = true;\n      }\n\n      if (!at) {\n        return;\n      }\n\n      var beforeRef = Editor.pointRef(editor, at, {\n        affinity: 'backward'\n      });\n\n      var _Editor$nodes11 = Editor.nodes(editor, {\n        at: at,\n        match: match,\n        mode: mode,\n        voids: voids\n      }),\n          _Editor$nodes12 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes11, 1),\n          highest = _Editor$nodes12[0];\n\n      if (!highest) {\n        return;\n      }\n\n      var voidMatch = Editor.void(editor, {\n        at: at,\n        mode: 'highest'\n      });\n      var nudge = 0;\n\n      if (!voids && voidMatch) {\n        var _voidMatch = Object(slicedToArray[\"a\" /* default */])(voidMatch, 2),\n            voidNode = _voidMatch[0],\n            voidPath = _voidMatch[1];\n\n        if (Element.isElement(voidNode) && editor.isInline(voidNode)) {\n          var after = Editor.after(editor, voidPath);\n\n          if (!after) {\n            var text = {\n              text: ''\n            };\n            var afterPath = Path.next(voidPath);\n            Transforms.insertNodes(editor, text, {\n              at: afterPath,\n              voids: voids\n            });\n            after = Editor.point(editor, afterPath);\n          }\n\n          at = after;\n          always = true;\n        }\n\n        var siblingHeight = at.path.length - voidPath.length;\n        height = siblingHeight + 1;\n        always = true;\n      }\n\n      var afterRef = Editor.pointRef(editor, at);\n      var depth = at.path.length - height;\n\n      var _highest = Object(slicedToArray[\"a\" /* default */])(highest, 2),\n          highestPath = _highest[1];\n\n      var lowestPath = at.path.slice(0, depth);\n      var position = height === 0 ? at.offset : at.path[depth] + nudge;\n\n      var _iterator35 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.levels(editor, {\n        at: lowestPath,\n        reverse: true,\n        voids: voids\n      })),\n          _step35;\n\n      try {\n        for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n          var _step35$value = Object(slicedToArray[\"a\" /* default */])(_step35.value, 2),\n              node = _step35$value[0],\n              _path2 = _step35$value[1];\n\n          var split = false;\n\n          if (_path2.length < highestPath.length || _path2.length === 0 || !voids && Editor.isVoid(editor, node)) {\n            break;\n          }\n\n          var _point = beforeRef.current;\n          var isEnd = Editor.isEnd(editor, _point, _path2);\n\n          if (always || !beforeRef || !Editor.isEdge(editor, _point, _path2)) {\n            split = true;\n            var properties = Node.extractProps(node);\n            editor.apply({\n              type: 'split_node',\n              path: _path2,\n              position: position,\n              properties: properties\n            });\n          }\n\n          position = _path2[_path2.length - 1] + (split || isEnd ? 1 : 0);\n        }\n      } catch (err) {\n        _iterator35.e(err);\n      } finally {\n        _iterator35.f();\n      }\n\n      if (options.at == null) {\n        var _point2 = afterRef.current || Editor.end(editor, []);\n\n        Transforms.select(editor, _point2);\n      }\n\n      beforeRef.unref();\n      afterRef.unref();\n    });\n  },\n\n  /**\r\n   * Unset properties on the nodes at a location.\r\n   */\n  unsetNodes: function unsetNodes(editor, props) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!Array.isArray(props)) {\n      props = [props];\n    }\n\n    var obj = {};\n\n    var _iterator36 = Object(createForOfIteratorHelper[\"a\" /* default */])(props),\n        _step36;\n\n    try {\n      for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n        var key = _step36.value;\n        obj[key] = null;\n      }\n    } catch (err) {\n      _iterator36.e(err);\n    } finally {\n      _iterator36.f();\n    }\n\n    Transforms.setNodes(editor, obj, options);\n  },\n\n  /**\r\n   * Unwrap the nodes at a location from a parent node, splitting the parent if\r\n   * necessary to ensure that only the content in the range is unwrapped.\r\n   */\n  unwrapNodes: function unwrapNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$mode12 = options.mode,\n          mode = _options$mode12 === void 0 ? 'lowest' : _options$mode12,\n          _options$split2 = options.split,\n          split = _options$split2 === void 0 ? false : _options$split2,\n          _options$voids16 = options.voids,\n          voids = _options$voids16 === void 0 ? false : _options$voids16;\n      var _options$at13 = options.at,\n          at = _options$at13 === void 0 ? editor.selection : _options$at13,\n          match = options.match;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? index_es_matchPath(editor, at) : function (n) {\n          return Editor.isBlock(editor, n);\n        };\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at);\n      }\n\n      var rangeRef = Range.isRange(at) ? Editor.rangeRef(editor, at) : null;\n      var matches = Editor.nodes(editor, {\n        at: at,\n        match: match,\n        mode: mode,\n        voids: voids\n      });\n      var pathRefs = Array.from(matches, function (_ref5) {\n        var _ref14 = Object(slicedToArray[\"a\" /* default */])(_ref5, 2),\n            p = _ref14[1];\n\n        return Editor.pathRef(editor, p);\n      });\n\n      var _loop = function _loop(pathRef) {\n        var path = pathRef.unref();\n\n        var _Editor$node5 = Editor.node(editor, path),\n            _Editor$node6 = Object(slicedToArray[\"a\" /* default */])(_Editor$node5, 1),\n            node = _Editor$node6[0];\n\n        var range = Editor.range(editor, path);\n\n        if (split && rangeRef) {\n          range = Range.intersection(rangeRef.current, range);\n        }\n\n        Transforms.liftNodes(editor, {\n          at: range,\n          match: function match(n) {\n            return Element.isAncestor(node) && node.children.includes(n);\n          },\n          voids: voids\n        });\n      };\n\n      for (var _i4 = 0, _pathRefs4 = pathRefs; _i4 < _pathRefs4.length; _i4++) {\n        var pathRef = _pathRefs4[_i4];\n\n        _loop(pathRef);\n      }\n\n      if (rangeRef) {\n        rangeRef.unref();\n      }\n    });\n  },\n\n  /**\r\n   * Wrap the nodes at a location in a new container node, splitting the edges\r\n   * of the range first to ensure that only the content in the range is wrapped.\r\n   */\n  wrapNodes: function wrapNodes(editor, element) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$mode13 = options.mode,\n          mode = _options$mode13 === void 0 ? 'lowest' : _options$mode13,\n          _options$split3 = options.split,\n          split = _options$split3 === void 0 ? false : _options$split3,\n          _options$voids17 = options.voids,\n          voids = _options$voids17 === void 0 ? false : _options$voids17;\n      var match = options.match,\n          _options$at14 = options.at,\n          at = _options$at14 === void 0 ? editor.selection : _options$at14;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          match = index_es_matchPath(editor, at);\n        } else if (editor.isInline(element)) {\n          match = function match(n) {\n            return Editor.isInline(editor, n) || Text.isText(n);\n          };\n        } else {\n          match = function match(n) {\n            return Editor.isBlock(editor, n);\n          };\n        }\n      }\n\n      if (split && Range.isRange(at)) {\n        var _Range$edges33 = Range.edges(at),\n            _Range$edges34 = Object(slicedToArray[\"a\" /* default */])(_Range$edges33, 2),\n            start = _Range$edges34[0],\n            end = _Range$edges34[1];\n\n        var rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward'\n        });\n        Transforms.splitNodes(editor, {\n          at: end,\n          match: match,\n          voids: voids\n        });\n        Transforms.splitNodes(editor, {\n          at: start,\n          match: match,\n          voids: voids\n        });\n        at = rangeRef.unref();\n\n        if (options.at == null) {\n          Transforms.select(editor, at);\n        }\n      }\n\n      var roots = Array.from(Editor.nodes(editor, {\n        at: at,\n        match: editor.isInline(element) ? function (n) {\n          return Editor.isBlock(editor, n);\n        } : function (n) {\n          return Editor.isEditor(n);\n        },\n        mode: 'lowest',\n        voids: voids\n      }));\n\n      for (var _i5 = 0, _roots = roots; _i5 < _roots.length; _i5++) {\n        var _roots$_i = Object(slicedToArray[\"a\" /* default */])(_roots[_i5], 2),\n            rootPath = _roots$_i[1];\n\n        var a = Range.isRange(at) ? Range.intersection(at, Editor.range(editor, rootPath)) : at;\n\n        if (!a) {\n          continue;\n        }\n\n        var matches = Array.from(Editor.nodes(editor, {\n          at: a,\n          match: match,\n          mode: mode,\n          voids: voids\n        }));\n\n        if (matches.length > 0) {\n          (function () {\n            var _matches = Object(slicedToArray[\"a\" /* default */])(matches, 1),\n                first = _matches[0];\n\n            var last = matches[matches.length - 1];\n\n            var _first = Object(slicedToArray[\"a\" /* default */])(first, 2),\n                firstPath = _first[1];\n\n            var _last = Object(slicedToArray[\"a\" /* default */])(last, 2),\n                lastPath = _last[1];\n\n            var commonPath = Path.equals(firstPath, lastPath) ? Path.parent(firstPath) : Path.common(firstPath, lastPath);\n            var range = Editor.range(editor, firstPath, lastPath);\n            var commonNodeEntry = Editor.node(editor, commonPath);\n\n            var _commonNodeEntry = Object(slicedToArray[\"a\" /* default */])(commonNodeEntry, 1),\n                commonNode = _commonNodeEntry[0];\n\n            var depth = commonPath.length + 1;\n            var wrapperPath = Path.next(lastPath.slice(0, depth));\n\n            var wrapper = _objectSpread$7(_objectSpread$7({}, element), {}, {\n              children: []\n            });\n\n            Transforms.insertNodes(editor, wrapper, {\n              at: wrapperPath,\n              voids: voids\n            });\n            Transforms.moveNodes(editor, {\n              at: range,\n              match: function match(n) {\n                return Element.isAncestor(commonNode) && commonNode.children.includes(n);\n              },\n              to: wrapperPath.concat(0),\n              voids: voids\n            });\n          })();\n        }\n      }\n    });\n  }\n};\n\nvar hasSingleChildNest = function hasSingleChildNest(editor, node) {\n  if (Element.isElement(node)) {\n    var element = node;\n\n    if (Editor.isVoid(editor, node)) {\n      return true;\n    } else if (element.children.length === 1) {\n      return hasSingleChildNest(editor, element.children[0]);\n    } else {\n      return false;\n    }\n  } else if (Editor.isEditor(node)) {\n    return false;\n  } else {\n    return true;\n  }\n};\n/**\r\n * Convert a range into a point by deleting it's content.\r\n */\n\n\nvar index_es_deleteRange = function deleteRange(editor, range) {\n  if (Range.isCollapsed(range)) {\n    return range.anchor;\n  } else {\n    var _Range$edges35 = Range.edges(range),\n        _Range$edges36 = Object(slicedToArray[\"a\" /* default */])(_Range$edges35, 2),\n        end = _Range$edges36[1];\n\n    var pointRef = Editor.pointRef(editor, end);\n    Transforms.delete(editor, {\n      at: range\n    });\n    return pointRef.unref();\n  }\n};\n\nvar index_es_matchPath = function matchPath(editor, path) {\n  var _Editor$node7 = Editor.node(editor, path),\n      _Editor$node8 = Object(slicedToArray[\"a\" /* default */])(_Editor$node7, 1),\n      node = _Editor$node8[0];\n\n  return function (n) {\n    return n === node;\n  };\n};\n\nfunction ownKeys$8(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$8(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$8(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$8(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar SelectionTransforms = {\n  /**\r\n   * Collapse the selection.\r\n   */\n  collapse: function collapse(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _options$edge2 = options.edge,\n        edge = _options$edge2 === void 0 ? 'anchor' : _options$edge2;\n    var selection = editor.selection;\n\n    if (!selection) {\n      return;\n    } else if (edge === 'anchor') {\n      Transforms.select(editor, selection.anchor);\n    } else if (edge === 'focus') {\n      Transforms.select(editor, selection.focus);\n    } else if (edge === 'start') {\n      var _Range$edges37 = Range.edges(selection),\n          _Range$edges38 = Object(slicedToArray[\"a\" /* default */])(_Range$edges37, 1),\n          start = _Range$edges38[0];\n\n      Transforms.select(editor, start);\n    } else if (edge === 'end') {\n      var _Range$edges39 = Range.edges(selection),\n          _Range$edges40 = Object(slicedToArray[\"a\" /* default */])(_Range$edges39, 2),\n          end = _Range$edges40[1];\n\n      Transforms.select(editor, end);\n    }\n  },\n\n  /**\r\n   * Unset the selection.\r\n   */\n  deselect: function deselect(editor) {\n    var selection = editor.selection;\n\n    if (selection) {\n      editor.apply({\n        type: 'set_selection',\n        properties: selection,\n        newProperties: null\n      });\n    }\n  },\n\n  /**\r\n   * Move the selection's point forward or backward.\r\n   */\n  move: function move(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var selection = editor.selection;\n    var _options$distance3 = options.distance,\n        distance = _options$distance3 === void 0 ? 1 : _options$distance3,\n        _options$unit4 = options.unit,\n        unit = _options$unit4 === void 0 ? 'character' : _options$unit4,\n        _options$reverse9 = options.reverse,\n        reverse = _options$reverse9 === void 0 ? false : _options$reverse9;\n    var _options$edge3 = options.edge,\n        edge = _options$edge3 === void 0 ? null : _options$edge3;\n\n    if (!selection) {\n      return;\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor';\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus';\n    }\n\n    var anchor = selection.anchor,\n        focus = selection.focus;\n    var opts = {\n      distance: distance,\n      unit: unit\n    };\n    var props = {};\n\n    if (edge == null || edge === 'anchor') {\n      var point = reverse ? Editor.before(editor, anchor, opts) : Editor.after(editor, anchor, opts);\n\n      if (point) {\n        props.anchor = point;\n      }\n    }\n\n    if (edge == null || edge === 'focus') {\n      var _point = reverse ? Editor.before(editor, focus, opts) : Editor.after(editor, focus, opts);\n\n      if (_point) {\n        props.focus = _point;\n      }\n    }\n\n    Transforms.setSelection(editor, props);\n  },\n\n  /**\r\n   * Set the selection to a new value.\r\n   */\n  select: function select(editor, target) {\n    var selection = editor.selection;\n    target = Editor.range(editor, target);\n\n    if (selection) {\n      Transforms.setSelection(editor, target);\n      return;\n    }\n\n    if (!Range.isRange(target)) {\n      throw new Error(\"When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: \".concat(JSON.stringify(target)));\n    }\n\n    editor.apply({\n      type: 'set_selection',\n      properties: selection,\n      newProperties: target\n    });\n  },\n\n  /**\r\n   * Set new properties on one of the selection's points.\r\n   */\n  setPoint: function setPoint(editor, props) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var selection = editor.selection;\n    var _options$edge4 = options.edge,\n        edge = _options$edge4 === void 0 ? 'both' : _options$edge4;\n\n    if (!selection) {\n      return;\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor';\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus';\n    }\n\n    var anchor = selection.anchor,\n        focus = selection.focus;\n    var point = edge === 'anchor' ? anchor : focus;\n    Transforms.setSelection(editor, Object(defineProperty[\"a\" /* default */])({}, edge === 'anchor' ? 'anchor' : 'focus', _objectSpread$8(_objectSpread$8({}, point), props)));\n  },\n\n  /**\r\n   * Set new properties on the selection.\r\n   */\n  setSelection: function setSelection(editor, props) {\n    var selection = editor.selection;\n    var oldProps = {};\n    var newProps = {};\n\n    if (!selection) {\n      return;\n    }\n\n    for (var k in props) {\n      if (k === 'anchor' && props.anchor != null && !Point.equals(props.anchor, selection.anchor) || k === 'focus' && props.focus != null && !Point.equals(props.focus, selection.focus) || k !== 'anchor' && k !== 'focus' && props[k] !== selection[k]) {\n        oldProps[k] = selection[k];\n        newProps[k] = props[k];\n      }\n    }\n\n    if (Object.keys(oldProps).length > 0) {\n      editor.apply({\n        type: 'set_selection',\n        properties: oldProps,\n        newProperties: newProps\n      });\n    }\n  }\n};\nvar TextTransforms = {\n  /**\r\n   * Delete content in the editor.\r\n   */\n  delete: function _delete(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$reverse10 = options.reverse,\n          reverse = _options$reverse10 === void 0 ? false : _options$reverse10,\n          _options$unit5 = options.unit,\n          unit = _options$unit5 === void 0 ? 'character' : _options$unit5,\n          _options$distance4 = options.distance,\n          distance = _options$distance4 === void 0 ? 1 : _options$distance4,\n          _options$voids18 = options.voids,\n          voids = _options$voids18 === void 0 ? false : _options$voids18;\n      var _options$at15 = options.at,\n          at = _options$at15 === void 0 ? editor.selection : _options$at15,\n          _options$hanging5 = options.hanging,\n          hanging = _options$hanging5 === void 0 ? false : _options$hanging5;\n\n      if (!at) {\n        return;\n      }\n\n      if (Range.isRange(at) && Range.isCollapsed(at)) {\n        at = at.anchor;\n      }\n\n      if (Point.isPoint(at)) {\n        var furthestVoid = Editor.void(editor, {\n          at: at,\n          mode: 'highest'\n        });\n\n        if (!voids && furthestVoid) {\n          var _furthestVoid = Object(slicedToArray[\"a\" /* default */])(furthestVoid, 2),\n              voidPath = _furthestVoid[1];\n\n          at = voidPath;\n        } else {\n          var opts = {\n            unit: unit,\n            distance: distance\n          };\n          var target = reverse ? Editor.before(editor, at, opts) || Editor.start(editor, []) : Editor.after(editor, at, opts) || Editor.end(editor, []);\n          at = {\n            anchor: at,\n            focus: target\n          };\n          hanging = true;\n        }\n      }\n\n      if (Path.isPath(at)) {\n        Transforms.removeNodes(editor, {\n          at: at,\n          voids: voids\n        });\n        return;\n      }\n\n      if (Range.isCollapsed(at)) {\n        return;\n      }\n\n      if (!hanging) {\n        var _Range$edges41 = Range.edges(at),\n            _Range$edges42 = Object(slicedToArray[\"a\" /* default */])(_Range$edges41, 2),\n            _end = _Range$edges42[1];\n\n        var endOfDoc = Editor.end(editor, []);\n\n        if (!Point.equals(_end, endOfDoc)) {\n          at = Editor.unhangRange(editor, at, {\n            voids: voids\n          });\n        }\n      }\n\n      var _Range$edges43 = Range.edges(at),\n          _Range$edges44 = Object(slicedToArray[\"a\" /* default */])(_Range$edges43, 2),\n          start = _Range$edges44[0],\n          end = _Range$edges44[1];\n\n      var startBlock = Editor.above(editor, {\n        match: function match(n) {\n          return Editor.isBlock(editor, n);\n        },\n        at: start,\n        voids: voids\n      });\n      var endBlock = Editor.above(editor, {\n        match: function match(n) {\n          return Editor.isBlock(editor, n);\n        },\n        at: end,\n        voids: voids\n      });\n      var isAcrossBlocks = startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1]);\n      var isSingleText = Path.equals(start.path, end.path);\n      var startVoid = voids ? null : Editor.void(editor, {\n        at: start,\n        mode: 'highest'\n      });\n      var endVoid = voids ? null : Editor.void(editor, {\n        at: end,\n        mode: 'highest'\n      }); // If the start or end points are inside an inline void, nudge them out.\n\n      if (startVoid) {\n        var before = Editor.before(editor, start);\n\n        if (before && startBlock && Path.isAncestor(startBlock[1], before.path)) {\n          start = before;\n        }\n      }\n\n      if (endVoid) {\n        var after = Editor.after(editor, end);\n\n        if (after && endBlock && Path.isAncestor(endBlock[1], after.path)) {\n          end = after;\n        }\n      } // Get the highest nodes that are completely inside the range, as well as\n      // the start and end nodes.\n\n\n      var matches = [];\n      var lastPath;\n\n      var _iterator37 = Object(createForOfIteratorHelper[\"a\" /* default */])(Editor.nodes(editor, {\n        at: at,\n        voids: voids\n      })),\n          _step37;\n\n      try {\n        for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n          var entry = _step37.value;\n\n          var _entry3 = Object(slicedToArray[\"a\" /* default */])(entry, 2),\n              node = _entry3[0],\n              path = _entry3[1];\n\n          if (lastPath && Path.compare(path, lastPath) === 0) {\n            continue;\n          }\n\n          if (!voids && Editor.isVoid(editor, node) || !Path.isCommon(path, start.path) && !Path.isCommon(path, end.path)) {\n            matches.push(entry);\n            lastPath = path;\n          }\n        }\n      } catch (err) {\n        _iterator37.e(err);\n      } finally {\n        _iterator37.f();\n      }\n\n      var pathRefs = Array.from(matches, function (_ref) {\n        var _ref15 = Object(slicedToArray[\"a\" /* default */])(_ref, 2),\n            p = _ref15[1];\n\n        return Editor.pathRef(editor, p);\n      });\n      var startRef = Editor.pointRef(editor, start);\n      var endRef = Editor.pointRef(editor, end);\n\n      if (!isSingleText && !startVoid) {\n        var _point = startRef.current;\n\n        var _Editor$leaf3 = Editor.leaf(editor, _point),\n            _Editor$leaf4 = Object(slicedToArray[\"a\" /* default */])(_Editor$leaf3, 1),\n            _node = _Editor$leaf4[0];\n\n        var _path = _point.path;\n        var _start = start,\n            offset = _start.offset;\n\n        var text = _node.text.slice(offset);\n\n        if (text.length > 0) editor.apply({\n          type: 'remove_text',\n          path: _path,\n          offset: offset,\n          text: text\n        });\n      }\n\n      for (var _i6 = 0, _pathRefs5 = pathRefs; _i6 < _pathRefs5.length; _i6++) {\n        var pathRef = _pathRefs5[_i6];\n\n        var _path2 = pathRef.unref();\n\n        Transforms.removeNodes(editor, {\n          at: _path2,\n          voids: voids\n        });\n      }\n\n      if (!endVoid) {\n        var _point2 = endRef.current;\n\n        var _Editor$leaf5 = Editor.leaf(editor, _point2),\n            _Editor$leaf6 = Object(slicedToArray[\"a\" /* default */])(_Editor$leaf5, 1),\n            _node2 = _Editor$leaf6[0];\n\n        var _path3 = _point2.path;\n\n        var _offset = isSingleText ? start.offset : 0;\n\n        var _text = _node2.text.slice(_offset, end.offset);\n\n        if (_text.length > 0) editor.apply({\n          type: 'remove_text',\n          path: _path3,\n          offset: _offset,\n          text: _text\n        });\n      }\n\n      if (!isSingleText && isAcrossBlocks && endRef.current && startRef.current) {\n        Transforms.mergeNodes(editor, {\n          at: endRef.current,\n          hanging: true,\n          voids: voids\n        });\n      }\n\n      var point = reverse ? startRef.unref() || endRef.unref() : endRef.unref() || startRef.unref();\n\n      if (options.at == null && point) {\n        Transforms.select(editor, point);\n      }\n    });\n  },\n\n  /**\r\n   * Insert a fragment at a specific location in the editor.\r\n   */\n  insertFragment: function insertFragment(editor, fragment) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$hanging6 = options.hanging,\n          hanging = _options$hanging6 === void 0 ? false : _options$hanging6,\n          _options$voids19 = options.voids,\n          voids = _options$voids19 === void 0 ? false : _options$voids19;\n      var _options$at16 = options.at,\n          at = _options$at16 === void 0 ? editor.selection : _options$at16;\n\n      if (!fragment.length) {\n        return;\n      }\n\n      if (!at) {\n        return;\n      } else if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at);\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var _Range$edges45 = Range.edges(at),\n              _Range$edges46 = Object(slicedToArray[\"a\" /* default */])(_Range$edges45, 2),\n              end = _Range$edges46[1];\n\n          if (!voids && Editor.void(editor, {\n            at: end\n          })) {\n            return;\n          }\n\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at: at\n          });\n          at = pointRef.unref();\n        }\n      } else if (Path.isPath(at)) {\n        at = Editor.start(editor, at);\n      }\n\n      if (!voids && Editor.void(editor, {\n        at: at\n      })) {\n        return;\n      } // If the insert point is at the edge of an inline node, move it outside\n      // instead since it will need to be split otherwise.\n\n\n      var inlineElementMatch = Editor.above(editor, {\n        at: at,\n        match: function match(n) {\n          return Editor.isInline(editor, n);\n        },\n        mode: 'highest',\n        voids: voids\n      });\n\n      if (inlineElementMatch) {\n        var _inlineElementMatch = Object(slicedToArray[\"a\" /* default */])(inlineElementMatch, 2),\n            _inlinePath = _inlineElementMatch[1];\n\n        if (Editor.isEnd(editor, at, _inlinePath)) {\n          var after = Editor.after(editor, _inlinePath);\n          at = after;\n        } else if (Editor.isStart(editor, at, _inlinePath)) {\n          var before = Editor.before(editor, _inlinePath);\n          at = before;\n        }\n      }\n\n      var blockMatch = Editor.above(editor, {\n        match: function match(n) {\n          return Editor.isBlock(editor, n);\n        },\n        at: at,\n        voids: voids\n      });\n\n      var _blockMatch = Object(slicedToArray[\"a\" /* default */])(blockMatch, 2),\n          blockPath = _blockMatch[1];\n\n      var isBlockStart = Editor.isStart(editor, at, blockPath);\n      var isBlockEnd = Editor.isEnd(editor, at, blockPath);\n      var mergeStart = !isBlockStart || isBlockStart && isBlockEnd;\n      var mergeEnd = !isBlockEnd;\n\n      var _Node$first5 = Node.first({\n        children: fragment\n      }, []),\n          _Node$first6 = Object(slicedToArray[\"a\" /* default */])(_Node$first5, 2),\n          firstPath = _Node$first6[1];\n\n      var _Node$last5 = Node.last({\n        children: fragment\n      }, []),\n          _Node$last6 = Object(slicedToArray[\"a\" /* default */])(_Node$last5, 2),\n          lastPath = _Node$last6[1];\n\n      var matches = [];\n\n      var matcher = function matcher(_ref2) {\n        var _ref16 = Object(slicedToArray[\"a\" /* default */])(_ref2, 2),\n            n = _ref16[0],\n            p = _ref16[1];\n\n        if (mergeStart && Path.isAncestor(p, firstPath) && Element.isElement(n) && !editor.isVoid(n) && !editor.isInline(n)) {\n          return false;\n        }\n\n        if (mergeEnd && Path.isAncestor(p, lastPath) && Element.isElement(n) && !editor.isVoid(n) && !editor.isInline(n)) {\n          return false;\n        }\n\n        return true;\n      };\n\n      var _iterator38 = Object(createForOfIteratorHelper[\"a\" /* default */])(Node.nodes({\n        children: fragment\n      }, {\n        pass: matcher\n      })),\n          _step38;\n\n      try {\n        for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n          var entry = _step38.value;\n\n          if (entry[1].length > 0 && matcher(entry)) {\n            matches.push(entry);\n          }\n        }\n      } catch (err) {\n        _iterator38.e(err);\n      } finally {\n        _iterator38.f();\n      }\n\n      var starts = [];\n      var middles = [];\n      var ends = [];\n      var starting = true;\n      var hasBlocks = false;\n\n      for (var _i7 = 0, _matches2 = matches; _i7 < _matches2.length; _i7++) {\n        var _matches2$_i = Object(slicedToArray[\"a\" /* default */])(_matches2[_i7], 1),\n            node = _matches2$_i[0];\n\n        if (Element.isElement(node) && !editor.isInline(node)) {\n          starting = false;\n          hasBlocks = true;\n          middles.push(node);\n        } else if (starting) {\n          starts.push(node);\n        } else {\n          ends.push(node);\n        }\n      }\n\n      var _Editor$nodes13 = Editor.nodes(editor, {\n        at: at,\n        match: function match(n) {\n          return Text.isText(n) || Editor.isInline(editor, n);\n        },\n        mode: 'highest',\n        voids: voids\n      }),\n          _Editor$nodes14 = Object(slicedToArray[\"a\" /* default */])(_Editor$nodes13, 1),\n          inlineMatch = _Editor$nodes14[0];\n\n      var _inlineMatch = Object(slicedToArray[\"a\" /* default */])(inlineMatch, 2),\n          inlinePath = _inlineMatch[1];\n\n      var isInlineStart = Editor.isStart(editor, at, inlinePath);\n      var isInlineEnd = Editor.isEnd(editor, at, inlinePath);\n      var middleRef = Editor.pathRef(editor, isBlockEnd ? Path.next(blockPath) : blockPath);\n      var endRef = Editor.pathRef(editor, isInlineEnd ? Path.next(inlinePath) : inlinePath);\n      Transforms.splitNodes(editor, {\n        at: at,\n        match: function match(n) {\n          return hasBlocks ? Editor.isBlock(editor, n) : Text.isText(n) || Editor.isInline(editor, n);\n        },\n        mode: hasBlocks ? 'lowest' : 'highest',\n        voids: voids\n      });\n      var startRef = Editor.pathRef(editor, !isInlineStart || isInlineStart && isInlineEnd ? Path.next(inlinePath) : inlinePath);\n      Transforms.insertNodes(editor, starts, {\n        at: startRef.current,\n        match: function match(n) {\n          return Text.isText(n) || Editor.isInline(editor, n);\n        },\n        mode: 'highest',\n        voids: voids\n      });\n      Transforms.insertNodes(editor, middles, {\n        at: middleRef.current,\n        match: function match(n) {\n          return Editor.isBlock(editor, n);\n        },\n        mode: 'lowest',\n        voids: voids\n      });\n      Transforms.insertNodes(editor, ends, {\n        at: endRef.current,\n        match: function match(n) {\n          return Text.isText(n) || Editor.isInline(editor, n);\n        },\n        mode: 'highest',\n        voids: voids\n      });\n\n      if (!options.at) {\n        var path;\n\n        if (ends.length > 0) {\n          path = Path.previous(endRef.current);\n        } else if (middles.length > 0) {\n          path = Path.previous(middleRef.current);\n        } else {\n          path = Path.previous(startRef.current);\n        }\n\n        var _end2 = Editor.end(editor, path);\n\n        Transforms.select(editor, _end2);\n      }\n\n      startRef.unref();\n      middleRef.unref();\n      endRef.unref();\n    });\n  },\n\n  /**\r\n   * Insert a string of text in the Editor.\r\n   */\n  insertText: function insertText(editor, text) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, function () {\n      var _options$voids20 = options.voids,\n          voids = _options$voids20 === void 0 ? false : _options$voids20;\n      var _options$at17 = options.at,\n          at = _options$at17 === void 0 ? editor.selection : _options$at17;\n\n      if (!at) {\n        return;\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at);\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var end = Range.end(at);\n\n          if (!voids && Editor.void(editor, {\n            at: end\n          })) {\n            return;\n          }\n\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at: at,\n            voids: voids\n          });\n          at = pointRef.unref();\n          Transforms.setSelection(editor, {\n            anchor: at,\n            focus: at\n          });\n        }\n      }\n\n      if (!voids && Editor.void(editor, {\n        at: at\n      })) {\n        return;\n      }\n\n      var _at = at,\n          path = _at.path,\n          offset = _at.offset;\n      if (text.length > 0) editor.apply({\n        type: 'insert_text',\n        path: path,\n        offset: offset,\n        text: text\n      });\n    });\n  }\n};\n\nfunction ownKeys$9(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$9(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$9(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$9(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar Transforms = _objectSpread$9(_objectSpread$9(_objectSpread$9(_objectSpread$9({}, GeneralTransforms), NodeTransforms), SelectionTransforms), TextTransforms);\n\n\n\n/***/ }),\n\n/***/ 362:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n/**\n * Is hotkey?\n */\n\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, {\n    byKey: true\n  }, event);\n}\n/**\n * Parse.\n */\n\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {}; // Special case to handle the `+` key since we use it as a separator.\n\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length; // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n/**\n * Compare.\n */\n\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * Utils.\n */\n\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n/**\n * Export.\n */\n\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;\n\n/***/ }),\n\n/***/ 393:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        // \"\n        escape = '&quot;';\n        break;\n\n      case 38:\n        // &\n        escape = '&amp;';\n        break;\n\n      case 39:\n        // '\n        escape = '&#39;';\n        break;\n\n      case 60:\n        // <\n        escape = '&lt;';\n        break;\n\n      case 62:\n        // >\n        escape = '&gt;';\n        break;\n\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index ? html + str.substring(lastIndex, index) : html;\n}\n\n/***/ }),\n\n/***/ 394:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export HISTORY */\n/* unused harmony export History */\n/* unused harmony export HistoryEditor */\n/* unused harmony export MERGING */\n/* unused harmony export SAVING */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return withHistory; });\n/* harmony import */ var _Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(423);\n/* harmony import */ var is_plain_object__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(534);\n/* harmony import */ var slate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(326);\n\n\n\nvar History = {\n  /**\r\n   * Check if a value is a `History` object.\r\n   */\n  isHistory: function isHistory(value) {\n    return Object(is_plain_object__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || slate__WEBPACK_IMPORTED_MODULE_2__[/* Operation */ \"d\"].isOperationList(value.redos[0])) && (value.undos.length === 0 || slate__WEBPACK_IMPORTED_MODULE_2__[/* Operation */ \"d\"].isOperationList(value.undos[0]));\n  }\n};\n/**\r\n * Weakmaps for attaching state to the editor.\r\n */\n\nvar HISTORY = new WeakMap();\nvar SAVING = new WeakMap();\nvar MERGING = new WeakMap();\nvar HistoryEditor = {\n  /**\r\n   * Check if a value is a `HistoryEditor` object.\r\n   */\n  isHistoryEditor: function isHistoryEditor(value) {\n    return History.isHistory(value.history) && slate__WEBPACK_IMPORTED_MODULE_2__[/* Editor */ \"a\"].isEditor(value);\n  },\n\n  /**\r\n   * Get the merge flag's current value.\r\n   */\n  isMerging: function isMerging(editor) {\n    return MERGING.get(editor);\n  },\n\n  /**\r\n   * Get the saving flag's current value.\r\n   */\n  isSaving: function isSaving(editor) {\n    return SAVING.get(editor);\n  },\n\n  /**\r\n   * Redo to the previous saved state.\r\n   */\n  redo: function redo(editor) {\n    editor.redo();\n  },\n\n  /**\r\n   * Undo to the previous saved state.\r\n   */\n  undo: function undo(editor) {\n    editor.undo();\n  },\n\n  /**\r\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\r\n   * the new operations into previous save point in the history.\r\n   */\n  withoutMerging: function withoutMerging(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, false);\n    fn();\n    MERGING.set(editor, prev);\n  },\n\n  /**\r\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\r\n   * their operations into the history.\r\n   */\n  withoutSaving: function withoutSaving(editor, fn) {\n    var prev = HistoryEditor.isSaving(editor);\n    SAVING.set(editor, false);\n    fn();\n    SAVING.set(editor, prev);\n  }\n};\n/**\r\n * The `withHistory` plugin keeps track of the operation history of a Slate\r\n * editor as operations are applied to it, using undo and redo stacks.\r\n *\r\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\r\n * this plugin.\r\n *\r\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\r\n */\n\nvar withHistory = function withHistory(editor) {\n  var e = editor;\n  var apply = e.apply;\n  e.history = {\n    undos: [],\n    redos: []\n  };\n\n  e.redo = function () {\n    var history = e.history;\n    var redos = history.redos;\n\n    if (redos.length > 0) {\n      var batch = redos[redos.length - 1];\n      HistoryEditor.withoutSaving(e, function () {\n        slate__WEBPACK_IMPORTED_MODULE_2__[/* Editor */ \"a\"].withoutNormalizing(e, function () {\n          var _iterator = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(batch),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var op = _step.value;\n              e.apply(op);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        });\n      });\n      history.redos.pop();\n      history.undos.push(batch);\n    }\n  };\n\n  e.undo = function () {\n    var history = e.history;\n    var undos = history.undos;\n\n    if (undos.length > 0) {\n      var batch = undos[undos.length - 1];\n      HistoryEditor.withoutSaving(e, function () {\n        slate__WEBPACK_IMPORTED_MODULE_2__[/* Editor */ \"a\"].withoutNormalizing(e, function () {\n          var inverseOps = batch.map(slate__WEBPACK_IMPORTED_MODULE_2__[/* Operation */ \"d\"].inverse).reverse();\n\n          var _iterator2 = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(inverseOps),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var op = _step2.value;\n              e.apply(op);\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        });\n      });\n      history.redos.push(batch);\n      history.undos.pop();\n    }\n  };\n\n  e.apply = function (op) {\n    var operations = e.operations,\n        history = e.history;\n    var undos = history.undos;\n    var lastBatch = undos[undos.length - 1];\n    var lastOp = lastBatch && lastBatch[lastBatch.length - 1];\n    var overwrite = shouldOverwrite(op, lastOp);\n    var save = HistoryEditor.isSaving(e);\n    var merge = HistoryEditor.isMerging(e);\n\n    if (save == null) {\n      save = shouldSave(op);\n    }\n\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false;\n        } else if (operations.length !== 0) {\n          merge = true;\n        } else {\n          merge = shouldMerge(op, lastOp) || overwrite;\n        }\n      }\n\n      if (lastBatch && merge) {\n        if (overwrite) {\n          lastBatch.pop();\n        }\n\n        lastBatch.push(op);\n      } else {\n        var batch = [op];\n        undos.push(batch);\n      }\n\n      while (undos.length > 100) {\n        undos.shift();\n      }\n\n      if (shouldClear(op)) {\n        history.redos = [];\n      }\n    }\n\n    apply(op);\n  };\n\n  return e;\n};\n/**\r\n * Check whether to merge an operation into the previous operation.\r\n */\n\n\nvar shouldMerge = function shouldMerge(op, prev) {\n  if (op.type === 'set_selection') {\n    return true;\n  }\n\n  if (prev && op.type === 'insert_text' && prev.type === 'insert_text' && op.offset === prev.offset + prev.text.length && slate__WEBPACK_IMPORTED_MODULE_2__[/* Path */ \"e\"].equals(op.path, prev.path)) {\n    return true;\n  }\n\n  if (prev && op.type === 'remove_text' && prev.type === 'remove_text' && op.offset + op.text.length === prev.offset && slate__WEBPACK_IMPORTED_MODULE_2__[/* Path */ \"e\"].equals(op.path, prev.path)) {\n    return true;\n  }\n\n  return false;\n};\n/**\r\n * Check whether an operation needs to be saved to the history.\r\n */\n\n\nvar shouldSave = function shouldSave(op, prev) {\n  if (op.type === 'set_selection' && (op.properties == null || op.newProperties == null)) {\n    return false;\n  }\n\n  return true;\n};\n/**\r\n * Check whether an operation should overwrite the previous one.\r\n */\n\n\nvar shouldOverwrite = function shouldOverwrite(op, prev) {\n  if (prev && op.type === 'set_selection' && prev.type === 'set_selection') {\n    return true;\n  }\n\n  return false;\n};\n/**\r\n * Check whether an operation should clear the redos stack.\r\n */\n\n\nvar shouldClear = function shouldClear(op) {\n  if (op.type === 'set_selection') {\n    return false;\n  }\n\n  return true;\n};\n\n\n\n/***/ }),\n\n/***/ 395:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export createHyperscript */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return jsx; });\n/* harmony import */ var _Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59);\n/* harmony import */ var _Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(423);\n/* harmony import */ var _Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(164);\n/* harmony import */ var _Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(163);\n/* harmony import */ var _Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(161);\n/* harmony import */ var is_plain_object__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(534);\n/* harmony import */ var slate__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(326);\n\n\n\n\n\n\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n/**\r\n * A weak map to hold anchor tokens.\r\n */\n\n\nvar ANCHOR = new WeakMap();\n/**\r\n * A weak map to hold focus tokens.\r\n */\n\nvar FOCUS = new WeakMap();\n/**\r\n * All tokens inherit from a single constructor for `instanceof` checking.\r\n */\n\nvar Token = function Token() {\n  Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(this, Token);\n};\n/**\r\n * Anchor tokens represent the selection's anchor point.\r\n */\n\n\nvar AnchorToken = /*#__PURE__*/function (_Token) {\n  Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(AnchorToken, _Token);\n\n  var _super = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(AnchorToken);\n\n  function AnchorToken() {\n    var _this;\n\n    Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(this, AnchorToken);\n\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this = _super.call(this);\n    var offset = props.offset,\n        path = props.path;\n    _this.offset = offset;\n    _this.path = path;\n    return _this;\n  }\n\n  return AnchorToken;\n}(Token);\n/**\r\n * Focus tokens represent the selection's focus point.\r\n */\n\n\nvar FocusToken = /*#__PURE__*/function (_Token2) {\n  Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(FocusToken, _Token2);\n\n  var _super2 = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(FocusToken);\n\n  function FocusToken() {\n    var _this2;\n\n    Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(this, FocusToken);\n\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _this2 = _super2.call(this);\n    var offset = props.offset,\n        path = props.path;\n    _this2.offset = offset;\n    _this2.path = path;\n    return _this2;\n  }\n\n  return FocusToken;\n}(Token);\n/**\r\n * Add an anchor token to the end of a text node.\r\n */\n\n\nvar addAnchorToken = function addAnchorToken(text, token) {\n  var offset = text.text.length;\n  ANCHOR.set(text, [offset, token]);\n};\n/**\r\n * Get the offset if a text node has an associated anchor token.\r\n */\n\n\nvar getAnchorOffset = function getAnchorOffset(text) {\n  return ANCHOR.get(text);\n};\n/**\r\n * Add a focus token to the end of a text node.\r\n */\n\n\nvar addFocusToken = function addFocusToken(text, token) {\n  var offset = text.text.length;\n  FOCUS.set(text, [offset, token]);\n};\n/**\r\n * Get the offset if a text node has an associated focus token.\r\n */\n\n\nvar getFocusOffset = function getFocusOffset(text) {\n  return FOCUS.get(text);\n};\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\r\n * Resolve the descedants of a node by normalizing the children that can be\r\n * passed into a hyperscript creator function.\r\n */\n\n\nvar STRINGS = new WeakSet();\n\nvar resolveDescendants = function resolveDescendants(children) {\n  var nodes = [];\n\n  var addChild = function addChild(child) {\n    if (child == null) {\n      return;\n    }\n\n    var prev = nodes[nodes.length - 1];\n\n    if (typeof child === 'string') {\n      var text = {\n        text: child\n      };\n      STRINGS.add(text);\n      child = text;\n    }\n\n    if (slate__WEBPACK_IMPORTED_MODULE_6__[/* Text */ \"g\"].isText(child)) {\n      var c = child; // HACK: fix typescript complaining\n\n      if (slate__WEBPACK_IMPORTED_MODULE_6__[/* Text */ \"g\"].isText(prev) && STRINGS.has(prev) && STRINGS.has(c) && slate__WEBPACK_IMPORTED_MODULE_6__[/* Text */ \"g\"].equals(prev, c, {\n        loose: true\n      })) {\n        prev.text += c.text;\n      } else {\n        nodes.push(c);\n      }\n    } else if (slate__WEBPACK_IMPORTED_MODULE_6__[/* Element */ \"b\"].isElement(child)) {\n      nodes.push(child);\n    } else if (child instanceof Token) {\n      var n = nodes[nodes.length - 1];\n\n      if (!slate__WEBPACK_IMPORTED_MODULE_6__[/* Text */ \"g\"].isText(n)) {\n        addChild('');\n        n = nodes[nodes.length - 1];\n      }\n\n      if (child instanceof AnchorToken) {\n        addAnchorToken(n, child);\n      } else if (child instanceof FocusToken) {\n        addFocusToken(n, child);\n      }\n    } else {\n      throw new Error(\"Unexpected hyperscript child object: \".concat(child));\n    }\n  };\n\n  var _iterator = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(children.flat(Infinity)),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var child = _step.value;\n      addChild(child);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return nodes;\n};\n/**\r\n * Create an anchor token.\r\n */\n\n\nfunction createAnchor(tagName, attributes, children) {\n  return new AnchorToken(attributes);\n}\n/**\r\n * Create an anchor and a focus token.\r\n */\n\n\nfunction createCursor(tagName, attributes, children) {\n  return [new AnchorToken(attributes), new FocusToken(attributes)];\n}\n/**\r\n * Create an `Element` object.\r\n */\n\n\nfunction createElement(tagName, attributes, children) {\n  return _objectSpread(_objectSpread({}, attributes), {}, {\n    children: resolveDescendants(children)\n  });\n}\n/**\r\n * Create a focus token.\r\n */\n\n\nfunction createFocus(tagName, attributes, children) {\n  return new FocusToken(attributes);\n}\n/**\r\n * Create a fragment.\r\n */\n\n\nfunction createFragment(tagName, attributes, children) {\n  return resolveDescendants(children);\n}\n/**\r\n * Create a `Selection` object.\r\n */\n\n\nfunction createSelection(tagName, attributes, children) {\n  var anchor = children.find(function (c) {\n    return c instanceof AnchorToken;\n  });\n  var focus = children.find(function (c) {\n    return c instanceof FocusToken;\n  });\n\n  if (!anchor || anchor.offset == null || anchor.path == null) {\n    throw new Error(\"The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.\");\n  }\n\n  if (!focus || focus.offset == null || focus.path == null) {\n    throw new Error(\"The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.\");\n  }\n\n  return _objectSpread({\n    anchor: {\n      offset: anchor.offset,\n      path: anchor.path\n    },\n    focus: {\n      offset: focus.offset,\n      path: focus.path\n    }\n  }, attributes);\n}\n/**\r\n * Create a `Text` object.\r\n */\n\n\nfunction createText(tagName, attributes, children) {\n  var nodes = resolveDescendants(children);\n\n  if (nodes.length > 1) {\n    throw new Error(\"The <text> hyperscript tag must only contain a single node's worth of children.\");\n  }\n\n  var _nodes = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(nodes, 1),\n      node = _nodes[0];\n\n  if (node == null) {\n    node = {\n      text: ''\n    };\n  }\n\n  if (!slate__WEBPACK_IMPORTED_MODULE_6__[/* Text */ \"g\"].isText(node)) {\n    throw new Error(\"\\n    The <text> hyperscript tag can only contain text content as children.\");\n  } // COMPAT: If they used the <text> tag we want to guarantee that it won't be\n  // merge with other string children.\n\n\n  STRINGS.delete(node);\n  Object.assign(node, attributes);\n  return node;\n}\n/**\r\n * Create a top-level `Editor` object.\r\n */\n\n\nfunction createEditor(tagName, attributes, children) {\n  var otherChildren = [];\n  var selectionChild;\n\n  var _iterator2 = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(children),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var child = _step2.value;\n\n      if (slate__WEBPACK_IMPORTED_MODULE_6__[/* Range */ \"f\"].isRange(child)) {\n        selectionChild = child;\n      } else {\n        otherChildren.push(child);\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  var descendants = resolveDescendants(otherChildren);\n  var selection = {};\n  var editor = Object(slate__WEBPACK_IMPORTED_MODULE_6__[/* createEditor */ \"i\"])();\n  Object.assign(editor, attributes);\n  editor.children = descendants; // Search the document's texts to see if any of them have tokens associated\n  // that need incorporated into the selection.\n\n  var _iterator3 = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createForOfIteratorHelper__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])(slate__WEBPACK_IMPORTED_MODULE_6__[/* Node */ \"c\"].texts(editor)),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var _step3$value = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(_step3.value, 2),\n          node = _step3$value[0],\n          path = _step3$value[1];\n\n      var anchor = getAnchorOffset(node);\n      var focus = getFocusOffset(node);\n\n      if (anchor != null) {\n        var _anchor = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(anchor, 1),\n            offset = _anchor[0];\n\n        selection.anchor = {\n          path: path,\n          offset: offset\n        };\n      }\n\n      if (focus != null) {\n        var _focus = Object(_Users_akrah_Documents_dev_readux_src_codefluent_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(focus, 1),\n            _offset = _focus[0];\n\n        selection.focus = {\n          path: path,\n          offset: _offset\n        };\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  if (selection.anchor && !selection.focus) {\n    throw new Error(\"Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.\");\n  }\n\n  if (!selection.anchor && selection.focus) {\n    throw new Error(\"Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.\");\n  }\n\n  if (selectionChild != null) {\n    editor.selection = selectionChild;\n  } else if (slate__WEBPACK_IMPORTED_MODULE_6__[/* Range */ \"f\"].isRange(selection)) {\n    editor.selection = selection;\n  }\n\n  return editor;\n}\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\r\n * The default creators for Slate objects.\r\n */\n\n\nvar DEFAULT_CREATORS = {\n  anchor: createAnchor,\n  cursor: createCursor,\n  editor: createEditor,\n  element: createElement,\n  focus: createFocus,\n  fragment: createFragment,\n  selection: createSelection,\n  text: createText\n};\n/**\r\n * Create a Slate hyperscript function with `options`.\r\n */\n\nvar createHyperscript = function createHyperscript() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _options$elements = options.elements,\n      elements = _options$elements === void 0 ? {} : _options$elements;\n  var elementCreators = normalizeElements(elements);\n\n  var creators = _objectSpread$1(_objectSpread$1(_objectSpread$1({}, DEFAULT_CREATORS), elementCreators), options.creators);\n\n  var jsx = createFactory(creators);\n  return jsx;\n};\n/**\r\n * Create a Slate hyperscript function with `options`.\r\n */\n\n\nvar createFactory = function createFactory(creators) {\n  var jsx = function jsx(tagName, attributes) {\n    for (var _len = arguments.length, children = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      children[_key - 2] = arguments[_key];\n    }\n\n    var creator = creators[tagName];\n\n    if (!creator) {\n      throw new Error(\"No hyperscript creator found for tag: <\".concat(tagName, \">\"));\n    }\n\n    if (attributes == null) {\n      attributes = {};\n    }\n\n    if (!Object(is_plain_object__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(attributes)) {\n      children = [attributes].concat(children);\n      attributes = {};\n    }\n\n    children = children.filter(function (child) {\n      return Boolean(child);\n    }).flat();\n    var ret = creator(tagName, attributes, children);\n    return ret;\n  };\n\n  return jsx;\n};\n/**\r\n * Normalize a dictionary of element shorthands into creator functions.\r\n */\n\n\nvar normalizeElements = function normalizeElements(elements) {\n  var creators = {};\n\n  var _loop = function _loop(tagName) {\n    var props = elements[tagName];\n\n    if (typeof props !== 'object') {\n      throw new Error(\"Properties specified for a hyperscript shorthand should be an object, but for the custom element <\".concat(tagName, \">  tag you passed: \").concat(props));\n    }\n\n    creators[tagName] = function (tagName, attributes, children) {\n      return createElement('element', _objectSpread$1(_objectSpread$1({}, props), attributes), children);\n    };\n  };\n\n  for (var tagName in elements) {\n    _loop(tagName);\n  }\n\n  return creators;\n};\n/**\r\n * The default hyperscript factory that ships with Slate, without custom tags.\r\n */\n\n\nvar jsx = createHyperscript();\n\n\n/***/ }),\n\n/***/ 397:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ Editable$1; });\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* binding */ index_es_Slate; });\n__webpack_require__.d(__webpack_exports__, \"c\", function() { return /* binding */ index_es_useSlate; });\n__webpack_require__.d(__webpack_exports__, \"d\", function() { return /* binding */ index_es_withReact; });\n\n// UNUSED EXPORTS: AndroidEditable, DefaultEditable, DefaultElement, DefaultLeaf, DefaultPlaceholder, ReactEditor, useEditor, useFocused, useReadOnly, useSelected, useSlateStatic\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(180);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(161);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\nvar createForOfIteratorHelper = __webpack_require__(423);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(59);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/slate/dist/index.es.js + 1 modules\nvar index_es = __webpack_require__(326);\n\n// EXTERNAL MODULE: ./node_modules/direction/index.js\nvar node_modules_direction = __webpack_require__(761);\nvar direction_default = /*#__PURE__*/__webpack_require__.n(node_modules_direction);\n\n// EXTERNAL MODULE: ./node_modules/lodash/throttle.js\nvar throttle = __webpack_require__(762);\nvar throttle_default = /*#__PURE__*/__webpack_require__.n(throttle);\n\n// CONCATENATED MODULE: ./node_modules/compute-scroll-into-view/dist/index.module.js\nfunction t(t) {\n  return \"object\" == typeof t && null != t && 1 === t.nodeType;\n}\n\nfunction index_module_e(t, e) {\n  return (!e || \"hidden\" !== t) && \"visible\" !== t && \"clip\" !== t;\n}\n\nfunction index_module_n(t, n) {\n  if (t.clientHeight < t.scrollHeight || t.clientWidth < t.scrollWidth) {\n    var r = getComputedStyle(t, null);\n    return index_module_e(r.overflowY, n) || index_module_e(r.overflowX, n) || function (t) {\n      var e = function (t) {\n        if (!t.ownerDocument || !t.ownerDocument.defaultView) return null;\n\n        try {\n          return t.ownerDocument.defaultView.frameElement;\n        } catch (t) {\n          return null;\n        }\n      }(t);\n\n      return !!e && (e.clientHeight < t.scrollHeight || e.clientWidth < t.scrollWidth);\n    }(t);\n  }\n\n  return !1;\n}\n\nfunction index_module_r(t, e, n, r, i, o, l, d) {\n  return o < t && l > e || o > t && l < e ? 0 : o <= t && d <= n || l >= e && d >= n ? o - t - r : l > e && d < n || o < t && d > n ? l - e + i : 0;\n}\n\n/* harmony default export */ var index_module = (function (e, i) {\n  var o = window,\n      l = i.scrollMode,\n      d = i.block,\n      u = i.inline,\n      h = i.boundary,\n      a = i.skipOverflowHiddenElements,\n      c = \"function\" == typeof h ? h : function (t) {\n    return t !== h;\n  };\n  if (!t(e)) throw new TypeError(\"Invalid target\");\n\n  for (var f = document.scrollingElement || document.documentElement, s = [], p = e; t(p) && c(p);) {\n    if ((p = p.parentElement) === f) {\n      s.push(p);\n      break;\n    }\n\n    null != p && p === document.body && index_module_n(p) && !index_module_n(document.documentElement) || null != p && index_module_n(p, a) && s.push(p);\n  }\n\n  for (var m = o.visualViewport ? o.visualViewport.width : innerWidth, g = o.visualViewport ? o.visualViewport.height : innerHeight, w = window.scrollX || pageXOffset, v = window.scrollY || pageYOffset, W = e.getBoundingClientRect(), b = W.height, H = W.width, y = W.top, E = W.right, M = W.bottom, V = W.left, x = \"start\" === d || \"nearest\" === d ? y : \"end\" === d ? M : y + b / 2, I = \"center\" === u ? V + H / 2 : \"end\" === u ? E : V, C = [], T = 0; T < s.length; T++) {\n    var k = s[T],\n        B = k.getBoundingClientRect(),\n        D = B.height,\n        O = B.width,\n        R = B.top,\n        X = B.right,\n        Y = B.bottom,\n        L = B.left;\n    if (\"if-needed\" === l && y >= 0 && V >= 0 && M <= g && E <= m && y >= R && M <= Y && V >= L && E <= X) return C;\n    var S = getComputedStyle(k),\n        j = parseInt(S.borderLeftWidth, 10),\n        q = parseInt(S.borderTopWidth, 10),\n        z = parseInt(S.borderRightWidth, 10),\n        A = parseInt(S.borderBottomWidth, 10),\n        F = 0,\n        G = 0,\n        J = \"offsetWidth\" in k ? k.offsetWidth - k.clientWidth - j - z : 0,\n        K = \"offsetHeight\" in k ? k.offsetHeight - k.clientHeight - q - A : 0;\n    if (f === k) F = \"start\" === d ? x : \"end\" === d ? x - g : \"nearest\" === d ? index_module_r(v, v + g, g, q, A, v + x, v + x + b, b) : x - g / 2, G = \"start\" === u ? I : \"center\" === u ? I - m / 2 : \"end\" === u ? I - m : index_module_r(w, w + m, m, j, z, w + I, w + I + H, H), F = Math.max(0, F + v), G = Math.max(0, G + w);else {\n      F = \"start\" === d ? x - R - q : \"end\" === d ? x - Y + A + K : \"nearest\" === d ? index_module_r(R, Y, D, q, A + K, x, x + b, b) : x - (R + D / 2) + K / 2, G = \"start\" === u ? I - L - j : \"center\" === u ? I - (L + O / 2) + J / 2 : \"end\" === u ? I - X + z + J : index_module_r(L, X, O, j, z + J, I, I + H, H);\n      var N = k.scrollLeft,\n          P = k.scrollTop;\n      x += P - (F = Math.max(0, Math.min(P + F, k.scrollHeight - D + K))), I += N - (G = Math.max(0, Math.min(N + G, k.scrollWidth - O + J)));\n    }\n    C.push({\n      el: k,\n      top: F,\n      left: G\n    });\n  }\n\n  return C;\n});\n// CONCATENATED MODULE: ./node_modules/scroll-into-view-if-needed/es/index.js\n\n\nfunction isOptionsObject(options) {\n  return options === Object(options) && Object.keys(options).length !== 0;\n}\n\nfunction defaultBehavior(actions, behavior) {\n  if (behavior === void 0) {\n    behavior = 'auto';\n  }\n\n  var canSmoothScroll = ('scrollBehavior' in document.body.style);\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n\n    if (el.scroll && canSmoothScroll) {\n      el.scroll({\n        top: top,\n        left: left,\n        behavior: behavior\n      });\n    } else {\n      el.scrollTop = top;\n      el.scrollLeft = left;\n    }\n  });\n}\n\nfunction getOptions(options) {\n  if (options === false) {\n    return {\n      block: 'end',\n      inline: 'nearest'\n    };\n  }\n\n  if (isOptionsObject(options)) {\n    return options;\n  }\n\n  return {\n    block: 'start',\n    inline: 'nearest'\n  };\n}\n\nfunction scrollIntoView(target, options) {\n  var targetIsDetached = !target.ownerDocument.documentElement.contains(target);\n\n  if (isOptionsObject(options) && typeof options.behavior === 'function') {\n    return options.behavior(targetIsDetached ? [] : index_module(target, options));\n  }\n\n  if (targetIsDetached) {\n    return;\n  }\n\n  var computeOptions = getOptions(options);\n  return defaultBehavior(index_module(target, computeOptions), computeOptions.behavior);\n}\n\n/* harmony default export */ var es = (scrollIntoView);\n// EXTERNAL MODULE: ./node_modules/is-hotkey/lib/index.js\nvar lib = __webpack_require__(362);\n\n// CONCATENATED MODULE: ./node_modules/slate-react/node_modules/tiny-invariant/dist/tiny-invariant.esm.js\nvar isProduction = \"production\" === 'production';\nvar prefix = 'Invariant failed';\n\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  } else {\n    throw new Error(prefix + \": \" + (message || ''));\n  }\n}\n\n/* harmony default export */ var tiny_invariant_esm = (invariant);\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(27);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// CONCATENATED MODULE: ./node_modules/slate-react/dist/index.es.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n/**\r\n * Leaf content strings.\r\n */\n\n\nvar index_es_String = function String(props) {\n  var isLast = props.isLast,\n      leaf = props.leaf,\n      parent = props.parent,\n      text = props.text;\n  var editor = index_es_useSlateStatic();\n  var path = ReactEditor.findPath(editor, text);\n  var parentPath = index_es[\"e\" /* Path */].parent(path); // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n\n  if (editor.isVoid(parent)) {\n    return /*#__PURE__*/react_default.a.createElement(index_es_ZeroWidthString, {\n      length: index_es[\"c\" /* Node */].string(parent).length\n    });\n  } // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n\n\n  if (leaf.text === '' && parent.children[parent.children.length - 1] === text && !editor.isInline(parent) && index_es[\"a\" /* Editor */].string(editor, parentPath) === '') {\n    return /*#__PURE__*/react_default.a.createElement(index_es_ZeroWidthString, {\n      isLineBreak: true\n    });\n  } // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n\n\n  if (leaf.text === '') {\n    return /*#__PURE__*/react_default.a.createElement(index_es_ZeroWidthString, null);\n  } // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n\n\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return /*#__PURE__*/react_default.a.createElement(index_es_TextString, {\n      isTrailing: true,\n      text: leaf.text\n    });\n  }\n\n  return /*#__PURE__*/react_default.a.createElement(index_es_TextString, {\n    text: leaf.text\n  });\n};\n/**\r\n * Leaf strings with text in them.\r\n */\n\n\nvar index_es_TextString = function TextString(props) {\n  var text = props.text,\n      _props$isTrailing = props.isTrailing,\n      isTrailing = _props$isTrailing === void 0 ? false : _props$isTrailing;\n  return /*#__PURE__*/react_default.a.createElement(\"span\", {\n    \"data-slate-string\": true\n  }, text, isTrailing ? '\\n' : null);\n};\n/**\r\n * Leaf strings without text, render as zero-width strings.\r\n */\n\n\nvar index_es_ZeroWidthString = function ZeroWidthString(props) {\n  var _props$length = props.length,\n      length = _props$length === void 0 ? 0 : _props$length,\n      _props$isLineBreak = props.isLineBreak,\n      isLineBreak = _props$isLineBreak === void 0 ? false : _props$isLineBreak;\n  return /*#__PURE__*/react_default.a.createElement(\"span\", {\n    \"data-slate-zero-width\": isLineBreak ? 'n' : 'z',\n    \"data-slate-length\": length\n  }, \"\\uFEFF\", isLineBreak ? /*#__PURE__*/react_default.a.createElement(\"br\", null) : null);\n};\n/**\r\n * Two weak maps that allow us rebuild a path given a node. They are populated\r\n * at render time such that after a render occurs we can always backtrack.\r\n */\n\n\nvar NODE_TO_INDEX = new WeakMap();\nvar NODE_TO_PARENT = new WeakMap();\n/**\r\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\r\n * are used to resolve DOM event-related logic into Slate actions.\r\n */\n\nvar EDITOR_TO_WINDOW = new WeakMap();\nvar EDITOR_TO_ELEMENT = new WeakMap();\nvar ELEMENT_TO_NODE = new WeakMap();\nvar KEY_TO_ELEMENT = new WeakMap();\nvar NODE_TO_ELEMENT = new WeakMap();\nvar NODE_TO_KEY = new WeakMap();\n/**\r\n * Weak maps for storing editor-related state.\r\n */\n\nvar IS_READ_ONLY = new WeakMap();\nvar IS_FOCUSED = new WeakMap();\n/**\r\n * Weak map for associating the context `onChange` context with the plugin.\r\n */\n\nvar EDITOR_TO_ON_CHANGE = new WeakMap();\nvar EDITOR_TO_RESTORE_DOM = new WeakMap();\n/**\r\n * Symbols.\r\n */\n\nvar PLACEHOLDER_SYMBOL = Symbol('placeholder'); // prevent inconsistent rendering by React with IME input\n\nvar keyForString = 0;\n/**\r\n * Individual leaves in a text node with unique formatting.\r\n */\n\nvar index_es_Leaf = function Leaf(props) {\n  var leaf = props.leaf,\n      isLast = props.isLast,\n      text = props.text,\n      parent = props.parent,\n      renderPlaceholder = props.renderPlaceholder,\n      _props$renderLeaf = props.renderLeaf,\n      renderLeaf = _props$renderLeaf === void 0 ? function (props) {\n    return /*#__PURE__*/react_default.a.createElement(index_es_DefaultLeaf, Object.assign({}, props));\n  } : _props$renderLeaf;\n  var placeholderRef = Object(react[\"useRef\"])(null);\n  Object(react[\"useEffect\"])(function () {\n    var placeholderEl = placeholderRef === null || placeholderRef === void 0 ? void 0 : placeholderRef.current;\n    var editorEl = document.querySelector('[data-slate-editor=\"true\"]');\n\n    if (!placeholderEl || !editorEl) {\n      return;\n    }\n\n    editorEl.style.minHeight = \"\".concat(placeholderEl.clientHeight, \"px\");\n    return function () {\n      editorEl.style.minHeight = 'auto';\n    };\n  }, [placeholderRef, leaf]);\n  var children = /*#__PURE__*/react_default.a.createElement(index_es_String, {\n    key: keyForString++,\n    isLast: isLast,\n    leaf: leaf,\n    parent: parent,\n    text: text\n  });\n\n  if (leaf[PLACEHOLDER_SYMBOL]) {\n    var placeholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none'\n        },\n        contentEditable: false,\n        ref: placeholderRef\n      }\n    };\n    children = /*#__PURE__*/react_default.a.createElement(react_default.a.Fragment, null, renderPlaceholder(placeholderProps), children);\n  } // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n\n\n  var attributes = {\n    'data-slate-leaf': true\n  };\n  return renderLeaf({\n    attributes: attributes,\n    children: children,\n    leaf: leaf,\n    text: text\n  });\n};\n\nvar MemoizedLeaf = /*#__PURE__*/react_default.a.memo(index_es_Leaf, function (prev, next) {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && next.leaf.text === prev.leaf.text && index_es[\"g\" /* Text */].matches(next.leaf, prev.leaf) && next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];\n});\n\nvar index_es_DefaultLeaf = function DefaultLeaf(props) {\n  var attributes = props.attributes,\n      children = props.children;\n  return /*#__PURE__*/react_default.a.createElement(\"span\", Object.assign({}, attributes), children);\n};\n\nvar IS_IOS = typeof navigator !== 'undefined' && typeof window !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar IS_APPLE = typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent);\nvar IS_ANDROID = typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent);\nvar IS_FIREFOX = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nvar IS_SAFARI = typeof navigator !== 'undefined' && /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent); // \"modern\" Edge was released at 79.x\n\nvar IS_EDGE_LEGACY = typeof navigator !== 'undefined' && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent);\nvar IS_CHROME = typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent); // Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\n\nvar IS_CHROME_LEGACY = typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent); // Firefox did not support `beforeInput` until `v87`.\n\nvar IS_FIREFOX_LEGACY = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent); // Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\n\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined'); // COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\n\nvar HAS_BEFORE_INPUT_SUPPORT = !IS_CHROME_LEGACY && !IS_EDGE_LEGACY && // globalThis is undefined in older browsers\ntypeof globalThis !== 'undefined' && globalThis.InputEvent && // @ts-ignore The `getTargetRanges` property isn't recognized.\ntypeof globalThis.InputEvent.prototype.getTargetRanges === 'function';\n/**\r\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\r\n */\n\nvar useIsomorphicLayoutEffect = CAN_USE_DOM ? react[\"useLayoutEffect\"] : react[\"useEffect\"];\n\nvar shallowCompare = function shallowCompare(obj1, obj2) {\n  return Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every(function (key) {\n    return obj2.hasOwnProperty(key) && obj1[key] === obj2[key];\n  });\n};\n/**\r\n * Check if a list of decorator ranges are equal to another.\r\n *\r\n * PERF: this requires the two lists to also have the ranges inside them in the\r\n * same order, but this is an okay constraint for us since decorations are\r\n * kept in order, and the odd case where they aren't is okay to re-render for.\r\n */\n\n\nvar index_es_isDecoratorRangeListEqual = function isDecoratorRangeListEqual(list, another) {\n  if (list.length !== another.length) {\n    return false;\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n\n    var rangeOwnProps = _objectWithoutProperties(range, [\"anchor\", \"focus\"]);\n\n    var otherOwnProps = _objectWithoutProperties(other, [\"anchor\", \"focus\"]);\n\n    if (!index_es[\"f\" /* Range */].equals(range, other) || range[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] || !shallowCompare(rangeOwnProps, otherOwnProps)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n/**\r\n * Text.\r\n */\n\n\nvar index_es_Text = function Text(props) {\n  var decorations = props.decorations,\n      isLast = props.isLast,\n      parent = props.parent,\n      renderPlaceholder = props.renderPlaceholder,\n      renderLeaf = props.renderLeaf,\n      text = props.text;\n  var editor = index_es_useSlateStatic();\n  var ref = Object(react[\"useRef\"])(null);\n  var leaves = index_es[\"g\" /* Text */].decorations(text, decorations);\n  var key = ReactEditor.findKey(editor, text);\n  var children = [];\n\n  for (var i = 0; i < leaves.length; i++) {\n    var leaf = leaves[i];\n    children.push( /*#__PURE__*/react_default.a.createElement(MemoizedLeaf, {\n      isLast: isLast && i === leaves.length - 1,\n      key: \"\".concat(key.id, \"-\").concat(i),\n      renderPlaceholder: renderPlaceholder,\n      leaf: leaf,\n      text: text,\n      parent: parent,\n      renderLeaf: renderLeaf\n    }));\n  } // Update element-related weak maps with the DOM element ref.\n\n\n  useIsomorphicLayoutEffect(function () {\n    if (ref.current) {\n      KEY_TO_ELEMENT.set(key, ref.current);\n      NODE_TO_ELEMENT.set(text, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, text);\n    } else {\n      KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(text);\n    }\n  });\n  return /*#__PURE__*/react_default.a.createElement(\"span\", {\n    \"data-slate-node\": \"text\",\n    ref: ref\n  }, children);\n};\n\nvar MemoizedText = /*#__PURE__*/react_default.a.memo(index_es_Text, function (prev, next) {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.text === prev.text && index_es_isDecoratorRangeListEqual(next.decorations, prev.decorations);\n});\n/**\r\n * A React context for sharing the `selected` state of an element.\r\n */\n\nvar SelectedContext = /*#__PURE__*/Object(react[\"createContext\"])(false);\n/**\r\n * Get the current `selected` state of an element.\r\n */\n\nvar index_es_useSelected = function useSelected() {\n  return Object(react[\"useContext\"])(SelectedContext);\n};\n/**\r\n * Element.\r\n */\n\n\nvar index_es_Element = function Element(props) {\n  var decorations = props.decorations,\n      element = props.element,\n      _props$renderElement = props.renderElement,\n      renderElement = _props$renderElement === void 0 ? function (p) {\n    return /*#__PURE__*/react_default.a.createElement(index_es_DefaultElement, Object.assign({}, p));\n  } : _props$renderElement,\n      renderPlaceholder = props.renderPlaceholder,\n      renderLeaf = props.renderLeaf,\n      selection = props.selection;\n  var ref = Object(react[\"useRef\"])(null);\n  var editor = index_es_useSlateStatic();\n  var readOnly = index_es_useReadOnly();\n  var isInline = editor.isInline(element);\n  var key = ReactEditor.findKey(editor, element);\n  var children = index_es_useChildren({\n    decorations: decorations,\n    node: element,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    selection: selection\n  }); // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n\n  var attributes = {\n    'data-slate-node': 'element',\n    ref: ref\n  };\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true;\n  } // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n\n\n  if (!isInline && index_es[\"a\" /* Editor */].hasInlines(editor, element)) {\n    var text = index_es[\"c\" /* Node */].string(element);\n    var dir = direction_default()(text);\n\n    if (dir === 'rtl') {\n      attributes.dir = dir;\n    }\n  } // If it's a void node, wrap the children in extra void-specific elements.\n\n\n  if (index_es[\"a\" /* Editor */].isVoid(editor, element)) {\n    attributes['data-slate-void'] = true;\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false;\n    }\n\n    var Tag = isInline ? 'span' : 'div';\n\n    var _Node$texts = index_es[\"c\" /* Node */].texts(element),\n        _Node$texts2 = Object(slicedToArray[\"a\" /* default */])(_Node$texts, 1),\n        _Node$texts2$ = Object(slicedToArray[\"a\" /* default */])(_Node$texts2[0], 1),\n        _text = _Node$texts2$[0];\n\n    children = readOnly ? null : /*#__PURE__*/react_default.a.createElement(Tag, {\n      \"data-slate-spacer\": true,\n      style: {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      }\n    }, /*#__PURE__*/react_default.a.createElement(MemoizedText, {\n      renderPlaceholder: renderPlaceholder,\n      decorations: [],\n      isLast: false,\n      parent: element,\n      text: _text\n    }));\n    NODE_TO_INDEX.set(_text, 0);\n    NODE_TO_PARENT.set(_text, element);\n  } // Update element-related weak maps with the DOM element ref.\n\n\n  useIsomorphicLayoutEffect(function () {\n    if (ref.current) {\n      KEY_TO_ELEMENT.set(key, ref.current);\n      NODE_TO_ELEMENT.set(element, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, element);\n    } else {\n      KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(element);\n    }\n  });\n  return /*#__PURE__*/react_default.a.createElement(SelectedContext.Provider, {\n    value: !!selection\n  }, renderElement({\n    attributes: attributes,\n    children: children,\n    element: element\n  }));\n};\n\nvar MemoizedElement = /*#__PURE__*/react_default.a.memo(index_es_Element, function (prev, next) {\n  return prev.element === next.element && prev.renderElement === next.renderElement && prev.renderLeaf === next.renderLeaf && index_es_isDecoratorRangeListEqual(prev.decorations, next.decorations) && (prev.selection === next.selection || !!prev.selection && !!next.selection && index_es[\"f\" /* Range */].equals(prev.selection, next.selection));\n});\n/**\r\n * The default element renderer.\r\n */\n\nvar index_es_DefaultElement = function DefaultElement(props) {\n  var attributes = props.attributes,\n      children = props.children,\n      element = props.element;\n  var editor = index_es_useSlateStatic();\n  var Tag = editor.isInline(element) ? 'span' : 'div';\n  return /*#__PURE__*/react_default.a.createElement(Tag, Object.assign({}, attributes, {\n    style: {\n      position: 'relative'\n    }\n  }), children);\n};\n/**\r\n * A React context for sharing the editor object.\r\n */\n\n\nvar EditorContext = /*#__PURE__*/Object(react[\"createContext\"])(null);\n/**\r\n * Get the current editor object from the React context.\r\n */\n\nvar index_es_useSlateStatic = function useSlateStatic() {\n  var editor = Object(react[\"useContext\"])(EditorContext);\n\n  if (!editor) {\n    throw new Error(\"The `useSlateStatic` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return editor;\n};\n/**\r\n * A React context for sharing the `decorate` prop of the editable.\r\n */\n\n\nvar DecorateContext = /*#__PURE__*/Object(react[\"createContext\"])(function () {\n  return [];\n});\n/**\r\n * Get the current `decorate` prop of the editable.\r\n */\n\nvar index_es_useDecorate = function useDecorate() {\n  return Object(react[\"useContext\"])(DecorateContext);\n};\n/**\r\n * Children.\r\n */\n\n\nvar index_es_useChildren = function useChildren(props) {\n  var decorations = props.decorations,\n      node = props.node,\n      renderElement = props.renderElement,\n      renderPlaceholder = props.renderPlaceholder,\n      renderLeaf = props.renderLeaf,\n      selection = props.selection;\n  var decorate = index_es_useDecorate();\n  var editor = index_es_useSlateStatic();\n  var path = ReactEditor.findPath(editor, node);\n  var children = [];\n  var isLeafBlock = index_es[\"b\" /* Element */].isElement(node) && !editor.isInline(node) && index_es[\"a\" /* Editor */].hasInlines(editor, node);\n\n  for (var i = 0; i < node.children.length; i++) {\n    var p = path.concat(i);\n    var n = node.children[i];\n    var key = ReactEditor.findKey(editor, n);\n    var range = index_es[\"a\" /* Editor */].range(editor, p);\n    var sel = selection && index_es[\"f\" /* Range */].intersection(range, selection);\n    var ds = decorate([n, p]);\n\n    var _iterator = Object(createForOfIteratorHelper[\"a\" /* default */])(decorations),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var dec = _step.value;\n        var d = index_es[\"f\" /* Range */].intersection(dec, range);\n\n        if (d) {\n          ds.push(d);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    if (index_es[\"b\" /* Element */].isElement(n)) {\n      children.push( /*#__PURE__*/react_default.a.createElement(MemoizedElement, {\n        decorations: ds,\n        element: n,\n        key: key.id,\n        renderElement: renderElement,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        selection: sel\n      }));\n    } else {\n      children.push( /*#__PURE__*/react_default.a.createElement(MemoizedText, {\n        decorations: ds,\n        key: key.id,\n        isLast: isLeafBlock && i === node.children.length - 1,\n        parent: node,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        text: n\n      }));\n    }\n\n    NODE_TO_INDEX.set(n, i);\n    NODE_TO_PARENT.set(n, node);\n  }\n\n  return children;\n};\n/**\r\n * Hotkey mappings for each platform.\r\n */\n\n\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  splitBlock: 'shift?+enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z']\n};\n/**\r\n * Create a platform-aware hotkey checker.\r\n */\n\nvar index_es_create = function create(key) {\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && Object(lib[\"isKeyHotkey\"])(generic);\n  var isApple = apple && Object(lib[\"isKeyHotkey\"])(apple);\n  var isWindows = windows && Object(lib[\"isKeyHotkey\"])(windows);\n  return function (event) {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (!IS_APPLE && isWindows && isWindows(event)) return true;\n    return false;\n  };\n};\n/**\r\n * Hotkeys.\r\n */\n\n\nvar Hotkeys = {\n  isBold: index_es_create('bold'),\n  isCompose: index_es_create('compose'),\n  isMoveBackward: index_es_create('moveBackward'),\n  isMoveForward: index_es_create('moveForward'),\n  isDeleteBackward: index_es_create('deleteBackward'),\n  isDeleteForward: index_es_create('deleteForward'),\n  isDeleteLineBackward: index_es_create('deleteLineBackward'),\n  isDeleteLineForward: index_es_create('deleteLineForward'),\n  isDeleteWordBackward: index_es_create('deleteWordBackward'),\n  isDeleteWordForward: index_es_create('deleteWordForward'),\n  isExtendBackward: index_es_create('extendBackward'),\n  isExtendForward: index_es_create('extendForward'),\n  isExtendLineBackward: index_es_create('extendLineBackward'),\n  isExtendLineForward: index_es_create('extendLineForward'),\n  isItalic: index_es_create('italic'),\n  isMoveLineBackward: index_es_create('moveLineBackward'),\n  isMoveLineForward: index_es_create('moveLineForward'),\n  isMoveWordBackward: index_es_create('moveWordBackward'),\n  isMoveWordForward: index_es_create('moveWordForward'),\n  isRedo: index_es_create('redo'),\n  isSplitBlock: index_es_create('splitBlock'),\n  isTransposeCharacter: index_es_create('transposeCharacter'),\n  isUndo: index_es_create('undo')\n};\n/**\r\n * A React context for sharing the `readOnly` state of the editor.\r\n */\n\nvar ReadOnlyContext = /*#__PURE__*/Object(react[\"createContext\"])(false);\n/**\r\n * Get the current `readOnly` state of the editor.\r\n */\n\nvar index_es_useReadOnly = function useReadOnly() {\n  return Object(react[\"useContext\"])(ReadOnlyContext);\n};\n/**\r\n * A React context for sharing the editor object, in a way that re-renders the\r\n * context whenever changes occur.\r\n */\n\n\nvar SlateContext = /*#__PURE__*/Object(react[\"createContext\"])(null);\n/**\r\n * Get the current editor object from the React context.\r\n */\n\nvar index_es_useSlate = function useSlate() {\n  var context = Object(react[\"useContext\"])(SlateContext);\n\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <SlateProvider> component's context.\");\n  }\n\n  var _context = Object(slicedToArray[\"a\" /* default */])(context, 1),\n      editor = _context[0];\n\n  return editor;\n};\n/**\r\n * Types.\r\n */\n\n/**\r\n * Returns the host window of a DOM node\r\n */\n\n\nvar getDefaultView = function getDefaultView(value) {\n  return value && value.ownerDocument && value.ownerDocument.defaultView || null;\n};\n/**\r\n * Check if a DOM node is a comment node.\r\n */\n\n\nvar isDOMComment = function isDOMComment(value) {\n  return isDOMNode(value) && value.nodeType === 8;\n};\n/**\r\n * Check if a DOM node is an element node.\r\n */\n\n\nvar isDOMElement = function isDOMElement(value) {\n  return isDOMNode(value) && value.nodeType === 1;\n};\n/**\r\n * Check if a value is a DOM node.\r\n */\n\n\nvar isDOMNode = function isDOMNode(value) {\n  var window = getDefaultView(value);\n  return !!window && value instanceof window.Node;\n};\n/**\r\n * Check if a value is a DOM selection.\r\n */\n\n\nvar isDOMSelection = function isDOMSelection(value) {\n  var window = value && value.anchorNode && getDefaultView(value.anchorNode);\n  return !!window && value instanceof window.Selection;\n};\n/**\r\n * Check if a DOM node is an element node.\r\n */\n\n\nvar isDOMText = function isDOMText(value) {\n  return isDOMNode(value) && value.nodeType === 3;\n};\n/**\r\n * Checks whether a paste event is a plaintext-only event.\r\n */\n\n\nvar isPlainTextOnlyPaste = function isPlainTextOnlyPaste(event) {\n  return event.clipboardData && event.clipboardData.getData('text/plain') !== '' && event.clipboardData.types.length === 1;\n};\n/**\r\n * Normalize a DOM point so that it always refers to a text node.\r\n */\n\n\nvar index_es_normalizeDOMPoint = function normalizeDOMPoint(domPoint) {\n  var _domPoint = Object(slicedToArray[\"a\" /* default */])(domPoint, 2),\n      node = _domPoint[0],\n      offset = _domPoint[1]; // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n\n\n  if (isDOMElement(node) && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var index = isLast ? offset - 1 : offset;\n\n    var _getEditableChildAndI = getEditableChildAndIndex(node, index, isLast ? 'backward' : 'forward');\n\n    var _getEditableChildAndI2 = Object(slicedToArray[\"a\" /* default */])(_getEditableChildAndI, 2);\n\n    node = _getEditableChildAndI2[0];\n    index = _getEditableChildAndI2[1];\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset; // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n\n    while (isDOMElement(node) && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = index_es_getEditableChild(node, i, isLast ? 'backward' : 'forward');\n    } // Determine the new offset inside the text node.\n\n\n    offset = isLast && node.textContent != null ? node.textContent.length : 0;\n  } // Return the node and offset.\n\n\n  return [node, offset];\n};\n/**\r\n * Determines wether the active element is nested within a shadowRoot\r\n */\n\n\nvar hasShadowRoot = function hasShadowRoot() {\n  return !!(window.document.activeElement && window.document.activeElement.shadowRoot);\n};\n/**\r\n * Get the nearest editable child and index at `index` in a `parent`, preferring\r\n * `direction`.\r\n */\n\n\nvar getEditableChildAndIndex = function getEditableChildAndIndex(parent, index, direction) {\n  var childNodes = parent.childNodes;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false; // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n\n  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) {\n      break;\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n\n    child = childNodes[i];\n    index = i;\n    i += direction === 'forward' ? 1 : -1;\n  }\n\n  return [child, index];\n};\n/**\r\n * Get the nearest editable child at `index` in a `parent`, preferring\r\n * `direction`.\r\n */\n\n\nvar index_es_getEditableChild = function getEditableChild(parent, index, direction) {\n  var _getEditableChildAndI3 = getEditableChildAndIndex(parent, index, direction),\n      _getEditableChildAndI4 = Object(slicedToArray[\"a\" /* default */])(_getEditableChildAndI3, 1),\n      child = _getEditableChildAndI4[0];\n\n  return child;\n};\n/**\r\n * Get a plaintext representation of the content of a node, accounting for block\r\n * elements which get a newline appended.\r\n *\r\n * The domNode must be attached to the DOM.\r\n */\n\n\nvar getPlainText = function getPlainText(domNode) {\n  var text = '';\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue;\n  }\n\n  if (isDOMElement(domNode)) {\n    for (var _i = 0, _Array$from = Array.from(domNode.childNodes); _i < _Array$from.length; _i++) {\n      var childNode = _Array$from[_i];\n      text += getPlainText(childNode);\n    }\n\n    var display = getComputedStyle(domNode).getPropertyValue('display');\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n';\n    }\n  }\n\n  return text;\n};\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\r\n * Editable.\r\n */\n\n\nvar index_es_Editable = function Editable(props) {\n  var autoFocus = props.autoFocus,\n      _props$decorate = props.decorate,\n      decorate = _props$decorate === void 0 ? defaultDecorate : _props$decorate,\n      propsOnDOMBeforeInput = props.onDOMBeforeInput,\n      placeholder = props.placeholder,\n      _props$readOnly = props.readOnly,\n      readOnly = _props$readOnly === void 0 ? false : _props$readOnly,\n      renderElement = props.renderElement,\n      renderLeaf = props.renderLeaf,\n      _props$renderPlacehol = props.renderPlaceholder,\n      renderPlaceholder = _props$renderPlacehol === void 0 ? function (props) {\n    return /*#__PURE__*/react_default.a.createElement(index_es_DefaultPlaceholder, Object.assign({}, props));\n  } : _props$renderPlacehol,\n      _props$style = props.style,\n      style = _props$style === void 0 ? {} : _props$style,\n      _props$as = props.as,\n      Component = _props$as === void 0 ? 'div' : _props$as,\n      attributes = _objectWithoutProperties(props, [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderPlaceholder\", \"style\", \"as\"]);\n\n  var editor = index_es_useSlate();\n  var ref = Object(react[\"useRef\"])(null); // Update internal state on each render.\n\n  IS_READ_ONLY.set(editor, readOnly); // Keep track of some state for the event handler logic.\n\n  var state = Object(react[\"useMemo\"])(function () {\n    return {\n      isComposing: false,\n      isDraggingInternally: false,\n      isUpdatingSelection: false,\n      latestElement: null\n    };\n  }, []); // Whenever the editor updates...\n\n  useIsomorphicLayoutEffect(function () {\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n    } // Make sure the DOM selection state is in sync.\n\n\n    var selection = editor.selection;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n\n    if (state.isComposing || !domSelection || !ReactEditor.isFocused(editor)) {\n      return;\n    }\n\n    var hasDomSelection = domSelection.type !== 'None'; // If the DOM selection is properly unset, we're done.\n\n    if (!selection && !hasDomSelection) {\n      return;\n    } // verify that the dom selection is in the editor\n\n\n    var editorElement = EDITOR_TO_ELEMENT.get(editor);\n    var hasDomSelectionInEditor = false;\n\n    if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {\n      hasDomSelectionInEditor = true;\n    } // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n\n\n    if (hasDomSelection && hasDomSelectionInEditor && selection) {\n      var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: true\n      });\n\n      if (slateRange && index_es[\"f\" /* Range */].equals(slateRange, selection)) {\n        return;\n      }\n    } // when <Editable/> is being controlled through external value\n    // then its children might just change - DOM responds to it on its own\n    // but Slate's value is not being updated through any operation\n    // and thus it doesn't transform selection on its own\n\n\n    if (selection && !ReactEditor.hasRange(editor, selection)) {\n      editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false\n      });\n      return;\n    } // Otherwise the DOM selection is out of sync, so update it.\n\n\n    var el = ReactEditor.toDOMNode(editor, editor);\n    state.isUpdatingSelection = true;\n    var newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n\n    if (newDomRange) {\n      if (index_es[\"f\" /* Range */].isBackward(selection)) {\n        domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n      } else {\n        domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n      }\n\n      var leafEl = newDomRange.startContainer.parentElement;\n      leafEl.getBoundingClientRect = newDomRange.getBoundingClientRect.bind(newDomRange);\n      es(leafEl, {\n        scrollMode: 'if-needed',\n        boundary: el\n      }); // @ts-ignore\n\n      delete leafEl.getBoundingClientRect;\n    } else {\n      domSelection.removeAllRanges();\n    }\n\n    setTimeout(function () {\n      // COMPAT: In Firefox, it's not enough to create a range, you also need\n      // to focus the contenteditable element too. (2016/11/16)\n      if (newDomRange && IS_FIREFOX) {\n        el.focus();\n      }\n\n      state.isUpdatingSelection = false;\n    });\n  }); // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n\n  Object(react[\"useEffect\"])(function () {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]); // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n\n  var onDOMBeforeInput = Object(react[\"useCallback\"])(function (event) {\n    if (!readOnly && hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      var selection = editor.selection;\n      var type = event.inputType;\n      var data = event.dataTransfer || event.data || undefined; // These two types occur while a user is composing text and can't be\n      // cancelled. Let them through and wait for the composition to end.\n\n      if (type === 'insertCompositionText' || type === 'deleteCompositionText') {\n        return;\n      }\n\n      event.preventDefault(); // COMPAT: For the deleting forward/backward input types we don't want\n      // to change the selection because it is the range that will be deleted,\n      // and those commands determine that for themselves.\n\n      if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n        var _event$getTargetRange = event.getTargetRanges(),\n            _event$getTargetRange2 = Object(slicedToArray[\"a\" /* default */])(_event$getTargetRange, 1),\n            targetRange = _event$getTargetRange2[0];\n\n        if (targetRange) {\n          var range = ReactEditor.toSlateRange(editor, targetRange, {\n            exactMatch: false\n          });\n\n          if (!selection || !index_es[\"f\" /* Range */].equals(selection, range)) {\n            index_es[\"h\" /* Transforms */].select(editor, range);\n          }\n        }\n      } // COMPAT: If the selection is expanded, even if the command seems like\n      // a delete forward/backward command it should delete the selection.\n\n\n      if (selection && index_es[\"f\" /* Range */].isExpanded(selection) && type.startsWith('delete')) {\n        var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n        index_es[\"a\" /* Editor */].deleteFragment(editor, {\n          direction: direction\n        });\n        return;\n      }\n\n      switch (type) {\n        case 'deleteByComposition':\n        case 'deleteByCut':\n        case 'deleteByDrag':\n          {\n            index_es[\"a\" /* Editor */].deleteFragment(editor);\n            break;\n          }\n\n        case 'deleteContent':\n        case 'deleteContentForward':\n          {\n            index_es[\"a\" /* Editor */].deleteForward(editor);\n            break;\n          }\n\n        case 'deleteContentBackward':\n          {\n            index_es[\"a\" /* Editor */].deleteBackward(editor);\n            break;\n          }\n\n        case 'deleteEntireSoftLine':\n          {\n            index_es[\"a\" /* Editor */].deleteBackward(editor, {\n              unit: 'line'\n            });\n            index_es[\"a\" /* Editor */].deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteHardLineBackward':\n          {\n            index_es[\"a\" /* Editor */].deleteBackward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n\n        case 'deleteSoftLineBackward':\n          {\n            index_es[\"a\" /* Editor */].deleteBackward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteHardLineForward':\n          {\n            index_es[\"a\" /* Editor */].deleteForward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n\n        case 'deleteSoftLineForward':\n          {\n            index_es[\"a\" /* Editor */].deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteWordBackward':\n          {\n            index_es[\"a\" /* Editor */].deleteBackward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n\n        case 'deleteWordForward':\n          {\n            index_es[\"a\" /* Editor */].deleteForward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n\n        case 'insertLineBreak':\n        case 'insertParagraph':\n          {\n            index_es[\"a\" /* Editor */].insertBreak(editor);\n            break;\n          }\n\n        case 'insertFromComposition':\n        case 'insertFromDrop':\n        case 'insertFromPaste':\n        case 'insertFromYank':\n        case 'insertReplacementText':\n        case 'insertText':\n          {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              state.isComposing = false;\n            }\n\n            var window = ReactEditor.getWindow(editor);\n\n            if (data instanceof window.DataTransfer) {\n              ReactEditor.insertData(editor, data);\n            } else if (typeof data === 'string') {\n              index_es[\"a\" /* Editor */].insertText(editor, data);\n            }\n\n            break;\n          }\n      }\n    }\n  }, [readOnly, propsOnDOMBeforeInput]); // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  // https://github.com/facebook/react/issues/11211\n\n  useIsomorphicLayoutEffect(function () {\n    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n      // @ts-ignore The `beforeinput` event isn't recognized.\n      ref.current.addEventListener('beforeinput', onDOMBeforeInput);\n    }\n\n    return function () {\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput);\n      }\n    };\n  }, [onDOMBeforeInput]); // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n\n  var onDOMSelectionChange = Object(react[\"useCallback\"])(throttle_default()(function () {\n    if (!readOnly && !state.isComposing && !state.isUpdatingSelection && !state.isDraggingInternally) {\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var activeElement = root.activeElement;\n      var el = ReactEditor.toDOMNode(editor, editor);\n      var domSelection = root.getSelection();\n\n      if (activeElement === el) {\n        state.latestElement = activeElement;\n        IS_FOCUSED.set(editor, true);\n      } else {\n        IS_FOCUSED.delete(editor);\n      }\n\n      if (!domSelection) {\n        return index_es[\"h\" /* Transforms */].deselect(editor);\n      }\n\n      var anchorNode = domSelection.anchorNode,\n          focusNode = domSelection.focusNode;\n      var anchorNodeSelectable = hasEditableTarget(editor, anchorNode) || index_es_isTargetInsideVoid(editor, anchorNode);\n      var focusNodeSelectable = hasEditableTarget(editor, focusNode) || index_es_isTargetInsideVoid(editor, focusNode);\n\n      if (anchorNodeSelectable && focusNodeSelectable) {\n        var range = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false\n        });\n        index_es[\"h\" /* Transforms */].select(editor, range);\n      } else {\n        index_es[\"h\" /* Transforms */].deselect(editor);\n      }\n    }\n  }, 100), [readOnly]); // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n\n  useIsomorphicLayoutEffect(function () {\n    var window = ReactEditor.getWindow(editor);\n    window.document.addEventListener('selectionchange', onDOMSelectionChange);\n    return function () {\n      window.document.removeEventListener('selectionchange', onDOMSelectionChange);\n    };\n  }, [onDOMSelectionChange]);\n  var decorations = decorate([editor, []]);\n\n  if (placeholder && editor.children.length === 1 && Array.from(index_es[\"c\" /* Node */].texts(editor)).length === 1 && index_es[\"c\" /* Node */].string(editor) === '') {\n    var _decorations$push;\n\n    var start = index_es[\"a\" /* Editor */].start(editor, []);\n    decorations.push((_decorations$push = {}, Object(defineProperty[\"a\" /* default */])(_decorations$push, PLACEHOLDER_SYMBOL, true), Object(defineProperty[\"a\" /* default */])(_decorations$push, \"placeholder\", placeholder), Object(defineProperty[\"a\" /* default */])(_decorations$push, \"anchor\", start), Object(defineProperty[\"a\" /* default */])(_decorations$push, \"focus\", start), _decorations$push));\n  }\n\n  return /*#__PURE__*/react_default.a.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/react_default.a.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/react_default.a.createElement(Component // COMPAT: The Grammarly Chrome extension works by changing the DOM\n  // out from under `contenteditable` elements, which leads to weird\n  // behaviors so we have to disable it like editor. (2017/04/24)\n  , Object.assign({\n    \"data-gramm\": false,\n    role: readOnly ? undefined : 'textbox'\n  }, attributes, {\n    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n    // have to use hacks to make these replacement-based features work.\n    spellCheck: !HAS_BEFORE_INPUT_SUPPORT ? false : attributes.spellCheck,\n    autoCorrect: !HAS_BEFORE_INPUT_SUPPORT ? 'false' : attributes.autoCorrect,\n    autoCapitalize: !HAS_BEFORE_INPUT_SUPPORT ? 'false' : attributes.autoCapitalize,\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    contentEditable: readOnly ? undefined : true,\n    suppressContentEditableWarning: true,\n    ref: ref,\n    style: _objectSpread({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Prevent the default outline styles.\n      outline: 'none',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, style),\n    onBeforeInput: Object(react[\"useCallback\"])(function (event) {\n      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n      // fall back to React's leaky polyfill instead just for it. It\n      // only works for the `insertText` input type.\n      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && hasEditableTarget(editor, event.target)) {\n        event.preventDefault();\n\n        if (!state.isComposing) {\n          var text = event.data;\n          index_es[\"a\" /* Editor */].insertText(editor, text);\n        }\n      }\n    }, [readOnly]),\n    onBlur: Object(react[\"useCallback\"])(function (event) {\n      if (readOnly || state.isUpdatingSelection || !hasEditableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      } // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n\n\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n\n      var relatedTarget = event.relatedTarget;\n      var el = ReactEditor.toDOMNode(editor, editor); // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n\n      if (relatedTarget === el) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n\n\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n\n\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n\n        if (index_es[\"b\" /* Element */].isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      } // COMPAT: Safari doesn't always remove the selection even if the content-\n      // editable element no longer has focus. Refer to:\n      // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n\n\n      if (IS_SAFARI) {\n        var domSelection = root.getSelection();\n        domSelection === null || domSelection === void 0 ? void 0 : domSelection.removeAllRanges();\n      }\n\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, attributes.onBlur]),\n    onClick: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n\n        var _start = index_es[\"a\" /* Editor */].start(editor, path);\n\n        var end = index_es[\"a\" /* Editor */].end(editor, path);\n        var startVoid = index_es[\"a\" /* Editor */].void(editor, {\n          at: _start\n        });\n        var endVoid = index_es[\"a\" /* Editor */].void(editor, {\n          at: end\n        });\n\n        if (startVoid && endVoid && index_es[\"e\" /* Path */].equals(startVoid[1], endVoid[1])) {\n          var range = index_es[\"a\" /* Editor */].range(editor, _start);\n          index_es[\"h\" /* Transforms */].select(editor, range);\n        }\n      }\n    }, [readOnly, attributes.onClick]),\n    onCompositionEnd: Object(react[\"useCallback\"])(function (event) {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionEnd)) {\n        state.isComposing = false; // COMPAT: In Chrome, `beforeinput` events for compositions\n        // aren't correct and never fire the \"insertFromComposition\"\n        // type that we need. So instead, insert whenever a composition\n        // ends since it will already have been committed to the DOM.\n\n        if (!IS_SAFARI && !IS_FIREFOX_LEGACY && event.data) {\n          index_es[\"a\" /* Editor */].insertText(editor, event.data);\n        }\n      }\n    }, [attributes.onCompositionEnd]),\n    onCompositionUpdate: Object(react[\"useCallback\"])(function (event) {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {\n        state.isComposing = true;\n      }\n    }, [attributes.onCompositionUpdate]),\n    onCompositionStart: Object(react[\"useCallback\"])(function (event) {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionStart)) {\n        var selection = editor.selection;\n\n        if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n          index_es[\"a\" /* Editor */].deleteFragment(editor);\n        }\n      }\n    }, [attributes.onCompositionStart]),\n    onCopy: Object(react[\"useCallback\"])(function (event) {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n      }\n    }, [attributes.onCopy]),\n    onCut: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n        var selection = editor.selection;\n\n        if (selection) {\n          if (index_es[\"f\" /* Range */].isExpanded(selection)) {\n            index_es[\"a\" /* Editor */].deleteFragment(editor);\n          } else {\n            var node = index_es[\"c\" /* Node */].parent(editor, selection.anchor.path);\n\n            if (index_es[\"a\" /* Editor */].isVoid(editor, node)) {\n              index_es[\"h\" /* Transforms */].delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onCut]),\n    onDragOver: Object(react[\"useCallback\"])(function (event) {\n      if (hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {\n        // Only when the target is void, call `preventDefault` to signal\n        // that drops are allowed. Editable content is droppable by\n        // default, and calling `preventDefault` hides the cursor.\n        var node = ReactEditor.toSlateNode(editor, event.target);\n\n        if (index_es[\"a\" /* Editor */].isVoid(editor, node)) {\n          event.preventDefault();\n        }\n      }\n    }, [attributes.onDragOver]),\n    onDragStart: Object(react[\"useCallback\"])(function (event) {\n      if (hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        var voidMatch = index_es[\"a\" /* Editor */].isVoid(editor, node) || index_es[\"a\" /* Editor */].void(editor, {\n          at: path,\n          voids: true\n        }); // If starting a drag on a void node, make sure it is selected\n        // so that it shows up in the selection's fragment.\n\n        if (voidMatch) {\n          var range = index_es[\"a\" /* Editor */].range(editor, path);\n          index_es[\"h\" /* Transforms */].select(editor, range);\n        }\n\n        state.isDraggingInternally = true;\n        ReactEditor.setFragmentData(editor, event.dataTransfer);\n      }\n    }, [attributes.onDragStart]),\n    onDrop: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {\n        event.preventDefault(); // Keep a reference to the dragged range before updating selection\n\n        var draggedRange = editor.selection; // Find the range where the drop happened\n\n        var range = ReactEditor.findEventRange(editor, event);\n        var data = event.dataTransfer;\n        index_es[\"h\" /* Transforms */].select(editor, range);\n\n        if (state.isDraggingInternally) {\n          if (draggedRange) {\n            index_es[\"h\" /* Transforms */].delete(editor, {\n              at: draggedRange\n            });\n          }\n\n          state.isDraggingInternally = false;\n        }\n\n        ReactEditor.insertData(editor, data); // When dragging from another source into the editor, it's possible\n        // that the current editor does not have focus.\n\n        if (!ReactEditor.isFocused(editor)) {\n          ReactEditor.focus(editor);\n        }\n      }\n    }, [readOnly, attributes.onDrop]),\n    onDragEnd: Object(react[\"useCallback\"])(function (event) {\n      // When dropping on a different droppable element than the current editor,\n      // `onDrop` is not called. So we need to clean up in `onDragEnd` instead.\n      // Note: `onDragEnd` is only called when `onDrop` is not called\n      if (!readOnly && state.isDraggingInternally && hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragEnd)) {\n        state.isDraggingInternally = false;\n      }\n    }, [readOnly, attributes.onDragEnd]),\n    onFocus: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && !state.isUpdatingSelection && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement; // COMPAT: If the editor has nested editable elements, the focus\n        // can go to them. In Firefox, this must be prevented because it\n        // results in issues with keyboard navigation. (2017/03/30)\n\n        if (IS_FIREFOX && event.target !== el) {\n          el.focus();\n          return;\n        }\n\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, attributes.onFocus]),\n    onKeyDown: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onKeyDown)) {\n        var nativeEvent = event.nativeEvent;\n        var selection = editor.selection;\n        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];\n        var isRTL = direction_default()(index_es[\"c\" /* Node */].string(element)) === 'rtl'; // COMPAT: Since we prevent the default behavior on\n        // `beforeinput` events, the browser doesn't think there's ever\n        // any history stack to undo or redo, so we have to manage these\n        // hotkeys ourselves. (2019/11/06)\n\n        if (Hotkeys.isRedo(nativeEvent)) {\n          event.preventDefault();\n          var maybeHistoryEditor = editor;\n\n          if (typeof maybeHistoryEditor.redo === 'function') {\n            maybeHistoryEditor.redo();\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isUndo(nativeEvent)) {\n          event.preventDefault();\n          var _maybeHistoryEditor = editor;\n\n          if (typeof _maybeHistoryEditor.undo === 'function') {\n            _maybeHistoryEditor.undo();\n          }\n\n          return;\n        } // COMPAT: Certain browsers don't handle the selection updates\n        // properly. In Chrome, the selection isn't properly extended.\n        // And in Firefox, the selection isn't properly collapsed.\n        // (2017/10/17)\n\n\n        if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n          event.preventDefault();\n          index_es[\"h\" /* Transforms */].move(editor, {\n            unit: 'line',\n            reverse: true\n          });\n          return;\n        }\n\n        if (Hotkeys.isMoveLineForward(nativeEvent)) {\n          event.preventDefault();\n          index_es[\"h\" /* Transforms */].move(editor, {\n            unit: 'line'\n          });\n          return;\n        }\n\n        if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n          event.preventDefault();\n          index_es[\"h\" /* Transforms */].move(editor, {\n            unit: 'line',\n            edge: 'focus',\n            reverse: true\n          });\n          return;\n        }\n\n        if (Hotkeys.isExtendLineForward(nativeEvent)) {\n          event.preventDefault();\n          index_es[\"h\" /* Transforms */].move(editor, {\n            unit: 'line',\n            edge: 'focus'\n          });\n          return;\n        } // COMPAT: If a void node is selected, or a zero-width text node\n        // adjacent to an inline is selected, we need to handle these\n        // hotkeys manually because browsers won't be able to skip over\n        // the void node with the zero-width space not being an empty\n        // string.\n\n\n        if (Hotkeys.isMoveBackward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && index_es[\"f\" /* Range */].isCollapsed(selection)) {\n            index_es[\"h\" /* Transforms */].move(editor, {\n              reverse: !isRTL\n            });\n          } else {\n            index_es[\"h\" /* Transforms */].collapse(editor, {\n              edge: 'start'\n            });\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isMoveForward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && index_es[\"f\" /* Range */].isCollapsed(selection)) {\n            index_es[\"h\" /* Transforms */].move(editor, {\n              reverse: isRTL\n            });\n          } else {\n            index_es[\"h\" /* Transforms */].collapse(editor, {\n              edge: 'end'\n            });\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n            index_es[\"h\" /* Transforms */].collapse(editor, {\n              edge: 'focus'\n            });\n          }\n\n          index_es[\"h\" /* Transforms */].move(editor, {\n            unit: 'word',\n            reverse: !isRTL\n          });\n          return;\n        }\n\n        if (Hotkeys.isMoveWordForward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n            index_es[\"h\" /* Transforms */].collapse(editor, {\n              edge: 'focus'\n            });\n          }\n\n          index_es[\"h\" /* Transforms */].move(editor, {\n            unit: 'word',\n            reverse: isRTL\n          });\n          return;\n        } // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to guessing at the input intention for hotkeys.\n        // COMPAT: In iOS, some of these hotkeys are handled in the\n\n\n        if (!HAS_BEFORE_INPUT_SUPPORT) {\n          // We don't have a core behavior for these, but they change the\n          // DOM if we don't prevent them, so we have to.\n          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {\n            event.preventDefault();\n            return;\n          }\n\n          if (Hotkeys.isSplitBlock(nativeEvent)) {\n            event.preventDefault();\n            index_es[\"a\" /* Editor */].insertBreak(editor);\n            return;\n          }\n\n          if (Hotkeys.isDeleteBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n              index_es[\"a\" /* Editor */].deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              index_es[\"a\" /* Editor */].deleteBackward(editor);\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n              index_es[\"a\" /* Editor */].deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              index_es[\"a\" /* Editor */].deleteForward(editor);\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n              index_es[\"a\" /* Editor */].deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              index_es[\"a\" /* Editor */].deleteBackward(editor, {\n                unit: 'line'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n              index_es[\"a\" /* Editor */].deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              index_es[\"a\" /* Editor */].deleteForward(editor, {\n                unit: 'line'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n              index_es[\"a\" /* Editor */].deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              index_es[\"a\" /* Editor */].deleteBackward(editor, {\n                unit: 'word'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && index_es[\"f\" /* Range */].isExpanded(selection)) {\n              index_es[\"a\" /* Editor */].deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              index_es[\"a\" /* Editor */].deleteForward(editor, {\n                unit: 'word'\n              });\n            }\n\n            return;\n          }\n        } else {\n          if (IS_CHROME || IS_SAFARI) {\n            // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n            // an event when deleting backwards in a selected void inline node\n            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && index_es[\"f\" /* Range */].isCollapsed(selection)) {\n              var currentNode = index_es[\"c\" /* Node */].parent(editor, selection.anchor.path);\n\n              if (index_es[\"b\" /* Element */].isElement(currentNode) && index_es[\"a\" /* Editor */].isVoid(editor, currentNode) && index_es[\"a\" /* Editor */].isInline(editor, currentNode)) {\n                event.preventDefault();\n                index_es[\"h\" /* Transforms */].delete(editor, {\n                  unit: 'block'\n                });\n                return;\n              }\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onKeyDown]),\n    onPaste: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to React's `onPaste` here instead.\n        // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n        // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent)) {\n          event.preventDefault();\n          ReactEditor.insertData(editor, event.clipboardData);\n        }\n      }\n    }, [readOnly, attributes.onPaste])\n  }), index_es_useChildren({\n    decorations: decorations,\n    node: editor,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    selection: editor.selection\n  }))));\n};\n/**\r\n * The default placeholder element\r\n */\n\n\nvar index_es_DefaultPlaceholder = function DefaultPlaceholder(_ref) {\n  var attributes = _ref.attributes,\n      children = _ref.children;\n  return /*#__PURE__*/react_default.a.createElement(\"span\", Object.assign({}, attributes), children);\n};\n/**\r\n * A default memoized decorate function.\r\n */\n\n\nvar defaultDecorate = function defaultDecorate() {\n  return [];\n};\n/**\r\n * Check if the target is in the editor.\r\n */\n\n\nvar hasTarget = function hasTarget(editor, target) {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target);\n};\n/**\r\n * Check if the target is editable and in the editor.\r\n */\n\n\nvar hasEditableTarget = function hasEditableTarget(editor, target) {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {\n    editable: true\n  });\n};\n/**\r\n * Check if the target is inside void and in the editor.\r\n */\n\n\nvar index_es_isTargetInsideVoid = function isTargetInsideVoid(editor, target) {\n  var slateNode = hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);\n  return index_es[\"a\" /* Editor */].isVoid(editor, slateNode);\n};\n/**\r\n * Check if an event is overrided by a handler.\r\n */\n\n\nvar isEventHandled = function isEventHandled(event, handler) {\n  if (!handler) {\n    return false;\n  } // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n\n\n  var shouldTreatEventAsHandled = handler(event);\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n\n  return event.isDefaultPrevented() || event.isPropagationStopped();\n};\n/**\r\n * Check if a DOM event is overrided by a handler.\r\n */\n\n\nvar isDOMEventHandled = function isDOMEventHandled(event, handler) {\n  if (!handler) {\n    return false;\n  } // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n\n\n  var shouldTreatEventAsHandled = handler(event);\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n\n  return event.defaultPrevented;\n};\n/**\r\n * An auto-incrementing identifier for keys.\r\n */\n\n\nvar index_es_n = 0;\n/**\r\n * A class that keeps track of a key string. We use a full class here because we\r\n * want to be able to use them as keys in `WeakMap` objects.\r\n */\n\nvar index_es_Key = function Key() {\n  Object(classCallCheck[\"a\" /* default */])(this, Key);\n\n  this.id = \"\".concat(index_es_n++);\n};\n\nvar ReactEditor = {\n  /**\r\n   * Return the host window of the current editor.\r\n   */\n  getWindow: function getWindow(editor) {\n    var window = EDITOR_TO_WINDOW.get(editor);\n\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor');\n    }\n\n    return window;\n  },\n\n  /**\r\n   * Find a key for a Slate node.\r\n   */\n  findKey: function findKey(editor, node) {\n    var key = NODE_TO_KEY.get(node);\n\n    if (!key) {\n      key = new index_es_Key();\n      NODE_TO_KEY.set(node, key);\n    }\n\n    return key;\n  },\n\n  /**\r\n   * Find the path of Slate node.\r\n   */\n  findPath: function findPath(editor, node) {\n    var path = [];\n    var child = node;\n\n    while (true) {\n      var parent = NODE_TO_PARENT.get(child);\n\n      if (parent == null) {\n        if (index_es[\"a\" /* Editor */].isEditor(child)) {\n          return path;\n        } else {\n          break;\n        }\n      }\n\n      var i = NODE_TO_INDEX.get(child);\n\n      if (i == null) {\n        break;\n      }\n\n      path.unshift(i);\n      child = parent;\n    }\n\n    throw new Error(\"Unable to find the path for Slate node: \".concat(JSON.stringify(node)));\n  },\n\n  /**\r\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\r\n   */\n  findDocumentOrShadowRoot: function findDocumentOrShadowRoot(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode(); // The below exception will always be thrown for iframes because the document inside an iframe\n    // does not inherit it's prototype from the parent document, therefore we return early\n\n    if (el.ownerDocument !== document) return el.ownerDocument;\n    if (!(root instanceof Document || root instanceof ShadowRoot)) throw new Error(\"Unable to find DocumentOrShadowRoot for editor element: \".concat(el)); // COMPAT: Only Chrome implements the DocumentOrShadowRoot mixin for\n    // ShadowRoot; other browsers still implement it on the Document\n    // interface. (2020/08/08)\n    // https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot#Properties\n\n    if (root.getSelection === undefined && el.ownerDocument !== null) return el.ownerDocument;\n    return root;\n  },\n\n  /**\r\n   * Check if the editor is focused.\r\n   */\n  isFocused: function isFocused(editor) {\n    return !!IS_FOCUSED.get(editor);\n  },\n\n  /**\r\n   * Check if the editor is in read-only mode.\r\n   */\n  isReadOnly: function isReadOnly(editor) {\n    return !!IS_READ_ONLY.get(editor);\n  },\n\n  /**\r\n   * Blur the editor.\r\n   */\n  blur: function blur(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, false);\n\n    if (root.activeElement === el) {\n      el.blur();\n    }\n  },\n\n  /**\r\n   * Focus the editor.\r\n   */\n  focus: function focus(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, true);\n\n    if (root.activeElement !== el) {\n      el.focus({\n        preventScroll: true\n      });\n    }\n  },\n\n  /**\r\n   * Deselect the editor.\r\n   */\n  deselect: function deselect(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var selection = editor.selection;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges();\n    }\n\n    if (selection) {\n      index_es[\"h\" /* Transforms */].deselect(editor);\n    }\n  },\n\n  /**\r\n   * Check if a DOM node is within the editor.\r\n   */\n  hasDOMNode: function hasDOMNode(editor, target) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var _options$editable = options.editable,\n        editable = _options$editable === void 0 ? false : _options$editable;\n    var editorEl = ReactEditor.toDOMNode(editor, editor);\n    var targetEl; // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n\n    try {\n      targetEl = isDOMElement(target) ? target : target.parentElement;\n    } catch (err) {\n      if (!err.message.includes('Permission denied to access property \"nodeType\"')) {\n        throw err;\n      }\n    }\n\n    if (!targetEl) {\n      return false;\n    }\n\n    return targetEl.closest(\"[data-slate-editor]\") === editorEl && (!editable || targetEl.isContentEditable || !!targetEl.getAttribute('data-slate-zero-width'));\n  },\n\n  /**\r\n   * Insert data from a `DataTransfer` into the editor.\r\n   */\n  insertData: function insertData(editor, data) {\n    editor.insertData(data);\n  },\n\n  /**\r\n   * Sets data from the currently selected fragment on a `DataTransfer`.\r\n   */\n  setFragmentData: function setFragmentData(editor, data) {\n    editor.setFragmentData(data);\n  },\n\n  /**\r\n   * Find the native DOM element from a Slate node.\r\n   */\n  toDOMNode: function toDOMNode(editor, node) {\n    var domNode = index_es[\"a\" /* Editor */].isEditor(node) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node));\n\n    if (!domNode) {\n      throw new Error(\"Cannot resolve a DOM node from Slate node: \".concat(JSON.stringify(node)));\n    }\n\n    return domNode;\n  },\n\n  /**\r\n   * Find a native DOM selection point from a Slate point.\r\n   */\n  toDOMPoint: function toDOMPoint(editor, point) {\n    var _Editor$node = index_es[\"a\" /* Editor */].node(editor, point.path),\n        _Editor$node2 = Object(slicedToArray[\"a\" /* default */])(_Editor$node, 1),\n        node = _Editor$node2[0];\n\n    var el = ReactEditor.toDOMNode(editor, node);\n    var domPoint; // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n\n    if (index_es[\"a\" /* Editor */].void(editor, {\n      at: point\n    })) {\n      point = {\n        path: point.path,\n        offset: 0\n      };\n    } // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n\n\n    var selector = \"[data-slate-string], [data-slate-zero-width]\";\n    var texts = Array.from(el.querySelectorAll(selector));\n    var start = 0;\n\n    for (var _i2 = 0, _texts = texts; _i2 < _texts.length; _i2++) {\n      var text = _texts[_i2];\n      var domNode = text.childNodes[0];\n\n      if (domNode == null || domNode.textContent == null) {\n        continue;\n      }\n\n      var length = domNode.textContent.length;\n      var attr = text.getAttribute('data-slate-length');\n      var trueLength = attr == null ? length : parseInt(attr, 10);\n      var end = start + trueLength;\n\n      if (point.offset <= end) {\n        var offset = Math.min(length, Math.max(0, point.offset - start));\n        domPoint = [domNode, offset];\n        break;\n      }\n\n      start = end;\n    }\n\n    if (!domPoint) {\n      throw new Error(\"Cannot resolve a DOM point from Slate point: \".concat(JSON.stringify(point)));\n    }\n\n    return domPoint;\n  },\n\n  /**\r\n   * Find a native DOM range from a Slate `range`.\r\n   *\r\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\r\n   *\r\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\r\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\r\n   */\n  toDOMRange: function toDOMRange(editor, range) {\n    var anchor = range.anchor,\n        focus = range.focus;\n    var isBackward = index_es[\"f\" /* Range */].isBackward(range);\n    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);\n    var domFocus = index_es[\"f\" /* Range */].isCollapsed(range) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);\n    var window = ReactEditor.getWindow(editor);\n    var domRange = window.document.createRange();\n\n    var _ref8 = isBackward ? domFocus : domAnchor,\n        _ref9 = Object(slicedToArray[\"a\" /* default */])(_ref8, 2),\n        startNode = _ref9[0],\n        startOffset = _ref9[1];\n\n    var _ref10 = isBackward ? domAnchor : domFocus,\n        _ref11 = Object(slicedToArray[\"a\" /* default */])(_ref10, 2),\n        endNode = _ref11[0],\n        endOffset = _ref11[1]; // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n\n\n    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;\n    var isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width');\n    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;\n    var isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width');\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);\n    return domRange;\n  },\n\n  /**\r\n   * Find a Slate node from a native DOM `element`.\r\n   */\n  toSlateNode: function toSlateNode(editor, domNode) {\n    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(\"[data-slate-node]\");\n    }\n\n    var node = domEl ? ELEMENT_TO_NODE.get(domEl) : null;\n\n    if (!node) {\n      throw new Error(\"Cannot resolve a Slate node from DOM node: \".concat(domEl));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Get the target range from a DOM `event`.\r\n   */\n  findEventRange: function findEventRange(editor, event) {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent;\n    }\n\n    var _event = event,\n        x = _event.clientX,\n        y = _event.clientY,\n        target = _event.target;\n\n    if (x == null || y == null) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n\n    var node = ReactEditor.toSlateNode(editor, event.target);\n    var path = ReactEditor.findPath(editor, node); // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n\n    if (index_es[\"a\" /* Editor */].isVoid(editor, node)) {\n      var rect = target.getBoundingClientRect();\n      var isPrev = editor.isInline(node) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n      var edge = index_es[\"a\" /* Editor */].point(editor, path, {\n        edge: isPrev ? 'start' : 'end'\n      });\n      var point = isPrev ? index_es[\"a\" /* Editor */].before(editor, edge) : index_es[\"a\" /* Editor */].after(editor, edge);\n\n      if (point) {\n        var _range = index_es[\"a\" /* Editor */].range(editor, point);\n\n        return _range;\n      }\n    } // Else resolve a range from the caret position where the drop occured.\n\n\n    var domRange;\n    var _window2 = window,\n        document = _window2.document; // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y);\n    } else {\n      var position = document.caretPositionFromPoint(x, y);\n\n      if (position) {\n        domRange = document.createRange();\n        domRange.setStart(position.offsetNode, position.offset);\n        domRange.setEnd(position.offsetNode, position.offset);\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    } // Resolve a Slate range from the DOM range.\n\n\n    var range = ReactEditor.toSlateRange(editor, domRange, {\n      exactMatch: false\n    });\n    return range;\n  },\n\n  /**\r\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\r\n   */\n  toSlatePoint: function toSlatePoint(editor, domPoint, exactMatch) {\n    var _ref12 = exactMatch ? domPoint : index_es_normalizeDOMPoint(domPoint),\n        _ref13 = Object(slicedToArray[\"a\" /* default */])(_ref12, 2),\n        nearestNode = _ref13[0],\n        nearestOffset = _ref13[1];\n\n    var parentNode = nearestNode.parentNode;\n    var textNode = null;\n    var offset = 0;\n\n    if (parentNode) {\n      var voidNode = parentNode.closest('[data-slate-void=\"true\"]');\n      var leafNode = parentNode.closest('[data-slate-leaf]');\n      var domNode = null; // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]');\n\n        var _window = ReactEditor.getWindow(editor);\n\n        var range = _window.document.createRange();\n\n        range.setStart(textNode, 0);\n        range.setEnd(nearestNode, nearestOffset);\n        var contents = range.cloneContents();\n        var removals = [].concat(Object(toConsumableArray[\"a\" /* default */])(Array.prototype.slice.call(contents.querySelectorAll('[data-slate-zero-width]'))), Object(toConsumableArray[\"a\" /* default */])(Array.prototype.slice.call(contents.querySelectorAll('[contenteditable=false]'))));\n        removals.forEach(function (el) {\n          el.parentNode.removeChild(el);\n        }); // COMPAT: Edge has a bug where Range.prototype.toString() will\n        // convert \\n into \\r\\n. The bug causes a loop when slate-react\n        // attempts to reposition its cursor to match the native position. Use\n        // textContent.length instead.\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n\n        offset = contents.textContent.length;\n        domNode = textNode;\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent.\n        leafNode = voidNode.querySelector('[data-slate-leaf]'); // COMPAT: In read-only editors the leaf is not rendered.\n\n        if (!leafNode) {\n          offset = 1;\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]');\n          domNode = leafNode;\n          offset = domNode.textContent.length;\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(function (el) {\n            offset -= el.textContent.length;\n          });\n        }\n      } // COMPAT: If the parent node is a Slate zero-width space, editor is\n      // because the text node should have no characters. However, during IME\n      // composition the ASCII characters will be prepended to the zero-width\n      // space, so subtract 1 from the offset to account for the zero-width\n      // space character.\n\n\n      if (domNode && offset === domNode.textContent.length && parentNode.hasAttribute('data-slate-zero-width')) {\n        offset--;\n      }\n    }\n\n    if (!textNode) {\n      if (exactMatch) {\n        return null;\n      }\n\n      throw new Error(\"Cannot resolve a Slate point from DOM point: \".concat(domPoint));\n    } // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n\n\n    var slateNode = ReactEditor.toSlateNode(editor, textNode);\n    var path = ReactEditor.findPath(editor, slateNode);\n    return {\n      path: path,\n      offset: offset\n    };\n  },\n\n  /**\r\n   * Find a Slate range from a DOM range or selection.\r\n   */\n  toSlateRange: function toSlateRange(editor, domRange, options) {\n    var exactMatch = options.exactMatch;\n    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;\n    var anchorNode;\n    var anchorOffset;\n    var focusNode;\n    var focusOffset;\n    var isCollapsed;\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        anchorNode = domRange.anchorNode;\n        anchorOffset = domRange.anchorOffset;\n        focusNode = domRange.focusNode;\n        focusOffset = domRange.focusOffset; // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n\n        if (IS_CHROME && hasShadowRoot()) {\n          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;\n        } else {\n          isCollapsed = domRange.isCollapsed;\n        }\n      } else {\n        anchorNode = domRange.startContainer;\n        anchorOffset = domRange.startOffset;\n        focusNode = domRange.endContainer;\n        focusOffset = domRange.endOffset;\n        isCollapsed = domRange.collapsed;\n      }\n    }\n\n    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {\n      throw new Error(\"Cannot resolve a Slate range from DOM range: \".concat(domRange));\n    }\n\n    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], exactMatch);\n\n    if (!anchor) {\n      return null;\n    }\n\n    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], exactMatch);\n\n    if (!focus) {\n      return null;\n    }\n\n    return {\n      anchor: anchor,\n      focus: focus\n    };\n  },\n  hasRange: function hasRange(editor, range) {\n    var anchor = range.anchor,\n        focus = range.focus;\n    return index_es[\"a\" /* Editor */].hasPath(editor, anchor.path) && index_es[\"a\" /* Editor */].hasPath(editor, focus.path);\n  }\n};\n/**\r\n * Returns the number of characters that are the same at the beginning of the\r\n * String.\r\n *\r\n * @param prev  the previous text\r\n * @param next  the next text\r\n * @returns the offset of the start of the difference; null if there is no difference\r\n */\n\nfunction getDiffStart(prev, next) {\n  var length = Math.min(prev.length, next.length);\n\n  for (var i = 0; i < length; i++) {\n    if (prev.charAt(i) !== next.charAt(i)) return i;\n  }\n\n  if (prev.length !== next.length) return length;\n  return null;\n}\n/**\r\n * Returns the number of characters that are the same at the end of the String\r\n * up to `max`. Max prevents double-counting characters when there are\r\n * multiple duplicate characters around the diff area.\r\n *\r\n * @param prev  the previous text\r\n * @param next  the next text\r\n * @param max  the max length to test.\r\n * @returns number of characters that are the same at the end of the string\r\n */\n\n\nfunction getDiffEnd(prev, next, max) {\n  var prevLength = prev.length;\n  var nextLength = next.length;\n  var length = Math.min(prevLength, nextLength, max);\n\n  for (var i = 0; i < length; i++) {\n    var prevChar = prev.charAt(prevLength - i - 1);\n    var nextChar = next.charAt(nextLength - i - 1);\n    if (prevChar !== nextChar) return i;\n  }\n\n  if (prev.length !== next.length) return length;\n  return null;\n}\n/**\r\n * Takes two strings and returns an object representing two offsets. The\r\n * first, `start` represents the number of characters that are the same at\r\n * the front of the String. The `end` represents the number of characters\r\n * that are the same at the end of the String.\r\n *\r\n * Returns null if they are identical.\r\n *\r\n * @param prev  the previous text\r\n * @param next  the next text\r\n * @returns the difference text range; null if there are no differences.\r\n */\n\n\nfunction getDiffOffsets(prev, next) {\n  if (prev === next) return null;\n  var start = getDiffStart(prev, next);\n  if (start === null) return null;\n  var maxEnd = Math.min(prev.length - start, next.length - start);\n  var end = getDiffEnd(prev, next, maxEnd);\n  if (end === null) return null;\n  return {\n    start: start,\n    end: end\n  };\n}\n/**\r\n * Takes a text string and returns a slice from the string at the given text range\r\n *\r\n * @param text  the text\r\n * @param offsets  the text range\r\n * @returns the text slice at text range\r\n */\n\n\nfunction sliceText(text, offsets) {\n  return text.slice(offsets.start, text.length - offsets.end);\n}\n/**\r\n * Takes two strings and returns a smart diff that can be used to describe the\r\n * change in a way that can be used as operations like inserting, removing or\r\n * replacing text.\r\n *\r\n * @param prev the previous text\r\n * @param next the next text\r\n * @returns the text difference\r\n */\n\n\nfunction diffText(prev, next) {\n  if (prev === undefined || next === undefined) return null;\n  var offsets = getDiffOffsets(prev, next);\n  if (offsets == null) return null;\n  var insertText = sliceText(next, offsets);\n  var removeText = sliceText(prev, offsets);\n  return {\n    start: offsets.start,\n    end: prev.length - offsets.end,\n    insertText: insertText,\n    removeText: removeText\n  };\n}\n\nfunction combineInsertedText(insertedText) {\n  return insertedText.reduce(function (acc, _ref) {\n    var text = _ref.text;\n    return \"\".concat(acc).concat(text.insertText);\n  }, '');\n}\n\nfunction getTextInsertion(editor, domNode) {\n  var node = ReactEditor.toSlateNode(editor, domNode);\n\n  if (!index_es[\"g\" /* Text */].isText(node)) {\n    return undefined;\n  }\n\n  var prevText = node.text;\n  var nextText = domNode.textContent; // textContent will pad an extra \\n when the textContent ends with an \\n\n\n  if (nextText.endsWith('\\n')) {\n    nextText = nextText.slice(0, nextText.length - 1);\n  } // If the text is no different, there is no diff.\n\n\n  if (nextText !== prevText) {\n    var textDiff = diffText(prevText, nextText);\n\n    if (textDiff !== null) {\n      var textPath = ReactEditor.findPath(editor, node);\n      return {\n        text: textDiff,\n        path: textPath\n      };\n    }\n  }\n\n  return undefined;\n}\n\nfunction normalizeTextInsertionRange(editor, range, _ref2) {\n  var path = _ref2.path,\n      text = _ref2.text;\n  var insertionRange = {\n    anchor: {\n      path: path,\n      offset: text.start\n    },\n    focus: {\n      path: path,\n      offset: text.end\n    }\n  };\n\n  if (!range || !index_es[\"f\" /* Range */].isCollapsed(range)) {\n    return insertionRange;\n  }\n\n  var insertText = text.insertText,\n      removeText = text.removeText;\n  var isSingleCharacterInsertion = insertText.length === 1 || removeText.length === 1;\n  /**\r\n   * This code handles edge cases that arise from text diffing when the\r\n   * inserted or removed character is a single character, and the character\r\n   * right before or after the anchor is the same as the one being inserted or\r\n   * removed.\r\n   *\r\n   * Take this example: hello|o\r\n   *\r\n   * If another `o` is inserted at the selection's anchor in the example above,\r\n   * it should be inserted at the anchor, but using text diffing, we actually\r\n   * detect that the character was inserted after the second `o`:\r\n   *\r\n   * helloo[o]|\r\n   *\r\n   * Instead, in these very specific edge cases, we assume that the character\r\n   * needs to be inserted after the anchor rather than where the diff was found:\r\n   *\r\n   * hello[o]|o\r\n   */\n\n  if (isSingleCharacterInsertion && index_es[\"e\" /* Path */].equals(range.anchor.path, path)) {\n    var _Array$from2 = Array.from(index_es[\"a\" /* Editor */].nodes(editor, {\n      at: range,\n      match: index_es[\"g\" /* Text */].isText\n    })),\n        _Array$from3 = Object(slicedToArray[\"a\" /* default */])(_Array$from2, 1),\n        _text = _Array$from3[0];\n\n    if (_text) {\n      var _text2 = Object(slicedToArray[\"a\" /* default */])(_text, 1),\n          node = _text2[0];\n\n      var anchor = range.anchor;\n      var characterBeforeAnchor = node.text[anchor.offset - 1];\n      var characterAfterAnchor = node.text[anchor.offset];\n\n      if (insertText.length === 1 && insertText === characterAfterAnchor) {\n        // Assume text should be inserted at the anchor\n        return range;\n      }\n\n      if (removeText.length === 1 && removeText === characterBeforeAnchor) {\n        // Assume text should be removed right before the anchor\n        return {\n          anchor: {\n            path: path,\n            offset: anchor.offset - 1\n          },\n          focus: {\n            path: path,\n            offset: anchor.offset\n          }\n        };\n      }\n    }\n  }\n\n  return insertionRange;\n}\n\nfunction gatherMutationData(editor, mutations) {\n  var addedNodes = [];\n  var removedNodes = [];\n  var insertedText = [];\n  var characterDataMutations = [];\n  mutations.forEach(function (mutation) {\n    switch (mutation.type) {\n      case 'childList':\n        {\n          if (mutation.addedNodes.length) {\n            mutation.addedNodes.forEach(function (addedNode) {\n              addedNodes.push(addedNode);\n            });\n          }\n\n          mutation.removedNodes.forEach(function (removedNode) {\n            removedNodes.push(removedNode);\n          });\n          break;\n        }\n\n      case 'characterData':\n        {\n          characterDataMutations.push(mutation); // Changes to text nodes should consider the parent element\n\n          var parentNode = mutation.target.parentNode;\n\n          if (!parentNode) {\n            return;\n          }\n\n          var textInsertion = getTextInsertion(editor, parentNode);\n\n          if (!textInsertion) {\n            return;\n          } // If we've already detected a diff at that path, we can return early\n\n\n          if (insertedText.some(function (_ref) {\n            var path = _ref.path;\n            return index_es[\"e\" /* Path */].equals(path, textInsertion.path);\n          })) {\n            return;\n          } // Add the text diff to the array of detected text insertions that need to be reconciled\n\n\n          insertedText.push(textInsertion);\n        }\n    }\n  });\n  return {\n    addedNodes: addedNodes,\n    removedNodes: removedNodes,\n    insertedText: insertedText,\n    characterDataMutations: characterDataMutations\n  };\n}\n/**\r\n * In general, when a line break occurs, there will be more `addedNodes` than `removedNodes`.\r\n *\r\n * This isn't always the case however. In some cases, there will be more `removedNodes` than\r\n * `addedNodes`.\r\n *\r\n * To account for these edge cases, the most reliable strategy to detect line break mutations\r\n * is to check whether a new block was inserted of the same type as the current block.\r\n */\n\n\nvar index_es_isLineBreak = function isLineBreak(editor, _ref2) {\n  var addedNodes = _ref2.addedNodes;\n  var selection = editor.selection;\n  var parentNode = selection ? index_es[\"c\" /* Node */].parent(editor, selection.anchor.path) : null;\n  var parentDOMNode = parentNode ? ReactEditor.toDOMNode(editor, parentNode) : null;\n\n  if (!parentDOMNode) {\n    return false;\n  }\n\n  return addedNodes.some(function (addedNode) {\n    return addedNode instanceof HTMLElement && addedNode.tagName === (parentDOMNode === null || parentDOMNode === void 0 ? void 0 : parentDOMNode.tagName);\n  });\n};\n/**\r\n * So long as we check for line break mutations before deletion mutations,\r\n * we can safely assume that a set of mutations was a deletion if there are\r\n * removed nodes.\r\n */\n\n\nvar isDeletion = function isDeletion(_, _ref3) {\n  var removedNodes = _ref3.removedNodes;\n  return removedNodes.length > 0;\n};\n/**\r\n * If the selection was expanded and there are removed nodes,\r\n * the contents of the selection need to be replaced with the diff\r\n */\n\n\nvar index_es_isReplaceExpandedSelection = function isReplaceExpandedSelection(_ref4, _ref5) {\n  var selection = _ref4.selection;\n  var removedNodes = _ref5.removedNodes;\n  return selection ? index_es[\"f\" /* Range */].isExpanded(selection) && removedNodes.length > 0 : false;\n};\n/**\r\n * Plain text insertion\r\n */\n\n\nvar isTextInsertion = function isTextInsertion(_, _ref6) {\n  var insertedText = _ref6.insertedText;\n  return insertedText.length > 0;\n};\n/**\r\n * Edge case. Detect mutations that remove leaf nodes and also update character data\r\n */\n\n\nvar isRemoveLeafNodes = function isRemoveLeafNodes(_, _ref7) {\n  var addedNodes = _ref7.addedNodes,\n      characterDataMutations = _ref7.characterDataMutations,\n      removedNodes = _ref7.removedNodes;\n  return removedNodes.length > 0 && addedNodes.length === 0 && characterDataMutations.length > 0;\n};\n\nfunction restoreDOM(editor) {\n  try {\n    var onRestoreDOM = EDITOR_TO_RESTORE_DOM.get(editor);\n\n    if (onRestoreDOM) {\n      onRestoreDOM();\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n}\n/**\r\n * Based loosely on:\r\n *\r\n * https://github.com/facebook/draft-js/blob/master/src/component/handlers/composition/DOMObserver.js\r\n * https://github.com/ProseMirror/prosemirror-view/blob/master/src/domobserver.js\r\n *\r\n * The input manager attempts to map observed mutations on the document to a\r\n * set of operations in order to reconcile Slate's internal value with the DOM.\r\n *\r\n * Mutations are processed synchronously as they come in. Only mutations that occur\r\n * during a user input loop are processed, as other mutations can occur within the\r\n * document that were not initiated by user input.\r\n *\r\n * The mutation reconciliation process attempts to match mutations to the following\r\n * patterns:\r\n *\r\n * - Text updates\r\n * - Deletions\r\n * - Line breaks\r\n *\r\n * @param editor\r\n */\n\n\nvar index_es_AndroidInputManager = function AndroidInputManager(editor) {\n  var _this = this;\n\n  Object(classCallCheck[\"a\" /* default */])(this, AndroidInputManager);\n\n  this.editor = editor;\n  /**\r\n   * Handle MutationObserver flush\r\n   *\r\n   * @param mutations\r\n   */\n\n  this.flush = function (mutations) {\n    try {\n      _this.reconcileMutations(mutations);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err); // Failed to reconcile mutations, restore DOM to its previous state\n\n      restoreDOM(_this.editor);\n    }\n  };\n  /**\r\n   * Reconcile a batch of mutations\r\n   *\r\n   * @param mutations\r\n   */\n\n\n  this.reconcileMutations = function (mutations) {\n    var mutationData = gatherMutationData(_this.editor, mutations);\n    var insertedText = mutationData.insertedText,\n        removedNodes = mutationData.removedNodes;\n\n    if (index_es_isReplaceExpandedSelection(_this.editor, mutationData)) {\n      var text = combineInsertedText(insertedText);\n\n      _this.replaceExpandedSelection(text);\n    } else if (index_es_isLineBreak(_this.editor, mutationData)) {\n      _this.insertBreak();\n    } else if (isRemoveLeafNodes(_this.editor, mutationData)) {\n      _this.removeLeafNodes(removedNodes);\n    } else if (isDeletion(_this.editor, mutationData)) {\n      _this.deleteBackward();\n    } else if (isTextInsertion(_this.editor, mutationData)) {\n      _this.insertText(insertedText);\n    }\n  };\n  /**\r\n   * Apply text diff\r\n   */\n\n\n  this.insertText = function (insertedText) {\n    var selection = _this.editor.selection; // Insert the batched text diffs\n\n    insertedText.forEach(function (insertion) {\n      index_es[\"h\" /* Transforms */].insertText(_this.editor, insertion.text.insertText, {\n        at: normalizeTextInsertionRange(_this.editor, selection, insertion)\n      });\n    });\n  };\n  /**\r\n   * Handle line breaks\r\n   */\n\n\n  this.insertBreak = function () {\n    var selection = _this.editor.selection;\n    index_es[\"a\" /* Editor */].insertBreak(_this.editor); // To-do: Need a more granular solution to restoring only a specific portion\n    // of the document. Restoring the entire document is expensive.\n\n    restoreDOM(_this.editor);\n\n    if (selection) {\n      // Compat: Move selection to the newly inserted block if it has not moved\n      setTimeout(function () {\n        if (_this.editor.selection && index_es[\"f\" /* Range */].equals(selection, _this.editor.selection)) {\n          index_es[\"h\" /* Transforms */].move(_this.editor);\n        }\n      }, 100);\n    }\n  };\n  /**\r\n   * Handle expanded selection being deleted or replaced by text\r\n   */\n\n\n  this.replaceExpandedSelection = function (text) {\n    index_es[\"a\" /* Editor */].deleteFragment(_this.editor);\n\n    if (text.length) {\n      // Selection was replaced by text, insert the entire text diff\n      index_es[\"a\" /* Editor */].insertText(_this.editor, text);\n    }\n\n    restoreDOM(_this.editor);\n  };\n  /**\r\n   * Handle `backspace` that merges blocks\r\n   */\n\n\n  this.deleteBackward = function () {\n    index_es[\"a\" /* Editor */].deleteBackward(_this.editor);\n    ReactEditor.focus(_this.editor);\n    restoreDOM(_this.editor);\n  };\n  /**\r\n   * Handle mutations that remove specific leaves\r\n   */\n\n\n  this.removeLeafNodes = function (nodes) {\n    var _iterator2 = Object(createForOfIteratorHelper[\"a\" /* default */])(nodes),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var node = _step2.value;\n        var slateNode = ReactEditor.toSlateNode(_this.editor, node);\n\n        if (slateNode) {\n          var path = ReactEditor.findPath(_this.editor, slateNode);\n          index_es[\"h\" /* Transforms */].delete(_this.editor, {\n            at: path\n          });\n          restoreDOM(_this.editor);\n        }\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  };\n\n  this.editor = editor;\n};\n\nfunction useMutationObserver(node, callback, options) {\n  var _useState = Object(react[\"useState\"])(function () {\n    return new MutationObserver(callback);\n  }),\n      _useState2 = Object(slicedToArray[\"a\" /* default */])(_useState, 1),\n      mutationObserver = _useState2[0];\n\n  useIsomorphicLayoutEffect(function () {\n    // Disconnect mutation observer during render phase\n    mutationObserver.disconnect();\n  });\n  Object(react[\"useEffect\"])(function () {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    } // Attach mutation observer after render phase has finished\n\n\n    mutationObserver.observe(node.current, options); // Clean up after effect\n\n    return mutationObserver.disconnect.bind(mutationObserver);\n  });\n}\n\nfunction useTrackUserInput() {\n  var editor = index_es_useSlateStatic();\n  var receivedUserInput = Object(react[\"useRef\"])(false);\n  var animationFrameRef = Object(react[\"useRef\"])(null);\n  var onUserInput = Object(react[\"useCallback\"])(function () {\n    if (receivedUserInput.current === false) {\n      var window = ReactEditor.getWindow(editor);\n      receivedUserInput.current = true;\n\n      if (animationFrameRef.current) {\n        window.cancelAnimationFrame(animationFrameRef.current);\n      }\n\n      animationFrameRef.current = window.requestAnimationFrame(function () {\n        receivedUserInput.current = false;\n        animationFrameRef.current = null;\n      });\n    }\n  }, []);\n  Object(react[\"useEffect\"])(function () {\n    // Reset user input tracking on every render\n    if (receivedUserInput.current) {\n      receivedUserInput.current = false;\n    }\n  });\n  return {\n    receivedUserInput: receivedUserInput,\n    onUserInput: onUserInput\n  };\n}\n\nvar MUTATION_OBSERVER_CONFIG = {\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true\n};\n\nfunction useAndroidInputManager(node) {\n  var editor = index_es_useSlateStatic();\n\n  var _useState3 = Object(react[\"useState\"])(function () {\n    return new index_es_AndroidInputManager(editor);\n  }),\n      _useState4 = Object(slicedToArray[\"a\" /* default */])(_useState3, 1),\n      inputManager = _useState4[0];\n\n  var _useTrackUserInput = useTrackUserInput(),\n      receivedUserInput = _useTrackUserInput.receivedUserInput,\n      onUserInput = _useTrackUserInput.onUserInput;\n\n  var timeoutId = Object(react[\"useRef\"])(null);\n  var isReconciling = Object(react[\"useRef\"])(false);\n  var flush = Object(react[\"useCallback\"])(function (mutations) {\n    if (!receivedUserInput.current) {\n      return;\n    }\n\n    isReconciling.current = true;\n    inputManager.flush(mutations);\n\n    if (timeoutId.current) {\n      clearTimeout(timeoutId.current);\n    }\n\n    timeoutId.current = setTimeout(function () {\n      isReconciling.current = false;\n      timeoutId.current = null;\n    }, 250);\n  }, []);\n  useMutationObserver(node, flush, MUTATION_OBSERVER_CONFIG);\n  return {\n    isReconciling: isReconciling,\n    onUserInput: onUserInput\n  };\n}\n\nfunction ownKeys$1(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread$1(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys$1(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys$1(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n/**\r\n * Editable.\r\n */\n\n\nvar index_es_AndroidEditable = function AndroidEditable(props) {\n  var autoFocus = props.autoFocus,\n      _props$decorate2 = props.decorate,\n      decorate = _props$decorate2 === void 0 ? defaultDecorate : _props$decorate2,\n      propsOnDOMBeforeInput = props.onDOMBeforeInput,\n      placeholder = props.placeholder,\n      _props$readOnly2 = props.readOnly,\n      readOnly = _props$readOnly2 === void 0 ? false : _props$readOnly2,\n      renderElement = props.renderElement,\n      renderLeaf = props.renderLeaf,\n      _props$renderPlacehol2 = props.renderPlaceholder,\n      renderPlaceholder = _props$renderPlacehol2 === void 0 ? function (props) {\n    return /*#__PURE__*/react_default.a.createElement(index_es_DefaultPlaceholder, Object.assign({}, props));\n  } : _props$renderPlacehol2,\n      _props$style2 = props.style,\n      style = _props$style2 === void 0 ? {} : _props$style2,\n      _props$as2 = props.as,\n      Component = _props$as2 === void 0 ? 'div' : _props$as2,\n      attributes = _objectWithoutProperties(props, [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderPlaceholder\", \"style\", \"as\"]);\n\n  var editor = index_es_useSlate();\n  var ref = Object(react[\"useRef\"])(null);\n  var inputManager = useAndroidInputManager(ref); // Update internal state on each render.\n\n  IS_READ_ONLY.set(editor, readOnly); // Keep track of some state for the event handler logic.\n\n  var state = Object(react[\"useMemo\"])(function () {\n    return {\n      isUpdatingSelection: false,\n      latestElement: null\n    };\n  }, []);\n\n  var _useState5 = Object(react[\"useState\"])(0),\n      _useState6 = Object(slicedToArray[\"a\" /* default */])(_useState5, 2),\n      contentKey = _useState6[0],\n      setContentKey = _useState6[1];\n\n  var onRestoreDOM = Object(react[\"useCallback\"])(function () {\n    setContentKey(function (prev) {\n      return prev + 1;\n    });\n  }, [contentKey]); // Whenever the editor updates...\n\n  useIsomorphicLayoutEffect(function () {\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n      EDITOR_TO_RESTORE_DOM.set(editor, onRestoreDOM);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n      EDITOR_TO_RESTORE_DOM.delete(editor);\n    }\n\n    try {\n      // Make sure the DOM selection state is in sync.\n      var selection = editor.selection;\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var domSelection = root.getSelection();\n\n      if (!domSelection || !ReactEditor.isFocused(editor)) {\n        return;\n      }\n\n      var hasDomSelection = domSelection.type !== 'None'; // If the DOM selection is properly unset, we're done.\n\n      if (!selection && !hasDomSelection) {\n        return;\n      } // verify that the dom selection is in the editor\n\n\n      var editorElement = EDITOR_TO_ELEMENT.get(editor);\n      var hasDomSelectionInEditor = false;\n\n      if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {\n        hasDomSelectionInEditor = true;\n      } // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n\n\n      if (hasDomSelection && hasDomSelectionInEditor && selection) {\n        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true\n        });\n\n        if (slateRange && index_es[\"f\" /* Range */].equals(slateRange, selection)) {\n          return;\n        }\n      } // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n\n\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false\n        });\n        return;\n      } // Otherwise the DOM selection is out of sync, so update it.\n\n\n      var el = ReactEditor.toDOMNode(editor, editor);\n      state.isUpdatingSelection = true;\n      var newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n\n      if (newDomRange) {\n        if (index_es[\"f\" /* Range */].isBackward(selection)) {\n          domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n        } else {\n          domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n        }\n\n        var leafEl = newDomRange.startContainer.parentElement;\n        leafEl.getBoundingClientRect = newDomRange.getBoundingClientRect.bind(newDomRange);\n        es(leafEl, {\n          scrollMode: 'if-needed',\n          boundary: el\n        }); // @ts-ignore\n\n        delete leafEl.getBoundingClientRect;\n      } else {\n        domSelection.removeAllRanges();\n      }\n\n      setTimeout(function () {\n        state.isUpdatingSelection = false;\n      });\n    } catch (_unused) {\n      // Failed to update selection, likely due to reconciliation error\n      state.isUpdatingSelection = false;\n    }\n  }); // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n\n  Object(react[\"useEffect\"])(function () {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]); // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n\n  var onDOMBeforeInput = Object(react[\"useCallback\"])(function (event) {\n    if (!readOnly && hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      inputManager.onUserInput();\n    }\n  }, [readOnly, propsOnDOMBeforeInput]); // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n\n  useIsomorphicLayoutEffect(function () {\n    var node = ref.current; // @ts-ignore The `beforeinput` event isn't recognized.\n\n    node === null || node === void 0 ? void 0 : node.addEventListener('beforeinput', onDOMBeforeInput); // @ts-ignore The `beforeinput` event isn't recognized.\n\n    return function () {\n      return node === null || node === void 0 ? void 0 : node.removeEventListener('beforeinput', onDOMBeforeInput);\n    };\n  }, [contentKey, propsOnDOMBeforeInput]); // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n\n  var onDOMSelectionChange = Object(react[\"useCallback\"])(throttle_default()(function () {\n    try {\n      if (!readOnly && !state.isUpdatingSelection && !inputManager.isReconciling.current) {\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        var activeElement = root.activeElement;\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var domSelection = root.getSelection();\n\n        if (activeElement === el) {\n          state.latestElement = activeElement;\n          IS_FOCUSED.set(editor, true);\n        } else {\n          IS_FOCUSED.delete(editor);\n        }\n\n        if (!domSelection) {\n          return index_es[\"h\" /* Transforms */].deselect(editor);\n        }\n\n        var anchorNode = domSelection.anchorNode,\n            focusNode = domSelection.focusNode;\n        var anchorNodeSelectable = hasEditableTarget(editor, anchorNode) || index_es_isTargetInsideVoid(editor, anchorNode);\n        var focusNodeSelectable = hasEditableTarget(editor, focusNode) || index_es_isTargetInsideVoid(editor, focusNode);\n\n        if (anchorNodeSelectable && focusNodeSelectable) {\n          var range = ReactEditor.toSlateRange(editor, domSelection, {\n            exactMatch: false\n          });\n          index_es[\"h\" /* Transforms */].select(editor, range);\n        } else {\n          index_es[\"h\" /* Transforms */].deselect(editor);\n        }\n      }\n    } catch (_unused2) {// Failed to update selection, likely due to reconciliation error\n    }\n  }, 100), [readOnly]); // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n\n  useIsomorphicLayoutEffect(function () {\n    var window = ReactEditor.getWindow(editor);\n    window.document.addEventListener('selectionchange', onDOMSelectionChange);\n    return function () {\n      window.document.removeEventListener('selectionchange', onDOMSelectionChange);\n    };\n  });\n  var decorations = decorate([editor, []]);\n\n  if (placeholder && editor.children.length === 1 && Array.from(index_es[\"c\" /* Node */].texts(editor)).length === 1 && index_es[\"c\" /* Node */].string(editor) === '') {\n    var _decorations$push2;\n\n    var start = index_es[\"a\" /* Editor */].start(editor, []);\n    decorations.push((_decorations$push2 = {}, Object(defineProperty[\"a\" /* default */])(_decorations$push2, PLACEHOLDER_SYMBOL, true), Object(defineProperty[\"a\" /* default */])(_decorations$push2, \"placeholder\", placeholder), Object(defineProperty[\"a\" /* default */])(_decorations$push2, \"anchor\", start), Object(defineProperty[\"a\" /* default */])(_decorations$push2, \"focus\", start), _decorations$push2));\n  }\n\n  return /*#__PURE__*/react_default.a.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/react_default.a.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/react_default.a.createElement(Component, Object.assign({\n    key: contentKey,\n    role: readOnly ? undefined : 'textbox'\n  }, attributes, {\n    spellCheck: attributes.spellCheck,\n    autoCorrect: attributes.autoCorrect,\n    autoCapitalize: attributes.autoCapitalize,\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    contentEditable: readOnly ? undefined : true,\n    suppressContentEditableWarning: true,\n    ref: ref,\n    style: _objectSpread$1({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Prevent the default outline styles.\n      outline: 'none',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, style),\n    onCopy: Object(react[\"useCallback\"])(function (event) {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n      }\n    }, [attributes.onCopy]),\n    onCut: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n        var selection = editor.selection;\n\n        if (selection) {\n          if (index_es[\"f\" /* Range */].isExpanded(selection)) {\n            index_es[\"a\" /* Editor */].deleteFragment(editor);\n          } else {\n            var node = index_es[\"c\" /* Node */].parent(editor, selection.anchor.path);\n\n            if (index_es[\"a\" /* Editor */].isVoid(editor, node)) {\n              index_es[\"h\" /* Transforms */].delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onCut]),\n    onFocus: Object(react[\"useCallback\"])(function (event) {\n      if (!readOnly && !state.isUpdatingSelection && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement;\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, attributes.onFocus]),\n    onBlur: Object(react[\"useCallback\"])(function (event) {\n      if (readOnly || state.isUpdatingSelection || !hasEditableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      } // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n\n\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n\n      var relatedTarget = event.relatedTarget;\n      var el = ReactEditor.toDOMNode(editor, editor); // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n\n      if (relatedTarget === el) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n\n\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n\n\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n\n        if (index_es[\"b\" /* Element */].isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      }\n\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, attributes.onBlur]),\n    onPaste: Object(react[\"useCallback\"])(function (event) {\n      // This unfortunately needs to be handled with paste events instead.\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste) && !readOnly) {\n        event.preventDefault();\n        ReactEditor.insertData(editor, event.clipboardData);\n      }\n    }, [readOnly, attributes.onPaste])\n  }), index_es_useChildren({\n    decorations: decorations,\n    node: editor,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    selection: editor.selection\n  }))));\n};\n/**\r\n * A React context for sharing the `focused` state of the editor.\r\n */\n\n\nvar FocusedContext = /*#__PURE__*/Object(react[\"createContext\"])(false);\n/**\r\n * Get the current `focused` state of the editor.\r\n */\n\nvar index_es_useFocused = function useFocused() {\n  return Object(react[\"useContext\"])(FocusedContext);\n};\n/**\r\n * A wrapper around the provider to handle `onChange` events, because the editor\r\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\r\n */\n\n\nvar index_es_Slate = function Slate(props) {\n  var editor = props.editor,\n      children = props.children,\n      onChange = props.onChange,\n      value = props.value,\n      rest = _objectWithoutProperties(props, [\"editor\", \"children\", \"onChange\", \"value\"]);\n\n  var _useState7 = Object(react[\"useState\"])(0),\n      _useState8 = Object(slicedToArray[\"a\" /* default */])(_useState7, 2),\n      key = _useState8[0],\n      setKey = _useState8[1];\n\n  var context = Object(react[\"useMemo\"])(function () {\n    tiny_invariant_esm(index_es[\"c\" /* Node */].isNodeList(value), \"[Slate] value is invalid! Expected a list of elements but got: \".concat(JSON.stringify(value)));\n    tiny_invariant_esm(index_es[\"a\" /* Editor */].isEditor(editor), \"[Slate] editor is invalid! you passed: \".concat(JSON.stringify(editor)));\n    editor.children = value;\n    Object.assign(editor, rest);\n    return [editor];\n  }, [key, value].concat(Object(toConsumableArray[\"a\" /* default */])(Object.values(rest))));\n  var onContextChange = Object(react[\"useCallback\"])(function () {\n    onChange(editor.children);\n    setKey(key + 1);\n  }, [key, onChange]);\n  EDITOR_TO_ON_CHANGE.set(editor, onContextChange);\n  Object(react[\"useEffect\"])(function () {\n    return function () {\n      EDITOR_TO_ON_CHANGE.set(editor, function () {});\n    };\n  }, []);\n\n  var _useState9 = Object(react[\"useState\"])(ReactEditor.isFocused(editor)),\n      _useState10 = Object(slicedToArray[\"a\" /* default */])(_useState9, 2),\n      isFocused = _useState10[0],\n      setIsFocused = _useState10[1];\n\n  Object(react[\"useEffect\"])(function () {\n    setIsFocused(ReactEditor.isFocused(editor));\n  });\n  useIsomorphicLayoutEffect(function () {\n    var fn = function fn() {\n      return setIsFocused(ReactEditor.isFocused(editor));\n    };\n\n    document.addEventListener('focus', fn, true);\n    return function () {\n      return document.removeEventListener('focus', fn, true);\n    };\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    var fn = function fn() {\n      return setIsFocused(ReactEditor.isFocused(editor));\n    };\n\n    document.addEventListener('blur', fn, true);\n    return function () {\n      return document.removeEventListener('blur', fn, true);\n    };\n  }, []);\n  return /*#__PURE__*/react_default.a.createElement(SlateContext.Provider, {\n    value: context\n  }, /*#__PURE__*/react_default.a.createElement(EditorContext.Provider, {\n    value: editor\n  }, /*#__PURE__*/react_default.a.createElement(FocusedContext.Provider, {\n    value: isFocused\n  }, children)));\n};\n/**\r\n * Get the current editor object from the React context.\r\n * @deprecated Use useSlateStatic instead.\r\n */\n\n\nvar index_es_useEditor = function useEditor() {\n  var editor = Object(react[\"useContext\"])(EditorContext);\n\n  if (!editor) {\n    throw new Error(\"The `useEditor` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return editor;\n};\n/**\r\n * Utilities for single-line deletion\r\n */\n\n\nvar doRectsIntersect = function doRectsIntersect(rect, compareRect) {\n  var middle = (compareRect.top + compareRect.bottom) / 2;\n  return rect.top <= middle && rect.bottom >= middle;\n};\n\nvar areRangesSameLine = function areRangesSameLine(editor, range1, range2) {\n  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();\n  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);\n};\n/**\r\n * A helper utility that returns the end portion of a `Range`\r\n * which is located on a single line.\r\n *\r\n * @param {Editor} editor The editor object to compare against\r\n * @param {Range} parentRange The parent range to compare against\r\n * @returns {Range} A valid portion of the parentRange which is one a single line\r\n */\n\n\nvar index_es_findCurrentLineRange = function findCurrentLineRange(editor, parentRange) {\n  var parentRangeBoundary = index_es[\"a\" /* Editor */].range(editor, index_es[\"f\" /* Range */].end(parentRange));\n  var positions = Array.from(index_es[\"a\" /* Editor */].positions(editor, {\n    at: parentRange\n  }));\n  var left = 0;\n  var right = positions.length;\n  var middle = Math.floor(right / 2);\n\n  if (areRangesSameLine(editor, index_es[\"a\" /* Editor */].range(editor, positions[left]), parentRangeBoundary)) {\n    return index_es[\"a\" /* Editor */].range(editor, positions[left], parentRangeBoundary);\n  }\n\n  if (positions.length < 2) {\n    return index_es[\"a\" /* Editor */].range(editor, positions[positions.length - 1], parentRangeBoundary);\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (areRangesSameLine(editor, index_es[\"a\" /* Editor */].range(editor, positions[middle]), parentRangeBoundary)) {\n      right = middle;\n    } else {\n      left = middle;\n    }\n\n    middle = Math.floor((left + right) / 2);\n  }\n\n  return index_es[\"a\" /* Editor */].range(editor, positions[right], parentRangeBoundary);\n};\n/**\r\n * `withReact` adds React and DOM specific behaviors to the editor.\r\n *\r\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\r\n * this plugin.\r\n *\r\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\r\n */\n\n\nvar index_es_withReact = function withReact(editor) {\n  var e = editor;\n  var apply = e.apply,\n      onChange = e.onChange,\n      deleteBackward = e.deleteBackward;\n\n  e.deleteBackward = function (unit) {\n    if (unit !== 'line') {\n      return deleteBackward(unit);\n    }\n\n    if (editor.selection && index_es[\"f\" /* Range */].isCollapsed(editor.selection)) {\n      var parentBlockEntry = index_es[\"a\" /* Editor */].above(editor, {\n        match: function match(n) {\n          return index_es[\"a\" /* Editor */].isBlock(editor, n);\n        },\n        at: editor.selection\n      });\n\n      if (parentBlockEntry) {\n        var _parentBlockEntry = Object(slicedToArray[\"a\" /* default */])(parentBlockEntry, 2),\n            parentBlockPath = _parentBlockEntry[1];\n\n        var parentElementRange = index_es[\"a\" /* Editor */].range(editor, parentBlockPath, editor.selection.anchor);\n        var currentLineRange = index_es_findCurrentLineRange(e, parentElementRange);\n\n        if (!index_es[\"f\" /* Range */].isCollapsed(currentLineRange)) {\n          index_es[\"h\" /* Transforms */].delete(editor, {\n            at: currentLineRange\n          });\n        }\n      }\n    }\n  };\n\n  e.apply = function (op) {\n    var matches = [];\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n        {\n          var _iterator3 = Object(createForOfIteratorHelper[\"a\" /* default */])(index_es[\"a\" /* Editor */].levels(e, {\n            at: op.path\n          })),\n              _step3;\n\n          try {\n            for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n              var _step3$value = Object(slicedToArray[\"a\" /* default */])(_step3.value, 2),\n                  node = _step3$value[0],\n                  path = _step3$value[1];\n\n              var key = ReactEditor.findKey(e, node);\n              matches.push([path, key]);\n            }\n          } catch (err) {\n            _iterator3.e(err);\n          } finally {\n            _iterator3.f();\n          }\n\n          break;\n        }\n\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node':\n        {\n          var _iterator4 = Object(createForOfIteratorHelper[\"a\" /* default */])(index_es[\"a\" /* Editor */].levels(e, {\n            at: index_es[\"e\" /* Path */].parent(op.path)\n          })),\n              _step4;\n\n          try {\n            for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n              var _step4$value = Object(slicedToArray[\"a\" /* default */])(_step4.value, 2),\n                  _node = _step4$value[0],\n                  _path = _step4$value[1];\n\n              var _key = ReactEditor.findKey(e, _node);\n\n              matches.push([_path, _key]);\n            }\n          } catch (err) {\n            _iterator4.e(err);\n          } finally {\n            _iterator4.f();\n          }\n\n          break;\n        }\n\n      case 'move_node':\n        {\n          var _iterator5 = Object(createForOfIteratorHelper[\"a\" /* default */])(index_es[\"a\" /* Editor */].levels(e, {\n            at: index_es[\"e\" /* Path */].common(index_es[\"e\" /* Path */].parent(op.path), index_es[\"e\" /* Path */].parent(op.newPath))\n          })),\n              _step5;\n\n          try {\n            for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n              var _step5$value = Object(slicedToArray[\"a\" /* default */])(_step5.value, 2),\n                  _node2 = _step5$value[0],\n                  _path2 = _step5$value[1];\n\n              var _key2 = ReactEditor.findKey(e, _node2);\n\n              matches.push([_path2, _key2]);\n            }\n          } catch (err) {\n            _iterator5.e(err);\n          } finally {\n            _iterator5.f();\n          }\n\n          break;\n        }\n    }\n\n    apply(op);\n\n    for (var _i3 = 0, _matches = matches; _i3 < _matches.length; _i3++) {\n      var _matches$_i = Object(slicedToArray[\"a\" /* default */])(_matches[_i3], 2),\n          _path3 = _matches$_i[0],\n          _key3 = _matches$_i[1];\n\n      var _Editor$node3 = index_es[\"a\" /* Editor */].node(e, _path3),\n          _Editor$node4 = Object(slicedToArray[\"a\" /* default */])(_Editor$node3, 1),\n          _node3 = _Editor$node4[0];\n\n      NODE_TO_KEY.set(_node3, _key3);\n    }\n  };\n\n  e.setFragmentData = function (data) {\n    var selection = e.selection;\n\n    if (!selection) {\n      return;\n    }\n\n    var _Range$edges = index_es[\"f\" /* Range */].edges(selection),\n        _Range$edges2 = Object(slicedToArray[\"a\" /* default */])(_Range$edges, 2),\n        start = _Range$edges2[0],\n        end = _Range$edges2[1];\n\n    var startVoid = index_es[\"a\" /* Editor */].void(e, {\n      at: start.path\n    });\n    var endVoid = index_es[\"a\" /* Editor */].void(e, {\n      at: end.path\n    });\n\n    if (index_es[\"f\" /* Range */].isCollapsed(selection) && !startVoid) {\n      return;\n    } // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n\n\n    var domRange = ReactEditor.toDOMRange(e, selection);\n    var contents = domRange.cloneContents();\n    var attach = contents.childNodes[0]; // Make sure attach is non-empty, since empty nodes will not get copied.\n\n    contents.childNodes.forEach(function (node) {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node;\n      }\n    }); // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n\n    if (endVoid) {\n      var _endVoid = Object(slicedToArray[\"a\" /* default */])(endVoid, 1),\n          voidNode = _endVoid[0];\n\n      var r = domRange.cloneRange();\n      var domNode = ReactEditor.toDOMNode(e, voidNode);\n      r.setEndAfter(domNode);\n      contents = r.cloneContents();\n    } // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n\n\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]');\n    } // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n\n\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(function (zw) {\n      var isNewline = zw.getAttribute('data-slate-zero-width') === 'n';\n      zw.textContent = isNewline ? '\\n' : '';\n    }); // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n\n    if (isDOMText(attach)) {\n      var span = document.createElement('span'); // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n\n      span.style.whiteSpace = 'pre';\n      span.appendChild(attach);\n      contents.appendChild(span);\n      attach = span;\n    }\n\n    var fragment = e.getFragment();\n    var string = JSON.stringify(fragment);\n    var encoded = window.btoa(encodeURIComponent(string));\n    attach.setAttribute('data-slate-fragment', encoded);\n    data.setData('application/x-slate-fragment', encoded); // Add the content to a <div> so that we can get its inner HTML.\n\n    var div = document.createElement('div');\n    div.appendChild(contents);\n    div.setAttribute('hidden', 'true');\n    document.body.appendChild(div);\n    data.setData('text/html', div.innerHTML);\n    data.setData('text/plain', getPlainText(div));\n    document.body.removeChild(div);\n  };\n\n  e.insertData = function (data) {\n    var fragment = data.getData('application/x-slate-fragment');\n\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      e.insertFragment(parsed);\n      return;\n    }\n\n    var text = data.getData('text/plain');\n\n    if (text) {\n      var lines = text.split(/\\r\\n|\\r|\\n/);\n      var split = false;\n\n      var _iterator6 = Object(createForOfIteratorHelper[\"a\" /* default */])(lines),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var line = _step6.value;\n\n          if (split) {\n            index_es[\"h\" /* Transforms */].splitNodes(e, {\n              always: true\n            });\n          }\n\n          e.insertText(line);\n          split = true;\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n  };\n\n  e.onChange = function () {\n    // COMPAT: React doesn't batch `setState` hook calls, which means that the\n    // children and selection can get out of sync for one render pass. So we\n    // have to use this unstable API to ensure it batches them. (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    react_dom_default.a.unstable_batchedUpdates(function () {\n      var onContextChange = EDITOR_TO_ON_CHANGE.get(e);\n\n      if (onContextChange) {\n        onContextChange();\n      }\n\n      onChange();\n    });\n  };\n\n  return e;\n}; // Components\n\n\nvar Editable$1 = IS_ANDROID ? index_es_AndroidEditable : index_es_Editable;\n\n\n/***/ }),\n\n/***/ 398:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"a\", function() { return /* binding */ emotion_css_esm_css; });\n__webpack_require__.d(__webpack_exports__, \"b\", function() { return /* binding */ emotion_css_esm_cx; });\n\n// UNUSED EXPORTS: cache, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet\n\n// EXTERNAL MODULE: ./node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js\nvar emotion_cache_browser_esm = __webpack_require__(36);\n\n// EXTERNAL MODULE: ./node_modules/@emotion/serialize/dist/emotion-serialize.browser.esm.js + 2 modules\nvar emotion_serialize_browser_esm = __webpack_require__(31);\n\n// EXTERNAL MODULE: ./node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js\nvar emotion_utils_browser_esm = __webpack_require__(29);\n\n// CONCATENATED MODULE: ./node_modules/@emotion/css/create-instance/dist/emotion-css-create-instance.esm.js\n\n\n\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = Object(emotion_utils_browser_esm[\"a\" /* getRegisteredStyles */])(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar emotion_css_create_instance_esm_createEmotion = function createEmotion(options) {\n  var cache = Object(emotion_cache_browser_esm[\"a\" /* default */])(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (false) {}\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = Object(emotion_serialize_browser_esm[\"a\" /* serializeStyles */])(args, cache.registered, undefined);\n    Object(emotion_utils_browser_esm[\"b\" /* insertStyles */])(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = Object(emotion_serialize_browser_esm[\"a\" /* serializeStyles */])(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = Object(emotion_serialize_browser_esm[\"a\" /* serializeStyles */])(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: emotion_utils_browser_esm[\"a\" /* getRegisteredStyles */].bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\n/* harmony default export */ var emotion_css_create_instance_esm = (emotion_css_create_instance_esm_createEmotion);\n// CONCATENATED MODULE: ./node_modules/@emotion/css/dist/emotion-css.esm.js\n\n\n\n\n\nvar _createEmotion = emotion_css_create_instance_esm({\n  key: 'css'\n}),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    emotion_css_esm_cx = _createEmotion.cx,\n    emotion_css_esm_merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    emotion_css_esm_injectGlobal = _createEmotion.injectGlobal,\n    emotion_css_esm_keyframes = _createEmotion.keyframes,\n    emotion_css_esm_css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    emotion_css_esm_cache = _createEmotion.cache;\n\n\n\n/***/ }),\n\n/***/ 534:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\nfunction isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n}\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n\nfunction isObjectObject(o) {\n  return isObject(o) === true && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor, prot;\n  if (isObjectObject(o) === false) return false; // If has modified constructor\n\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false; // If has modified prototype\n\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false; // If constructor does not have an Object-specific method\n\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  } // Most likely a plain Object\n\n\n  return true;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (isPlainObject);\n\n/***/ }),\n\n/***/ 535:\n/***/ (function(module, exports) {\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n/***/ }),\n\n/***/ 588:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar freeGlobal = __webpack_require__(765);\n/** Detect free variable `self`. */\n\n\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n/** Used as a reference to the global object. */\n\nvar root = freeGlobal || freeSelf || Function('return this')();\nmodule.exports = root;\n\n/***/ }),\n\n/***/ 589:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar root = __webpack_require__(588);\n/** Built-in value references. */\n\n\nvar Symbol = root.Symbol;\nmodule.exports = Symbol;\n\n/***/ }),\n\n/***/ 759:\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(module, global) {var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/esrever v0.2.0 by @mathias */\n;\n\n(function (root) {\n  // Detect free variables `exports`\n  var freeExports =  true && exports; // Detect free variable `module`\n\n  var freeModule =  true && module && module.exports == freeExports && module; // Detect free variable `global`, from Node.js or Browserified code,\n  // and use it as `root`\n\n  var freeGlobal = typeof global == 'object' && global;\n\n  if (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n    root = freeGlobal;\n  }\n  /*--------------------------------------------------------------------------*/\n\n\n  var regexSymbolWithCombiningMarks = /([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g;\n  var regexSurrogatePair = /([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])/g;\n\n  var reverse = function reverse(string) {\n    // Step 1: deal with combining marks and astral symbols (surrogate pairs)\n    string = string // Swap symbols with their combining marks so the combining marks go first\n    .replace(regexSymbolWithCombiningMarks, function ($0, $1, $2) {\n      // Reverse the combining marks so they will end up in the same order\n      // later on (after another round of reversing)\n      return reverse($2) + $1;\n    }) // Swap high and low surrogates so the low surrogates go first\n    .replace(regexSurrogatePair, '$2$1'); // Step 2: reverse the code units in the string\n\n    var result = '';\n    var index = string.length;\n\n    while (index--) {\n      result += string.charAt(index);\n    }\n\n    return result;\n  };\n  /*--------------------------------------------------------------------------*/\n\n\n  var esrever = {\n    'version': '0.2.0',\n    'reverse': reverse\n  }; // Some AMD build optimizers, like r.js, check for specific condition patterns\n  // like the following:\n\n  if (true) {\n    !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {\n      return esrever;\n    }).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else { var key; }\n})(this);\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(109)(module), __webpack_require__(60)))\n\n/***/ }),\n\n/***/ 760:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n // do not edit .js files directly - edit src/index.jst\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n    var length, i, keys;\n\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n\n      for (i = length; i-- !== 0;) {\n        if (!equal(a[i], b[i])) return false;\n      }\n\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;) {\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    }\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  } // true if both NaN, false otherwise\n\n\n  return a !== a && b !== b;\n};\n\n/***/ }),\n\n/***/ 761:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = direction;\nvar RTL = \"\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC\";\nvar LTR = \"A-Za-z\\xC0-\\xD6\\xD8-\\xF6\" + \"\\xF8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C\" + \"\\uFE00-\\uFE6F\\uFEFD-\\uFFFF\";\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']');\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']');\n\nfunction direction(value) {\n  value = String(value || '');\n\n  if (rtl.test(value)) {\n    return 'rtl';\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr';\n  }\n\n  return 'neutral';\n}\n\n/***/ }),\n\n/***/ 762:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar debounce = __webpack_require__(763),\n    isObject = __webpack_require__(535);\n/** Error message constants. */\n\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\n\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n\n/***/ }),\n\n/***/ 763:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar isObject = __webpack_require__(535),\n    now = __webpack_require__(764),\n    toNumber = __webpack_require__(766);\n/** Error message constants. */\n\n\nvar FUNC_ERROR_TEXT = 'Expected a function';\n/* Built-in method references for those with the same name as other `lodash` methods. */\n\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\n\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n\n  wait = toNumber(wait) || 0;\n\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time; // Start the timer for the trailing edge.\n\n    timerId = setTimeout(timerExpired, wait); // Invoke the leading edge.\n\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n    return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime; // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n\n    return lastCallTime === undefined || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n  }\n\n  function timerExpired() {\n    var time = now();\n\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    } // Restart the timer.\n\n\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined; // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n\n    return result;\n  }\n\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n\n/***/ }),\n\n/***/ 764:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar root = __webpack_require__(588);\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\n\n\nvar now = function now() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n\n/***/ }),\n\n/***/ 765:\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\nmodule.exports = freeGlobal;\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(60)))\n\n/***/ }),\n\n/***/ 766:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseTrim = __webpack_require__(767),\n    isObject = __webpack_require__(535),\n    isSymbol = __webpack_require__(769);\n/** Used as references for various `Number` constants. */\n\n\nvar NAN = 0 / 0;\n/** Used to detect bad signed hexadecimal string values. */\n\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n/** Used to detect binary string values. */\n\nvar reIsBinary = /^0b[01]+$/i;\n/** Used to detect octal string values. */\n\nvar reIsOctal = /^0o[0-7]+$/i;\n/** Built-in method references without a dependency on `root`. */\n\nvar freeParseInt = parseInt;\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\n\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n\n  if (isSymbol(value)) {\n    return NAN;\n  }\n\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? other + '' : other;\n  }\n\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n}\n\nmodule.exports = toNumber;\n\n/***/ }),\n\n/***/ 767:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar trimmedEndIndex = __webpack_require__(768);\n/** Used to match leading whitespace. */\n\n\nvar reTrimStart = /^\\s+/;\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\n\nfunction baseTrim(string) {\n  return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '') : string;\n}\n\nmodule.exports = baseTrim;\n\n/***/ }),\n\n/***/ 768:\n/***/ (function(module, exports) {\n\n/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\n\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n\n/***/ }),\n\n/***/ 769:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar baseGetTag = __webpack_require__(770),\n    isObjectLike = __webpack_require__(773);\n/** `Object#toString` result references. */\n\n\nvar symbolTag = '[object Symbol]';\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\n\nfunction isSymbol(value) {\n  return typeof value == 'symbol' || isObjectLike(value) && baseGetTag(value) == symbolTag;\n}\n\nmodule.exports = isSymbol;\n\n/***/ }),\n\n/***/ 770:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Symbol = __webpack_require__(589),\n    getRawTag = __webpack_require__(771),\n    objectToString = __webpack_require__(772);\n/** `Object#toString` result references. */\n\n\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n/** Built-in value references. */\n\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\n\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n\n  return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n/***/ }),\n\n/***/ 771:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Symbol = __webpack_require__(589);\n/** Used for built-in method references. */\n\n\nvar objectProto = Object.prototype;\n/** Used to check objects for own properties. */\n\nvar hasOwnProperty = objectProto.hasOwnProperty;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/** Built-in value references. */\n\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\n\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n/***/ }),\n\n/***/ 772:\n/***/ (function(module, exports) {\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\n\nvar nativeObjectToString = objectProto.toString;\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\n\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n/***/ }),\n\n/***/ 773:\n/***/ (function(module, exports) {\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../src/utils/errors.ts","../src/utils/common.ts","../src/types/types-internal.ts","../src/utils/plugins.ts","../src/core/scope.ts","../src/core/finalize.ts","../src/core/proxy.ts","../src/core/immerClass.ts","../src/core/current.ts","../src/plugins/es5.ts","../src/plugins/patches.ts","../src/plugins/mapset.ts","../src/plugins/all.ts","../src/immer.ts","../src/utils/env.ts","../../../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../src/utils/weak-maps.ts","../src/create-editor.ts","../../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../src/utils/string.ts","../src/interfaces/element.ts","../src/interfaces/editor.ts","../src/interfaces/location.ts","../src/interfaces/node.ts","../src/interfaces/operation.ts","../src/interfaces/path.ts","../src/interfaces/path-ref.ts","../src/interfaces/point.ts","../src/interfaces/point-ref.ts","../src/interfaces/range.ts","../src/interfaces/range-ref.ts","../src/interfaces/text.ts","../src/transforms/general.ts","../src/transforms/node.ts","../src/transforms/selection.ts","../src/transforms/text.ts","../src/transforms/index.ts","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/is-hotkey/lib/index.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/escape-html/index.js","../src/history.ts","../src/history-editor.ts","../src/with-history.ts","../src/tokens.ts","../src/creators.ts","../src/hyperscript.ts","../src/index.ts","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/scroll-into-view-if-needed/es/index.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/slate-react/node_modules/tiny-invariant/dist/tiny-invariant.esm.js","../src/components/string.tsx","../src/components/leaf.tsx","../src/utils/environment.ts","../src/hooks/use-isomorphic-layout-effect.ts","../src/utils/range-list.ts","../src/components/text.tsx","../src/hooks/use-selected.ts","../src/components/element.tsx","../src/hooks/use-slate-static.tsx","../src/hooks/use-decorate.ts","../src/hooks/use-children.tsx","../src/utils/hotkeys.ts","../src/hooks/use-read-only.ts","../src/hooks/use-slate.tsx","../src/utils/dom.ts","../src/components/editable.tsx","../src/utils/key.ts","../src/plugin/react-editor.ts","../src/components/android/diff-text.ts","../src/components/android/mutation-detection.ts","../src/components/android/restore-dom.ts","../src/components/android/android-input-manager.ts","../src/components/android/use-mutation-observer.ts","../src/components/android/use-track-user-input.ts","../src/components/android/use-android-input-manager.ts","../src/components/android/android-editable.tsx","../src/hooks/use-focused.ts","../src/components/slate.tsx","../src/hooks/use-editor.tsx","../src/utils/lines.ts","../src/plugin/with-react.ts","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/@emotion/css/create-instance/dist/emotion-css-create-instance.esm.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/@emotion/css/dist/emotion-css.esm.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/is-plain-object/index.es.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/isObject.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_root.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_Symbol.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/esrever/esrever.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/fast-deep-equal/index.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/direction/index.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/throttle.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/debounce.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/now.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_freeGlobal.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/toNumber.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_baseTrim.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_trimmedEndIndex.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/isSymbol.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_baseGetTag.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_getRawTag.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/_objectToString.js","/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/lodash/isObjectLike.js"],"names":["die","error","args","msg","Error","length","map","s","join","isDraft","value","DRAFT_STATE","isDraftable","proto","Object","getPrototypeOf","Ctor","hasOwnProperty","call","constructor","Function","toString","objectCtorString","isPlainObject","Array","isArray","DRAFTABLE","isMap","isSet","original","base_","each","obj","iter","enumerableOnly","getArchtype","keys","ownKeys","forEach","key","entry","index","thing","state","type_","has","prop","prototype","get","set","propOrOldValue","t","delete","add","is","x","y","target","hasMap","Map","hasSet","Set","latest","copy_","shallowCopy","base","slice","descriptors","getOwnPropertyDescriptors","i","desc","writable","configurable","enumerable","create","freeze","deep","isFrozen","clear","dontMutateFrozenCollections","getPlugin","pluginKey","plugin","plugins","loadPlugin","implementation","getCurrentScope","currentScope","usePatchesInScope","scope","patchListener","patches_","inversePatches_","patchListener_","revokeScope","leaveScope","drafts_","revokeDraft","parent_","enterScope","immer","immer_","canAutoFreeze_","unfinalizedDrafts_","draft","revoke_","revoked_","processResult","result","baseDraft","isReplaced","undefined","useProxies_","willFinalizeES5_","modified_","finalize","maybeFreeze","generateReplacementPatches_","NOTHING","rootScope","path","childValue","finalizeProperty","scope_","finalized_","draft_","generatePatches_","parentState","targetObject","rootPath","res","assigned_","concat","autoFreeze_","peek","getDescriptorFromProto","source","getOwnPropertyDescriptor","markChanged","prepareCopy","createProxy","parent","proxyMap_","proxySet_","isManual_","traps","objectTraps","arrayTraps","Proxy","revocable","revoke","proxy","createProxyProxy","createES5Proxy_","push","current","currentImpl","copy","archType","hasChanges_","copyHelper","from","enableES5","proxyProperty","this","assertUnrevoked","markChangesSweep","drafts","hasArrayChanges","hasObjectChanges","baseValue","baseIsDraft","descriptor","JSON","stringify","defineProperty","createES5Draft","markChangesRecursively","object","min","Math","enablePatches","deepClonePatchValue","entries","cloned","clonePatchValueIfNeeded","ADD","applyPatches_","patches","patch","op","parentType","p","type","splice","basePath","inversePatches","assignedValue","origValue","generatePatchesFromAssigned","generateArrayPatches","unshift","generateSetPatches","rootState","replacement","enableMapSet","__extends","d","b","__","extendStatics","prepareMapCopy","prepareSetCopy","setPrototypeOf","__proto__","DraftMap","size","cb","thisArg","_value","_this","values","iterator","iteratorSymbol","_this2","next","r","done","_this3","DraftSet","enableAllPlugins","castDraft","castImmutable","hasSymbol","Symbol","hasProxies","Reflect","for","errors","data","getOwnPropertySymbols","getOwnPropertyNames","readPropFromProto","currentState","deleteProperty","owner","fn","arguments","apply","Immer","config","recipe","defaultBase","self","produce","hasError","Promise","then","arg1","arg2","produceWithPatches","ip","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","applyPatchesImpl","bind","DIRTY_PATHS","FLUSHING","NORMALIZING","PATH_REFS","POINT_REFS","RANGE_REFS","createEditor","editor","children","operations","selection","marks","isInline","isVoid","onChange","Editor","PathRef","PointRef","RangeRef","dirtyPaths","oldDirtyPaths","newDirtyPaths","getDirtyPaths","newPath","Path","Transforms","addMark","Range","match","Text","split","deleteBackward","unit","reverse","deleteForward","deleteFragment","direction","getFragment","Node","insertBreak","always","insertFragment","fragment","insertNode","node","insertText","text","inline","n","mode","point","anchor","focus","normalizeNode","Element","child","at","voids","shouldHaveInlines","currentNode","prev","isLast","isInlineOrText","newChild","loose","removeMark","levels","descendants","ancestors","previousPath","oldAncestors","newAncestors","newParent","newIndex","resultPath","nextPath","objectWithoutPropertiesLoose","SPACE","PUNCTUATION","CHAMELEON","SURROGATE_START","SURROGATE_END","ZERO_WIDTH_JOINER","getCharacterDistance","offset","charCode","isSurrogate","modifier","isModifier","isBMPEmoji","isVariationSelector","getWordDistance","started","char","l","rest","isWordCharacter","remaining","code","isAncestor","isElement","isElementList","val","isElementProps","props","matches","element","IS_EDITOR_CACHE","above","options","after","edge","range","distance","before","edges","end","first","hasBlocks","hasInlines","hasTexts","isBlock","isEditor","cachedIsEditor","Operation","isEnd","Point","isEdge","isEmpty","isNormalizing","isStart","start","last","leaf","isText","block","pointAfterLocation","span","universal","Span","to","nodeEntries","pass","isLower","hit","emit","normalize","force","allPaths","dirtyPath","max","m","parentPath","depth","hasPath","pathRef","affinity","ref","unref","pathRefs","refs","pointRef","pointRefs","isNewBlock","blockText","leafTextRemaining","leafTextOffset","e","reverseText","isFirst","calcDistance","previous","pointBeforeLocation","rangeRef","rangeRefs","string","unhangRange","endBlock","blockPath","skip","void","withoutNormalizing","Location","isLocation","isSpan","IS_NODE_LIST_CACHE","ancestor","c","root","childPath","common","descendant","extractProps","properties","newRoot","isNode","isNodeList","cachedResult","visited","nextIndex","isNodeOperation","isOperation","isOperationList","isSelectionOperation","isTextOperation","inverse","inversePath","inverseNewPath","newProperties","paths","another","av","bv","compare","endsAfter","as","bs","endsAt","endsBefore","equals","hasPrevious","isAfter","isBefore","isChild","isCommon","isDescendant","isParent","isPath","isSibling","al","bl","list","relative","transform","operation","position","onp","isPoint","includes","isAfterStart","isBeforeEnd","intersection","isBackward","isCollapsed","isExpanded","isForward","isRange","affinityAnchor","affinityFocus","isEqual","omitText","isTextList","isTextProps","decorations","leaves","o","middle","off","applyToDraft","prevPath","truePath","newNode","GeneralTransforms","NodeTransforms","insertNodes","hanging","select","nodes","isAtEnd","liftNodes","matchPath","parentNodeEntry","toPath","splitPath","mergeNodes","commonPath","isPreviousSibling","emptyAncestor","hasSingleChildNest","emptyRef","prevNode","moveNodes","toRef","targets","removeNodes","depths","setNodes","splitMode","endAtEndOfNode","startAtStartOfNode","k","splitNodes","height","deleteRange","beforeRef","voidMatch","nudge","afterPath","siblingHeight","voidPath","afterRef","lowestPath","highestPath","unsetNodes","unwrapNodes","wrapNodes","roots","a","commonNodeEntry","wrapperPath","lastPath","wrapper","commonNode","SelectionTransforms","collapse","deselect","move","opts","setPoint","setSelection","oldProps","newProps","TextTransforms","furthestVoid","endOfDoc","startBlock","isAcrossBlocks","isSingleText","startVoid","endVoid","startRef","endRef","inlineElementMatch","blockMatch","isBlockStart","isBlockEnd","mergeStart","mergeEnd","matcher","starts","middles","ends","starting","isInlineStart","isInlineEnd","middleRef","exports","IS_MAC","window","test","navigator","platform","MODIFIERS","alt","control","meta","shift","ALIASES","break","cmd","command","ctl","ctrl","del","down","esc","ins","left","mod","opt","option","return","right","space","spacebar","up","win","windows","CODES","backspace","tab","enter","pause","capslock","escape","pageup","pagedown","home","arrowleft","arrowup","arrowright","arrowdown","insert","numlock","scrolllock","f","isHotkey","hotkey","event","array","parseHotkey","check","some","compareHotkey","ret","isCodeHotkey","isKeyHotkey","byKey","replace","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","optional","endsWith","name","toKeyName","which","toKeyCode","err","expected","actual","toLowerCase","toUpperCase","charCodeAt","default","matchHtmlRegExp","module","escapeHtml","str","exec","html","lastIndex","substring","History","isHistory","HISTORY","SAVING","MERGING","HistoryEditor","isHistoryEditor","isMerging","isSaving","redo","undo","withoutMerging","withoutSaving","withHistory","undos","redos","history","batch","inverseOps","lastBatch","lastOp","overwrite","shouldOverwrite","save","merge","shouldSave","shouldMerge","shouldClear","ANCHOR","FOCUS","Token","AnchorToken","FocusToken","addAnchorToken","getAnchorOffset","addFocusToken","getFocusOffset","STRINGS","resolveDescendants","addChild","createAnchor","tagName","attributes","createCursor","createElement","createFocus","createFragment","createSelection","createText","otherChildren","selectionChild","makeEditor","DEFAULT_CREATORS","cursor","createHyperscript","elements","elementCreators","normalizeElements","creators","jsx","createFactory","creator","Boolean","el","nodeType","canOverflow","overflow","skipOverflowHiddenElements","isScrollable","clientHeight","scrollHeight","clientWidth","scrollWidth","style","getComputedStyle","overflowY","overflowX","frame","ownerDocument","defaultView","frameElement","getFrameElement","isHiddenByFrame","alignNearest","scrollingEdgeStart","scrollingEdgeEnd","scrollingSize","scrollingBorderStart","scrollingBorderEnd","elementEdgeStart","elementEdgeEnd","elementSize","windowWithViewport","scrollMode","boundary","checkBoundary","TypeError","scrollingElement","document","documentElement","frames","parentElement","body","viewportWidth","visualViewport","width","innerWidth","viewportHeight","innerHeight","viewportX","scrollX","pageXOffset","viewportY","scrollY","pageYOffset","getBoundingClientRect","targetHeight","targetWidth","targetTop","top","targetRight","targetBottom","bottom","targetLeft","targetBlock","targetInline","computations","frameStyle","borderLeft","parseInt","borderLeftWidth","borderTop","borderTopWidth","borderRight","borderRightWidth","borderBottom","borderBottomWidth","blockScroll","inlineScroll","scrollbarWidth","offsetWidth","scrollbarHeight","offsetHeight","scrollLeft","scrollTop","isOptionsObject","defaultBehavior","actions","behavior","canSmoothScroll","_ref","scroll","getOptions","scrollIntoView","targetIsDetached","contains","compute","computeOptions","isProduction","process","prefix","invariant","condition","message","String","useSlateStatic","ReactEditor","isLineBreak","React","isTrailing","TextString","ZeroWidthString","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","ELEMENT_TO_NODE","KEY_TO_ELEMENT","NODE_TO_ELEMENT","NODE_TO_KEY","IS_READ_ONLY","IS_FOCUSED","EDITOR_TO_ON_CHANGE","EDITOR_TO_RESTORE_DOM","PLACEHOLDER_SYMBOL","keyForString","Leaf","renderLeaf","placeholderRef","useRef","useEffect","placeholderEl","editorEl","placeholderProps","pointerEvents","maxWidth","display","opacity","userSelect","textDecoration","contentEditable","renderPlaceholder","MemoizedLeaf","DefaultLeaf","IS_IOS","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_SAFARI","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_FIREFOX_LEGACY","CAN_USE_DOM","HAS_BEFORE_INPUT_SUPPORT","globalThis","useIsomorphicLayoutEffect","shallowCompare","obj2","obj1","isDecoratorRangeListEqual","other","rangeOwnProps","otherOwnProps","SlateText","MemoizedText","SelectedContext","createContext","useSelected","useContext","renderElement","readOnly","useReadOnly","useChildren","dir","getDirection","Tag","color","outline","MemoizedElement","DefaultElement","EditorContext","DecorateContext","useDecorate","decorate","isLeafBlock","sel","ds","id","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","extendBackward","extendForward","italic","splitBlock","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","transposeCharacter","WINDOWS_HOTKEYS","generic","apple","isGeneric","isApple","isWindows","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSplitBlock","isTransposeCharacter","isUndo","ReadOnlyContext","SlateContext","useSlate","context","getDefaultView","isDOMComment","isDOMNode","isDOMElement","isDOMSelection","isDOMText","isPlainTextOnlyPaste","normalizeDOMPoint","domPoint","getEditableChildAndIndex","getEditableChild","hasShadowRoot","childNodes","triedForward","triedBackward","getPlainText","domNode","childNode","Editable","onDOMBeforeInput","Component","useMemo","isComposing","isDraggingInternally","isUpdatingSelection","latestElement","domSelection","hasDomSelection","editorElement","hasDomSelectionInEditor","slateRange","exactMatch","newDomRange","leafEl","setTimeout","useCallback","hasEditableTarget","isDOMEventHandled","inputType","onDOMSelectionChange","throttle","activeElement","focusNode","anchorNodeSelectable","isTargetInsideVoid","focusNodeSelectable","placeholder","role","spellCheck","autoCorrect","autoCapitalize","suppressContentEditableWarning","whiteSpace","wordWrap","onBeforeInput","isEventHandled","onBlur","relatedTarget","onClick","hasTarget","onCompositionEnd","onCompositionUpdate","onCompositionStart","onCopy","onCut","onDragOver","onDragStart","onDrop","draggedRange","onDragEnd","onFocus","onKeyDown","nativeEvent","isRTL","Hotkeys","maybeHistoryEditor","onPaste","DefaultPlaceholder","defaultDecorate","editable","slateNode","shouldTreatEventAsHandled","handler","Key","getWindow","findKey","findPath","findDocumentOrShadowRoot","isFocused","isReadOnly","blur","preventScroll","hasDOMNode","targetEl","insertData","setFragmentData","toDOMNode","toDOMPoint","selector","texts","attr","trueLength","toDOMRange","domAnchor","domFocus","domRange","startEl","startNode","isStartAtZeroWidth","endEl","endNode","isEndAtZeroWidth","toSlateNode","domEl","findEventRange","clientX","clientY","rect","isPrev","toSlatePoint","parentNode","nearestNode","textNode","voidNode","leafNode","contents","removals","toSlateRange","anchorNode","anchorOffset","focusOffset","hasRange","prevLength","nextLength","prevChar","nextChar","getDiffStart","maxEnd","getDiffEnd","offsets","diffText","getDiffOffsets","sliceText","removeText","combineInsertedText","insertedText","getTextInsertion","prevText","nextText","textDiff","textPath","normalizeTextInsertionRange","insertionRange","isSingleCharacterInsertion","characterBeforeAnchor","characterAfterAnchor","gatherMutationData","mutations","addedNodes","removedNodes","characterDataMutations","mutation","addedNode","removedNode","textInsertion","parentDOMNode","isDeletion","isReplaceExpandedSelection","isTextInsertion","isRemoveLeafNodes","restoreDOM","onRestoreDOM","console","AndroidInputManager","mutationData","insertion","useMutationObserver","callback","useState","mutationObserver","useTrackUserInput","receivedUserInput","animationFrameRef","onUserInput","MUTATION_OBSERVER_CONFIG","childList","characterData","characterDataOldValue","subtree","useAndroidInputManager","timeoutId","isReconciling","flush","inputManager","clearTimeout","AndroidEditable","setContentKey","contentKey","FocusedContext","useFocused","Slate","onContextChange","setKey","setIsFocused","useEditor","doRectsIntersect","compareRect","areRangesSameLine","rect1","rect2","findCurrentLineRange","parentRangeBoundary","positions","parentRange","withReact","parentBlockEntry","parentElementRange","currentLineRange","attach","zw","isNewline","encoded","encodeURIComponent","div","decoded","decodeURIComponent","parsed","lines","ReactDOM","DefaultEditable","insertWithoutScoping","cache","serialized","inserted","sheet","registered","css","className","registeredStyles","rawClassName","getRegisteredStyles","createEmotion","createCache","speedy","isSpeedy","compat","_len","_key","serializeStyles","insertStyles","keyframes","_len2","_key2","animation","styles","injectGlobal","_len3","_key3","cx","_len4","_key4","classnames","hydrate","ids","cls","arg","toAdd","_createEmotion","isObject","isObjectObject","ctor","prot","freeGlobal","require","freeSelf","freeExports","freeModule","global","regexSymbolWithCombiningMarks","regexSurrogatePair","$0","$1","$2","charAt","esrever","define","equal","RegExp","flags","valueOf","RTL","LTR","rtl","ltr","debounce","FUNC_ERROR_TEXT","func","wait","leading","trailing","now","toNumber","nativeMax","nativeMin","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","time","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","debounced","isInvoking","Date","baseTrim","isSymbol","NAN","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","trimmedEndIndex","reTrimStart","reWhitespace","baseGetTag","isObjectLike","symbolTag","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","toStringTag","objectProto","nativeObjectToString","isOwn","tag","unmasked"],"mappings":"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","file":"x","sourcesContent":["const errors = {\n\t0: \"Illegal state\",\n\t1: \"Immer drafts cannot have computed properties\",\n\t2: \"This object has been frozen and should not be mutated\",\n\t3(data: any) {\n\t\treturn (\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\tdata\n\t\t)\n\t},\n\t4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n\t5: \"Immer forbids circular references\",\n\t6: \"The first or second argument to `produce` must be a function\",\n\t7: \"The third argument to `produce` must be a function or undefined\",\n\t8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n\t9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n\t10: \"The given draft is already finalized\",\n\t11: \"Object.defineProperty() cannot be used on an Immer draft\",\n\t12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n\t13: \"Immer only supports deleting array indices\",\n\t14: \"Immer only supports setting array indices and the 'length' property\",\n\t15(path: string) {\n\t\treturn \"Cannot apply patch, path doesn't resolve: \" + path\n\t},\n\t16: 'Sets cannot have \"replace\" patches.',\n\t17(op: string) {\n\t\treturn \"Unsupported patch operation: \" + op\n\t},\n\t18(plugin: string) {\n\t\treturn `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`\n\t},\n\t20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n\t21(thing: string) {\n\t\treturn `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`\n\t},\n\t22(thing: string) {\n\t\treturn `'current' expects a draft, got: ${thing}`\n\t},\n\t23(thing: string) {\n\t\treturn `'original' expects a draft, got: ${thing}`\n\t},\n\t24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n} as const\n\nexport function die(error: keyof typeof errors, ...args: any[]): never {\n\tif (__DEV__) {\n\t\tconst e = errors[error]\n\t\tconst msg = !e\n\t\t\t? \"unknown error nr: \" + error\n\t\t\t: typeof e === \"function\"\n\t\t\t? e.apply(null, args as any)\n\t\t\t: e\n\t\tthrow new Error(`[Immer] ${msg}`)\n\t}\n\tthrow new Error(\n\t\t`[Immer] minified error nr: ${error}${\n\t\t\targs.length ? \" \" + args.map(s => `'${s}'`).join(\",\") : \"\"\n\t\t}. Find the full error at: https://bit.ly/3cXEKWf`\n\t)\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtypeObject,\n\tArchtypeArray,\n\tArchtypeMap,\n\tArchtypeSet,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\nconst objectCtorString = Object.prototype.constructor.toString()\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\tif (proto === null) {\n\t\treturn true\n\t}\n\tconst Ctor =\n\t\tObject.hasOwnProperty.call(proto, \"constructor\") && proto.constructor\n\treturn (\n\t\ttypeof Ctor == \"function\" &&\n\t\tFunction.toString.call(Ctor) === objectCtorString\n\t)\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (!isDraft(value)) die(23, value)\n\treturn value[DRAFT_STATE].base_\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors ||\n\tfunction getOwnPropertyDescriptors(target: any) {\n\t\t// Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n\t\tconst res: any = {}\n\t\townKeys(target).forEach(key => {\n\t\t\tres[key] = Object.getOwnPropertyDescriptor(target, key)\n\t\t})\n\t\treturn res\n\t}\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === ArchtypeObject) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key => {\n\t\t\tif (!enumerableOnly || typeof key !== \"symbol\") iter(key, obj[key], obj)\n\t\t})\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): 0 | 1 | 2 | 3 {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? ArchtypeArray\n\t\t: isMap(thing)\n\t\t? ArchtypeMap\n\t\t: isSet(thing)\n\t\t? ArchtypeSet\n\t\t: ArchtypeObject\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === ArchtypeMap\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === ArchtypeMap ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === ArchtypeMap) thing.set(propOrOldValue, value)\n\telse if (t === ArchtypeSet) {\n\t\tthing.delete(propOrOldValue)\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy(base: any) {\n\tif (Array.isArray(base)) return Array.prototype.slice.call(base)\n\tconst descriptors = getOwnPropertyDescriptors(base)\n\tdelete descriptors[DRAFT_STATE as any]\n\tlet keys = ownKeys(descriptors)\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key: any = keys[i]\n\t\tconst desc = descriptors[key]\n\t\tif (desc.writable === false) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable = true\n\t\t}\n\t\t// like object.assign, we will read any _own_, get/set accessors. This helps in dealing\n\t\t// with libraries that trap values, like mobx or vue\n\t\t// unlike object.assign, non-enumerables will be copied as well\n\t\tif (desc.get || desc.set)\n\t\t\tdescriptors[key] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true, // could live with !!desc.set as well here...\n\t\t\t\tenumerable: desc.enumerable,\n\t\t\t\tvalue: base[key]\n\t\t\t}\n\t}\n\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n}\n\n/**\n * Freezes draftable objects. Returns the original object.\n * By default freezes shallowly, but if the second argument is `true` it will freeze recursively.\n *\n * @param obj\n * @param deep\n */\nexport function freeze<T>(obj: T, deep?: boolean): T\nexport function freeze<T>(obj: any, deep: boolean = false): T {\n\tif (isFrozen(obj) || isDraft(obj) || !isDraftable(obj)) return obj\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n\treturn obj\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n","import {\n\tSetState,\n\tImmerScope,\n\tProxyObjectState,\n\tProxyArrayState,\n\tES5ObjectState,\n\tES5ArrayState,\n\tMapState,\n\tDRAFT_STATE\n} from \"../internal\"\n\nexport type Objectish = AnyObject | AnyArray | AnyMap | AnySet\nexport type ObjectishNoSet = AnyObject | AnyArray | AnyMap\n\nexport type AnyObject = {[key: string]: any}\nexport type AnyArray = Array<any>\nexport type AnySet = Set<any>\nexport type AnyMap = Map<any, any>\n\nexport const ArchtypeObject = 0\nexport const ArchtypeArray = 1\nexport const ArchtypeMap = 2\nexport const ArchtypeSet = 3\n\nexport const ProxyTypeProxyObject = 0\nexport const ProxyTypeProxyArray = 1\nexport const ProxyTypeES5Object = 4\nexport const ProxyTypeES5Array = 5\nexport const ProxyTypeMap = 2\nexport const ProxyTypeSet = 3\n\nexport interface ImmerBaseState {\n\tparent_?: ImmerState\n\tscope_: ImmerScope\n\tmodified_: boolean\n\tfinalized_: boolean\n\tisManual_: boolean\n}\n\nexport type ImmerState =\n\t| ProxyObjectState\n\t| ProxyArrayState\n\t| ES5ObjectState\n\t| ES5ArrayState\n\t| MapState\n\t| SetState\n\n// The _internal_ type used for drafts (not to be confused with Draft, which is public facing)\nexport type Drafted<Base = any, T extends ImmerState = ImmerState> = {\n\t[DRAFT_STATE]: T\n} & Base\n","import {\n\tImmerState,\n\tPatch,\n\tImmerScope,\n\tDrafted,\n\tAnyObject,\n\tImmerBaseState,\n\tAnyMap,\n\tAnySet,\n\tProxyTypeES5Array,\n\tProxyTypeES5Object,\n\tProxyTypeMap,\n\tProxyTypeSet,\n\tdie\n} from \"../internal\"\n\n/** Plugin utilities */\nconst plugins: {\n\tPatches?: {\n\t\tgeneratePatches_(\n\t\t\tstate: ImmerState,\n\t\t\tbasePath: PatchPath,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tgenerateReplacementPatches_(\n\t\t\trootState: ImmerState,\n\t\t\treplacement: any,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tapplyPatches_<T>(draft: T, patches: Patch[]): T\n\t}\n\tES5?: {\n\t\twillFinalizeES5_(scope: ImmerScope, result: any, isReplaced: boolean): void\n\t\tcreateES5Proxy_<T>(\n\t\t\tbase: T,\n\t\t\tparent?: ImmerState\n\t\t): Drafted<T, ES5ObjectState | ES5ArrayState>\n\t\thasChanges_(state: ES5ArrayState | ES5ObjectState): boolean\n\t}\n\tMapSet?: {\n\t\tproxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T\n\t\tproxySet_<T extends AnySet>(target: T, parent?: ImmerState): T\n\t}\n} = {}\n\ntype Plugins = typeof plugins\n\nexport function getPlugin<K extends keyof Plugins>(\n\tpluginKey: K\n): Exclude<Plugins[K], undefined> {\n\tconst plugin = plugins[pluginKey]\n\tif (!plugin) {\n\t\tdie(18, pluginKey)\n\t}\n\t// @ts-ignore\n\treturn plugin\n}\n\nexport function loadPlugin<K extends keyof Plugins>(\n\tpluginKey: K,\n\timplementation: Plugins[K]\n): void {\n\tif (!plugins[pluginKey]) plugins[pluginKey] = implementation\n}\n\n/** ES5 Plugin */\n\ninterface ES5BaseState extends ImmerBaseState {\n\tassigned_: {[key: string]: any}\n\tparent_?: ImmerState\n\trevoked_: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype_: typeof ProxyTypeES5Object\n\tdraft_: Drafted<AnyObject, ES5ObjectState>\n\tbase_: AnyObject\n\tcopy_: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype_: typeof ProxyTypeES5Array\n\tdraft_: Drafted<AnyObject, ES5ArrayState>\n\tbase_: any\n\tcopy_: any\n}\n\n/** Map / Set plugin */\n\nexport interface MapState extends ImmerBaseState {\n\ttype_: typeof ProxyTypeMap\n\tcopy_: AnyMap | undefined\n\tassigned_: Map<any, boolean> | undefined\n\tbase_: AnyMap\n\trevoked_: boolean\n\tdraft_: Drafted<AnyMap, MapState>\n}\n\nexport interface SetState extends ImmerBaseState {\n\ttype_: typeof ProxyTypeSet\n\tcopy_: AnySet | undefined\n\tbase_: AnySet\n\tdrafts_: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked_: boolean\n\tdraft_: Drafted<AnySet, SetState>\n}\n\n/** Patches plugin */\n\nexport type PatchPath = (string | number)[]\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tImmer,\n\tDRAFT_STATE,\n\tImmerState,\n\tProxyTypeProxyObject,\n\tProxyTypeProxyArray,\n\tgetPlugin\n} from \"../internal\"\nimport {die} from \"../utils/errors\"\n\n/** Each scope represents a `produce` call. */\n\nexport interface ImmerScope {\n\tpatches_?: Patch[]\n\tinversePatches_?: Patch[]\n\tcanAutoFreeze_: boolean\n\tdrafts_: any[]\n\tparent_?: ImmerScope\n\tpatchListener_?: PatchListener\n\timmer_: Immer\n\tunfinalizedDrafts_: number\n}\n\nlet currentScope: ImmerScope | undefined\n\nexport function getCurrentScope() {\n\tif (__DEV__ && !currentScope) die(0)\n\treturn currentScope!\n}\n\nfunction createScope(\n\tparent_: ImmerScope | undefined,\n\timmer_: Immer\n): ImmerScope {\n\treturn {\n\t\tdrafts_: [],\n\t\tparent_,\n\t\timmer_,\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tcanAutoFreeze_: true,\n\t\tunfinalizedDrafts_: 0\n\t}\n}\n\nexport function usePatchesInScope(\n\tscope: ImmerScope,\n\tpatchListener?: PatchListener\n) {\n\tif (patchListener) {\n\t\tgetPlugin(\"Patches\") // assert we have the plugin\n\t\tscope.patches_ = []\n\t\tscope.inversePatches_ = []\n\t\tscope.patchListener_ = patchListener\n\t}\n}\n\nexport function revokeScope(scope: ImmerScope) {\n\tleaveScope(scope)\n\tscope.drafts_.forEach(revokeDraft)\n\t// @ts-ignore\n\tscope.drafts_ = null\n}\n\nexport function leaveScope(scope: ImmerScope) {\n\tif (scope === currentScope) {\n\t\tcurrentScope = scope.parent_\n\t}\n}\n\nexport function enterScope(immer: Immer) {\n\treturn (currentScope = createScope(currentScope, immer))\n}\n\nfunction revokeDraft(draft: Drafted) {\n\tconst state: ImmerState = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type_ === ProxyTypeProxyObject ||\n\t\tstate.type_ === ProxyTypeProxyArray\n\t)\n\t\tstate.revoke_()\n\telse state.revoked_ = true\n}\n","import {\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tPatchPath,\n\teach,\n\thas,\n\tfreeze,\n\tImmerState,\n\tisDraft,\n\tSetState,\n\tset,\n\tProxyTypeES5Object,\n\tProxyTypeES5Array,\n\tProxyTypeSet,\n\tgetPlugin,\n\tdie,\n\trevokeScope,\n\tisFrozen,\n\tshallowCopy\n} from \"../internal\"\n\nexport function processResult(result: any, scope: ImmerScope) {\n\tscope.unfinalizedDrafts_ = scope.drafts_.length\n\tconst baseDraft = scope.drafts_![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\tif (!scope.immer_.useProxies_)\n\t\tgetPlugin(\"ES5\").willFinalizeES5_(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified_) {\n\t\t\trevokeScope(scope)\n\t\t\tdie(4)\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(scope, result)\n\t\t\tif (!scope.parent_) maybeFreeze(scope, result)\n\t\t}\n\t\tif (scope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(\n\t\t\t\tbaseDraft[DRAFT_STATE],\n\t\t\t\tresult,\n\t\t\t\tscope.patches_,\n\t\t\t\tscope.inversePatches_!\n\t\t\t)\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(scope, baseDraft, [])\n\t}\n\trevokeScope(scope)\n\tif (scope.patches_) {\n\t\tscope.patchListener_!(scope.patches_, scope.inversePatches_!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(rootScope: ImmerScope, value: any, path?: PatchPath) {\n\t// Don't recurse in tho recursive data structures\n\tif (isFrozen(value)) return value\n\n\tconst state: ImmerState = value[DRAFT_STATE]\n\t// A plain object, might need freezing, might contain drafts\n\tif (!state) {\n\t\teach(\n\t\t\tvalue,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, value, key, childValue, path),\n\t\t\ttrue // See #590, don't recurse into non-enumarable of non drafted objects\n\t\t)\n\t\treturn value\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope_ !== rootScope) return value\n\t// Unmodified draft, return the (frozen) original\n\tif (!state.modified_) {\n\t\tmaybeFreeze(rootScope, state.base_, true)\n\t\treturn state.base_\n\t}\n\t// Not finalized yet, let's do that now\n\tif (!state.finalized_) {\n\t\tstate.finalized_ = true\n\t\tstate.scope_.unfinalizedDrafts_--\n\t\tconst result =\n\t\t\t// For ES5, create a good copy from the draft first, with added keys and without deleted keys.\n\t\t\tstate.type_ === ProxyTypeES5Object || state.type_ === ProxyTypeES5Array\n\t\t\t\t? (state.copy_ = shallowCopy(state.draft_))\n\t\t\t\t: state.copy_\n\t\t// Finalize all children of the copy\n\t\t// For sets we clone before iterating, otherwise we can get in endless loop due to modifying during iteration, see #628\n\t\t// Although the original test case doesn't seem valid anyway, so if this in the way we can turn the next line\n\t\t// back to each(result, ....)\n\t\teach(\n\t\t\tstate.type_ === ProxyTypeSet ? new Set(result) : result,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, result, key, childValue, path)\n\t\t)\n\t\t// everything inside is frozen, we can freeze here\n\t\tmaybeFreeze(rootScope, result, false)\n\t\t// first time finalizing, let's create those patches\n\t\tif (path && rootScope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generatePatches_(\n\t\t\t\tstate,\n\t\t\t\tpath,\n\t\t\t\trootScope.patches_,\n\t\t\t\trootScope.inversePatches_!\n\t\t\t)\n\t\t}\n\t}\n\treturn state.copy_\n}\n\nfunction finalizeProperty(\n\trootScope: ImmerScope,\n\tparentState: undefined | ImmerState,\n\ttargetObject: any,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath\n) {\n\tif (__DEV__ && childValue === targetObject) die(5)\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tparentState &&\n\t\t\tparentState!.type_ !== ProxyTypeSet && // Set objects are atomic since they have no keys.\n\t\t\t!has((parentState as Exclude<ImmerState, SetState>).assigned_!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tconst res = finalize(rootScope, childValue, path)\n\t\tset(targetObject, prop, res)\n\t\t// Drafts from another scope must prevented to be frozen\n\t\t// if we got a draft back from finalize, we're in a nested produce and shouldn't freeze\n\t\tif (isDraft(res)) {\n\t\t\trootScope.canAutoFreeze_ = false\n\t\t} else return\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\tif (isDraftable(childValue) && !isFrozen(childValue)) {\n\t\tif (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n\t\t\t// optimization: if an object is not a draft, and we don't have to\n\t\t\t// deepfreeze everything, and we are sure that no drafts are left in the remaining object\n\t\t\t// cause we saw and finalized all drafts already; we can stop visiting the rest of the tree.\n\t\t\t// This benefits especially adding large data tree's without further processing.\n\t\t\t// See add-data.js perf test\n\t\t\treturn\n\t\t}\n\t\tfinalize(rootScope, childValue)\n\t\t// immer deep freezes plain objects, so if there is no parent state, we freeze as well\n\t\tif (!parentState || !parentState.scope_.parent_)\n\t\t\tmaybeFreeze(rootScope, childValue)\n\t}\n}\n\nfunction maybeFreeze(scope: ImmerScope, value: any, deep = false) {\n\tif (scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tgetCurrentScope,\n\tDRAFT_STATE,\n\tdie,\n\tcreateProxy,\n\tProxyTypeProxyObject,\n\tProxyTypeProxyArray\n} from \"../internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned_: {\n\t\t[property: string]: boolean\n\t}\n\tparent_?: ImmerState\n\trevoke_(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype_: typeof ProxyTypeProxyObject\n\tbase_: any\n\tcopy_: any\n\tdraft_: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype_: typeof ProxyTypeProxyArray\n\tbase_: AnyArray\n\tcopy_: AnyArray | null\n\tdraft_: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxyProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype_: isArray ? ProxyTypeProxyArray : (ProxyTypeProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified_: false,\n\t\t// Used during finalization.\n\t\tfinalized_: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned_: {},\n\t\t// The parent draft state.\n\t\tparent_: parent,\n\t\t// The base state.\n\t\tbase_: base,\n\t\t// The base proxy.\n\t\tdraft_: null as any, // set below\n\t\t// The base copy with any updated values.\n\t\tcopy_: null,\n\t\t// Called by the `produce` function.\n\t\trevoke_: null as any,\n\t\tisManual_: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft_ = proxy as any\n\tstate.revoke_ = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nexport const objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\n\t\tconst source = latest(state)\n\t\tif (!has(source, prop)) {\n\t\t\t// non-existing or non-own property...\n\t\t\treturn readPropFromProto(state, source, prop)\n\t\t}\n\t\tconst value = source[prop]\n\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\t// Check for existing draft in modified state.\n\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\tif (value === peek(state.base_, prop)) {\n\t\t\tprepareCopy(state)\n\t\t\treturn (state.copy_![prop as any] = createProxy(\n\t\t\t\tstate.scope_.immer_,\n\t\t\t\tvalue,\n\t\t\t\tstate\n\t\t\t))\n\t\t}\n\t\treturn value\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(\n\t\tstate: ProxyObjectState,\n\t\tprop: string /* strictly not, but helps TS */,\n\t\tvalue\n\t) {\n\t\tconst desc = getDescriptorFromProto(latest(state), prop)\n\t\tif (desc?.set) {\n\t\t\t// special case: if this write is captured by a setter, we have\n\t\t\t// to trigger it with the correct context\n\t\t\tdesc.set.call(state.draft_, value)\n\t\t\treturn true\n\t\t}\n\t\tif (!state.modified_) {\n\t\t\t// the last check is because we need to be able to distinguish setting a non-existig to undefined (which is a change)\n\t\t\t// from setting an existing property with value undefined to undefined (which is not a change)\n\t\t\tconst current = peek(latest(state), prop)\n\t\t\t// special case, if we assigning the original value to a draft, we can ignore the assignment\n\t\t\tconst currentState: ProxyObjectState = current?.[DRAFT_STATE]\n\t\t\tif (currentState && currentState.base_ === value) {\n\t\t\t\tstate.copy_![prop] = value\n\t\t\t\tstate.assigned_[prop] = false\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tif (is(value, current) && (value !== undefined || has(state.base_, prop)))\n\t\t\t\treturn true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\n\t\tif (state.copy_![prop] === value && typeof value !== \"number\") return true\n\n\t\t// @ts-ignore\n\t\tstate.copy_![prop] = value\n\t\tstate.assigned_[prop] = true\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base_, prop) !== undefined || prop in state.base_) {\n\t\t\tstate.assigned_[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned_[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy_) delete state.copy_[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (!desc) return desc\n\t\treturn {\n\t\t\twritable: true,\n\t\t\tconfigurable: state.type_ !== ProxyTypeProxyArray || prop !== \"length\",\n\t\t\tenumerable: desc.enumerable,\n\t\t\tvalue: owner[prop]\n\t\t}\n\t},\n\tdefineProperty() {\n\t\tdie(11)\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base_)\n\t},\n\tsetPrototypeOf() {\n\t\tdie(12)\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (__DEV__ && isNaN(parseInt(prop as any))) die(13)\n\treturn objectTraps.deleteProperty!.call(this, state[0], prop)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (__DEV__ && prop !== \"length\" && isNaN(parseInt(prop as any))) die(14)\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tconst source = state ? latest(state) : draft\n\treturn source[prop]\n}\n\nfunction readPropFromProto(state: ImmerState, source: any, prop: PropertyKey) {\n\tconst desc = getDescriptorFromProto(source, prop)\n\treturn desc\n\t\t? `value` in desc\n\t\t\t? desc.value\n\t\t\t: // This is a very special case, if the prop is a getter defined by the\n\t\t\t  // prototype, we should invoke it with the draft as context!\n\t\t\t  desc.get?.call(state.draft_)\n\t\t: undefined\n}\n\nfunction getDescriptorFromProto(\n\tsource: any,\n\tprop: PropertyKey\n): PropertyDescriptor | undefined {\n\t// 'in' checks proto!\n\tif (!(prop in source)) return undefined\n\tlet proto = Object.getPrototypeOf(source)\n\twhile (proto) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(proto, prop)\n\t\tif (desc) return desc\n\t\tproto = Object.getPrototypeOf(proto)\n\t}\n\treturn undefined\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified_) {\n\t\tstate.modified_ = true\n\t\tif (state.parent_) {\n\t\t\tmarkChanged(state.parent_)\n\t\t}\n\t}\n}\n\nexport function prepareCopy(state: {base_: any; copy_: any}) {\n\tif (!state.copy_) {\n\t\tstate.copy_ = shallowCopy(state.base_)\n\t}\n}\n","import {\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\tDrafted,\n\tisDraftable,\n\tprocessResult,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tisMap,\n\tisSet,\n\tcreateProxyProxy,\n\tgetPlugin,\n\tdie,\n\thasProxies,\n\tenterScope,\n\trevokeScope,\n\tleaveScope,\n\tusePatchesInScope,\n\tgetCurrentScope,\n\tNOTHING,\n\tfreeze,\n\tcurrent\n} from \"../internal\"\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies_: boolean = hasProxies\n\n\tautoFreeze_: boolean = true\n\n\tconstructor(config?: {useProxies?: boolean; autoFreeze?: boolean}) {\n\t\tif (typeof config?.useProxies === \"boolean\")\n\t\t\tthis.setUseProxies(config!.useProxies)\n\t\tif (typeof config?.autoFreeze === \"boolean\")\n\t\t\tthis.setAutoFreeze(config!.autoFreeze)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce: IProduce = (base: any, recipe?: any, patchListener?: any) => {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\tif (typeof recipe !== \"function\") die(6)\n\t\tif (patchListener !== undefined && typeof patchListener !== \"function\")\n\t\t\tdie(7)\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = enterScope(this)\n\t\t\tconst proxy = createProxy(this, base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) revokeScope(scope)\n\t\t\t\telse leaveScope(scope)\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\t\t\t\treturn processResult(result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\trevokeScope(scope)\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\treturn processResult(result, scope)\n\t\t} else if (!base || typeof base !== \"object\") {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === NOTHING) return undefined\n\t\t\tif (result === undefined) result = base\n\t\t\tif (this.autoFreeze_) freeze(result, true)\n\t\t\treturn result\n\t\t} else die(21, base)\n\t}\n\n\tproduceWithPatches: IProduceWithPatches = (\n\t\targ1: any,\n\t\targ2?: any,\n\t\targ3?: any\n\t): any => {\n\t\tif (typeof arg1 === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => arg1(draft, ...args))\n\t\t}\n\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst nextState = this.produce(arg1, arg2, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\t\treturn [nextState, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) die(8)\n\t\tif (isDraft(base)) base = current(base)\n\t\tconst scope = enterScope(this)\n\t\tconst proxy = createProxy(this, base, undefined)\n\t\tproxy[DRAFT_STATE].isManual_ = true\n\t\tleaveScope(scope)\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && (draft as any)[DRAFT_STATE]\n\t\tif (__DEV__) {\n\t\t\tif (!state || !state.isManual_) die(9)\n\t\t\tif (state.finalized_) die(10)\n\t\t}\n\t\tconst {scope_: scope} = state\n\t\tusePatchesInScope(scope, patchListener)\n\t\treturn processResult(undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is enabled.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze_ = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tif (value && !hasProxies) {\n\t\t\tdie(20)\n\t\t}\n\t\tthis.useProxies_ = value\n\t}\n\n\tapplyPatches(base: Objectish, patches: Patch[]) {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tconst applyPatchesImpl = getPlugin(\"Patches\").applyPatches_\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatchesImpl(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatchesImpl(draft, patches.slice(i + 1))\n\t\t)\n\t}\n}\n\nexport function createProxy<T extends Objectish>(\n\timmer: Immer,\n\tvalue: T,\n\tparent?: ImmerState\n): Drafted<T, ImmerState> {\n\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\tconst draft: Drafted = isMap(value)\n\t\t? getPlugin(\"MapSet\").proxyMap_(value, parent)\n\t\t: isSet(value)\n\t\t? getPlugin(\"MapSet\").proxySet_(value, parent)\n\t\t: immer.useProxies_\n\t\t? createProxyProxy(value, parent)\n\t\t: getPlugin(\"ES5\").createES5Proxy_(value, parent)\n\n\tconst scope = parent ? parent.scope_ : getCurrentScope()\n\tscope.drafts_.push(draft)\n\treturn draft\n}\n","import {\n\tdie,\n\tisDraft,\n\tshallowCopy,\n\teach,\n\tDRAFT_STATE,\n\tget,\n\tset,\n\tImmerState,\n\tisDraftable,\n\tArchtypeMap,\n\tArchtypeSet,\n\tgetArchtype,\n\tgetPlugin\n} from \"../internal\"\n\n/** Takes a snapshot of the current state of a draft and finalizes it (but without freezing). This is a great utility to print the current state during debugging (no Proxies in the way). The output of current can also be safely leaked outside the producer. */\nexport function current<T>(value: T): T\nexport function current(value: any): any {\n\tif (!isDraft(value)) die(22, value)\n\treturn currentImpl(value)\n}\n\nfunction currentImpl(value: any): any {\n\tif (!isDraftable(value)) return value\n\tconst state: ImmerState | undefined = value[DRAFT_STATE]\n\tlet copy: any\n\tconst archType = getArchtype(value)\n\tif (state) {\n\t\tif (\n\t\t\t!state.modified_ &&\n\t\t\t(state.type_ < 4 || !getPlugin(\"ES5\").hasChanges_(state as any))\n\t\t)\n\t\t\treturn state.base_\n\t\t// Optimization: avoid generating new drafts during copying\n\t\tstate.finalized_ = true\n\t\tcopy = copyHelper(value, archType)\n\t\tstate.finalized_ = false\n\t} else {\n\t\tcopy = copyHelper(value, archType)\n\t}\n\n\teach(copy, (key, childValue) => {\n\t\tif (state && get(state.base_, key) === childValue) return // no need to copy or search in something that didn't change\n\t\tset(copy, key, currentImpl(childValue))\n\t})\n\t// In the future, we might consider freezing here, based on the current settings\n\treturn archType === ArchtypeSet ? new Set(copy) : copy\n}\n\nfunction copyHelper(value: any, archType: number): any {\n\t// creates a shallow copy, even if it is a map or set\n\tswitch (archType) {\n\t\tcase ArchtypeMap:\n\t\t\treturn new Map(value)\n\t\tcase ArchtypeSet:\n\t\t\t// Set will be cloned as array temporarily, so that we can replace individual items\n\t\t\treturn Array.from(value)\n\t}\n\treturn shallowCopy(value)\n}\n","import {\n\tImmerState,\n\tDrafted,\n\tES5ArrayState,\n\tES5ObjectState,\n\teach,\n\thas,\n\tisDraft,\n\tlatest,\n\tDRAFT_STATE,\n\tis,\n\tloadPlugin,\n\tImmerScope,\n\tProxyTypeES5Array,\n\tProxyTypeES5Object,\n\tgetCurrentScope,\n\tdie,\n\tmarkChanged,\n\tobjectTraps,\n\townKeys,\n\tgetOwnPropertyDescriptors\n} from \"../internal\"\n\ntype ES5State = ES5ArrayState | ES5ObjectState\n\nexport function enableES5() {\n\tfunction willFinalizeES5_(\n\t\tscope: ImmerScope,\n\t\tresult: any,\n\t\tisReplaced: boolean\n\t) {\n\t\tif (!isReplaced) {\n\t\t\tif (scope.patches_) {\n\t\t\t\tmarkChangesRecursively(scope.drafts_![0])\n\t\t\t}\n\t\t\t// This is faster when we don't care about which attributes changed.\n\t\t\tmarkChangesSweep(scope.drafts_)\n\t\t}\n\t\t// When a child draft is returned, look for changes.\n\t\telse if (\n\t\t\tisDraft(result) &&\n\t\t\t(result[DRAFT_STATE] as ES5State).scope_ === scope\n\t\t) {\n\t\t\tmarkChangesSweep(scope.drafts_)\n\t\t}\n\t}\n\n\tfunction createES5Draft(isArray: boolean, base: any) {\n\t\tif (isArray) {\n\t\t\tconst draft = new Array(base.length)\n\t\t\tfor (let i = 0; i < base.length; i++)\n\t\t\t\tObject.defineProperty(draft, \"\" + i, proxyProperty(i, true))\n\t\t\treturn draft\n\t\t} else {\n\t\t\tconst descriptors = getOwnPropertyDescriptors(base)\n\t\t\tdelete descriptors[DRAFT_STATE as any]\n\t\t\tconst keys = ownKeys(descriptors)\n\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\tconst key: any = keys[i]\n\t\t\t\tdescriptors[key] = proxyProperty(\n\t\t\t\t\tkey,\n\t\t\t\t\tisArray || !!descriptors[key].enumerable\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n\t\t}\n\t}\n\n\tfunction createES5Proxy_<T>(\n\t\tbase: T,\n\t\tparent?: ImmerState\n\t): Drafted<T, ES5ObjectState | ES5ArrayState> {\n\t\tconst isArray = Array.isArray(base)\n\t\tconst draft = createES5Draft(isArray, base)\n\n\t\tconst state: ES5ObjectState | ES5ArrayState = {\n\t\t\ttype_: isArray ? ProxyTypeES5Array : (ProxyTypeES5Object as any),\n\t\t\tscope_: parent ? parent.scope_ : getCurrentScope(),\n\t\t\tmodified_: false,\n\t\t\tfinalized_: false,\n\t\t\tassigned_: {},\n\t\t\tparent_: parent,\n\t\t\t// base is the object we are drafting\n\t\t\tbase_: base,\n\t\t\t// draft is the draft object itself, that traps all reads and reads from either the base (if unmodified) or copy (if modified)\n\t\t\tdraft_: draft,\n\t\t\tcopy_: null,\n\t\t\trevoked_: false,\n\t\t\tisManual_: false\n\t\t}\n\n\t\tObject.defineProperty(draft, DRAFT_STATE, {\n\t\t\tvalue: state,\n\t\t\t// enumerable: false <- the default\n\t\t\twritable: true\n\t\t})\n\t\treturn draft\n\t}\n\n\t// property descriptors are recycled to make sure we don't create a get and set closure per property,\n\t// but share them all instead\n\tconst descriptors: {[prop: string]: PropertyDescriptor} = {}\n\n\tfunction proxyProperty(\n\t\tprop: string | number,\n\t\tenumerable: boolean\n\t): PropertyDescriptor {\n\t\tlet desc = descriptors[prop]\n\t\tif (desc) {\n\t\t\tdesc.enumerable = enumerable\n\t\t} else {\n\t\t\tdescriptors[prop] = desc = {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable,\n\t\t\t\tget(this: any) {\n\t\t\t\t\tconst state = this[DRAFT_STATE]\n\t\t\t\t\tif (__DEV__) assertUnrevoked(state)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\treturn objectTraps.get(state, prop)\n\t\t\t\t},\n\t\t\t\tset(this: any, value) {\n\t\t\t\t\tconst state = this[DRAFT_STATE]\n\t\t\t\t\tif (__DEV__) assertUnrevoked(state)\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tobjectTraps.set(state, prop, value)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn desc\n\t}\n\n\t// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\n\tfunction markChangesSweep(drafts: Drafted<any, ImmerState>[]) {\n\t\t// The natural order of drafts in the `scope` array is based on when they\n\t\t// were accessed. By processing drafts in reverse natural order, we have a\n\t\t// better chance of processing leaf nodes first. When a leaf node is known to\n\t\t// have changed, we can avoid any traversal of its ancestor nodes.\n\t\tfor (let i = drafts.length - 1; i >= 0; i--) {\n\t\t\tconst state: ES5State = drafts[i][DRAFT_STATE]\n\t\t\tif (!state.modified_) {\n\t\t\t\tswitch (state.type_) {\n\t\t\t\t\tcase ProxyTypeES5Array:\n\t\t\t\t\t\tif (hasArrayChanges(state)) markChanged(state)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase ProxyTypeES5Object:\n\t\t\t\t\t\tif (hasObjectChanges(state)) markChanged(state)\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction markChangesRecursively(object: any) {\n\t\tif (!object || typeof object !== \"object\") return\n\t\tconst state: ES5State | undefined = object[DRAFT_STATE]\n\t\tif (!state) return\n\t\tconst {base_, draft_, assigned_, type_} = state\n\t\tif (type_ === ProxyTypeES5Object) {\n\t\t\t// Look for added keys.\n\t\t\t// probably there is a faster way to detect changes, as sweep + recurse seems to do some\n\t\t\t// unnecessary work.\n\t\t\t// also: probably we can store the information we detect here, to speed up tree finalization!\n\t\t\teach(draft_, key => {\n\t\t\t\tif ((key as any) === DRAFT_STATE) return\n\t\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\t\tif ((base_ as any)[key] === undefined && !has(base_, key)) {\n\t\t\t\t\tassigned_[key] = true\n\t\t\t\t\tmarkChanged(state)\n\t\t\t\t} else if (!assigned_[key]) {\n\t\t\t\t\t// Only untouched properties trigger recursion.\n\t\t\t\t\tmarkChangesRecursively(draft_[key])\n\t\t\t\t}\n\t\t\t})\n\t\t\t// Look for removed keys.\n\t\t\teach(base_, key => {\n\t\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\t\tif (draft_[key] === undefined && !has(draft_, key)) {\n\t\t\t\t\tassigned_[key] = false\n\t\t\t\t\tmarkChanged(state)\n\t\t\t\t}\n\t\t\t})\n\t\t} else if (type_ === ProxyTypeES5Array) {\n\t\t\tif (hasArrayChanges(state as ES5ArrayState)) {\n\t\t\t\tmarkChanged(state)\n\t\t\t\tassigned_.length = true\n\t\t\t}\n\n\t\t\tif (draft_.length < base_.length) {\n\t\t\t\tfor (let i = draft_.length; i < base_.length; i++) assigned_[i] = false\n\t\t\t} else {\n\t\t\t\tfor (let i = base_.length; i < draft_.length; i++) assigned_[i] = true\n\t\t\t}\n\n\t\t\t// Minimum count is enough, the other parts has been processed.\n\t\t\tconst min = Math.min(draft_.length, base_.length)\n\n\t\t\tfor (let i = 0; i < min; i++) {\n\t\t\t\t// Only untouched indices trigger recursion.\n\t\t\t\tif (assigned_[i] === undefined) markChangesRecursively(draft_[i])\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction hasObjectChanges(state: ES5ObjectState) {\n\t\tconst {base_, draft_} = state\n\n\t\t// Search for added keys and changed keys. Start at the back, because\n\t\t// non-numeric keys are ordered by time of definition on the object.\n\t\tconst keys = ownKeys(draft_)\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\t\tconst key: any = keys[i]\n\t\t\tif (key === DRAFT_STATE) continue\n\t\t\tconst baseValue = base_[key]\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (baseValue === undefined && !has(base_, key)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\t// Once a base key is deleted, future changes go undetected, because its\n\t\t\t// descriptor is erased. This branch detects any missed changes.\n\t\t\telse {\n\t\t\t\tconst value = draft_[key]\n\t\t\t\tconst state: ImmerState = value && value[DRAFT_STATE]\n\t\t\t\tif (state ? state.base_ !== baseValue : !is(value, baseValue)) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// At this point, no keys were added or changed.\n\t\t// Compare key count to determine if keys were deleted.\n\t\tconst baseIsDraft = !!base_[DRAFT_STATE as any]\n\t\treturn keys.length !== ownKeys(base_).length + (baseIsDraft ? 0 : 1) // + 1 to correct for DRAFT_STATE\n\t}\n\n\tfunction hasArrayChanges(state: ES5ArrayState) {\n\t\tconst {draft_} = state\n\t\tif (draft_.length !== state.base_.length) return true\n\t\t// See #116\n\t\t// If we first shorten the length, our array interceptors will be removed.\n\t\t// If after that new items are added, result in the same original length,\n\t\t// those last items will have no intercepting property.\n\t\t// So if there is no own descriptor on the last position, we know that items were removed and added\n\t\t// N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n\t\t// the last one\n\t\tconst descriptor = Object.getOwnPropertyDescriptor(\n\t\t\tdraft_,\n\t\t\tdraft_.length - 1\n\t\t)\n\t\t// descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\t\tif (descriptor && !descriptor.get) return true\n\t\t// For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\t\treturn false\n\t}\n\n\tfunction hasChanges_(state: ES5State) {\n\t\treturn state.type_ === ProxyTypeES5Object\n\t\t\t? hasObjectChanges(state)\n\t\t\t: hasArrayChanges(state)\n\t}\n\n\tfunction assertUnrevoked(state: any /*ES5State | MapState | SetState*/) {\n\t\tif (state.revoked_) die(3, JSON.stringify(latest(state)))\n\t}\n\n\tloadPlugin(\"ES5\", {\n\t\tcreateES5Proxy_,\n\t\twillFinalizeES5_,\n\t\thasChanges_\n\t})\n}\n","import {\n\tImmerState,\n\tPatch,\n\tSetState,\n\tES5ArrayState,\n\tProxyArrayState,\n\tMapState,\n\tES5ObjectState,\n\tProxyObjectState,\n\tPatchPath,\n\tget,\n\teach,\n\thas,\n\tgetArchtype,\n\tisSet,\n\tisMap,\n\tloadPlugin,\n\tProxyTypeProxyObject,\n\tProxyTypeES5Object,\n\tProxyTypeMap,\n\tProxyTypeES5Array,\n\tProxyTypeProxyArray,\n\tProxyTypeSet,\n\tArchtypeMap,\n\tArchtypeSet,\n\tArchtypeArray,\n\tdie,\n\tisDraft,\n\tisDraftable,\n\tArchtypeObject\n} from \"../internal\"\n\nexport function enablePatches() {\n\tconst REPLACE = \"replace\"\n\tconst ADD = \"add\"\n\tconst REMOVE = \"remove\"\n\n\tfunction generatePatches_(\n\t\tstate: ImmerState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t): void {\n\t\tswitch (state.type_) {\n\t\t\tcase ProxyTypeProxyObject:\n\t\t\tcase ProxyTypeES5Object:\n\t\t\tcase ProxyTypeMap:\n\t\t\t\treturn generatePatchesFromAssigned(\n\t\t\t\t\tstate,\n\t\t\t\t\tbasePath,\n\t\t\t\t\tpatches,\n\t\t\t\t\tinversePatches\n\t\t\t\t)\n\t\t\tcase ProxyTypeES5Array:\n\t\t\tcase ProxyTypeProxyArray:\n\t\t\t\treturn generateArrayPatches(state, basePath, patches, inversePatches)\n\t\t\tcase ProxyTypeSet:\n\t\t\t\treturn generateSetPatches(\n\t\t\t\t\t(state as any) as SetState,\n\t\t\t\t\tbasePath,\n\t\t\t\t\tpatches,\n\t\t\t\t\tinversePatches\n\t\t\t\t)\n\t\t}\n\t}\n\n\tfunction generateArrayPatches(\n\t\tstate: ES5ArrayState | ProxyArrayState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t) {\n\t\tlet {base_, assigned_} = state\n\t\tlet copy_ = state.copy_!\n\n\t\t// Reduce complexity by ensuring `base` is never longer.\n\t\tif (copy_.length < base_.length) {\n\t\t\t// @ts-ignore\n\t\t\t;[base_, copy_] = [copy_, base_]\n\t\t\t;[patches, inversePatches] = [inversePatches, patches]\n\t\t}\n\n\t\t// Process replaced indices.\n\t\tfor (let i = 0; i < base_.length; i++) {\n\t\t\tif (assigned_[i] && copy_[i] !== base_[i]) {\n\t\t\t\tconst path = basePath.concat([i])\n\t\t\t\tpatches.push({\n\t\t\t\t\top: REPLACE,\n\t\t\t\t\tpath,\n\t\t\t\t\t// Need to maybe clone it, as it can in fact be the original value\n\t\t\t\t\t// due to the base/copy inversion at the start of this function\n\t\t\t\t\tvalue: clonePatchValueIfNeeded(copy_[i])\n\t\t\t\t})\n\t\t\t\tinversePatches.push({\n\t\t\t\t\top: REPLACE,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue: clonePatchValueIfNeeded(base_[i])\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\t// Process added indices.\n\t\tfor (let i = base_.length; i < copy_.length; i++) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: ADD,\n\t\t\t\tpath,\n\t\t\t\t// Need to maybe clone it, as it can in fact be the original value\n\t\t\t\t// due to the base/copy inversion at the start of this function\n\t\t\t\tvalue: clonePatchValueIfNeeded(copy_[i])\n\t\t\t})\n\t\t}\n\t\tif (base_.length < copy_.length) {\n\t\t\tinversePatches.push({\n\t\t\t\top: REPLACE,\n\t\t\t\tpath: basePath.concat([\"length\"]),\n\t\t\t\tvalue: base_.length\n\t\t\t})\n\t\t}\n\t}\n\n\t// This is used for both Map objects and normal objects.\n\tfunction generatePatchesFromAssigned(\n\t\tstate: MapState | ES5ObjectState | ProxyObjectState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t) {\n\t\tconst {base_, copy_} = state\n\t\teach(state.assigned_!, (key, assignedValue) => {\n\t\t\tconst origValue = get(base_, key)\n\t\t\tconst value = get(copy_!, key)\n\t\t\tconst op = !assignedValue ? REMOVE : has(base_, key) ? REPLACE : ADD\n\t\t\tif (origValue === value && op === REPLACE) return\n\t\t\tconst path = basePath.concat(key as any)\n\t\t\tpatches.push(op === REMOVE ? {op, path} : {op, path, value})\n\t\t\tinversePatches.push(\n\t\t\t\top === ADD\n\t\t\t\t\t? {op: REMOVE, path}\n\t\t\t\t\t: op === REMOVE\n\t\t\t\t\t? {op: ADD, path, value: clonePatchValueIfNeeded(origValue)}\n\t\t\t\t\t: {op: REPLACE, path, value: clonePatchValueIfNeeded(origValue)}\n\t\t\t)\n\t\t})\n\t}\n\n\tfunction generateSetPatches(\n\t\tstate: SetState,\n\t\tbasePath: PatchPath,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t) {\n\t\tlet {base_, copy_} = state\n\n\t\tlet i = 0\n\t\tbase_.forEach((value: any) => {\n\t\t\tif (!copy_!.has(value)) {\n\t\t\t\tconst path = basePath.concat([i])\n\t\t\t\tpatches.push({\n\t\t\t\t\top: REMOVE,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t\tinversePatches.unshift({\n\t\t\t\t\top: ADD,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t}\n\t\t\ti++\n\t\t})\n\t\ti = 0\n\t\tcopy_!.forEach((value: any) => {\n\t\t\tif (!base_.has(value)) {\n\t\t\t\tconst path = basePath.concat([i])\n\t\t\t\tpatches.push({\n\t\t\t\t\top: ADD,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t\tinversePatches.unshift({\n\t\t\t\t\top: REMOVE,\n\t\t\t\t\tpath,\n\t\t\t\t\tvalue\n\t\t\t\t})\n\t\t\t}\n\t\t\ti++\n\t\t})\n\t}\n\n\tfunction generateReplacementPatches_(\n\t\trootState: ImmerState,\n\t\treplacement: any,\n\t\tpatches: Patch[],\n\t\tinversePatches: Patch[]\n\t): void {\n\t\tpatches.push({\n\t\t\top: REPLACE,\n\t\t\tpath: [],\n\t\t\tvalue: replacement\n\t\t})\n\t\tinversePatches.push({\n\t\t\top: REPLACE,\n\t\t\tpath: [],\n\t\t\tvalue: rootState.base_\n\t\t})\n\t}\n\n\tfunction applyPatches_<T>(draft: T, patches: Patch[]): T {\n\t\tpatches.forEach(patch => {\n\t\t\tconst {path, op} = patch\n\n\t\t\tlet base: any = draft\n\t\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\t\tconst parentType = getArchtype(base)\n\t\t\t\tconst p = path[i]\n\t\t\t\t// See #738, avoid prototype pollution\n\t\t\t\tif (\n\t\t\t\t\t(parentType === ArchtypeObject || parentType === ArchtypeArray) &&\n\t\t\t\t\t(p === \"__proto__\" || p === \"constructor\")\n\t\t\t\t)\n\t\t\t\t\tdie(24)\n\t\t\t\tif (typeof base === \"function\" && p === \"prototype\") die(24)\n\t\t\t\tbase = get(base, p)\n\t\t\t\tif (typeof base !== \"object\") die(15, path.join(\"/\"))\n\t\t\t}\n\n\t\t\tconst type = getArchtype(base)\n\t\t\tconst value = deepClonePatchValue(patch.value) // used to clone patch to ensure original patch is not modified, see #411\n\t\t\tconst key = path[path.length - 1]\n\t\t\tswitch (op) {\n\t\t\t\tcase REPLACE:\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase ArchtypeMap:\n\t\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\t\tcase ArchtypeSet:\n\t\t\t\t\t\t\tdie(16)\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t// if value is an object, then it's assigned by reference\n\t\t\t\t\t\t\t// in the following add or remove ops, the value field inside the patch will also be modifyed\n\t\t\t\t\t\t\t// so we use value from the cloned patch\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t\t}\n\t\t\t\tcase ADD:\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase ArchtypeArray:\n\t\t\t\t\t\t\treturn base.splice(key as any, 0, value)\n\t\t\t\t\t\tcase ArchtypeMap:\n\t\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\t\tcase ArchtypeSet:\n\t\t\t\t\t\t\treturn base.add(value)\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t\t}\n\t\t\t\tcase REMOVE:\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase ArchtypeArray:\n\t\t\t\t\t\t\treturn base.splice(key as any, 1)\n\t\t\t\t\t\tcase ArchtypeMap:\n\t\t\t\t\t\t\treturn base.delete(key)\n\t\t\t\t\t\tcase ArchtypeSet:\n\t\t\t\t\t\t\treturn base.delete(patch.value)\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn delete base[key]\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\tdie(17, op)\n\t\t\t}\n\t\t})\n\n\t\treturn draft\n\t}\n\n\t// optimize: this is quite a performance hit, can we detect intelligently when it is needed?\n\t// E.g. auto-draft when new objects from outside are assigned and modified?\n\t// (See failing test when deepClone just returns obj)\n\tfunction deepClonePatchValue<T>(obj: T): T\n\tfunction deepClonePatchValue(obj: any) {\n\t\tif (!isDraftable(obj)) return obj\n\t\tif (Array.isArray(obj)) return obj.map(deepClonePatchValue)\n\t\tif (isMap(obj))\n\t\t\treturn new Map(\n\t\t\t\tArray.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n\t\t\t)\n\t\tif (isSet(obj)) return new Set(Array.from(obj).map(deepClonePatchValue))\n\t\tconst cloned = Object.create(Object.getPrototypeOf(obj))\n\t\tfor (const key in obj) cloned[key] = deepClonePatchValue(obj[key])\n\t\treturn cloned\n\t}\n\n\tfunction clonePatchValueIfNeeded<T>(obj: T): T {\n\t\tif (isDraft(obj)) {\n\t\t\treturn deepClonePatchValue(obj)\n\t\t} else return obj\n\t}\n\n\tloadPlugin(\"Patches\", {\n\t\tapplyPatches_,\n\t\tgeneratePatches_,\n\t\tgenerateReplacementPatches_\n\t})\n}\n","// types only!\nimport {\n\tImmerState,\n\tAnyMap,\n\tAnySet,\n\tMapState,\n\tSetState,\n\tDRAFT_STATE,\n\tgetCurrentScope,\n\tlatest,\n\titeratorSymbol,\n\tisDraftable,\n\tcreateProxy,\n\tloadPlugin,\n\tmarkChanged,\n\tProxyTypeMap,\n\tProxyTypeSet,\n\tdie,\n\teach\n} from \"../internal\"\n\nexport function enableMapSet() {\n\t/* istanbul ignore next */\n\tvar extendStatics = function(d: any, b: any): any {\n\t\textendStatics =\n\t\t\tObject.setPrototypeOf ||\n\t\t\t({__proto__: []} instanceof Array &&\n\t\t\t\tfunction(d, b) {\n\t\t\t\t\td.__proto__ = b\n\t\t\t\t}) ||\n\t\t\tfunction(d, b) {\n\t\t\t\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]\n\t\t\t}\n\t\treturn extendStatics(d, b)\n\t}\n\n\t// Ugly hack to resolve #502 and inherit built in Map / Set\n\tfunction __extends(d: any, b: any): any {\n\t\textendStatics(d, b)\n\t\tfunction __(this: any): any {\n\t\t\tthis.constructor = d\n\t\t}\n\t\td.prototype =\n\t\t\t// @ts-ignore\n\t\t\t((__.prototype = b.prototype), new __())\n\t}\n\n\tconst DraftMap = (function(_super) {\n\t\t__extends(DraftMap, _super)\n\t\t// Create class manually, cause #502\n\t\tfunction DraftMap(this: any, target: AnyMap, parent?: ImmerState): any {\n\t\t\tthis[DRAFT_STATE] = {\n\t\t\t\ttype_: ProxyTypeMap,\n\t\t\t\tparent_: parent,\n\t\t\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t\t\tmodified_: false,\n\t\t\t\tfinalized_: false,\n\t\t\t\tcopy_: undefined,\n\t\t\t\tassigned_: undefined,\n\t\t\t\tbase_: target,\n\t\t\t\tdraft_: this as any,\n\t\t\t\tisManual_: false,\n\t\t\t\trevoked_: false\n\t\t\t} as MapState\n\t\t\treturn this\n\t\t}\n\t\tconst p = DraftMap.prototype\n\n\t\tObject.defineProperty(p, \"size\", {\n\t\t\tget: function() {\n\t\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t\t}\n\t\t\t// enumerable: false,\n\t\t\t// configurable: true\n\t\t})\n\n\t\tp.has = function(key: any): boolean {\n\t\t\treturn latest(this[DRAFT_STATE]).has(key)\n\t\t}\n\n\t\tp.set = function(key: any, value: any) {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (!latest(state).has(key) || latest(state).get(key) !== value) {\n\t\t\t\tprepareMapCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.assigned_!.set(key, true)\n\t\t\t\tstate.copy_!.set(key, value)\n\t\t\t\tstate.assigned_!.set(key, true)\n\t\t\t}\n\t\t\treturn this\n\t\t}\n\n\t\tp.delete = function(key: any): boolean {\n\t\t\tif (!this.has(key)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareMapCopy(state)\n\t\t\tmarkChanged(state)\n\t\t\tstate.assigned_!.set(key, false)\n\t\t\tstate.copy_!.delete(key)\n\t\t\treturn true\n\t\t}\n\n\t\tp.clear = function() {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (latest(state).size) {\n\t\t\t\tprepareMapCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.assigned_ = new Map()\n\t\t\t\teach(state.base_, key => {\n\t\t\t\t\tstate.assigned_!.set(key, false)\n\t\t\t\t})\n\t\t\t\tstate.copy_!.clear()\n\t\t\t}\n\t\t}\n\n\t\tp.forEach = function(\n\t\t\tcb: (value: any, key: any, self: any) => void,\n\t\t\tthisArg?: any\n\t\t) {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tlatest(state).forEach((_value: any, key: any, _map: any) => {\n\t\t\t\tcb.call(thisArg, this.get(key), key, this)\n\t\t\t})\n\t\t}\n\n\t\tp.get = function(key: any): any {\n\t\t\tconst state: MapState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tconst value = latest(state).get(key)\n\t\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\t\treturn value\n\t\t\t}\n\t\t\tif (value !== state.base_.get(key)) {\n\t\t\t\treturn value // either already drafted or reassigned\n\t\t\t}\n\t\t\t// despite what it looks, this creates a draft only once, see above condition\n\t\t\tconst draft = createProxy(state.scope_.immer_, value, state)\n\t\t\tprepareMapCopy(state)\n\t\t\tstate.copy_!.set(key, draft)\n\t\t\treturn draft\n\t\t}\n\n\t\tp.keys = function(): IterableIterator<any> {\n\t\t\treturn latest(this[DRAFT_STATE]).keys()\n\t\t}\n\n\t\tp.values = function(): IterableIterator<any> {\n\t\t\tconst iterator = this.keys()\n\t\t\treturn {\n\t\t\t\t[iteratorSymbol]: () => this.values(),\n\t\t\t\tnext: () => {\n\t\t\t\t\tconst r = iterator.next()\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tif (r.done) return r\n\t\t\t\t\tconst value = this.get(r.value)\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdone: false,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} as any\n\t\t}\n\n\t\tp.entries = function(): IterableIterator<[any, any]> {\n\t\t\tconst iterator = this.keys()\n\t\t\treturn {\n\t\t\t\t[iteratorSymbol]: () => this.entries(),\n\t\t\t\tnext: () => {\n\t\t\t\t\tconst r = iterator.next()\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tif (r.done) return r\n\t\t\t\t\tconst value = this.get(r.value)\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdone: false,\n\t\t\t\t\t\tvalue: [r.value, value]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} as any\n\t\t}\n\n\t\tp[iteratorSymbol] = function() {\n\t\t\treturn this.entries()\n\t\t}\n\n\t\treturn DraftMap\n\t})(Map)\n\n\tfunction proxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T {\n\t\t// @ts-ignore\n\t\treturn new DraftMap(target, parent)\n\t}\n\n\tfunction prepareMapCopy(state: MapState) {\n\t\tif (!state.copy_) {\n\t\t\tstate.assigned_ = new Map()\n\t\t\tstate.copy_ = new Map(state.base_)\n\t\t}\n\t}\n\n\tconst DraftSet = (function(_super) {\n\t\t__extends(DraftSet, _super)\n\t\t// Create class manually, cause #502\n\t\tfunction DraftSet(this: any, target: AnySet, parent?: ImmerState) {\n\t\t\tthis[DRAFT_STATE] = {\n\t\t\t\ttype_: ProxyTypeSet,\n\t\t\t\tparent_: parent,\n\t\t\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t\t\tmodified_: false,\n\t\t\t\tfinalized_: false,\n\t\t\t\tcopy_: undefined,\n\t\t\t\tbase_: target,\n\t\t\t\tdraft_: this,\n\t\t\t\tdrafts_: new Map(),\n\t\t\t\trevoked_: false,\n\t\t\t\tisManual_: false\n\t\t\t} as SetState\n\t\t\treturn this\n\t\t}\n\t\tconst p = DraftSet.prototype\n\n\t\tObject.defineProperty(p, \"size\", {\n\t\t\tget: function() {\n\t\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t\t}\n\t\t\t// enumerable: true,\n\t\t})\n\n\t\tp.has = function(value: any): boolean {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\t// bit of trickery here, to be able to recognize both the value, and the draft of its value\n\t\t\tif (!state.copy_) {\n\t\t\t\treturn state.base_.has(value)\n\t\t\t}\n\t\t\tif (state.copy_.has(value)) return true\n\t\t\tif (state.drafts_.has(value) && state.copy_.has(state.drafts_.get(value)))\n\t\t\t\treturn true\n\t\t\treturn false\n\t\t}\n\n\t\tp.add = function(value: any): any {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (!this.has(value)) {\n\t\t\t\tprepareSetCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.copy_!.add(value)\n\t\t\t}\n\t\t\treturn this\n\t\t}\n\n\t\tp.delete = function(value: any): any {\n\t\t\tif (!this.has(value)) {\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareSetCopy(state)\n\t\t\tmarkChanged(state)\n\t\t\treturn (\n\t\t\t\tstate.copy_!.delete(value) ||\n\t\t\t\t(state.drafts_.has(value)\n\t\t\t\t\t? state.copy_!.delete(state.drafts_.get(value))\n\t\t\t\t\t: /* istanbul ignore next */ false)\n\t\t\t)\n\t\t}\n\n\t\tp.clear = function() {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tif (latest(state).size) {\n\t\t\t\tprepareSetCopy(state)\n\t\t\t\tmarkChanged(state)\n\t\t\t\tstate.copy_!.clear()\n\t\t\t}\n\t\t}\n\n\t\tp.values = function(): IterableIterator<any> {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareSetCopy(state)\n\t\t\treturn state.copy_!.values()\n\t\t}\n\n\t\tp.entries = function entries(): IterableIterator<[any, any]> {\n\t\t\tconst state: SetState = this[DRAFT_STATE]\n\t\t\tassertUnrevoked(state)\n\t\t\tprepareSetCopy(state)\n\t\t\treturn state.copy_!.entries()\n\t\t}\n\n\t\tp.keys = function(): IterableIterator<any> {\n\t\t\treturn this.values()\n\t\t}\n\n\t\tp[iteratorSymbol] = function() {\n\t\t\treturn this.values()\n\t\t}\n\n\t\tp.forEach = function forEach(cb: any, thisArg?: any) {\n\t\t\tconst iterator = this.values()\n\t\t\tlet result = iterator.next()\n\t\t\twhile (!result.done) {\n\t\t\t\tcb.call(thisArg, result.value, result.value, this)\n\t\t\t\tresult = iterator.next()\n\t\t\t}\n\t\t}\n\n\t\treturn DraftSet\n\t})(Set)\n\n\tfunction proxySet_<T extends AnySet>(target: T, parent?: ImmerState): T {\n\t\t// @ts-ignore\n\t\treturn new DraftSet(target, parent)\n\t}\n\n\tfunction prepareSetCopy(state: SetState) {\n\t\tif (!state.copy_) {\n\t\t\t// create drafts for all entries to preserve insertion order\n\t\t\tstate.copy_ = new Set()\n\t\t\tstate.base_.forEach(value => {\n\t\t\t\tif (isDraftable(value)) {\n\t\t\t\t\tconst draft = createProxy(state.scope_.immer_, value, state)\n\t\t\t\t\tstate.drafts_.set(value, draft)\n\t\t\t\t\tstate.copy_!.add(draft)\n\t\t\t\t} else {\n\t\t\t\t\tstate.copy_!.add(value)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction assertUnrevoked(state: any /*ES5State | MapState | SetState*/) {\n\t\tif (state.revoked_) die(3, JSON.stringify(latest(state)))\n\t}\n\n\tloadPlugin(\"MapSet\", {proxyMap_, proxySet_})\n}\n","import {enableES5} from \"./es5\"\nimport {enableMapSet} from \"./mapset\"\nimport {enablePatches} from \"./patches\"\n\nexport function enableAllPlugins() {\n\tenableES5()\n\tenableMapSet()\n\tenablePatches()\n}\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tcurrent,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable,\n\tfreeze\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * Always freeze by default, even in production mode\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n\nexport {enableES5} from \"./plugins/es5\"\nexport {enablePatches} from \"./plugins/patches\"\nexport {enableMapSet} from \"./plugins/mapset\"\nexport {enableAllPlugins} from \"./plugins/all\"\n","// Should be no imports here!\n\n// Some things that should be evaluated before all else...\n\n// We only want to know if non-polyfilled symbols are available\nconst hasSymbol =\n\ttypeof Symbol !== \"undefined\" && typeof Symbol(\"x\") === \"symbol\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\nexport const hasProxies =\n\ttypeof Proxy !== \"undefined\" &&\n\ttypeof Proxy.revocable !== \"undefined\" &&\n\ttypeof Reflect !== \"undefined\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol.for(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\n// Even a polyfilled Symbol might provide Symbol.iterator\nexport const iteratorSymbol: typeof Symbol.iterator =\n\t(typeof Symbol != \"undefined\" && Symbol.iterator) || (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import { Node, Ancestor, Editor, Range } from 'slate'\n\nimport { Key } from './key'\n\n/**\n * Two weak maps that allow us rebuild a path given a node. They are populated\n * at render time such that after a render occurs we can always backtrack.\n */\n\nexport const NODE_TO_INDEX: WeakMap<Node, number> = new WeakMap()\nexport const NODE_TO_PARENT: WeakMap<Node, Ancestor> = new WeakMap()\n\n/**\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\n * are used to resolve DOM event-related logic into Slate actions.\n */\nexport const EDITOR_TO_WINDOW: WeakMap<Editor, Window> = new WeakMap()\nexport const EDITOR_TO_ELEMENT: WeakMap<Editor, HTMLElement> = new WeakMap()\nexport const EDITOR_TO_PLACEHOLDER: WeakMap<Editor, string> = new WeakMap()\nexport const ELEMENT_TO_NODE: WeakMap<HTMLElement, Node> = new WeakMap()\nexport const KEY_TO_ELEMENT: WeakMap<Key, HTMLElement> = new WeakMap()\nexport const NODE_TO_ELEMENT: WeakMap<Node, HTMLElement> = new WeakMap()\nexport const NODE_TO_KEY: WeakMap<Node, Key> = new WeakMap()\n\n/**\n * Weak maps for storing editor-related state.\n */\n\nexport const IS_READ_ONLY: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_FOCUSED: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_DRAGGING: WeakMap<Editor, boolean> = new WeakMap()\nexport const IS_CLICKING: WeakMap<Editor, boolean> = new WeakMap()\n\n/**\n * Weak map for associating the context `onChange` context with the plugin.\n */\n\nexport const EDITOR_TO_ON_CHANGE = new WeakMap<Editor, () => void>()\n\nexport const EDITOR_TO_RESTORE_DOM = new WeakMap<Editor, () => void>()\n\n/**\n * Symbols.\n */\n\nexport const PLACEHOLDER_SYMBOL = (Symbol('placeholder') as unknown) as string\n","import {\n  Descendant,\n  Editor,\n  Element,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  PathRef,\n  PointRef,\n  Range,\n  RangeRef,\n  Text,\n  Transforms,\n} from './'\nimport { DIRTY_PATHS, FLUSHING } from './utils/weak-maps'\n\n/**\n * Create a new Slate `Editor` object.\n */\n\nexport const createEditor = (): Editor => {\n  const editor: Editor = {\n    children: [],\n    operations: [],\n    selection: null,\n    marks: null,\n    isInline: () => false,\n    isVoid: () => false,\n    onChange: () => {},\n\n    apply: (op: Operation) => {\n      for (const ref of Editor.pathRefs(editor)) {\n        PathRef.transform(ref, op)\n      }\n\n      for (const ref of Editor.pointRefs(editor)) {\n        PointRef.transform(ref, op)\n      }\n\n      for (const ref of Editor.rangeRefs(editor)) {\n        RangeRef.transform(ref, op)\n      }\n\n      const set = new Set()\n      const dirtyPaths: Path[] = []\n\n      const add = (path: Path | null) => {\n        if (path) {\n          const key = path.join(',')\n\n          if (!set.has(key)) {\n            set.add(key)\n            dirtyPaths.push(path)\n          }\n        }\n      }\n\n      const oldDirtyPaths = DIRTY_PATHS.get(editor) || []\n      const newDirtyPaths = getDirtyPaths(op)\n\n      for (const path of oldDirtyPaths) {\n        const newPath = Path.transform(path, op)\n        add(newPath)\n      }\n\n      for (const path of newDirtyPaths) {\n        add(path)\n      }\n\n      DIRTY_PATHS.set(editor, dirtyPaths)\n      Transforms.transform(editor, op)\n      editor.operations.push(op)\n      Editor.normalize(editor)\n\n      // Clear any formats applied to the cursor if the selection changes.\n      if (op.type === 'set_selection') {\n        editor.marks = null\n      }\n\n      if (!FLUSHING.get(editor)) {\n        FLUSHING.set(editor, true)\n\n        Promise.resolve().then(() => {\n          FLUSHING.set(editor, false)\n          editor.onChange()\n          editor.operations = []\n        })\n      }\n    },\n\n    addMark: (key: string, value: any) => {\n      const { selection } = editor\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.setNodes(\n            editor,\n            { [key]: value },\n            { match: Text.isText, split: true }\n          )\n        } else {\n          const marks = {\n            ...(Editor.marks(editor) || {}),\n            [key]: value,\n          }\n\n          editor.marks = marks\n          if (!FLUSHING.get(editor)) {\n            editor.onChange()\n          }\n        }\n      }\n    },\n\n    deleteBackward: (unit: 'character' | 'word' | 'line' | 'block') => {\n      const { selection } = editor\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, { unit, reverse: true })\n      }\n    },\n\n    deleteForward: (unit: 'character' | 'word' | 'line' | 'block') => {\n      const { selection } = editor\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, { unit })\n      }\n    },\n\n    deleteFragment: (direction?: 'forward' | 'backward') => {\n      const { selection } = editor\n\n      if (selection && Range.isExpanded(selection)) {\n        Transforms.delete(editor, { reverse: direction === 'backward' })\n      }\n    },\n\n    getFragment: () => {\n      const { selection } = editor\n\n      if (selection) {\n        return Node.fragment(editor, selection)\n      }\n      return []\n    },\n\n    insertBreak: () => {\n      Transforms.splitNodes(editor, { always: true })\n    },\n\n    insertFragment: (fragment: Node[]) => {\n      Transforms.insertFragment(editor, fragment)\n    },\n\n    insertNode: (node: Node) => {\n      Transforms.insertNodes(editor, node)\n    },\n\n    insertText: (text: string) => {\n      const { selection, marks } = editor\n\n      if (selection) {\n        // If the cursor is at the end of an inline, move it outside of\n        // the inline before inserting\n        if (Range.isCollapsed(selection)) {\n          const inline = Editor.above(editor, {\n            match: n => Editor.isInline(editor, n),\n            mode: 'highest',\n          })\n\n          if (inline) {\n            const [, inlinePath] = inline\n\n            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n              const point = Editor.after(editor, inlinePath)!\n              Transforms.setSelection(editor, {\n                anchor: point,\n                focus: point,\n              })\n            }\n          }\n        }\n\n        if (marks) {\n          const node = { text, ...marks }\n          Transforms.insertNodes(editor, node)\n        } else {\n          Transforms.insertText(editor, text)\n        }\n\n        editor.marks = null\n      }\n    },\n\n    normalizeNode: (entry: NodeEntry) => {\n      const [node, path] = entry\n\n      // There are no core normalizations for text nodes.\n      if (Text.isText(node)) {\n        return\n      }\n\n      // Ensure that block and inline nodes have at least one text child.\n      if (Element.isElement(node) && node.children.length === 0) {\n        const child = { text: '' }\n        Transforms.insertNodes(editor, child, {\n          at: path.concat(0),\n          voids: true,\n        })\n        return\n      }\n\n      // Determine whether the node should have block or inline children.\n      const shouldHaveInlines = Editor.isEditor(node)\n        ? false\n        : Element.isElement(node) &&\n          (editor.isInline(node) ||\n            node.children.length === 0 ||\n            Text.isText(node.children[0]) ||\n            editor.isInline(node.children[0]))\n\n      // Since we'll be applying operations while iterating, keep track of an\n      // index that accounts for any added/removed nodes.\n      let n = 0\n\n      for (let i = 0; i < node.children.length; i++, n++) {\n        const currentNode = Node.get(editor, path)\n        if (Text.isText(currentNode)) continue\n        const child = node.children[i] as Descendant\n        const prev = currentNode.children[n - 1] as Descendant\n        const isLast = i === node.children.length - 1\n        const isInlineOrText =\n          Text.isText(child) ||\n          (Element.isElement(child) && editor.isInline(child))\n\n        // Only allow block nodes in the top-level children and parent blocks\n        // that only contain block nodes. Similarly, only allow inline nodes in\n        // other inline nodes, or parent blocks that only contain inlines and\n        // text.\n        if (isInlineOrText !== shouldHaveInlines) {\n          Transforms.removeNodes(editor, { at: path.concat(n), voids: true })\n          n--\n        } else if (Element.isElement(child)) {\n          // Ensure that inline nodes are surrounded by text nodes.\n          if (editor.isInline(child)) {\n            if (prev == null || !Text.isText(prev)) {\n              const newChild = { text: '' }\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n),\n                voids: true,\n              })\n              n++\n            } else if (isLast) {\n              const newChild = { text: '' }\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n + 1),\n                voids: true,\n              })\n              n++\n            }\n          }\n        } else {\n          // Merge adjacent text nodes that are empty or match.\n          if (prev != null && Text.isText(prev)) {\n            if (Text.equals(child, prev, { loose: true })) {\n              Transforms.mergeNodes(editor, { at: path.concat(n), voids: true })\n              n--\n            } else if (prev.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n - 1),\n                voids: true,\n              })\n              n--\n            } else if (isLast && child.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n),\n                voids: true,\n              })\n              n--\n            }\n          }\n        }\n      }\n    },\n\n    removeMark: (key: string) => {\n      const { selection } = editor\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.unsetNodes(editor, key, {\n            match: Text.isText,\n            split: true,\n          })\n        } else {\n          const marks = { ...(Editor.marks(editor) || {}) }\n          delete marks[key]\n          editor.marks = marks\n          if (!FLUSHING.get(editor)) {\n            editor.onChange()\n          }\n        }\n      }\n    },\n  }\n\n  return editor\n}\n\n/**\n * Get the \"dirty\" paths generated from an operation.\n */\n\nconst getDirtyPaths = (op: Operation): Path[] => {\n  switch (op.type) {\n    case 'insert_text':\n    case 'remove_text':\n    case 'set_node': {\n      const { path } = op\n      return Path.levels(path)\n    }\n\n    case 'insert_node': {\n      const { node, path } = op\n      const levels = Path.levels(path)\n      const descendants = Text.isText(node)\n        ? []\n        : Array.from(Node.nodes(node), ([, p]) => path.concat(p))\n\n      return [...levels, ...descendants]\n    }\n\n    case 'merge_node': {\n      const { path } = op\n      const ancestors = Path.ancestors(path)\n      const previousPath = Path.previous(path)\n      return [...ancestors, previousPath]\n    }\n\n    case 'move_node': {\n      const { path, newPath } = op\n\n      if (Path.equals(path, newPath)) {\n        return []\n      }\n\n      const oldAncestors: Path[] = []\n      const newAncestors: Path[] = []\n\n      for (const ancestor of Path.ancestors(path)) {\n        const p = Path.transform(ancestor, op)\n        oldAncestors.push(p!)\n      }\n\n      for (const ancestor of Path.ancestors(newPath)) {\n        const p = Path.transform(ancestor, op)\n        newAncestors.push(p!)\n      }\n\n      const newParent = newAncestors[newAncestors.length - 1]\n      const newIndex = newPath[newPath.length - 1]\n      const resultPath = newParent.concat(newIndex)\n\n      return [...oldAncestors, ...newAncestors, resultPath]\n    }\n\n    case 'remove_node': {\n      const { path } = op\n      const ancestors = Path.ancestors(path)\n      return [...ancestors]\n    }\n\n    case 'split_node': {\n      const { path } = op\n      const levels = Path.levels(path)\n      const nextPath = Path.next(path)\n      return [...levels, nextPath]\n    }\n\n    default: {\n      return []\n    }\n  }\n}\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/**\n * Constants for string distance checking.\n */\n\nconst SPACE = /\\s/\nconst PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/\nconst CHAMELEON = /['\\u2018\\u2019]/\nconst SURROGATE_START = 0xd800\nconst SURROGATE_END = 0xdfff\nconst ZERO_WIDTH_JOINER = 0x200d\n\n/**\n * Get the distance to the end of the first character in a string of text.\n */\n\nexport const getCharacterDistance = (text: string): number => {\n  let offset = 0\n  // prev types:\n  // SURR: surrogate pair\n  // MOD: modifier (technically also surrogate pair)\n  // ZWJ: zero width joiner\n  // VAR: variation selector\n  // BMP: sequenceable character from basic multilingual plane\n  let prev: 'SURR' | 'MOD' | 'ZWJ' | 'VAR' | 'BMP' | null = null\n  let charCode = text.charCodeAt(0)\n\n  while (charCode) {\n    if (isSurrogate(charCode)) {\n      const modifier = isModifier(charCode, text, offset)\n\n      // Early returns are the heart of this function, where we decide if previous and current\n      // codepoints should form a single character (in terms of how many of them should selection\n      // jump over).\n      if (prev === 'SURR' || prev === 'BMP') {\n        break\n      }\n\n      offset += 2\n      prev = modifier ? 'MOD' : 'SURR'\n      charCode = text.charCodeAt(offset)\n      // Absolutely fine to `continue` without any checks because if `charCode` is NaN (which\n      // is the case when out of `text` range), next `while` loop won\"t execute and we\"re done.\n      continue\n    }\n\n    if (charCode === ZERO_WIDTH_JOINER) {\n      offset += 1\n      prev = 'ZWJ'\n      charCode = text.charCodeAt(offset)\n\n      continue\n    }\n\n    if (isBMPEmoji(charCode)) {\n      if (prev && prev !== 'ZWJ' && prev !== 'VAR') {\n        break\n      }\n      offset += 1\n      prev = 'BMP'\n      charCode = text.charCodeAt(offset)\n\n      continue\n    }\n\n    if (isVariationSelector(charCode)) {\n      if (prev && prev !== 'ZWJ') {\n        break\n      }\n      offset += 1\n      prev = 'VAR'\n      charCode = text.charCodeAt(offset)\n      continue\n    }\n\n    // Modifier 'groups up' with what ever character is before that (even whitespace), need to\n    // look ahead.\n    if (prev === 'MOD') {\n      offset += 1\n      break\n    }\n\n    // If while loop ever gets here, we're done (e.g latin chars).\n    break\n  }\n\n  return offset || 1\n}\n\n/**\n * Get the distance to the end of the first word in a string of text.\n */\n\nexport const getWordDistance = (text: string): number => {\n  let length = 0\n  let i = 0\n  let started = false\n  let char\n\n  while ((char = text.charAt(i))) {\n    const l = getCharacterDistance(char)\n    char = text.slice(i, i + l)\n    const rest = text.slice(i + l)\n\n    if (isWordCharacter(char, rest)) {\n      started = true\n      length += l\n    } else if (!started) {\n      length += l\n    } else {\n      break\n    }\n\n    i += l\n  }\n\n  return length\n}\n\n/**\n * Check if a character is a word character. The `remaining` argument is used\n * because sometimes you must read subsequent characters to truly determine it.\n */\n\nconst isWordCharacter = (char: string, remaining: string): boolean => {\n  if (SPACE.test(char)) {\n    return false\n  }\n\n  // Chameleons count as word characters as long as they're in a word, so\n  // recurse to see if the next one is a word character or not.\n  if (CHAMELEON.test(char)) {\n    let next = remaining.charAt(0)\n    const length = getCharacterDistance(next)\n    next = remaining.slice(0, length)\n    const rest = remaining.slice(length)\n\n    if (isWordCharacter(next, rest)) {\n      return true\n    }\n  }\n\n  if (PUNCTUATION.test(char)) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Determines if `code` is a surrogate\n */\n\nconst isSurrogate = (code: number): boolean =>\n  SURROGATE_START <= code && code <= SURROGATE_END\n\n/**\n * Does `code` form Modifier with next one.\n *\n * https://emojipedia.org/modifiers/\n */\n\nconst isModifier = (code: number, text: string, offset: number): boolean => {\n  if (code === 0xd83c) {\n    const next = text.charCodeAt(offset + 1)\n    return next <= 0xdfff && next >= 0xdffb\n  }\n  return false\n}\n\n/**\n * Is `code` a Variation Selector.\n *\n * https://codepoints.net/variation_selectors\n */\n\nconst isVariationSelector = (code: number): boolean => {\n  return code <= 0xfe0f && code >= 0xfe00\n}\n\n/**\n * Is `code` one of the BMP codes used in emoji sequences.\n *\n * https://emojipedia.org/emoji-zwj-sequences/\n */\n\nconst isBMPEmoji = (code: number): boolean => {\n  // This requires tiny bit of maintanance, better ideas?\n  // Fortunately it only happens if new Unicode Standard\n  // is released. Fails gracefully if upkeep lags behind,\n  // same way Slate previously behaved with all emojis.\n  return (\n    code === 0x2764 || // heart (❤)\n    code === 0x2642 || // male (♂)\n    code === 0x2640 || // female (♀)\n    code === 0x2620 || // scull (☠)\n    code === 0x2695 || // medical (⚕)\n    code === 0x2708 || // plane (✈️)\n    code === 0x25ef // large circle (◯)\n  )\n}\n","import isPlainObject from 'is-plain-object'\nimport { Editor, Node, Path, Descendant, ExtendedType, Ancestor } from '..'\n\n/**\n * `Element` objects are a type of node in a Slate document that contain other\n * element nodes or text nodes. They can be either \"blocks\" or \"inlines\"\n * depending on the Slate editor's configuration.\n */\n\nexport interface BaseElement {\n  children: Descendant[]\n}\n\nexport type Element = ExtendedType<'Element', BaseElement>\n\nexport interface ElementInterface {\n  isAncestor: (value: any) => value is Ancestor\n  isElement: (value: any) => value is Element\n  isElementList: (value: any) => value is Element[]\n  isElementProps: (props: any) => props is Partial<Element>\n  matches: (element: Element, props: Partial<Element>) => boolean\n}\n\nexport const Element: ElementInterface = {\n  /**\n   * Check if a value implements the 'Ancestor' interface.\n   */\n\n  isAncestor(value: any): value is Ancestor {\n    return isPlainObject(value) && Node.isNodeList(value.children)\n  },\n\n  /**\n   * Check if a value implements the `Element` interface.\n   */\n\n  isElement(value: any): value is Element {\n    return (\n      isPlainObject(value) &&\n      Node.isNodeList(value.children) &&\n      !Editor.isEditor(value)\n    )\n  },\n\n  /**\n   * Check if a value is an array of `Element` objects.\n   */\n\n  isElementList(value: any): value is Element[] {\n    return Array.isArray(value) && value.every(val => Element.isElement(val))\n  },\n\n  /**\n   * Check if a set of props is a partial of Element.\n   */\n\n  isElementProps(props: any): props is Partial<Element> {\n    return (props as Partial<Element>).children !== undefined\n  },\n\n  /**\n   * Check if an element matches set of properties.\n   *\n   * Note: this checks custom properties, and it does not ensure that any\n   * children are equivalent.\n   */\n\n  matches(element: Element, props: Partial<Element>): boolean {\n    for (const key in props) {\n      if (key === 'children') {\n        continue\n      }\n\n      if (element[key] !== props[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n}\n\n/**\n * `ElementEntry` objects refer to an `Element` and the `Path` where it can be\n * found inside a root node.\n */\n\nexport type ElementEntry = [Element, Path]\n","import isPlainObject from 'is-plain-object'\nimport { reverse as reverseText } from 'esrever'\n\nimport {\n  Ancestor,\n  ExtendedType,\n  Location,\n  Node,\n  NodeEntry,\n  Operation,\n  Path,\n  PathRef,\n  Point,\n  PointRef,\n  Range,\n  RangeRef,\n  Span,\n  Text,\n  Transforms,\n} from '..'\nimport {\n  DIRTY_PATHS,\n  NORMALIZING,\n  PATH_REFS,\n  POINT_REFS,\n  RANGE_REFS,\n} from '../utils/weak-maps'\nimport { getWordDistance, getCharacterDistance } from '../utils/string'\nimport { Descendant } from './node'\nimport { Element } from './element'\n\nexport type BaseSelection = Range | null\n\nexport type Selection = ExtendedType<'Selection', BaseSelection>\n\n/**\n * The `Editor` interface stores all the state of a Slate editor. It is extended\n * by plugins that wish to add their own helpers and implement new behaviors.\n */\n\nexport interface BaseEditor {\n  children: Descendant[]\n  selection: Selection\n  operations: Operation[]\n  marks: Omit<Text, 'text'> | null\n\n  // Schema-specific node behaviors.\n  isInline: (element: Element) => boolean\n  isVoid: (element: Element) => boolean\n  normalizeNode: (entry: NodeEntry) => void\n  onChange: () => void\n\n  // Overrideable core actions.\n  addMark: (key: string, value: any) => void\n  apply: (operation: Operation) => void\n  deleteBackward: (unit: 'character' | 'word' | 'line' | 'block') => void\n  deleteForward: (unit: 'character' | 'word' | 'line' | 'block') => void\n  deleteFragment: (direction?: 'forward' | 'backward') => void\n  getFragment: () => Descendant[]\n  insertBreak: () => void\n  insertFragment: (fragment: Node[]) => void\n  insertNode: (node: Node) => void\n  insertText: (text: string) => void\n  removeMark: (key: string) => void\n}\n\nexport type Editor = ExtendedType<'Editor', BaseEditor>\n\nexport interface EditorInterface {\n  above: <T extends Ancestor>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      voids?: boolean\n    }\n  ) => NodeEntry<T> | undefined\n  addMark: (editor: Editor, key: string, value: any) => void\n  after: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      voids?: boolean\n    }\n  ) => Point | undefined\n  before: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      voids?: boolean\n    }\n  ) => Point | undefined\n  deleteBackward: (\n    editor: Editor,\n    options?: {\n      unit?: 'character' | 'word' | 'line' | 'block'\n    }\n  ) => void\n  deleteForward: (\n    editor: Editor,\n    options?: {\n      unit?: 'character' | 'word' | 'line' | 'block'\n    }\n  ) => void\n  deleteFragment: (\n    editor: Editor,\n    options?: {\n      direction?: 'forward' | 'backward'\n    }\n  ) => void\n  edges: (editor: Editor, at: Location) => [Point, Point]\n  end: (editor: Editor, at: Location) => Point\n  first: (editor: Editor, at: Location) => NodeEntry\n  fragment: (editor: Editor, at: Location) => Descendant[]\n  hasBlocks: (editor: Editor, element: Element) => boolean\n  hasInlines: (editor: Editor, element: Element) => boolean\n  hasPath: (editor: Editor, path: Path) => boolean\n  hasTexts: (editor: Editor, element: Element) => boolean\n  insertBreak: (editor: Editor) => void\n  insertFragment: (editor: Editor, fragment: Node[]) => void\n  insertNode: (editor: Editor, node: Node) => void\n  insertText: (editor: Editor, text: string) => void\n  isBlock: (editor: Editor, value: any) => value is Element\n  isEditor: (value: any) => value is Editor\n  isEnd: (editor: Editor, point: Point, at: Location) => boolean\n  isEdge: (editor: Editor, point: Point, at: Location) => boolean\n  isEmpty: (editor: Editor, element: Element) => boolean\n  isInline: (editor: Editor, value: any) => value is Element\n  isNormalizing: (editor: Editor) => boolean\n  isStart: (editor: Editor, point: Point, at: Location) => boolean\n  isVoid: (editor: Editor, value: any) => value is Element\n  last: (editor: Editor, at: Location) => NodeEntry\n  leaf: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      depth?: number\n      edge?: 'start' | 'end'\n    }\n  ) => NodeEntry<Text>\n  levels: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      reverse?: boolean\n      voids?: boolean\n    }\n  ) => Generator<NodeEntry<T>, void, undefined>\n  marks: (editor: Editor) => Omit<Text, 'text'> | null\n  next: <T extends Descendant>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    }\n  ) => NodeEntry<T> | undefined\n  node: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      depth?: number\n      edge?: 'start' | 'end'\n    }\n  ) => NodeEntry\n  nodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location | Span\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      universal?: boolean\n      reverse?: boolean\n      voids?: boolean\n    }\n  ) => Generator<NodeEntry<T>, void, undefined>\n  normalize: (\n    editor: Editor,\n    options?: {\n      force?: boolean\n    }\n  ) => void\n  parent: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      depth?: number\n      edge?: 'start' | 'end'\n    }\n  ) => NodeEntry<Ancestor>\n  path: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      depth?: number\n      edge?: 'start' | 'end'\n    }\n  ) => Path\n  pathRef: (\n    editor: Editor,\n    path: Path,\n    options?: {\n      affinity?: 'backward' | 'forward' | null\n    }\n  ) => PathRef\n  pathRefs: (editor: Editor) => Set<PathRef>\n  point: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      edge?: 'start' | 'end'\n    }\n  ) => Point\n  pointRef: (\n    editor: Editor,\n    point: Point,\n    options?: {\n      affinity?: 'backward' | 'forward' | null\n    }\n  ) => PointRef\n  pointRefs: (editor: Editor) => Set<PointRef>\n  positions: (\n    editor: Editor,\n    options?: {\n      at?: Location\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      reverse?: boolean\n      voids?: boolean\n    }\n  ) => Generator<Point, void, undefined>\n  previous: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    }\n  ) => NodeEntry<T> | undefined\n  range: (editor: Editor, at: Location, to?: Location) => Range\n  rangeRef: (\n    editor: Editor,\n    range: Range,\n    options?: {\n      affinity?: 'backward' | 'forward' | 'outward' | 'inward' | null\n    }\n  ) => RangeRef\n  rangeRefs: (editor: Editor) => Set<RangeRef>\n  removeMark: (editor: Editor, key: string) => void\n  start: (editor: Editor, at: Location) => Point\n  string: (\n    editor: Editor,\n    at: Location,\n    options?: {\n      voids?: boolean\n    }\n  ) => string\n  unhangRange: (\n    editor: Editor,\n    range: Range,\n    options?: {\n      voids?: boolean\n    }\n  ) => Range\n  void: (\n    editor: Editor,\n    options?: {\n      at?: Location\n      mode?: 'highest' | 'lowest'\n      voids?: boolean\n    }\n  ) => NodeEntry<Element> | undefined\n  withoutNormalizing: (editor: Editor, fn: () => void) => void\n}\n\nconst IS_EDITOR_CACHE = new WeakMap<object, boolean>()\n\nexport const Editor: EditorInterface = {\n  /**\n   * Get the ancestor above a location in the document.\n   */\n\n  above<T extends Ancestor>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<T> | undefined {\n    const {\n      voids = false,\n      mode = 'lowest',\n      at = editor.selection,\n      match,\n    } = options\n\n    if (!at) {\n      return\n    }\n\n    const path = Editor.path(editor, at)\n    const reverse = mode === 'lowest'\n\n    for (const [n, p] of Editor.levels(editor, {\n      at: path,\n      voids,\n      match,\n      reverse,\n    })) {\n      if (!Text.isText(n) && !Path.equals(path, p)) {\n        return [n, p]\n      }\n    }\n  },\n\n  /**\n   * Add a custom property to the leaf text nodes in the current selection.\n   *\n   * If the selection is currently collapsed, the marks will be added to the\n   * `editor.marks` property instead, and applied when text is inserted next.\n   */\n\n  addMark(editor: Editor, key: string, value: any): void {\n    editor.addMark(key, value)\n  },\n\n  /**\n   * Get the point after a location.\n   */\n\n  after(\n    editor: Editor,\n    at: Location,\n    options: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      voids?: boolean\n    } = {}\n  ): Point | undefined {\n    const anchor = Editor.point(editor, at, { edge: 'end' })\n    const focus = Editor.end(editor, [])\n    const range = { anchor, focus }\n    const { distance = 1 } = options\n    let d = 0\n    let target\n\n    for (const p of Editor.positions(editor, {\n      ...options,\n      at: range,\n    })) {\n      if (d > distance) {\n        break\n      }\n\n      if (d !== 0) {\n        target = p\n      }\n\n      d++\n    }\n\n    return target\n  },\n\n  /**\n   * Get the point before a location.\n   */\n\n  before(\n    editor: Editor,\n    at: Location,\n    options: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      voids?: boolean\n    } = {}\n  ): Point | undefined {\n    const anchor = Editor.start(editor, [])\n    const focus = Editor.point(editor, at, { edge: 'start' })\n    const range = { anchor, focus }\n    const { distance = 1 } = options\n    let d = 0\n    let target\n\n    for (const p of Editor.positions(editor, {\n      ...options,\n      at: range,\n      reverse: true,\n    })) {\n      if (d > distance) {\n        break\n      }\n\n      if (d !== 0) {\n        target = p\n      }\n\n      d++\n    }\n\n    return target\n  },\n\n  /**\n   * Delete content in the editor backward from the current selection.\n   */\n\n  deleteBackward(\n    editor: Editor,\n    options: {\n      unit?: 'character' | 'word' | 'line' | 'block'\n    } = {}\n  ): void {\n    const { unit = 'character' } = options\n    editor.deleteBackward(unit)\n  },\n\n  /**\n   * Delete content in the editor forward from the current selection.\n   */\n\n  deleteForward(\n    editor: Editor,\n    options: {\n      unit?: 'character' | 'word' | 'line' | 'block'\n    } = {}\n  ): void {\n    const { unit = 'character' } = options\n    editor.deleteForward(unit)\n  },\n\n  /**\n   * Delete the content in the current selection.\n   */\n\n  deleteFragment(\n    editor: Editor,\n    options: {\n      direction?: 'forward' | 'backward'\n    } = {}\n  ): void {\n    const { direction = 'forward' } = options\n    editor.deleteFragment(direction)\n  },\n\n  /**\n   * Get the start and end points of a location.\n   */\n\n  edges(editor: Editor, at: Location): [Point, Point] {\n    return [Editor.start(editor, at), Editor.end(editor, at)]\n  },\n\n  /**\n   * Get the end point of a location.\n   */\n\n  end(editor: Editor, at: Location): Point {\n    return Editor.point(editor, at, { edge: 'end' })\n  },\n\n  /**\n   * Get the first node at a location.\n   */\n\n  first(editor: Editor, at: Location): NodeEntry {\n    const path = Editor.path(editor, at, { edge: 'start' })\n    return Editor.node(editor, path)\n  },\n\n  /**\n   * Get the fragment at a location.\n   */\n\n  fragment(editor: Editor, at: Location): Descendant[] {\n    const range = Editor.range(editor, at)\n    const fragment = Node.fragment(editor, range)\n    return fragment\n  },\n  /**\n   * Check if a node has block children.\n   */\n\n  hasBlocks(editor: Editor, element: Element): boolean {\n    return element.children.some(n => Editor.isBlock(editor, n))\n  },\n\n  /**\n   * Check if a node has inline and text children.\n   */\n\n  hasInlines(editor: Editor, element: Element): boolean {\n    return element.children.some(\n      n => Text.isText(n) || Editor.isInline(editor, n)\n    )\n  },\n\n  /**\n   * Check if a node has text children.\n   */\n\n  hasTexts(editor: Editor, element: Element): boolean {\n    return element.children.every(n => Text.isText(n))\n  },\n\n  /**\n   * Insert a block break at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertBreak(editor: Editor): void {\n    editor.insertBreak()\n  },\n\n  /**\n   * Insert a fragment at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertFragment(editor: Editor, fragment: Node[]): void {\n    editor.insertFragment(fragment)\n  },\n\n  /**\n   * Insert a node at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertNode(editor: Editor, node: Node): void {\n    editor.insertNode(node)\n  },\n\n  /**\n   * Insert text at the current selection.\n   *\n   * If the selection is currently expanded, it will be deleted first.\n   */\n\n  insertText(editor: Editor, text: string): void {\n    editor.insertText(text)\n  },\n\n  /**\n   * Check if a value is a block `Element` object.\n   */\n\n  isBlock(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && !editor.isInline(value)\n  },\n\n  /**\n   * Check if a value is an `Editor` object.\n   */\n\n  isEditor(value: any): value is Editor {\n    if (!isPlainObject(value)) return false\n    const cachedIsEditor = IS_EDITOR_CACHE.get(value)\n    if (cachedIsEditor !== undefined) {\n      return cachedIsEditor\n    }\n    const isEditor =\n      typeof value.addMark === 'function' &&\n      typeof value.apply === 'function' &&\n      typeof value.deleteBackward === 'function' &&\n      typeof value.deleteForward === 'function' &&\n      typeof value.deleteFragment === 'function' &&\n      typeof value.insertBreak === 'function' &&\n      typeof value.insertFragment === 'function' &&\n      typeof value.insertNode === 'function' &&\n      typeof value.insertText === 'function' &&\n      typeof value.isInline === 'function' &&\n      typeof value.isVoid === 'function' &&\n      typeof value.normalizeNode === 'function' &&\n      typeof value.onChange === 'function' &&\n      typeof value.removeMark === 'function' &&\n      (value.marks === null || isPlainObject(value.marks)) &&\n      (value.selection === null || Range.isRange(value.selection)) &&\n      Node.isNodeList(value.children) &&\n      Operation.isOperationList(value.operations)\n    IS_EDITOR_CACHE.set(value, isEditor)\n    return isEditor\n  },\n\n  /**\n   * Check if a point is the end point of a location.\n   */\n\n  isEnd(editor: Editor, point: Point, at: Location): boolean {\n    const end = Editor.end(editor, at)\n    return Point.equals(point, end)\n  },\n\n  /**\n   * Check if a point is an edge of a location.\n   */\n\n  isEdge(editor: Editor, point: Point, at: Location): boolean {\n    return Editor.isStart(editor, point, at) || Editor.isEnd(editor, point, at)\n  },\n\n  /**\n   * Check if an element is empty, accounting for void nodes.\n   */\n\n  isEmpty(editor: Editor, element: Element): boolean {\n    const { children } = element\n    const [first] = children\n    return (\n      children.length === 0 ||\n      (children.length === 1 &&\n        Text.isText(first) &&\n        first.text === '' &&\n        !editor.isVoid(element))\n    )\n  },\n\n  /**\n   * Check if a value is an inline `Element` object.\n   */\n\n  isInline(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && editor.isInline(value)\n  },\n\n  /**\n   * Check if the editor is currently normalizing after each operation.\n   */\n\n  isNormalizing(editor: Editor): boolean {\n    const isNormalizing = NORMALIZING.get(editor)\n    return isNormalizing === undefined ? true : isNormalizing\n  },\n\n  /**\n   * Check if a point is the start point of a location.\n   */\n\n  isStart(editor: Editor, point: Point, at: Location): boolean {\n    // PERF: If the offset isn't `0` we know it's not the start.\n    if (point.offset !== 0) {\n      return false\n    }\n\n    const start = Editor.start(editor, at)\n    return Point.equals(point, start)\n  },\n\n  /**\n   * Check if a value is a void `Element` object.\n   */\n\n  isVoid(editor: Editor, value: any): value is Element {\n    return Element.isElement(value) && editor.isVoid(value)\n  },\n\n  /**\n   * Get the last node at a location.\n   */\n\n  last(editor: Editor, at: Location): NodeEntry {\n    const path = Editor.path(editor, at, { edge: 'end' })\n    return Editor.node(editor, path)\n  },\n\n  /**\n   * Get the leaf text node at a location.\n   */\n\n  leaf(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): NodeEntry<Text> {\n    const path = Editor.path(editor, at, options)\n    const node = Node.leaf(editor, path)\n    return [node, path]\n  },\n\n  /**\n   * Iterate through all of the levels at a location.\n   */\n\n  *levels<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      reverse?: boolean\n      voids?: boolean\n    } = {}\n  ): Generator<NodeEntry<T>, void, undefined> {\n    const { at = editor.selection, reverse = false, voids = false } = options\n    let { match } = options\n\n    if (match == null) {\n      match = () => true\n    }\n\n    if (!at) {\n      return\n    }\n\n    const levels: NodeEntry<T>[] = []\n    const path = Editor.path(editor, at)\n\n    for (const [n, p] of Node.levels(editor, path)) {\n      if (!match(n, p)) {\n        continue\n      }\n\n      levels.push([n, p])\n\n      if (!voids && Editor.isVoid(editor, n)) {\n        break\n      }\n    }\n\n    if (reverse) {\n      levels.reverse()\n    }\n\n    yield* levels\n  },\n\n  /**\n   * Get the marks that would be added to text at the current selection.\n   */\n\n  marks(editor: Editor): Omit<Text, 'text'> | null {\n    const { marks, selection } = editor\n\n    if (!selection) {\n      return null\n    }\n\n    if (marks) {\n      return marks\n    }\n\n    if (Range.isExpanded(selection)) {\n      const [match] = Editor.nodes(editor, { match: Text.isText })\n\n      if (match) {\n        const [node] = match as NodeEntry<Text>\n        const { text, ...rest } = node\n        return rest\n      } else {\n        return {}\n      }\n    }\n\n    const { anchor } = selection\n    const { path } = anchor\n    let [node] = Editor.leaf(editor, path)\n\n    if (anchor.offset === 0) {\n      const prev = Editor.previous(editor, { at: path, match: Text.isText })\n      const block = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n      })\n\n      if (prev && block) {\n        const [prevNode, prevPath] = prev\n        const [, blockPath] = block\n\n        if (Path.isAncestor(blockPath, prevPath)) {\n          node = prevNode as Text\n        }\n      }\n    }\n\n    const { text, ...rest } = node\n    return rest\n  },\n\n  /**\n   * Get the matching node in the branch of the document after a location.\n   */\n\n  next<T extends Descendant>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<T> | undefined {\n    const { mode = 'lowest', voids = false } = options\n    let { match, at = editor.selection } = options\n\n    if (!at) {\n      return\n    }\n\n    const pointAfterLocation = Editor.after(editor, at, { voids })\n\n    if (!pointAfterLocation) return\n\n    const [, to] = Editor.last(editor, [])\n\n    const span: Span = [pointAfterLocation.path, to]\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(`Cannot get the next node from the root node!`)\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        const [parent] = Editor.parent(editor, at)\n        match = n => parent.children.includes(n)\n      } else {\n        match = () => true\n      }\n    }\n\n    const [next] = Editor.nodes(editor, { at: span, match, mode, voids })\n    return next\n  },\n\n  /**\n   * Get the node at a location.\n   */\n\n  node(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): NodeEntry {\n    const path = Editor.path(editor, at, options)\n    const node = Node.get(editor, path)\n    return [node, path]\n  },\n\n  /**\n   * Iterate through all of the nodes in the Editor.\n   */\n\n  *nodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location | Span\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      universal?: boolean\n      reverse?: boolean\n      voids?: boolean\n    } = {}\n  ): Generator<NodeEntry<T>, void, undefined> {\n    const {\n      at = editor.selection,\n      mode = 'all',\n      universal = false,\n      reverse = false,\n      voids = false,\n    } = options\n    let { match } = options\n\n    if (!match) {\n      match = () => true\n    }\n\n    if (!at) {\n      return\n    }\n\n    let from\n    let to\n\n    if (Span.isSpan(at)) {\n      from = at[0]\n      to = at[1]\n    } else {\n      const first = Editor.path(editor, at, { edge: 'start' })\n      const last = Editor.path(editor, at, { edge: 'end' })\n      from = reverse ? last : first\n      to = reverse ? first : last\n    }\n\n    const nodeEntries = Node.nodes(editor, {\n      reverse,\n      from,\n      to,\n      pass: ([n]) => (voids ? false : Editor.isVoid(editor, n)),\n    })\n\n    const matches: NodeEntry<T>[] = []\n    let hit: NodeEntry<T> | undefined\n\n    for (const [node, path] of nodeEntries) {\n      const isLower = hit && Path.compare(path, hit[1]) === 0\n\n      // In highest mode any node lower than the last hit is not a match.\n      if (mode === 'highest' && isLower) {\n        continue\n      }\n\n      if (!match(node, path)) {\n        // If we've arrived at a leaf text node that is not lower than the last\n        // hit, then we've found a branch that doesn't include a match, which\n        // means the match is not universal.\n        if (universal && !isLower && Text.isText(node)) {\n          return\n        } else {\n          continue\n        }\n      }\n\n      // If there's a match and it's lower than the last, update the hit.\n      if (mode === 'lowest' && isLower) {\n        hit = [node, path]\n        continue\n      }\n\n      // In lowest mode we emit the last hit, once it's guaranteed lowest.\n      const emit: NodeEntry<T> | undefined =\n        mode === 'lowest' ? hit : [node, path]\n\n      if (emit) {\n        if (universal) {\n          matches.push(emit)\n        } else {\n          yield emit\n        }\n      }\n\n      hit = [node, path]\n    }\n\n    // Since lowest is always emitting one behind, catch up at the end.\n    if (mode === 'lowest' && hit) {\n      if (universal) {\n        matches.push(hit)\n      } else {\n        yield hit\n      }\n    }\n\n    // Universal defers to ensure that the match occurs in every branch, so we\n    // yield all of the matches after iterating.\n    if (universal) {\n      yield* matches\n    }\n  },\n  /**\n   * Normalize any dirty objects in the editor.\n   */\n\n  normalize(\n    editor: Editor,\n    options: {\n      force?: boolean\n    } = {}\n  ): void {\n    const { force = false } = options\n    const getDirtyPaths = (editor: Editor) => {\n      return DIRTY_PATHS.get(editor) || []\n    }\n\n    if (!Editor.isNormalizing(editor)) {\n      return\n    }\n\n    if (force) {\n      const allPaths = Array.from(Node.nodes(editor), ([, p]) => p)\n      DIRTY_PATHS.set(editor, allPaths)\n    }\n\n    if (getDirtyPaths(editor).length === 0) {\n      return\n    }\n\n    Editor.withoutNormalizing(editor, () => {\n      /*\n        Fix dirty elements with no children.\n        editor.normalizeNode() does fix this, but some normalization fixes also require it to work.\n        Running an initial pass avoids the catch-22 race condition.\n      */\n      for (const dirtyPath of getDirtyPaths(editor)) {\n        if (Node.has(editor, dirtyPath)) {\n          const [node, _] = Editor.node(editor, dirtyPath)\n\n          // Add a text child to elements with no children.\n          // This is safe to do in any order, by definition it can't cause other paths to change.\n          if (Element.isElement(node) && node.children.length === 0) {\n            const child = { text: '' }\n            Transforms.insertNodes(editor, child, {\n              at: dirtyPath.concat(0),\n              voids: true,\n            })\n          }\n        }\n      }\n\n      const max = getDirtyPaths(editor).length * 42 // HACK: better way?\n      let m = 0\n\n      while (getDirtyPaths(editor).length !== 0) {\n        if (m > max) {\n          throw new Error(`\n            Could not completely normalize the editor after ${max} iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          `)\n        }\n\n        const dirtyPath = getDirtyPaths(editor).pop()!\n\n        // If the node doesn't exist in the tree, it does not need to be normalized.\n        if (Node.has(editor, dirtyPath)) {\n          const entry = Editor.node(editor, dirtyPath)\n          editor.normalizeNode(entry)\n        }\n        m++\n      }\n    })\n  },\n\n  /**\n   * Get the parent node of a location.\n   */\n\n  parent(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): NodeEntry<Ancestor> {\n    const path = Editor.path(editor, at, options)\n    const parentPath = Path.parent(path)\n    const entry = Editor.node(editor, parentPath)\n    return entry as NodeEntry<Ancestor>\n  },\n\n  /**\n   * Get the path of a location.\n   */\n\n  path(\n    editor: Editor,\n    at: Location,\n    options: {\n      depth?: number\n      edge?: 'start' | 'end'\n    } = {}\n  ): Path {\n    const { depth, edge } = options\n\n    if (Path.isPath(at)) {\n      if (edge === 'start') {\n        const [, firstPath] = Node.first(editor, at)\n        at = firstPath\n      } else if (edge === 'end') {\n        const [, lastPath] = Node.last(editor, at)\n        at = lastPath\n      }\n    }\n\n    if (Range.isRange(at)) {\n      if (edge === 'start') {\n        at = Range.start(at)\n      } else if (edge === 'end') {\n        at = Range.end(at)\n      } else {\n        at = Path.common(at.anchor.path, at.focus.path)\n      }\n    }\n\n    if (Point.isPoint(at)) {\n      at = at.path\n    }\n\n    if (depth != null) {\n      at = at.slice(0, depth)\n    }\n\n    return at\n  },\n\n  hasPath(editor: Editor, path: Path): boolean {\n    return Node.has(editor, path)\n  },\n\n  /**\n   * Create a mutable ref for a `Path` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  pathRef(\n    editor: Editor,\n    path: Path,\n    options: {\n      affinity?: 'backward' | 'forward' | null\n    } = {}\n  ): PathRef {\n    const { affinity = 'forward' } = options\n    const ref: PathRef = {\n      current: path,\n      affinity,\n      unref() {\n        const { current } = ref\n        const pathRefs = Editor.pathRefs(editor)\n        pathRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.pathRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked path refs of the editor.\n   */\n\n  pathRefs(editor: Editor): Set<PathRef> {\n    let refs = PATH_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      PATH_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Get the start or end point of a location.\n   */\n\n  point(\n    editor: Editor,\n    at: Location,\n    options: {\n      edge?: 'start' | 'end'\n    } = {}\n  ): Point {\n    const { edge = 'start' } = options\n\n    if (Path.isPath(at)) {\n      let path\n\n      if (edge === 'end') {\n        const [, lastPath] = Node.last(editor, at)\n        path = lastPath\n      } else {\n        const [, firstPath] = Node.first(editor, at)\n        path = firstPath\n      }\n\n      const node = Node.get(editor, path)\n\n      if (!Text.isText(node)) {\n        throw new Error(\n          `Cannot get the ${edge} point in the node at path [${at}] because it has no ${edge} text node.`\n        )\n      }\n\n      return { path, offset: edge === 'end' ? node.text.length : 0 }\n    }\n\n    if (Range.isRange(at)) {\n      const [start, end] = Range.edges(at)\n      return edge === 'start' ? start : end\n    }\n\n    return at\n  },\n\n  /**\n   * Create a mutable ref for a `Point` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  pointRef(\n    editor: Editor,\n    point: Point,\n    options: {\n      affinity?: 'backward' | 'forward' | null\n    } = {}\n  ): PointRef {\n    const { affinity = 'forward' } = options\n    const ref: PointRef = {\n      current: point,\n      affinity,\n      unref() {\n        const { current } = ref\n        const pointRefs = Editor.pointRefs(editor)\n        pointRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.pointRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked point refs of the editor.\n   */\n\n  pointRefs(editor: Editor): Set<PointRef> {\n    let refs = POINT_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      POINT_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Return all the positions in `at` range where a `Point` can be placed.\n   *\n   * By default, moves forward by individual offsets at a time, but\n   * the `unit` option can be used to to move by character, word, line, or block.\n   *\n   * The `reverse` option can be used to change iteration direction.\n   *\n   * Note: By default void nodes are treated as a single point and iteration\n   * will not happen inside their content unless you pass in true for the\n   * `voids` option, then iteration will occur.\n   */\n\n  *positions(\n    editor: Editor,\n    options: {\n      at?: Location\n      unit?: 'offset' | 'character' | 'word' | 'line' | 'block'\n      reverse?: boolean\n      voids?: boolean\n    } = {}\n  ): Generator<Point, void, undefined> {\n    const {\n      at = editor.selection,\n      unit = 'offset',\n      reverse = false,\n      voids = false,\n    } = options\n\n    if (!at) {\n      return\n    }\n\n    /**\n     * Algorithm notes:\n     *\n     * Each step `distance` is dynamic depending on the underlying text\n     * and the `unit` specified.  Each step, e.g., a line or word, may\n     * span multiple text nodes, so we iterate through the text both on\n     * two levels in step-sync:\n     *\n     * `leafText` stores the text on a text leaf level, and is advanced\n     * through using the counters `leafTextOffset` and `leafTextRemaining`.\n     *\n     * `blockText` stores the text on a block level, and is shortened\n     * by `distance` every time it is advanced.\n     *\n     * We only maintain a window of one blockText and one leafText because\n     * a block node always appears before all of its leaf nodes.\n     */\n\n    const range = Editor.range(editor, at)\n    const [start, end] = Range.edges(range)\n    const first = reverse ? end : start\n    let isNewBlock = false\n    let blockText = ''\n    let distance = 0 // Distance for leafText to catch up to blockText.\n    let leafTextRemaining = 0\n    let leafTextOffset = 0\n\n    // Iterate through all nodes in range, grabbing entire textual content\n    // of block nodes in blockText, and text nodes in leafText.\n    // Exploits the fact that nodes are sequenced in such a way that we first\n    // encounter the block node, then all of its text nodes, so when iterating\n    // through the blockText and leafText we just need to remember a window of\n    // one block node and leaf node, respectively.\n    for (const [node, path] of Editor.nodes(editor, { at, reverse, voids })) {\n      /*\n       * ELEMENT NODE - Yield position(s) for voids, collect blockText for blocks\n       */\n      if (Element.isElement(node)) {\n        // Void nodes are a special case, so by default we will always\n        // yield their first point. If the `voids` option is set to true,\n        // then we will iterate over their content.\n        if (!voids && editor.isVoid(node)) {\n          yield Editor.start(editor, path)\n          continue\n        }\n\n        // Inline element nodes are ignored as they don't themselves\n        // contribute to `blockText` or `leafText` - their parent and\n        // children do.\n        if (editor.isInline(node)) continue\n\n        // Block element node - set `blockText` to its text content.\n        if (Editor.hasInlines(editor, node)) {\n          // We always exhaust block nodes before encountering a new one:\n          //   console.assert(blockText === '',\n          //     `blockText='${blockText}' - `+\n          //     `not exhausted before new block node`, path)\n\n          // Ensure range considered is capped to `range`, in the\n          // start/end edge cases where block extends beyond range.\n          // Equivalent to this, but presumably more performant:\n          //   blockRange = Editor.range(editor, ...Editor.edges(editor, path))\n          //   blockRange = Range.intersection(range, blockRange) // intersect\n          //   blockText = Editor.string(editor, blockRange, { voids })\n          const e = Path.isAncestor(path, end.path)\n            ? end\n            : Editor.end(editor, path)\n          const s = Path.isAncestor(path, start.path)\n            ? start\n            : Editor.start(editor, path)\n\n          blockText = Editor.string(editor, { anchor: s, focus: e }, { voids })\n          blockText = reverse ? reverseText(blockText) : blockText\n          isNewBlock = true\n        }\n      }\n\n      /*\n       * TEXT LEAF NODE - Iterate through text content, yielding\n       * positions every `distance` offset according to `unit`.\n       */\n      if (Text.isText(node)) {\n        const isFirst = Path.equals(path, first.path)\n\n        // Proof that we always exhaust text nodes before encountering a new one:\n        //   console.assert(leafTextRemaining <= 0,\n        //     `leafTextRemaining=${leafTextRemaining} - `+\n        //     `not exhausted before new leaf text node`, path)\n\n        // Reset `leafText` counters for new text node.\n        if (isFirst) {\n          leafTextRemaining = reverse\n            ? first.offset\n            : node.text.length - first.offset\n          leafTextOffset = first.offset // Works for reverse too.\n        } else {\n          leafTextRemaining = node.text.length\n          leafTextOffset = reverse ? leafTextRemaining : 0\n        }\n\n        // Yield position at the start of node (potentially).\n        if (isFirst || isNewBlock || unit === 'offset') {\n          yield { path, offset: leafTextOffset }\n          isNewBlock = false\n        }\n\n        // Yield positions every (dynamically calculated) `distance` offset.\n        while (true) {\n          // If `leafText` has caught up with `blockText` (distance=0),\n          // and if blockText is exhausted, break to get another block node,\n          // otherwise advance blockText forward by the new `distance`.\n          if (distance === 0) {\n            if (blockText === '') break\n            distance = calcDistance(blockText, unit)\n            blockText = blockText.slice(distance)\n          }\n\n          // Advance `leafText` by the current `distance`.\n          leafTextOffset = reverse\n            ? leafTextOffset - distance\n            : leafTextOffset + distance\n          leafTextRemaining = leafTextRemaining - distance\n\n          // If `leafText` is exhausted, break to get a new leaf node\n          // and set distance to the overflow amount, so we'll (maybe)\n          // catch up to blockText in the next leaf text node.\n          if (leafTextRemaining < 0) {\n            distance = -leafTextRemaining\n            break\n          }\n\n          // Successfully walked `distance` offsets through `leafText`\n          // to catch up with `blockText`, so we can reset `distance`\n          // and yield this position in this node.\n          distance = 0\n          yield { path, offset: leafTextOffset }\n        }\n      }\n    }\n    // Proof that upon completion, we've exahusted both leaf and block text:\n    //   console.assert(leafTextRemaining <= 0, \"leafText wasn't exhausted\")\n    //   console.assert(blockText === '', \"blockText wasn't exhausted\")\n\n    // Helper:\n    // Return the distance in offsets for a step of size `unit` on given string.\n    function calcDistance(text: string, unit: string) {\n      if (unit === 'character') {\n        return getCharacterDistance(text)\n      } else if (unit === 'word') {\n        return getWordDistance(text)\n      } else if (unit === 'line' || unit === 'block') {\n        return text.length\n      }\n      return 1\n    }\n  },\n\n  /**\n   * Get the matching node in the branch of the document before a location.\n   */\n\n  previous<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<T> | undefined {\n    const { mode = 'lowest', voids = false } = options\n    let { match, at = editor.selection } = options\n\n    if (!at) {\n      return\n    }\n\n    const pointBeforeLocation = Editor.before(editor, at, { voids })\n\n    if (!pointBeforeLocation) {\n      return\n    }\n\n    const [, to] = Editor.first(editor, [])\n\n    // The search location is from the start of the document to the path of\n    // the point before the location passed in\n    const span: Span = [pointBeforeLocation.path, to]\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(`Cannot get the previous node from the root node!`)\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        const [parent] = Editor.parent(editor, at)\n        match = n => parent.children.includes(n)\n      } else {\n        match = () => true\n      }\n    }\n\n    const [previous] = Editor.nodes(editor, {\n      reverse: true,\n      at: span,\n      match,\n      mode,\n      voids,\n    })\n\n    return previous\n  },\n\n  /**\n   * Get a range of a location.\n   */\n\n  range(editor: Editor, at: Location, to?: Location): Range {\n    if (Range.isRange(at) && !to) {\n      return at\n    }\n\n    const start = Editor.start(editor, at)\n    const end = Editor.end(editor, to || at)\n    return { anchor: start, focus: end }\n  },\n\n  /**\n   * Create a mutable ref for a `Range` object, which will stay in sync as new\n   * operations are applied to the editor.\n   */\n\n  rangeRef(\n    editor: Editor,\n    range: Range,\n    options: {\n      affinity?: 'backward' | 'forward' | 'outward' | 'inward' | null\n    } = {}\n  ): RangeRef {\n    const { affinity = 'forward' } = options\n    const ref: RangeRef = {\n      current: range,\n      affinity,\n      unref() {\n        const { current } = ref\n        const rangeRefs = Editor.rangeRefs(editor)\n        rangeRefs.delete(ref)\n        ref.current = null\n        return current\n      },\n    }\n\n    const refs = Editor.rangeRefs(editor)\n    refs.add(ref)\n    return ref\n  },\n\n  /**\n   * Get the set of currently tracked range refs of the editor.\n   */\n\n  rangeRefs(editor: Editor): Set<RangeRef> {\n    let refs = RANGE_REFS.get(editor)\n\n    if (!refs) {\n      refs = new Set()\n      RANGE_REFS.set(editor, refs)\n    }\n\n    return refs\n  },\n\n  /**\n   * Remove a custom property from all of the leaf text nodes in the current\n   * selection.\n   *\n   * If the selection is currently collapsed, the removal will be stored on\n   * `editor.marks` and applied to the text inserted next.\n   */\n\n  removeMark(editor: Editor, key: string): void {\n    editor.removeMark(key)\n  },\n\n  /**\n   * Get the start point of a location.\n   */\n\n  start(editor: Editor, at: Location): Point {\n    return Editor.point(editor, at, { edge: 'start' })\n  },\n\n  /**\n   * Get the text string content of a location.\n   *\n   * Note: by default the text of void nodes is considered to be an empty\n   * string, regardless of content, unless you pass in true for the voids option\n   */\n\n  string(\n    editor: Editor,\n    at: Location,\n    options: {\n      voids?: boolean\n    } = {}\n  ): string {\n    const { voids = false } = options\n    const range = Editor.range(editor, at)\n    const [start, end] = Range.edges(range)\n    let text = ''\n\n    for (const [node, path] of Editor.nodes(editor, {\n      at: range,\n      match: Text.isText,\n      voids,\n    })) {\n      let t = node.text\n\n      if (Path.equals(path, end.path)) {\n        t = t.slice(0, end.offset)\n      }\n\n      if (Path.equals(path, start.path)) {\n        t = t.slice(start.offset)\n      }\n\n      text += t\n    }\n\n    return text\n  },\n\n  /**\n   * Convert a range into a non-hanging one.\n   */\n\n  unhangRange(\n    editor: Editor,\n    range: Range,\n    options: {\n      voids?: boolean\n    } = {}\n  ): Range {\n    const { voids = false } = options\n    let [start, end] = Range.edges(range)\n\n    // PERF: exit early if we can guarantee that the range isn't hanging.\n    if (start.offset !== 0 || end.offset !== 0 || Range.isCollapsed(range)) {\n      return range\n    }\n\n    const endBlock = Editor.above(editor, {\n      at: end,\n      match: n => Editor.isBlock(editor, n),\n    })\n    const blockPath = endBlock ? endBlock[1] : []\n    const first = Editor.start(editor, [])\n    const before = { anchor: first, focus: end }\n    let skip = true\n\n    for (const [node, path] of Editor.nodes(editor, {\n      at: before,\n      match: Text.isText,\n      reverse: true,\n      voids,\n    })) {\n      if (skip) {\n        skip = false\n        continue\n      }\n\n      if (node.text !== '' || Path.isBefore(path, blockPath)) {\n        end = { path, offset: node.text.length }\n        break\n      }\n    }\n\n    return { anchor: start, focus: end }\n  },\n\n  /**\n   * Match a void node in the current branch of the editor.\n   */\n\n  void(\n    editor: Editor,\n    options: {\n      at?: Location\n      mode?: 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): NodeEntry<Element> | undefined {\n    return Editor.above(editor, {\n      ...options,\n      match: n => Editor.isVoid(editor, n),\n    })\n  },\n\n  /**\n   * Call a function, deferring normalization until after it completes.\n   */\n\n  withoutNormalizing(editor: Editor, fn: () => void): void {\n    const value = Editor.isNormalizing(editor)\n    NORMALIZING.set(editor, false)\n    try {\n      fn()\n    } finally {\n      NORMALIZING.set(editor, value)\n    }\n    Editor.normalize(editor)\n  },\n}\n\n/**\n * A helper type for narrowing matched nodes with a predicate.\n */\n\nexport type NodeMatch<T extends Node> =\n  | ((node: Node, path: Path) => node is T)\n  | ((node: Node, path: Path) => boolean)\n","import { Path, Point, Range } from '..'\n\n/**\n * The `Location` interface is a union of the ways to refer to a specific\n * location in a Slate document: paths, points or ranges.\n *\n * Methods will often accept a `Location` instead of requiring only a `Path`,\n * `Point` or `Range`. This eliminates the need for developers to manage\n * converting between the different interfaces in their own code base.\n */\n\nexport type Location = Path | Point | Range\n\nexport interface LocationInterface {\n  isLocation: (value: any) => value is Location\n}\n\nexport const Location: LocationInterface = {\n  /**\n   * Check if a value implements the `Location` interface.\n   */\n\n  isLocation(value: any): value is Location {\n    return Path.isPath(value) || Point.isPoint(value) || Range.isRange(value)\n  },\n}\n\n/**\n * The `Span` interface is a low-level way to refer to locations in nodes\n * without using `Point` which requires leaf text nodes to be present.\n */\n\nexport type Span = [Path, Path]\n\nexport interface SpanInterface {\n  isSpan: (value: any) => value is Span\n}\n\nexport const Span: SpanInterface = {\n  /**\n   * Check if a value implements the `Span` interface.\n   */\n\n  isSpan(value: any): value is Span {\n    return (\n      Array.isArray(value) && value.length === 2 && value.every(Path.isPath)\n    )\n  },\n}\n","import { produce } from 'immer'\nimport { Editor, Path, Range, Text } from '..'\nimport { Element, ElementEntry } from './element'\n\n/**\n * The `Node` union type represents all of the different types of nodes that\n * occur in a Slate document tree.\n */\n\nexport type BaseNode = Editor | Element | Text\nexport type Node = Editor | Element | Text\n\nexport interface NodeInterface {\n  ancestor: (root: Node, path: Path) => Ancestor\n  ancestors: (\n    root: Node,\n    path: Path,\n    options?: {\n      reverse?: boolean\n    }\n  ) => Generator<NodeEntry<Ancestor>, void, undefined>\n  child: (root: Node, index: number) => Descendant\n  children: (\n    root: Node,\n    path: Path,\n    options?: {\n      reverse?: boolean\n    }\n  ) => Generator<NodeEntry<Descendant>, void, undefined>\n  common: (root: Node, path: Path, another: Path) => NodeEntry\n  descendant: (root: Node, path: Path) => Descendant\n  descendants: (\n    root: Node,\n    options?: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    }\n  ) => Generator<NodeEntry<Descendant>, void, undefined>\n  elements: (\n    root: Node,\n    options?: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    }\n  ) => Generator<ElementEntry, void, undefined>\n  extractProps: (node: Node) => NodeProps\n  first: (root: Node, path: Path) => NodeEntry\n  fragment: (root: Node, range: Range) => Descendant[]\n  get: (root: Node, path: Path) => Node\n  has: (root: Node, path: Path) => boolean\n  isNode: (value: any) => value is Node\n  isNodeList: (value: any) => value is Node[]\n  last: (root: Node, path: Path) => NodeEntry\n  leaf: (root: Node, path: Path) => Text\n  levels: (\n    root: Node,\n    path: Path,\n    options?: {\n      reverse?: boolean\n    }\n  ) => Generator<NodeEntry, void, undefined>\n  matches: (node: Node, props: Partial<Node>) => boolean\n  nodes: (\n    root: Node,\n    options?: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (entry: NodeEntry) => boolean\n    }\n  ) => Generator<NodeEntry, void, undefined>\n  parent: (root: Node, path: Path) => Ancestor\n  string: (node: Node) => string\n  texts: (\n    root: Node,\n    options?: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    }\n  ) => Generator<NodeEntry<Text>, void, undefined>\n}\n\nconst IS_NODE_LIST_CACHE = new WeakMap<any[], boolean>()\n\nexport const Node: NodeInterface = {\n  /**\n   * Get the node at a specific path, asserting that it's an ancestor node.\n   */\n\n  ancestor(root: Node, path: Path): Ancestor {\n    const node = Node.get(root, path)\n\n    if (Text.isText(node)) {\n      throw new Error(\n        `Cannot get the ancestor node at path [${path}] because it refers to a text node instead: ${node}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return a generator of all the ancestor nodes above a specific path.\n   *\n   * By default the order is bottom-up, from lowest to highest ancestor in\n   * the tree, but you can pass the `reverse: true` option to go top-down.\n   */\n\n  *ancestors(\n    root: Node,\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Generator<NodeEntry<Ancestor>, void, undefined> {\n    for (const p of Path.ancestors(path, options)) {\n      const n = Node.ancestor(root, p)\n      const entry: NodeEntry<Ancestor> = [n, p]\n      yield entry\n    }\n  },\n\n  /**\n   * Get the child of a node at a specific index.\n   */\n\n  child(root: Node, index: number): Descendant {\n    if (Text.isText(root)) {\n      throw new Error(\n        `Cannot get the child of a text node: ${JSON.stringify(root)}`\n      )\n    }\n\n    const c = root.children[index] as Descendant\n\n    if (c == null) {\n      throw new Error(\n        `Cannot get child at index \\`${index}\\` in node: ${JSON.stringify(\n          root\n        )}`\n      )\n    }\n\n    return c\n  },\n\n  /**\n   * Iterate over the children of a node at a specific path.\n   */\n\n  *children(\n    root: Node,\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Generator<NodeEntry<Descendant>, void, undefined> {\n    const { reverse = false } = options\n    const ancestor = Node.ancestor(root, path)\n    const { children } = ancestor\n    let index = reverse ? children.length - 1 : 0\n\n    while (reverse ? index >= 0 : index < children.length) {\n      const child = Node.child(ancestor, index)\n      const childPath = path.concat(index)\n      yield [child, childPath]\n      index = reverse ? index - 1 : index + 1\n    }\n  },\n\n  /**\n   * Get an entry for the common ancesetor node of two paths.\n   */\n\n  common(root: Node, path: Path, another: Path): NodeEntry {\n    const p = Path.common(path, another)\n    const n = Node.get(root, p)\n    return [n, p]\n  },\n\n  /**\n   * Get the node at a specific path, asserting that it's a descendant node.\n   */\n\n  descendant(root: Node, path: Path): Descendant {\n    const node = Node.get(root, path)\n\n    if (Editor.isEditor(node)) {\n      throw new Error(\n        `Cannot get the descendant node at path [${path}] because it refers to the root editor node instead: ${node}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return a generator of all the descendant node entries inside a root node.\n   */\n\n  *descendants(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    } = {}\n  ): Generator<NodeEntry<Descendant>, void, undefined> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (path.length !== 0) {\n        // NOTE: we have to coerce here because checking the path's length does\n        // guarantee that `node` is not a `Editor`, but TypeScript doesn't know.\n        yield [node, path] as NodeEntry<Descendant>\n      }\n    }\n  },\n\n  /**\n   * Return a generator of all the element nodes inside a root node. Each iteration\n   * will return an `ElementEntry` tuple consisting of `[Element, Path]`. If the\n   * root node is an element it will be included in the iteration as well.\n   */\n\n  *elements(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    } = {}\n  ): Generator<ElementEntry, void, undefined> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (Element.isElement(node)) {\n        yield [node, path]\n      }\n    }\n  },\n\n  /**\n   * Extract props from a Node.\n   */\n\n  extractProps(node: Node): NodeProps {\n    if (Element.isAncestor(node)) {\n      const { children, ...properties } = node\n\n      return properties\n    } else {\n      const { text, ...properties } = node\n\n      return properties\n    }\n  },\n\n  /**\n   * Get the first node entry in a root node from a path.\n   */\n\n  first(root: Node, path: Path): NodeEntry {\n    const p = path.slice()\n    let n = Node.get(root, p)\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break\n      } else {\n        n = n.children[0]\n        p.push(0)\n      }\n    }\n\n    return [n, p]\n  },\n\n  /**\n   * Get the sliced fragment represented by a range inside a root node.\n   */\n\n  fragment(root: Node, range: Range): Descendant[] {\n    if (Text.isText(root)) {\n      throw new Error(\n        `Cannot get a fragment starting from a root text node: ${JSON.stringify(\n          root\n        )}`\n      )\n    }\n\n    const newRoot = produce({ children: root.children }, r => {\n      const [start, end] = Range.edges(range)\n      const nodeEntries = Node.nodes(r, {\n        reverse: true,\n        pass: ([, path]) => !Range.includes(range, path),\n      })\n\n      for (const [, path] of nodeEntries) {\n        if (!Range.includes(range, path)) {\n          const parent = Node.parent(r, path)\n          const index = path[path.length - 1]\n          parent.children.splice(index, 1)\n        }\n\n        if (Path.equals(path, end.path)) {\n          const leaf = Node.leaf(r, path)\n          leaf.text = leaf.text.slice(0, end.offset)\n        }\n\n        if (Path.equals(path, start.path)) {\n          const leaf = Node.leaf(r, path)\n          leaf.text = leaf.text.slice(start.offset)\n        }\n      }\n\n      if (Editor.isEditor(r)) {\n        r.selection = null\n      }\n    })\n\n    return newRoot.children\n  },\n\n  /**\n   * Get the descendant node referred to by a specific path. If the path is an\n   * empty array, it refers to the root node itself.\n   */\n\n  get(root: Node, path: Path): Node {\n    let node = root\n\n    for (let i = 0; i < path.length; i++) {\n      const p = path[i]\n\n      if (Text.isText(node) || !node.children[p]) {\n        throw new Error(\n          `Cannot find a descendant at path [${path}] in node: ${JSON.stringify(\n            root\n          )}`\n        )\n      }\n\n      node = node.children[p]\n    }\n\n    return node\n  },\n\n  /**\n   * Check if a descendant node exists at a specific path.\n   */\n\n  has(root: Node, path: Path): boolean {\n    let node = root\n\n    for (let i = 0; i < path.length; i++) {\n      const p = path[i]\n\n      if (Text.isText(node) || !node.children[p]) {\n        return false\n      }\n\n      node = node.children[p]\n    }\n\n    return true\n  },\n\n  /**\n   * Check if a value implements the `Node` interface.\n   */\n\n  isNode(value: any): value is Node {\n    return (\n      Text.isText(value) || Element.isElement(value) || Editor.isEditor(value)\n    )\n  },\n\n  /**\n   * Check if a value is a list of `Node` objects.\n   */\n\n  isNodeList(value: any): value is Node[] {\n    if (!Array.isArray(value)) {\n      return false\n    }\n    const cachedResult = IS_NODE_LIST_CACHE.get(value)\n    if (cachedResult !== undefined) {\n      return cachedResult\n    }\n    const isNodeList = value.every(val => Node.isNode(val))\n    IS_NODE_LIST_CACHE.set(value, isNodeList)\n    return isNodeList\n  },\n\n  /**\n   * Get the last node entry in a root node from a path.\n   */\n\n  last(root: Node, path: Path): NodeEntry {\n    const p = path.slice()\n    let n = Node.get(root, p)\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break\n      } else {\n        const i = n.children.length - 1\n        n = n.children[i]\n        p.push(i)\n      }\n    }\n\n    return [n, p]\n  },\n\n  /**\n   * Get the node at a specific path, ensuring it's a leaf text node.\n   */\n\n  leaf(root: Node, path: Path): Text {\n    const node = Node.get(root, path)\n\n    if (!Text.isText(node)) {\n      throw new Error(\n        `Cannot get the leaf node at path [${path}] because it refers to a non-leaf node: ${node}`\n      )\n    }\n\n    return node\n  },\n\n  /**\n   * Return a generator of the in a branch of the tree, from a specific path.\n   *\n   * By default the order is top-down, from lowest to highest node in the tree,\n   * but you can pass the `reverse: true` option to go bottom-up.\n   */\n\n  *levels(\n    root: Node,\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Generator<NodeEntry, void, undefined> {\n    for (const p of Path.levels(path, options)) {\n      const n = Node.get(root, p)\n      yield [n, p]\n    }\n  },\n\n  /**\n   * Check if a node matches a set of props.\n   */\n\n  matches(node: Node, props: Partial<Node>): boolean {\n    return (\n      (Element.isElement(node) &&\n        Element.isElementProps(props) &&\n        Element.matches(node, props)) ||\n      (Text.isText(node) &&\n        Text.isTextProps(props) &&\n        Text.matches(node, props))\n    )\n  },\n\n  /**\n   * Return a generator of all the node entries of a root node. Each entry is\n   * returned as a `[Node, Path]` tuple, with the path referring to the node's\n   * position inside the root node.\n   */\n\n  *nodes(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (entry: NodeEntry) => boolean\n    } = {}\n  ): Generator<NodeEntry, void, undefined> {\n    const { pass, reverse = false } = options\n    const { from = [], to } = options\n    const visited = new Set()\n    let p: Path = []\n    let n = root\n\n    while (true) {\n      if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {\n        break\n      }\n\n      if (!visited.has(n)) {\n        yield [n, p]\n      }\n\n      // If we're allowed to go downward and we haven't descended yet, do.\n      if (\n        !visited.has(n) &&\n        !Text.isText(n) &&\n        n.children.length !== 0 &&\n        (pass == null || pass([n, p]) === false)\n      ) {\n        visited.add(n)\n        let nextIndex = reverse ? n.children.length - 1 : 0\n\n        if (Path.isAncestor(p, from)) {\n          nextIndex = from[p.length]\n        }\n\n        p = p.concat(nextIndex)\n        n = Node.get(root, p)\n        continue\n      }\n\n      // If we're at the root and we can't go down, we're done.\n      if (p.length === 0) {\n        break\n      }\n\n      // If we're going forward...\n      if (!reverse) {\n        const newPath = Path.next(p)\n\n        if (Node.has(root, newPath)) {\n          p = newPath\n          n = Node.get(root, p)\n          continue\n        }\n      }\n\n      // If we're going backward...\n      if (reverse && p[p.length - 1] !== 0) {\n        const newPath = Path.previous(p)\n        p = newPath\n        n = Node.get(root, p)\n        continue\n      }\n\n      // Otherwise we're going upward...\n      p = Path.parent(p)\n      n = Node.get(root, p)\n      visited.add(n)\n    }\n  },\n\n  /**\n   * Get the parent of a node at a specific path.\n   */\n\n  parent(root: Node, path: Path): Ancestor {\n    const parentPath = Path.parent(path)\n    const p = Node.get(root, parentPath)\n\n    if (Text.isText(p)) {\n      throw new Error(\n        `Cannot get the parent of path [${path}] because it does not exist in the root.`\n      )\n    }\n\n    return p\n  },\n\n  /**\n   * Get the concatenated text string of a node's content.\n   *\n   * Note that this will not include spaces or line breaks between block nodes.\n   * It is not a user-facing string, but a string for performing offset-related\n   * computations for a node.\n   */\n\n  string(node: Node): string {\n    if (Text.isText(node)) {\n      return node.text\n    } else {\n      return node.children.map(Node.string).join('')\n    }\n  },\n\n  /**\n   * Return a generator of all leaf text nodes in a root node.\n   */\n\n  *texts(\n    root: Node,\n    options: {\n      from?: Path\n      to?: Path\n      reverse?: boolean\n      pass?: (node: NodeEntry) => boolean\n    } = {}\n  ): Generator<NodeEntry<Text>, void, undefined> {\n    for (const [node, path] of Node.nodes(root, options)) {\n      if (Text.isText(node)) {\n        yield [node, path]\n      }\n    }\n  },\n}\n\n/**\n * The `Descendant` union type represents nodes that are descendants in the\n * tree. It is returned as a convenience in certain cases to narrow a value\n * further than the more generic `Node` union.\n */\n\nexport type Descendant = Element | Text\n\n/**\n * The `Ancestor` union type represents nodes that are ancestors in the tree.\n * It is returned as a convenience in certain cases to narrow a value further\n * than the more generic `Node` union.\n */\n\nexport type Ancestor = Editor | Element\n\n/**\n * `NodeEntry` objects are returned when iterating over the nodes in a Slate\n * document tree. They consist of the node and its `Path` relative to the root\n * node in the document.\n */\n\nexport type NodeEntry<T extends Node = Node> = [T, Path]\n\n/**\n * Convenience type for returning the props of a node.\n */\nexport type NodeProps =\n  | Omit<Editor, 'children'>\n  | Omit<Element, 'children'>\n  | Omit<Text, 'text'>\n","import { ExtendedType, Node, Path, Range } from '..'\nimport isPlainObject from 'is-plain-object'\n\nexport type BaseInsertNodeOperation = {\n  type: 'insert_node'\n  path: Path\n  node: Node\n}\n\nexport type InsertNodeOperation = ExtendedType<\n  'InsertNodeOperation',\n  BaseInsertNodeOperation\n>\n\nexport type BaseInsertTextOperation = {\n  type: 'insert_text'\n  path: Path\n  offset: number\n  text: string\n}\n\nexport type InsertTextOperation = ExtendedType<\n  'InsertTextOperation',\n  BaseInsertTextOperation\n>\n\nexport type BaseMergeNodeOperation = {\n  type: 'merge_node'\n  path: Path\n  position: number\n  properties: Partial<Node>\n}\n\nexport type MergeNodeOperation = ExtendedType<\n  'MergeNodeOperation',\n  BaseMergeNodeOperation\n>\n\nexport type BaseMoveNodeOperation = {\n  type: 'move_node'\n  path: Path\n  newPath: Path\n}\n\nexport type MoveNodeOperation = ExtendedType<\n  'MoveNodeOperation',\n  BaseMoveNodeOperation\n>\n\nexport type BaseRemoveNodeOperation = {\n  type: 'remove_node'\n  path: Path\n  node: Node\n}\n\nexport type RemoveNodeOperation = ExtendedType<\n  'RemoveNodeOperation',\n  BaseRemoveNodeOperation\n>\n\nexport type BaseRemoveTextOperation = {\n  type: 'remove_text'\n  path: Path\n  offset: number\n  text: string\n}\n\nexport type RemoveTextOperation = ExtendedType<\n  'RemoveTextOperation',\n  BaseRemoveTextOperation\n>\n\nexport type BaseSetNodeOperation = {\n  type: 'set_node'\n  path: Path\n  properties: Partial<Node>\n  newProperties: Partial<Node>\n}\n\nexport type SetNodeOperation = ExtendedType<\n  'SetNodeOperation',\n  BaseSetNodeOperation\n>\n\nexport type BaseSetSelectionOperation =\n  | {\n      type: 'set_selection'\n      properties: null\n      newProperties: Range\n    }\n  | {\n      type: 'set_selection'\n      properties: Partial<Range>\n      newProperties: Partial<Range>\n    }\n  | {\n      type: 'set_selection'\n      properties: Range\n      newProperties: null\n    }\n\nexport type SetSelectionOperation = ExtendedType<\n  'SetSelectionOperation',\n  BaseSetSelectionOperation\n>\n\nexport type BaseSplitNodeOperation = {\n  type: 'split_node'\n  path: Path\n  position: number\n  properties: Partial<Node>\n}\n\nexport type SplitNodeOperation = ExtendedType<\n  'SplitNodeOperation',\n  BaseSplitNodeOperation\n>\n\nexport type NodeOperation =\n  | InsertNodeOperation\n  | MergeNodeOperation\n  | MoveNodeOperation\n  | RemoveNodeOperation\n  | SetNodeOperation\n  | SplitNodeOperation\n\nexport type SelectionOperation = SetSelectionOperation\n\nexport type TextOperation = InsertTextOperation | RemoveTextOperation\n\n/**\n * `Operation` objects define the low-level instructions that Slate editors use\n * to apply changes to their internal state. Representing all changes as\n * operations is what allows Slate editors to easily implement history,\n * collaboration, and other features.\n */\n\nexport type Operation = NodeOperation | SelectionOperation | TextOperation\n\nexport interface OperationInterface {\n  isNodeOperation: (value: any) => value is NodeOperation\n  isOperation: (value: any) => value is Operation\n  isOperationList: (value: any) => value is Operation[]\n  isSelectionOperation: (value: any) => value is SelectionOperation\n  isTextOperation: (value: any) => value is TextOperation\n  inverse: (op: Operation) => Operation\n}\n\nexport const Operation: OperationInterface = {\n  /**\n   * Check of a value is a `NodeOperation` object.\n   */\n\n  isNodeOperation(value: any): value is NodeOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_node')\n  },\n\n  /**\n   * Check of a value is an `Operation` object.\n   */\n\n  isOperation(value: any): value is Operation {\n    if (!isPlainObject(value)) {\n      return false\n    }\n\n    switch (value.type) {\n      case 'insert_node':\n        return Path.isPath(value.path) && Node.isNode(value.node)\n      case 'insert_text':\n        return (\n          typeof value.offset === 'number' &&\n          typeof value.text === 'string' &&\n          Path.isPath(value.path)\n        )\n      case 'merge_node':\n        return (\n          typeof value.position === 'number' &&\n          Path.isPath(value.path) &&\n          isPlainObject(value.properties)\n        )\n      case 'move_node':\n        return Path.isPath(value.path) && Path.isPath(value.newPath)\n      case 'remove_node':\n        return Path.isPath(value.path) && Node.isNode(value.node)\n      case 'remove_text':\n        return (\n          typeof value.offset === 'number' &&\n          typeof value.text === 'string' &&\n          Path.isPath(value.path)\n        )\n      case 'set_node':\n        return (\n          Path.isPath(value.path) &&\n          isPlainObject(value.properties) &&\n          isPlainObject(value.newProperties)\n        )\n      case 'set_selection':\n        return (\n          (value.properties === null && Range.isRange(value.newProperties)) ||\n          (value.newProperties === null && Range.isRange(value.properties)) ||\n          (isPlainObject(value.properties) &&\n            isPlainObject(value.newProperties))\n        )\n      case 'split_node':\n        return (\n          Path.isPath(value.path) &&\n          typeof value.position === 'number' &&\n          isPlainObject(value.properties)\n        )\n      default:\n        return false\n    }\n  },\n\n  /**\n   * Check if a value is a list of `Operation` objects.\n   */\n\n  isOperationList(value: any): value is Operation[] {\n    return (\n      Array.isArray(value) && value.every(val => Operation.isOperation(val))\n    )\n  },\n\n  /**\n   * Check of a value is a `SelectionOperation` object.\n   */\n\n  isSelectionOperation(value: any): value is SelectionOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_selection')\n  },\n\n  /**\n   * Check of a value is a `TextOperation` object.\n   */\n\n  isTextOperation(value: any): value is TextOperation {\n    return Operation.isOperation(value) && value.type.endsWith('_text')\n  },\n\n  /**\n   * Invert an operation, returning a new operation that will exactly undo the\n   * original when applied.\n   */\n\n  inverse(op: Operation): Operation {\n    switch (op.type) {\n      case 'insert_node': {\n        return { ...op, type: 'remove_node' }\n      }\n\n      case 'insert_text': {\n        return { ...op, type: 'remove_text' }\n      }\n\n      case 'merge_node': {\n        return { ...op, type: 'split_node', path: Path.previous(op.path) }\n      }\n\n      case 'move_node': {\n        const { newPath, path } = op\n\n        // PERF: in this case the move operation is a no-op anyways.\n        if (Path.equals(newPath, path)) {\n          return op\n        }\n\n        // If the move happens completely within a single parent the path and\n        // newPath are stable with respect to each other.\n        if (Path.isSibling(path, newPath)) {\n          return { ...op, path: newPath, newPath: path }\n        }\n\n        // If the move does not happen within a single parent it is possible\n        // for the move to impact the true path to the location where the node\n        // was removed from and where it was inserted. We have to adjust for this\n        // and find the original path. We can accomplish this (only in non-sibling)\n        // moves by looking at the impact of the move operation on the node\n        // after the original move path.\n        const inversePath = Path.transform(path, op)!\n        const inverseNewPath = Path.transform(Path.next(path), op)!\n        return { ...op, path: inversePath, newPath: inverseNewPath }\n      }\n\n      case 'remove_node': {\n        return { ...op, type: 'insert_node' }\n      }\n\n      case 'remove_text': {\n        return { ...op, type: 'insert_text' }\n      }\n\n      case 'set_node': {\n        const { properties, newProperties } = op\n        return { ...op, properties: newProperties, newProperties: properties }\n      }\n\n      case 'set_selection': {\n        const { properties, newProperties } = op\n\n        if (properties == null) {\n          return {\n            ...op,\n            properties: newProperties as Range,\n            newProperties: null,\n          }\n        } else if (newProperties == null) {\n          return {\n            ...op,\n            properties: null,\n            newProperties: properties as Range,\n          }\n        } else {\n          return { ...op, properties: newProperties, newProperties: properties }\n        }\n      }\n\n      case 'split_node': {\n        return { ...op, type: 'merge_node', path: Path.next(op.path) }\n      }\n    }\n  },\n}\n","import { produce } from 'immer'\nimport { Operation } from '..'\n\n/**\n * `Path` arrays are a list of indexes that describe a node's exact position in\n * a Slate node tree. Although they are usually relative to the root `Editor`\n * object, they can be relative to any `Node` object.\n */\n\nexport type Path = number[]\n\nexport interface PathInterface {\n  ancestors: (path: Path, options?: { reverse?: boolean }) => Path[]\n  common: (path: Path, another: Path) => Path\n  compare: (path: Path, another: Path) => -1 | 0 | 1\n  endsAfter: (path: Path, another: Path) => boolean\n  endsAt: (path: Path, another: Path) => boolean\n  endsBefore: (path: Path, another: Path) => boolean\n  equals: (path: Path, another: Path) => boolean\n  hasPrevious: (path: Path) => boolean\n  isAfter: (path: Path, another: Path) => boolean\n  isAncestor: (path: Path, another: Path) => boolean\n  isBefore: (path: Path, another: Path) => boolean\n  isChild: (path: Path, another: Path) => boolean\n  isCommon: (path: Path, another: Path) => boolean\n  isDescendant: (path: Path, another: Path) => boolean\n  isParent: (path: Path, another: Path) => boolean\n  isPath: (value: any) => value is Path\n  isSibling: (path: Path, another: Path) => boolean\n  levels: (\n    path: Path,\n    options?: {\n      reverse?: boolean\n    }\n  ) => Path[]\n  next: (path: Path) => Path\n  parent: (path: Path) => Path\n  previous: (path: Path) => Path\n  relative: (path: Path, ancestor: Path) => Path\n  transform: (\n    path: Path,\n    operation: Operation,\n    options?: { affinity?: 'forward' | 'backward' | null }\n  ) => Path | null\n}\n\nexport const Path: PathInterface = {\n  /**\n   * Get a list of ancestor paths for a given path.\n   *\n   * The paths are sorted from deepest to shallowest ancestor. However, if the\n   * `reverse: true` option is passed, they are reversed.\n   */\n\n  ancestors(path: Path, options: { reverse?: boolean } = {}): Path[] {\n    const { reverse = false } = options\n    let paths = Path.levels(path, options)\n\n    if (reverse) {\n      paths = paths.slice(1)\n    } else {\n      paths = paths.slice(0, -1)\n    }\n\n    return paths\n  },\n\n  /**\n   * Get the common ancestor path of two paths.\n   */\n\n  common(path: Path, another: Path): Path {\n    const common: Path = []\n\n    for (let i = 0; i < path.length && i < another.length; i++) {\n      const av = path[i]\n      const bv = another[i]\n\n      if (av !== bv) {\n        break\n      }\n\n      common.push(av)\n    }\n\n    return common\n  },\n\n  /**\n   * Compare a path to another, returning an integer indicating whether the path\n   * was before, at, or after the other.\n   *\n   * Note: Two paths of unequal length can still receive a `0` result if one is\n   * directly above or below the other. If you want exact matching, use\n   * [[Path.equals]] instead.\n   */\n\n  compare(path: Path, another: Path): -1 | 0 | 1 {\n    const min = Math.min(path.length, another.length)\n\n    for (let i = 0; i < min; i++) {\n      if (path[i] < another[i]) return -1\n      if (path[i] > another[i]) return 1\n    }\n\n    return 0\n  },\n\n  /**\n   * Check if a path ends after one of the indexes in another.\n   */\n\n  endsAfter(path: Path, another: Path): boolean {\n    const i = path.length - 1\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    const av = path[i]\n    const bv = another[i]\n    return Path.equals(as, bs) && av > bv\n  },\n\n  /**\n   * Check if a path ends at one of the indexes in another.\n   */\n\n  endsAt(path: Path, another: Path): boolean {\n    const i = path.length\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    return Path.equals(as, bs)\n  },\n\n  /**\n   * Check if a path ends before one of the indexes in another.\n   */\n\n  endsBefore(path: Path, another: Path): boolean {\n    const i = path.length - 1\n    const as = path.slice(0, i)\n    const bs = another.slice(0, i)\n    const av = path[i]\n    const bv = another[i]\n    return Path.equals(as, bs) && av < bv\n  },\n\n  /**\n   * Check if a path is exactly equal to another.\n   */\n\n  equals(path: Path, another: Path): boolean {\n    return (\n      path.length === another.length && path.every((n, i) => n === another[i])\n    )\n  },\n\n  /**\n   * Check if the path of previous sibling node exists\n   */\n\n  hasPrevious(path: Path): boolean {\n    return path[path.length - 1] > 0\n  },\n\n  /**\n   * Check if a path is after another.\n   */\n\n  isAfter(path: Path, another: Path): boolean {\n    return Path.compare(path, another) === 1\n  },\n\n  /**\n   * Check if a path is an ancestor of another.\n   */\n\n  isAncestor(path: Path, another: Path): boolean {\n    return path.length < another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is before another.\n   */\n\n  isBefore(path: Path, another: Path): boolean {\n    return Path.compare(path, another) === -1\n  },\n\n  /**\n   * Check if a path is a child of another.\n   */\n\n  isChild(path: Path, another: Path): boolean {\n    return (\n      path.length === another.length + 1 && Path.compare(path, another) === 0\n    )\n  },\n\n  /**\n   * Check if a path is equal to or an ancestor of another.\n   */\n\n  isCommon(path: Path, another: Path): boolean {\n    return path.length <= another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is a descendant of another.\n   */\n\n  isDescendant(path: Path, another: Path): boolean {\n    return path.length > another.length && Path.compare(path, another) === 0\n  },\n\n  /**\n   * Check if a path is the parent of another.\n   */\n\n  isParent(path: Path, another: Path): boolean {\n    return (\n      path.length + 1 === another.length && Path.compare(path, another) === 0\n    )\n  },\n\n  /**\n   * Check is a value implements the `Path` interface.\n   */\n\n  isPath(value: any): value is Path {\n    return (\n      Array.isArray(value) &&\n      (value.length === 0 || typeof value[0] === 'number')\n    )\n  },\n\n  /**\n   * Check if a path is a sibling of another.\n   */\n\n  isSibling(path: Path, another: Path): boolean {\n    if (path.length !== another.length) {\n      return false\n    }\n\n    const as = path.slice(0, -1)\n    const bs = another.slice(0, -1)\n    const al = path[path.length - 1]\n    const bl = another[another.length - 1]\n    return al !== bl && Path.equals(as, bs)\n  },\n\n  /**\n   * Get a list of paths at every level down to a path. Note: this is the same\n   * as `Path.ancestors`, but including the path itself.\n   *\n   * The paths are sorted from shallowest to deepest. However, if the `reverse:\n   * true` option is passed, they are reversed.\n   */\n\n  levels(\n    path: Path,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): Path[] {\n    const { reverse = false } = options\n    const list: Path[] = []\n\n    for (let i = 0; i <= path.length; i++) {\n      list.push(path.slice(0, i))\n    }\n\n    if (reverse) {\n      list.reverse()\n    }\n\n    return list\n  },\n\n  /**\n   * Given a path, get the path to the next sibling node.\n   */\n\n  next(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(\n        `Cannot get the next path of a root path [${path}], because it has no next index.`\n      )\n    }\n\n    const last = path[path.length - 1]\n    return path.slice(0, -1).concat(last + 1)\n  },\n\n  /**\n   * Given a path, return a new path referring to the parent node above it.\n   */\n\n  parent(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(`Cannot get the parent path of the root path [${path}].`)\n    }\n\n    return path.slice(0, -1)\n  },\n\n  /**\n   * Given a path, get the path to the previous sibling node.\n   */\n\n  previous(path: Path): Path {\n    if (path.length === 0) {\n      throw new Error(\n        `Cannot get the previous path of a root path [${path}], because it has no previous index.`\n      )\n    }\n\n    const last = path[path.length - 1]\n\n    if (last <= 0) {\n      throw new Error(\n        `Cannot get the previous path of a first child path [${path}] because it would result in a negative index.`\n      )\n    }\n\n    return path.slice(0, -1).concat(last - 1)\n  },\n\n  /**\n   * Get a path relative to an ancestor.\n   */\n\n  relative(path: Path, ancestor: Path): Path {\n    if (!Path.isAncestor(ancestor, path) && !Path.equals(path, ancestor)) {\n      throw new Error(\n        `Cannot get the relative path of [${path}] inside ancestor [${ancestor}], because it is not above or equal to the path.`\n      )\n    }\n\n    return path.slice(ancestor.length)\n  },\n\n  /**\n   * Transform a path by an operation.\n   */\n\n  transform(\n    path: Path,\n    operation: Operation,\n    options: { affinity?: 'forward' | 'backward' | null } = {}\n  ): Path | null {\n    return produce(path, p => {\n      const { affinity = 'forward' } = options\n\n      // PERF: Exit early if the operation is guaranteed not to have an effect.\n      if (path.length === 0) {\n        return\n      }\n\n      switch (operation.type) {\n        case 'insert_node': {\n          const { path: op } = operation\n\n          if (\n            Path.equals(op, p) ||\n            Path.endsBefore(op, p) ||\n            Path.isAncestor(op, p)\n          ) {\n            p[op.length - 1] += 1\n          }\n\n          break\n        }\n\n        case 'remove_node': {\n          const { path: op } = operation\n\n          if (Path.equals(op, p) || Path.isAncestor(op, p)) {\n            return null\n          } else if (Path.endsBefore(op, p)) {\n            p[op.length - 1] -= 1\n          }\n\n          break\n        }\n\n        case 'merge_node': {\n          const { path: op, position } = operation\n\n          if (Path.equals(op, p) || Path.endsBefore(op, p)) {\n            p[op.length - 1] -= 1\n          } else if (Path.isAncestor(op, p)) {\n            p[op.length - 1] -= 1\n            p[op.length] += position\n          }\n\n          break\n        }\n\n        case 'split_node': {\n          const { path: op, position } = operation\n\n          if (Path.equals(op, p)) {\n            if (affinity === 'forward') {\n              p[p.length - 1] += 1\n            } else if (affinity === 'backward') {\n              // Nothing, because it still refers to the right path.\n            } else {\n              return null\n            }\n          } else if (Path.endsBefore(op, p)) {\n            p[op.length - 1] += 1\n          } else if (Path.isAncestor(op, p) && path[op.length] >= position) {\n            p[op.length - 1] += 1\n            p[op.length] -= position\n          }\n\n          break\n        }\n\n        case 'move_node': {\n          const { path: op, newPath: onp } = operation\n\n          // If the old and new path are the same, it's a no-op.\n          if (Path.equals(op, onp)) {\n            return\n          }\n\n          if (Path.isAncestor(op, p) || Path.equals(op, p)) {\n            const copy = onp.slice()\n\n            if (Path.endsBefore(op, onp) && op.length < onp.length) {\n              copy[op.length - 1] -= 1\n            }\n\n            return copy.concat(p.slice(op.length))\n          } else if (\n            Path.isSibling(op, onp) &&\n            (Path.isAncestor(onp, p) || Path.equals(onp, p))\n          ) {\n            if (Path.endsBefore(op, p)) {\n              p[op.length - 1] -= 1\n            } else {\n              p[op.length - 1] += 1\n            }\n          } else if (\n            Path.endsBefore(onp, p) ||\n            Path.equals(onp, p) ||\n            Path.isAncestor(onp, p)\n          ) {\n            if (Path.endsBefore(op, p)) {\n              p[op.length - 1] -= 1\n            }\n\n            p[onp.length - 1] += 1\n          } else if (Path.endsBefore(op, p)) {\n            if (Path.equals(onp, p)) {\n              p[onp.length - 1] += 1\n            }\n\n            p[op.length - 1] -= 1\n          }\n\n          break\n        }\n      }\n    })\n  },\n}\n","import { Operation, Path } from '..'\n\n/**\n * `PathRef` objects keep a specific path in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date path value.\n */\n\nexport interface PathRef {\n  current: Path | null\n  affinity: 'forward' | 'backward' | null\n  unref(): Path | null\n}\n\nexport interface PathRefInterface {\n  transform: (ref: PathRef, op: Operation) => void\n}\n\nexport const PathRef: PathRefInterface = {\n  /**\n   * Transform the path ref's current value by an operation.\n   */\n\n  transform(ref: PathRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const path = Path.transform(current, op, { affinity })\n    ref.current = path\n\n    if (path == null) {\n      ref.unref()\n    }\n  },\n}\n","import isPlainObject from 'is-plain-object'\nimport { produce } from 'immer'\nimport { ExtendedType, Operation, Path } from '..'\n\n/**\n * `Point` objects refer to a specific location in a text node in a Slate\n * document. Its path refers to the location of the node in the tree, and its\n * offset refers to the distance into the node's string of text. Points can\n * only refer to `Text` nodes.\n */\n\nexport interface BasePoint {\n  path: Path\n  offset: number\n}\n\nexport type Point = ExtendedType<'Point', BasePoint>\n\nexport interface PointInterface {\n  compare: (point: Point, another: Point) => -1 | 0 | 1\n  isAfter: (point: Point, another: Point) => boolean\n  isBefore: (point: Point, another: Point) => boolean\n  equals: (point: Point, another: Point) => boolean\n  isPoint: (value: any) => value is Point\n  transform: (\n    point: Point,\n    op: Operation,\n    options?: { affinity?: 'forward' | 'backward' | null }\n  ) => Point | null\n}\n\nexport const Point: PointInterface = {\n  /**\n   * Compare a point to another, returning an integer indicating whether the\n   * point was before, at, or after the other.\n   */\n\n  compare(point: Point, another: Point): -1 | 0 | 1 {\n    const result = Path.compare(point.path, another.path)\n\n    if (result === 0) {\n      if (point.offset < another.offset) return -1\n      if (point.offset > another.offset) return 1\n      return 0\n    }\n\n    return result\n  },\n\n  /**\n   * Check if a point is after another.\n   */\n\n  isAfter(point: Point, another: Point): boolean {\n    return Point.compare(point, another) === 1\n  },\n\n  /**\n   * Check if a point is before another.\n   */\n\n  isBefore(point: Point, another: Point): boolean {\n    return Point.compare(point, another) === -1\n  },\n\n  /**\n   * Check if a point is exactly equal to another.\n   */\n\n  equals(point: Point, another: Point): boolean {\n    // PERF: ensure the offsets are equal first since they are cheaper to check.\n    return (\n      point.offset === another.offset && Path.equals(point.path, another.path)\n    )\n  },\n\n  /**\n   * Check if a value implements the `Point` interface.\n   */\n\n  isPoint(value: any): value is Point {\n    return (\n      isPlainObject(value) &&\n      typeof value.offset === 'number' &&\n      Path.isPath(value.path)\n    )\n  },\n\n  /**\n   * Transform a point by an operation.\n   */\n\n  transform(\n    point: Point,\n    op: Operation,\n    options: { affinity?: 'forward' | 'backward' | null } = {}\n  ): Point | null {\n    return produce(point, p => {\n      const { affinity = 'forward' } = options\n      const { path, offset } = p\n\n      switch (op.type) {\n        case 'insert_node':\n        case 'move_node': {\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'insert_text': {\n          if (Path.equals(op.path, path) && op.offset <= offset) {\n            p.offset += op.text.length\n          }\n\n          break\n        }\n\n        case 'merge_node': {\n          if (Path.equals(op.path, path)) {\n            p.offset += op.position\n          }\n\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'remove_text': {\n          if (Path.equals(op.path, path) && op.offset <= offset) {\n            p.offset -= Math.min(offset - op.offset, op.text.length)\n          }\n\n          break\n        }\n\n        case 'remove_node': {\n          if (Path.equals(op.path, path) || Path.isAncestor(op.path, path)) {\n            return null\n          }\n\n          p.path = Path.transform(path, op, options)!\n          break\n        }\n\n        case 'split_node': {\n          if (Path.equals(op.path, path)) {\n            if (op.position === offset && affinity == null) {\n              return null\n            } else if (\n              op.position < offset ||\n              (op.position === offset && affinity === 'forward')\n            ) {\n              p.offset -= op.position\n\n              p.path = Path.transform(path, op, {\n                ...options,\n                affinity: 'forward',\n              })!\n            }\n          } else {\n            p.path = Path.transform(path, op, options)!\n          }\n\n          break\n        }\n      }\n    })\n  },\n}\n\n/**\n * `PointEntry` objects are returned when iterating over `Point` objects that\n * belong to a range.\n */\n\nexport type PointEntry = [Point, 'anchor' | 'focus']\n","import { Operation, Point } from '..'\n\n/**\n * `PointRef` objects keep a specific point in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date point value.\n */\n\nexport interface PointRef {\n  current: Point | null\n  affinity: 'forward' | 'backward' | null\n  unref(): Point | null\n}\n\nexport interface PointRefInterface {\n  transform: (ref: PointRef, op: Operation) => void\n}\n\nexport const PointRef: PointRefInterface = {\n  /**\n   * Transform the point ref's current value by an operation.\n   */\n\n  transform(ref: PointRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const point = Point.transform(current, op, { affinity })\n    ref.current = point\n\n    if (point == null) {\n      ref.unref()\n    }\n  },\n}\n","import { produce } from 'immer'\nimport isPlainObject from 'is-plain-object'\nimport { ExtendedType, Operation, Path, Point, PointEntry } from '..'\n\n/**\n * `Range` objects are a set of points that refer to a specific span of a Slate\n * document. They can define a span inside a single node or a can span across\n * multiple nodes.\n */\n\nexport interface BaseRange {\n  anchor: Point\n  focus: Point\n}\n\nexport type Range = ExtendedType<'Range', BaseRange>\n\nexport interface RangeInterface {\n  edges: (\n    range: Range,\n    options?: {\n      reverse?: boolean\n    }\n  ) => [Point, Point]\n  end: (range: Range) => Point\n  equals: (range: Range, another: Range) => boolean\n  includes: (range: Range, target: Path | Point | Range) => boolean\n  intersection: (range: Range, another: Range) => Range | null\n  isBackward: (range: Range) => boolean\n  isCollapsed: (range: Range) => boolean\n  isExpanded: (range: Range) => boolean\n  isForward: (range: Range) => boolean\n  isRange: (value: any) => value is Range\n  points: (range: Range) => Generator<PointEntry, void, undefined>\n  start: (range: Range) => Point\n  transform: (\n    range: Range,\n    op: Operation,\n    options?: {\n      affinity?: 'forward' | 'backward' | 'outward' | 'inward' | null\n    }\n  ) => Range | null\n}\n\nexport const Range: RangeInterface = {\n  /**\n   * Get the start and end points of a range, in the order in which they appear\n   * in the document.\n   */\n\n  edges(\n    range: Range,\n    options: {\n      reverse?: boolean\n    } = {}\n  ): [Point, Point] {\n    const { reverse = false } = options\n    const { anchor, focus } = range\n    return Range.isBackward(range) === reverse\n      ? [anchor, focus]\n      : [focus, anchor]\n  },\n\n  /**\n   * Get the end point of a range.\n   */\n\n  end(range: Range): Point {\n    const [, end] = Range.edges(range)\n    return end\n  },\n\n  /**\n   * Check if a range is exactly equal to another.\n   */\n\n  equals(range: Range, another: Range): boolean {\n    return (\n      Point.equals(range.anchor, another.anchor) &&\n      Point.equals(range.focus, another.focus)\n    )\n  },\n\n  /**\n   * Check if a range includes a path, a point or part of another range.\n   */\n\n  includes(range: Range, target: Path | Point | Range): boolean {\n    if (Range.isRange(target)) {\n      if (\n        Range.includes(range, target.anchor) ||\n        Range.includes(range, target.focus)\n      ) {\n        return true\n      }\n\n      const [rs, re] = Range.edges(range)\n      const [ts, te] = Range.edges(target)\n      return Point.isBefore(rs, ts) && Point.isAfter(re, te)\n    }\n\n    const [start, end] = Range.edges(range)\n    let isAfterStart = false\n    let isBeforeEnd = false\n\n    if (Point.isPoint(target)) {\n      isAfterStart = Point.compare(target, start) >= 0\n      isBeforeEnd = Point.compare(target, end) <= 0\n    } else {\n      isAfterStart = Path.compare(target, start.path) >= 0\n      isBeforeEnd = Path.compare(target, end.path) <= 0\n    }\n\n    return isAfterStart && isBeforeEnd\n  },\n\n  /**\n   * Get the intersection of a range with another.\n   */\n\n  intersection(range: Range, another: Range): Range | null {\n    const { anchor, focus, ...rest } = range\n    const [s1, e1] = Range.edges(range)\n    const [s2, e2] = Range.edges(another)\n    const start = Point.isBefore(s1, s2) ? s2 : s1\n    const end = Point.isBefore(e1, e2) ? e1 : e2\n\n    if (Point.isBefore(end, start)) {\n      return null\n    } else {\n      return { anchor: start, focus: end, ...rest }\n    }\n  },\n\n  /**\n   * Check if a range is backward, meaning that its anchor point appears in the\n   * document _after_ its focus point.\n   */\n\n  isBackward(range: Range): boolean {\n    const { anchor, focus } = range\n    return Point.isAfter(anchor, focus)\n  },\n\n  /**\n   * Check if a range is collapsed, meaning that both its anchor and focus\n   * points refer to the exact same position in the document.\n   */\n\n  isCollapsed(range: Range): boolean {\n    const { anchor, focus } = range\n    return Point.equals(anchor, focus)\n  },\n\n  /**\n   * Check if a range is expanded.\n   *\n   * This is the opposite of [[Range.isCollapsed]] and is provided for legibility.\n   */\n\n  isExpanded(range: Range): boolean {\n    return !Range.isCollapsed(range)\n  },\n\n  /**\n   * Check if a range is forward.\n   *\n   * This is the opposite of [[Range.isBackward]] and is provided for legibility.\n   */\n\n  isForward(range: Range): boolean {\n    return !Range.isBackward(range)\n  },\n\n  /**\n   * Check if a value implements the [[Range]] interface.\n   */\n\n  isRange(value: any): value is Range {\n    return (\n      isPlainObject(value) &&\n      Point.isPoint(value.anchor) &&\n      Point.isPoint(value.focus)\n    )\n  },\n\n  /**\n   * Iterate through all of the point entries in a range.\n   */\n\n  *points(range: Range): Generator<PointEntry, void, undefined> {\n    yield [range.anchor, 'anchor']\n    yield [range.focus, 'focus']\n  },\n\n  /**\n   * Get the start point of a range.\n   */\n\n  start(range: Range): Point {\n    const [start] = Range.edges(range)\n    return start\n  },\n\n  /**\n   * Transform a range by an operation.\n   */\n\n  transform(\n    range: Range,\n    op: Operation,\n    options: {\n      affinity?: 'forward' | 'backward' | 'outward' | 'inward' | null\n    } = {}\n  ): Range | null {\n    const { affinity = 'inward' } = options\n    let affinityAnchor: 'forward' | 'backward' | null\n    let affinityFocus: 'forward' | 'backward' | null\n\n    if (affinity === 'inward') {\n      if (Range.isForward(range)) {\n        affinityAnchor = 'forward'\n        affinityFocus = 'backward'\n      } else {\n        affinityAnchor = 'backward'\n        affinityFocus = 'forward'\n      }\n    } else if (affinity === 'outward') {\n      if (Range.isForward(range)) {\n        affinityAnchor = 'backward'\n        affinityFocus = 'forward'\n      } else {\n        affinityAnchor = 'forward'\n        affinityFocus = 'backward'\n      }\n    } else {\n      affinityAnchor = affinity\n      affinityFocus = affinity\n    }\n\n    return produce(range, r => {\n      const anchor = Point.transform(r.anchor, op, { affinity: affinityAnchor })\n      const focus = Point.transform(r.focus, op, { affinity: affinityFocus })\n\n      if (!anchor || !focus) {\n        return null\n      }\n\n      r.anchor = anchor\n      r.focus = focus\n    })\n  },\n}\n","import { Operation, Range } from '..'\n\n/**\n * `RangeRef` objects keep a specific range in a document synced over time as new\n * operations are applied to the editor. You can access their `current` property\n * at any time for the up-to-date range value.\n */\n\nexport interface RangeRef {\n  current: Range | null\n  affinity: 'forward' | 'backward' | 'outward' | 'inward' | null\n  unref(): Range | null\n}\n\nexport interface RangeRefInterface {\n  transform: (ref: RangeRef, op: Operation) => void\n}\n\nexport const RangeRef: RangeRefInterface = {\n  /**\n   * Transform the range ref's current value by an operation.\n   */\n\n  transform(ref: RangeRef, op: Operation): void {\n    const { current, affinity } = ref\n\n    if (current == null) {\n      return\n    }\n\n    const path = Range.transform(current, op, { affinity })\n    ref.current = path\n\n    if (path == null) {\n      ref.unref()\n    }\n  },\n}\n","import isPlainObject from 'is-plain-object'\nimport isEqual from 'fast-deep-equal'\nimport { Range } from '..'\nimport { ExtendedType } from './custom-types'\n\n/**\n * `Text` objects represent the nodes that contain the actual text content of a\n * Slate document along with any formatting properties. They are always leaf\n * nodes in the document tree as they cannot contain any children.\n */\n\nexport interface BaseText {\n  text: string\n}\n\nexport type Text = ExtendedType<'Text', BaseText>\n\nexport interface TextInterface {\n  equals: (text: Text, another: Text, options?: { loose?: boolean }) => boolean\n  isText: (value: any) => value is Text\n  isTextList: (value: any) => value is Text[]\n  isTextProps: (props: any) => props is Partial<Text>\n  matches: (text: Text, props: Partial<Text>) => boolean\n  decorations: (node: Text, decorations: Range[]) => Text[]\n}\n\nexport const Text: TextInterface = {\n  /**\n   * Check if two text nodes are equal.\n   */\n\n  equals(\n    text: Text,\n    another: Text,\n    options: { loose?: boolean } = {}\n  ): boolean {\n    const { loose = false } = options\n\n    function omitText(obj: Record<any, any>) {\n      const { text, ...rest } = obj\n\n      return rest\n    }\n\n    return isEqual(\n      loose ? omitText(text) : text,\n      loose ? omitText(another) : another\n    )\n  },\n\n  /**\n   * Check if a value implements the `Text` interface.\n   */\n\n  isText(value: any): value is Text {\n    return isPlainObject(value) && typeof value.text === 'string'\n  },\n\n  /**\n   * Check if a value is a list of `Text` objects.\n   */\n\n  isTextList(value: any): value is Text[] {\n    return Array.isArray(value) && value.every(val => Text.isText(val))\n  },\n\n  /**\n   * Check if some props are a partial of Text.\n   */\n\n  isTextProps(props: any): props is Partial<Text> {\n    return (props as Partial<Text>).text !== undefined\n  },\n\n  /**\n   * Check if an text matches set of properties.\n   *\n   * Note: this is for matching custom properties, and it does not ensure that\n   * the `text` property are two nodes equal.\n   */\n\n  matches(text: Text, props: Partial<Text>): boolean {\n    for (const key in props) {\n      if (key === 'text') {\n        continue\n      }\n\n      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {\n        return false\n      }\n    }\n\n    return true\n  },\n\n  /**\n   * Get the leaves for a text node given decorations.\n   */\n\n  decorations(node: Text, decorations: Range[]): Text[] {\n    let leaves: Text[] = [{ ...node }]\n\n    for (const dec of decorations) {\n      const { anchor, focus, ...rest } = dec\n      const [start, end] = Range.edges(dec)\n      const next = []\n      let o = 0\n\n      for (const leaf of leaves) {\n        const { length } = leaf.text\n        const offset = o\n        o += length\n\n        // If the range encompases the entire leaf, add the range.\n        if (start.offset <= offset && end.offset >= o) {\n          Object.assign(leaf, rest)\n          next.push(leaf)\n          continue\n        }\n\n        // If the range expanded and match the leaf, or starts after, or ends before it, continue.\n        if (\n          (start.offset !== end.offset &&\n            (start.offset === o || end.offset === offset)) ||\n          start.offset > o ||\n          end.offset < offset ||\n          (end.offset === offset && offset !== 0)\n        ) {\n          next.push(leaf)\n          continue\n        }\n\n        // Otherwise we need to split the leaf, at the start, end, or both,\n        // and add the range to the middle intersecting section. Do the end\n        // split first since we don't need to update the offset that way.\n        let middle = leaf\n        let before\n        let after\n\n        if (end.offset < o) {\n          const off = end.offset - offset\n          after = { ...middle, text: middle.text.slice(off) }\n          middle = { ...middle, text: middle.text.slice(0, off) }\n        }\n\n        if (start.offset > offset) {\n          const off = start.offset - offset\n          before = { ...middle, text: middle.text.slice(0, off) }\n          middle = { ...middle, text: middle.text.slice(off) }\n        }\n\n        Object.assign(middle, rest)\n\n        if (before) {\n          next.push(before)\n        }\n\n        next.push(middle)\n\n        if (after) {\n          next.push(after)\n        }\n      }\n\n      leaves = next\n    }\n\n    return leaves\n  },\n}\n","import { createDraft, finishDraft, isDraft } from 'immer'\nimport {\n  Node,\n  Editor,\n  Selection,\n  Range,\n  Point,\n  Text,\n  Element,\n  Operation,\n  Descendant,\n  NodeEntry,\n  Path,\n  Ancestor,\n} from '..'\n\nexport interface GeneralTransforms {\n  transform: (editor: Editor, op: Operation) => void\n}\n\nconst applyToDraft = (editor: Editor, selection: Selection, op: Operation) => {\n  switch (op.type) {\n    case 'insert_node': {\n      const { path, node } = op\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n\n      if (index > parent.children.length) {\n        throw new Error(\n          `Cannot apply an \"insert_node\" operation at path [${path}] because the destination is past the end of the node.`\n        )\n      }\n\n      parent.children.splice(index, 0, node)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'insert_text': {\n      const { path, offset, text } = op\n      if (text.length === 0) break\n      const node = Node.leaf(editor, path)\n      const before = node.text.slice(0, offset)\n      const after = node.text.slice(offset)\n      node.text = before + text + after\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'merge_node': {\n      const { path } = op\n      const node = Node.get(editor, path)\n      const prevPath = Path.previous(path)\n      const prev = Node.get(editor, prevPath)\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n\n      if (Text.isText(node) && Text.isText(prev)) {\n        prev.text += node.text\n      } else if (!Text.isText(node) && !Text.isText(prev)) {\n        prev.children.push(...node.children)\n      } else {\n        throw new Error(\n          `Cannot apply a \"merge_node\" operation at path [${path}] to nodes of different interfaces: ${node} ${prev}`\n        )\n      }\n\n      parent.children.splice(index, 1)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'move_node': {\n      const { path, newPath } = op\n\n      if (Path.isAncestor(path, newPath)) {\n        throw new Error(\n          `Cannot move a path [${path}] to new path [${newPath}] because the destination is inside itself.`\n        )\n      }\n\n      const node = Node.get(editor, path)\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n\n      // This is tricky, but since the `path` and `newPath` both refer to\n      // the same snapshot in time, there's a mismatch. After either\n      // removing the original position, the second step's path can be out\n      // of date. So instead of using the `op.newPath` directly, we\n      // transform `op.path` to ascertain what the `newPath` would be after\n      // the operation was applied.\n      parent.children.splice(index, 1)\n      const truePath = Path.transform(path, op)!\n      const newParent = Node.get(editor, Path.parent(truePath)) as Ancestor\n      const newIndex = truePath[truePath.length - 1]\n\n      newParent.children.splice(newIndex, 0, node)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'remove_node': {\n      const { path } = op\n      const index = path[path.length - 1]\n      const parent = Node.parent(editor, path)\n      parent.children.splice(index, 1)\n\n      // Transform all of the points in the value, but if the point was in the\n      // node that was removed we need to update the range or remove it.\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          const result = Point.transform(point, op)\n\n          if (selection != null && result != null) {\n            selection[key] = result\n          } else {\n            let prev: NodeEntry<Text> | undefined\n            let next: NodeEntry<Text> | undefined\n\n            for (const [n, p] of Node.texts(editor)) {\n              if (Path.compare(p, path) === -1) {\n                prev = [n, p]\n              } else {\n                next = [n, p]\n                break\n              }\n            }\n\n            if (prev) {\n              point.path = prev[1]\n              point.offset = prev[0].text.length\n            } else if (next) {\n              point.path = next[1]\n              point.offset = 0\n            } else {\n              selection = null\n            }\n          }\n        }\n      }\n\n      break\n    }\n\n    case 'remove_text': {\n      const { path, offset, text } = op\n      if (text.length === 0) break\n      const node = Node.leaf(editor, path)\n      const before = node.text.slice(0, offset)\n      const after = node.text.slice(offset + text.length)\n      node.text = before + after\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n\n    case 'set_node': {\n      const { path, properties, newProperties } = op\n\n      if (path.length === 0) {\n        throw new Error(`Cannot set properties on the root node!`)\n      }\n\n      const node = Node.get(editor, path)\n\n      for (const key in newProperties) {\n        if (key === 'children' || key === 'text') {\n          throw new Error(`Cannot set the \"${key}\" property of nodes!`)\n        }\n\n        const value = newProperties[key]\n\n        if (value == null) {\n          delete node[key]\n        } else {\n          node[key] = value\n        }\n      }\n\n      // properties that were previously defined, but are now missing, must be deleted\n      for (const key in properties) {\n        if (!newProperties.hasOwnProperty(key)) {\n          delete node[key]\n        }\n      }\n\n      break\n    }\n\n    case 'set_selection': {\n      const { newProperties } = op\n\n      if (newProperties == null) {\n        selection = newProperties\n      } else {\n        if (selection == null) {\n          if (!Range.isRange(newProperties)) {\n            throw new Error(\n              `Cannot apply an incomplete \"set_selection\" operation properties ${JSON.stringify(\n                newProperties\n              )} when there is no current selection.`\n            )\n          }\n\n          selection = { ...newProperties }\n        }\n\n        for (const key in newProperties) {\n          const value = newProperties[key]\n\n          if (value == null) {\n            if (key === 'anchor' || key === 'focus') {\n              throw new Error(`Cannot remove the \"${key}\" selection property`)\n            }\n\n            delete selection[key]\n          } else {\n            selection[key] = value\n          }\n        }\n      }\n\n      break\n    }\n\n    case 'split_node': {\n      const { path, position, properties } = op\n\n      if (path.length === 0) {\n        throw new Error(\n          `Cannot apply a \"split_node\" operation at path [${path}] because the root node cannot be split.`\n        )\n      }\n\n      const node = Node.get(editor, path)\n      const parent = Node.parent(editor, path)\n      const index = path[path.length - 1]\n      let newNode: Descendant\n\n      if (Text.isText(node)) {\n        const before = node.text.slice(0, position)\n        const after = node.text.slice(position)\n        node.text = before\n        newNode = {\n          ...(properties as Partial<Text>),\n          text: after,\n        }\n      } else {\n        const before = node.children.slice(0, position)\n        const after = node.children.slice(position)\n        node.children = before\n\n        newNode = {\n          ...(properties as Partial<Element>),\n          children: after,\n        }\n      }\n\n      parent.children.splice(index + 1, 0, newNode)\n\n      if (selection) {\n        for (const [point, key] of Range.points(selection)) {\n          selection[key] = Point.transform(point, op)!\n        }\n      }\n\n      break\n    }\n  }\n  return selection\n}\n\nexport const GeneralTransforms: GeneralTransforms = {\n  /**\n   * Transform the editor by an operation.\n   */\n\n  transform(editor: Editor, op: Operation): void {\n    editor.children = createDraft(editor.children)\n    let selection = editor.selection && createDraft(editor.selection)\n\n    try {\n      selection = applyToDraft(editor, selection, op)\n    } finally {\n      editor.children = finishDraft(editor.children)\n\n      if (selection) {\n        editor.selection = isDraft(selection)\n          ? (finishDraft(selection) as Range)\n          : selection\n      } else {\n        editor.selection = null\n      }\n    }\n  },\n}\n","import {\n  Editor,\n  Element,\n  Location,\n  Node,\n  Path,\n  Point,\n  Range,\n  Text,\n  Transforms,\n  NodeEntry,\n  Ancestor,\n} from '..'\nimport { NodeMatch } from '../interfaces/editor'\n\nexport interface NodeTransforms {\n  insertNodes: <T extends Node>(\n    editor: Editor,\n    nodes: Node | Node[],\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      select?: boolean\n      voids?: boolean\n    }\n  ) => void\n  liftNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    }\n  ) => void\n  mergeNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      voids?: boolean\n    }\n  ) => void\n  moveNodes: <T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      to: Path\n      voids?: boolean\n    }\n  ) => void\n  removeNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      voids?: boolean\n    }\n  ) => void\n  setNodes: <T extends Node>(\n    editor: Editor,\n    props: Partial<Node>,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      hanging?: boolean\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n  splitNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      always?: boolean\n      height?: number\n      voids?: boolean\n    }\n  ) => void\n  unsetNodes: <T extends Node>(\n    editor: Editor,\n    props: string | string[],\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n  unwrapNodes: <T extends Node>(\n    editor: Editor,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n  wrapNodes: <T extends Node>(\n    editor: Editor,\n    element: Element,\n    options?: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    }\n  ) => void\n}\n\nexport const NodeTransforms: NodeTransforms = {\n  /**\n   * Insert nodes at a specific location in the Editor.\n   */\n\n  insertNodes<T extends Node>(\n    editor: Editor,\n    nodes: Node | Node[],\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      select?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n      let { at, match, select } = options\n\n      if (Node.isNode(nodes)) {\n        nodes = [nodes]\n      }\n\n      if (nodes.length === 0) {\n        return\n      }\n\n      const [node] = nodes\n\n      // By default, use the selection as the target location. But if there is\n      // no selection, insert at the end of the document since that is such a\n      // common use case when inserting from a non-selected state.\n      if (!at) {\n        if (editor.selection) {\n          at = editor.selection\n        } else if (editor.children.length > 0) {\n          at = Editor.end(editor, [])\n        } else {\n          at = [0]\n        }\n\n        select = true\n      }\n\n      if (select == null) {\n        select = false\n      }\n\n      if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at)\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n        }\n      }\n\n      if (Point.isPoint(at)) {\n        if (match == null) {\n          if (Text.isText(node)) {\n            match = n => Text.isText(n)\n          } else if (editor.isInline(node)) {\n            match = n => Text.isText(n) || Editor.isInline(editor, n)\n          } else {\n            match = n => Editor.isBlock(editor, n)\n          }\n        }\n\n        const [entry] = Editor.nodes(editor, {\n          at: at.path,\n          match,\n          mode,\n          voids,\n        })\n\n        if (entry) {\n          const [, matchPath] = entry\n          const pathRef = Editor.pathRef(editor, matchPath)\n          const isAtEnd = Editor.isEnd(editor, at, matchPath)\n          Transforms.splitNodes(editor, { at, match, mode, voids })\n          const path = pathRef.unref()!\n          at = isAtEnd ? Path.next(path) : path\n        } else {\n          return\n        }\n      }\n\n      const parentPath = Path.parent(at)\n      let index = at[at.length - 1]\n\n      if (!voids && Editor.void(editor, { at: parentPath })) {\n        return\n      }\n\n      for (const node of nodes) {\n        const path = parentPath.concat(index)\n        index++\n        editor.apply({ type: 'insert_node', path, node })\n      }\n\n      if (select) {\n        const point = Editor.end(editor, at)\n\n        if (point) {\n          Transforms.select(editor, point)\n        }\n      }\n    })\n  },\n\n  /**\n   * Lift nodes at a specific location upwards in the document tree, splitting\n   * their parent in two if necessary.\n   */\n\n  liftNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { at = editor.selection, mode = 'lowest', voids = false } = options\n      let { match } = options\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!at) {\n        return\n      }\n\n      const matches = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n\n        if (path.length < 2) {\n          throw new Error(\n            `Cannot lift node at a path [${path}] because it has a depth of less than \\`2\\`.`\n          )\n        }\n\n        const parentNodeEntry = Editor.node(editor, Path.parent(path))\n        const [parent, parentPath] = parentNodeEntry as NodeEntry<Ancestor>\n        const index = path[path.length - 1]\n        const { length } = parent.children\n\n        if (length === 1) {\n          const toPath = Path.next(parentPath)\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n          Transforms.removeNodes(editor, { at: parentPath, voids })\n        } else if (index === 0) {\n          Transforms.moveNodes(editor, { at: path, to: parentPath, voids })\n        } else if (index === length - 1) {\n          const toPath = Path.next(parentPath)\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n        } else {\n          const splitPath = Path.next(path)\n          const toPath = Path.next(parentPath)\n          Transforms.splitNodes(editor, { at: splitPath, voids })\n          Transforms.moveNodes(editor, { at: path, to: toPath, voids })\n        }\n      }\n    })\n  },\n\n  /**\n   * Merge a node at a location with the previous node of the same depth,\n   * removing any empty containing nodes after the merge if necessary.\n   */\n\n  mergeNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      let { match, at = editor.selection } = options\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          const [parent] = Editor.parent(editor, at)\n          match = n => parent.children.includes(n)\n        } else {\n          match = n => Editor.isBlock(editor, n)\n        }\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n\n          if (options.at == null) {\n            Transforms.select(editor, at)\n          }\n        }\n      }\n\n      const [current] = Editor.nodes(editor, { at, match, voids, mode })\n      const prev = Editor.previous(editor, { at, match, voids, mode })\n\n      if (!current || !prev) {\n        return\n      }\n\n      const [node, path] = current\n      const [prevNode, prevPath] = prev\n\n      if (path.length === 0 || prevPath.length === 0) {\n        return\n      }\n\n      const newPath = Path.next(prevPath)\n      const commonPath = Path.common(path, prevPath)\n      const isPreviousSibling = Path.isSibling(path, prevPath)\n      const levels = Array.from(Editor.levels(editor, { at: path }), ([n]) => n)\n        .slice(commonPath.length)\n        .slice(0, -1)\n\n      // Determine if the merge will leave an ancestor of the path empty as a\n      // result, in which case we'll want to remove it after merging.\n      const emptyAncestor = Editor.above(editor, {\n        at: path,\n        mode: 'highest',\n        match: n => levels.includes(n) && hasSingleChildNest(editor, n),\n      })\n\n      const emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1])\n      let properties\n      let position\n\n      // Ensure that the nodes are equivalent, and figure out what the position\n      // and extra properties of the merge will be.\n      if (Text.isText(node) && Text.isText(prevNode)) {\n        const { text, ...rest } = node\n        position = prevNode.text.length\n        properties = rest as Partial<Text>\n      } else if (Element.isElement(node) && Element.isElement(prevNode)) {\n        const { children, ...rest } = node\n        position = prevNode.children.length\n        properties = rest as Partial<Element>\n      } else {\n        throw new Error(\n          `Cannot merge the node at path [${path}] with the previous sibling because it is not the same kind: ${JSON.stringify(\n            node\n          )} ${JSON.stringify(prevNode)}`\n        )\n      }\n\n      // If the node isn't already the next sibling of the previous node, move\n      // it so that it is before merging.\n      if (!isPreviousSibling) {\n        Transforms.moveNodes(editor, { at: path, to: newPath, voids })\n      }\n\n      // If there was going to be an empty ancestor of the node that was merged,\n      // we remove it from the tree.\n      if (emptyRef) {\n        Transforms.removeNodes(editor, { at: emptyRef.current!, voids })\n      }\n\n      // If the target node that we're merging with is empty, remove it instead\n      // of merging the two. This is a common rich text editor behavior to\n      // prevent losing formatting when deleting entire nodes when you have a\n      // hanging selection.\n      if (\n        (Element.isElement(prevNode) && Editor.isEmpty(editor, prevNode)) ||\n        (Text.isText(prevNode) && prevNode.text === '')\n      ) {\n        Transforms.removeNodes(editor, { at: prevPath, voids })\n      } else {\n        editor.apply({\n          type: 'merge_node',\n          path: newPath,\n          position,\n          properties,\n        })\n      }\n\n      if (emptyRef) {\n        emptyRef.unref()\n      }\n    })\n  },\n\n  /**\n   * Move the nodes at a location to a new location.\n   */\n\n  moveNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      to: Path\n      voids?: boolean\n    }\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const {\n        to,\n        at = editor.selection,\n        mode = 'lowest',\n        voids = false,\n      } = options\n      let { match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      const toRef = Editor.pathRef(editor, to)\n      const targets = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(targets, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        const newPath = toRef.current!\n\n        if (path.length !== 0) {\n          editor.apply({ type: 'move_node', path, newPath })\n        }\n\n        if (\n          toRef.current &&\n          Path.isSibling(newPath, path) &&\n          Path.isAfter(newPath, path)\n        ) {\n          // When performing a sibling move to a later index, the path at the destination is shifted\n          // to before the insertion point instead of after. To ensure our group of nodes are inserted\n          // in the correct order we increment toRef to account for that\n          toRef.current = Path.next(toRef.current)\n        }\n      }\n\n      toRef.unref()\n    })\n  },\n\n  /**\n   * Remove the nodes at a specific location in the document.\n   */\n\n  removeNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false, mode = 'lowest' } = options\n      let { at = editor.selection, match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      const depths = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(depths, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n\n        if (path) {\n          const [node] = Editor.node(editor, path)\n          editor.apply({ type: 'remove_node', path, node })\n        }\n      }\n    })\n  },\n\n  /**\n   * Set new properties on the nodes at a location.\n   */\n\n  setNodes<T extends Node>(\n    editor: Editor,\n    props: Partial<Node>,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      hanging?: boolean\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      let { match, at = editor.selection } = options\n      const {\n        hanging = false,\n        mode = 'lowest',\n        split = false,\n        voids = false,\n      } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at)\n      }\n\n      if (split && Range.isRange(at)) {\n        const rangeRef = Editor.rangeRef(editor, at, { affinity: 'inward' })\n        const [start, end] = Range.edges(at)\n        const splitMode = mode === 'lowest' ? 'lowest' : 'highest'\n        const endAtEndOfNode = Editor.isEnd(editor, end, end.path)\n        Transforms.splitNodes(editor, {\n          at: end,\n          match,\n          mode: splitMode,\n          voids,\n          always: !endAtEndOfNode,\n        })\n        const startAtStartOfNode = Editor.isStart(editor, start, start.path)\n        Transforms.splitNodes(editor, {\n          at: start,\n          match,\n          mode: splitMode,\n          voids,\n          always: !startAtStartOfNode,\n        })\n        at = rangeRef.unref()!\n\n        if (options.at == null) {\n          Transforms.select(editor, at)\n        }\n      }\n\n      for (const [node, path] of Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids,\n      })) {\n        const properties: Partial<Node> = {}\n        const newProperties: Partial<Node> = {}\n\n        // You can't set properties on the editor node.\n        if (path.length === 0) {\n          continue\n        }\n\n        for (const k in props) {\n          if (k === 'children' || k === 'text') {\n            continue\n          }\n\n          if (props[k] !== node[k]) {\n            // Omit new properties from the old property list rather than set them to undefined\n            if (node.hasOwnProperty(k)) properties[k] = node[k]\n            newProperties[k] = props[k]\n          }\n        }\n\n        if (Object.keys(newProperties).length !== 0) {\n          editor.apply({\n            type: 'set_node',\n            path,\n            properties,\n            newProperties,\n          })\n        }\n      }\n    })\n  },\n\n  /**\n   * Split the nodes at a specific location.\n   */\n\n  splitNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'highest' | 'lowest'\n      always?: boolean\n      height?: number\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', voids = false } = options\n      let { match, at = editor.selection, height = 0, always = false } = options\n\n      if (match == null) {\n        match = n => Editor.isBlock(editor, n)\n      }\n\n      if (Range.isRange(at)) {\n        at = deleteRange(editor, at)\n      }\n\n      // If the target is a path, the default height-skipping and position\n      // counters need to account for us potentially splitting at a non-leaf.\n      if (Path.isPath(at)) {\n        const path = at\n        const point = Editor.point(editor, path)\n        const [parent] = Editor.parent(editor, path)\n        match = n => n === parent\n        height = point.path.length - path.length + 1\n        at = point\n        always = true\n      }\n\n      if (!at) {\n        return\n      }\n\n      const beforeRef = Editor.pointRef(editor, at, {\n        affinity: 'backward',\n      })\n      const [highest] = Editor.nodes(editor, { at, match, mode, voids })\n\n      if (!highest) {\n        return\n      }\n\n      const voidMatch = Editor.void(editor, { at, mode: 'highest' })\n      const nudge = 0\n\n      if (!voids && voidMatch) {\n        const [voidNode, voidPath] = voidMatch\n\n        if (Element.isElement(voidNode) && editor.isInline(voidNode)) {\n          let after = Editor.after(editor, voidPath)\n\n          if (!after) {\n            const text = { text: '' }\n            const afterPath = Path.next(voidPath)\n            Transforms.insertNodes(editor, text, { at: afterPath, voids })\n            after = Editor.point(editor, afterPath)!\n          }\n\n          at = after\n          always = true\n        }\n\n        const siblingHeight = at.path.length - voidPath.length\n        height = siblingHeight + 1\n        always = true\n      }\n\n      const afterRef = Editor.pointRef(editor, at)\n      const depth = at.path.length - height\n      const [, highestPath] = highest\n      const lowestPath = at.path.slice(0, depth)\n      let position = height === 0 ? at.offset : at.path[depth] + nudge\n\n      for (const [node, path] of Editor.levels(editor, {\n        at: lowestPath,\n        reverse: true,\n        voids,\n      })) {\n        let split = false\n\n        if (\n          path.length < highestPath.length ||\n          path.length === 0 ||\n          (!voids && Editor.isVoid(editor, node))\n        ) {\n          break\n        }\n\n        const point = beforeRef.current!\n        const isEnd = Editor.isEnd(editor, point, path)\n\n        if (always || !beforeRef || !Editor.isEdge(editor, point, path)) {\n          split = true\n          const properties = Node.extractProps(node)\n          editor.apply({\n            type: 'split_node',\n            path,\n            position,\n            properties,\n          })\n        }\n\n        position = path[path.length - 1] + (split || isEnd ? 1 : 0)\n      }\n\n      if (options.at == null) {\n        const point = afterRef.current || Editor.end(editor, [])\n        Transforms.select(editor, point)\n      }\n\n      beforeRef.unref()\n      afterRef.unref()\n    })\n  },\n\n  /**\n   * Unset properties on the nodes at a location.\n   */\n\n  unsetNodes<T extends Node>(\n    editor: Editor,\n    props: string | string[],\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    if (!Array.isArray(props)) {\n      props = [props]\n    }\n\n    const obj = {}\n\n    for (const key of props) {\n      obj[key] = null\n    }\n\n    Transforms.setNodes(editor, obj, options)\n  },\n\n  /**\n   * Unwrap the nodes at a location from a parent node, splitting the parent if\n   * necessary to ensure that only the content in the range is unwrapped.\n   */\n\n  unwrapNodes<T extends Node>(\n    editor: Editor,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', split = false, voids = false } = options\n      let { at = editor.selection, match } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        match = Path.isPath(at)\n          ? matchPath(editor, at)\n          : n => Editor.isBlock(editor, n)\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at)\n      }\n\n      const rangeRef = Range.isRange(at) ? Editor.rangeRef(editor, at) : null\n      const matches = Editor.nodes(editor, { at, match, mode, voids })\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        const [node] = Editor.node(editor, path)\n        let range = Editor.range(editor, path)\n\n        if (split && rangeRef) {\n          range = Range.intersection(rangeRef.current!, range)!\n        }\n\n        Transforms.liftNodes(editor, {\n          at: range,\n          match: n => Element.isAncestor(node) && node.children.includes(n),\n          voids,\n        })\n      }\n\n      if (rangeRef) {\n        rangeRef.unref()\n      }\n    })\n  },\n\n  /**\n   * Wrap the nodes at a location in a new container node, splitting the edges\n   * of the range first to ensure that only the content in the range is wrapped.\n   */\n\n  wrapNodes<T extends Node>(\n    editor: Editor,\n    element: Element,\n    options: {\n      at?: Location\n      match?: NodeMatch<T>\n      mode?: 'all' | 'highest' | 'lowest'\n      split?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { mode = 'lowest', split = false, voids = false } = options\n      let { match, at = editor.selection } = options\n\n      if (!at) {\n        return\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          match = matchPath(editor, at)\n        } else if (editor.isInline(element)) {\n          match = n => Editor.isInline(editor, n) || Text.isText(n)\n        } else {\n          match = n => Editor.isBlock(editor, n)\n        }\n      }\n\n      if (split && Range.isRange(at)) {\n        const [start, end] = Range.edges(at)\n        const rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward',\n        })\n        Transforms.splitNodes(editor, { at: end, match, voids })\n        Transforms.splitNodes(editor, { at: start, match, voids })\n        at = rangeRef.unref()!\n\n        if (options.at == null) {\n          Transforms.select(editor, at)\n        }\n      }\n\n      const roots = Array.from(\n        Editor.nodes(editor, {\n          at,\n          match: editor.isInline(element)\n            ? n => Editor.isBlock(editor, n)\n            : n => Editor.isEditor(n),\n          mode: 'lowest',\n          voids,\n        })\n      )\n\n      for (const [, rootPath] of roots) {\n        const a = Range.isRange(at)\n          ? Range.intersection(at, Editor.range(editor, rootPath))\n          : at\n\n        if (!a) {\n          continue\n        }\n\n        const matches = Array.from(\n          Editor.nodes(editor, { at: a, match, mode, voids })\n        )\n\n        if (matches.length > 0) {\n          const [first] = matches\n          const last = matches[matches.length - 1]\n          const [, firstPath] = first\n          const [, lastPath] = last\n          const commonPath = Path.equals(firstPath, lastPath)\n            ? Path.parent(firstPath)\n            : Path.common(firstPath, lastPath)\n\n          const range = Editor.range(editor, firstPath, lastPath)\n          const commonNodeEntry = Editor.node(editor, commonPath)\n          const [commonNode] = commonNodeEntry\n          const depth = commonPath.length + 1\n          const wrapperPath = Path.next(lastPath.slice(0, depth))\n          const wrapper = { ...element, children: [] }\n          Transforms.insertNodes(editor, wrapper, { at: wrapperPath, voids })\n\n          Transforms.moveNodes(editor, {\n            at: range,\n            match: n =>\n              Element.isAncestor(commonNode) && commonNode.children.includes(n),\n            to: wrapperPath.concat(0),\n            voids,\n          })\n        }\n      }\n    })\n  },\n}\n\nconst hasSingleChildNest = (editor: Editor, node: Node): boolean => {\n  if (Element.isElement(node)) {\n    const element = node as Element\n    if (Editor.isVoid(editor, node)) {\n      return true\n    } else if (element.children.length === 1) {\n      return hasSingleChildNest(editor, element.children[0])\n    } else {\n      return false\n    }\n  } else if (Editor.isEditor(node)) {\n    return false\n  } else {\n    return true\n  }\n}\n\n/**\n * Convert a range into a point by deleting it's content.\n */\n\nconst deleteRange = (editor: Editor, range: Range): Point | null => {\n  if (Range.isCollapsed(range)) {\n    return range.anchor\n  } else {\n    const [, end] = Range.edges(range)\n    const pointRef = Editor.pointRef(editor, end)\n    Transforms.delete(editor, { at: range })\n    return pointRef.unref()\n  }\n}\n\nconst matchPath = (editor: Editor, path: Path): ((node: Node) => boolean) => {\n  const [node] = Editor.node(editor, path)\n  return n => n === node\n}\n","import { Editor, Location, Point, Range, Transforms } from '..'\n\nexport interface SelectionTransforms {\n  collapse: (\n    editor: Editor,\n    options?: {\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    }\n  ) => void\n  deselect: (editor: Editor) => void\n  move: (\n    editor: Editor,\n    options?: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line'\n      reverse?: boolean\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    }\n  ) => void\n  select: (editor: Editor, target: Location) => void\n  setPoint: (\n    editor: Editor,\n    props: Partial<Point>,\n    options?: {\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    }\n  ) => void\n  setSelection: (editor: Editor, props: Partial<Range>) => void\n}\n\nexport const SelectionTransforms: SelectionTransforms = {\n  /**\n   * Collapse the selection.\n   */\n\n  collapse(\n    editor: Editor,\n    options: {\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    } = {}\n  ): void {\n    const { edge = 'anchor' } = options\n    const { selection } = editor\n\n    if (!selection) {\n      return\n    } else if (edge === 'anchor') {\n      Transforms.select(editor, selection.anchor)\n    } else if (edge === 'focus') {\n      Transforms.select(editor, selection.focus)\n    } else if (edge === 'start') {\n      const [start] = Range.edges(selection)\n      Transforms.select(editor, start)\n    } else if (edge === 'end') {\n      const [, end] = Range.edges(selection)\n      Transforms.select(editor, end)\n    }\n  },\n\n  /**\n   * Unset the selection.\n   */\n\n  deselect(editor: Editor): void {\n    const { selection } = editor\n\n    if (selection) {\n      editor.apply({\n        type: 'set_selection',\n        properties: selection,\n        newProperties: null,\n      })\n    }\n  },\n\n  /**\n   * Move the selection's point forward or backward.\n   */\n\n  move(\n    editor: Editor,\n    options: {\n      distance?: number\n      unit?: 'offset' | 'character' | 'word' | 'line'\n      reverse?: boolean\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    } = {}\n  ): void {\n    const { selection } = editor\n    const { distance = 1, unit = 'character', reverse = false } = options\n    let { edge = null } = options\n\n    if (!selection) {\n      return\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor'\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus'\n    }\n\n    const { anchor, focus } = selection\n    const opts = { distance, unit }\n    const props: Partial<Range> = {}\n\n    if (edge == null || edge === 'anchor') {\n      const point = reverse\n        ? Editor.before(editor, anchor, opts)\n        : Editor.after(editor, anchor, opts)\n\n      if (point) {\n        props.anchor = point\n      }\n    }\n\n    if (edge == null || edge === 'focus') {\n      const point = reverse\n        ? Editor.before(editor, focus, opts)\n        : Editor.after(editor, focus, opts)\n\n      if (point) {\n        props.focus = point\n      }\n    }\n\n    Transforms.setSelection(editor, props)\n  },\n\n  /**\n   * Set the selection to a new value.\n   */\n\n  select(editor: Editor, target: Location): void {\n    const { selection } = editor\n    target = Editor.range(editor, target)\n\n    if (selection) {\n      Transforms.setSelection(editor, target)\n      return\n    }\n\n    if (!Range.isRange(target)) {\n      throw new Error(\n        `When setting the selection and the current selection is \\`null\\` you must provide at least an \\`anchor\\` and \\`focus\\`, but you passed: ${JSON.stringify(\n          target\n        )}`\n      )\n    }\n\n    editor.apply({\n      type: 'set_selection',\n      properties: selection,\n      newProperties: target,\n    })\n  },\n\n  /**\n   * Set new properties on one of the selection's points.\n   */\n\n  setPoint(\n    editor: Editor,\n    props: Partial<Point>,\n    options: {\n      edge?: 'anchor' | 'focus' | 'start' | 'end'\n    } = {}\n  ): void {\n    const { selection } = editor\n    let { edge = 'both' } = options\n\n    if (!selection) {\n      return\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor'\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus'\n    }\n\n    const { anchor, focus } = selection\n    const point = edge === 'anchor' ? anchor : focus\n\n    Transforms.setSelection(editor, {\n      [edge === 'anchor' ? 'anchor' : 'focus']: { ...point, ...props },\n    })\n  },\n\n  /**\n   * Set new properties on the selection.\n   */\n\n  setSelection(editor: Editor, props: Partial<Range>): void {\n    const { selection } = editor\n    const oldProps: Partial<Range> | null = {}\n    const newProps: Partial<Range> = {}\n\n    if (!selection) {\n      return\n    }\n\n    for (const k in props) {\n      if (\n        (k === 'anchor' &&\n          props.anchor != null &&\n          !Point.equals(props.anchor, selection.anchor)) ||\n        (k === 'focus' &&\n          props.focus != null &&\n          !Point.equals(props.focus, selection.focus)) ||\n        (k !== 'anchor' && k !== 'focus' && props[k] !== selection[k])\n      ) {\n        oldProps[k] = selection[k]\n        newProps[k] = props[k]\n      }\n    }\n\n    if (Object.keys(oldProps).length > 0) {\n      editor.apply({\n        type: 'set_selection',\n        properties: oldProps,\n        newProperties: newProps,\n      })\n    }\n  },\n}\n","import {\n  Editor,\n  Element,\n  Location,\n  Node,\n  NodeEntry,\n  Path,\n  Text,\n  Point,\n  Range,\n  Transforms,\n} from '..'\n\nexport interface TextTransforms {\n  delete: (\n    editor: Editor,\n    options?: {\n      at?: Location\n      distance?: number\n      unit?: 'character' | 'word' | 'line' | 'block'\n      reverse?: boolean\n      hanging?: boolean\n      voids?: boolean\n    }\n  ) => void\n  insertFragment: (\n    editor: Editor,\n    fragment: Node[],\n    options?: {\n      at?: Location\n      hanging?: boolean\n      voids?: boolean\n    }\n  ) => void\n  insertText: (\n    editor: Editor,\n    text: string,\n    options?: {\n      at?: Location\n      voids?: boolean\n    }\n  ) => void\n}\n\nexport const TextTransforms: TextTransforms = {\n  /**\n   * Delete content in the editor.\n   */\n\n  delete(\n    editor: Editor,\n    options: {\n      at?: Location\n      distance?: number\n      unit?: 'character' | 'word' | 'line' | 'block'\n      reverse?: boolean\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const {\n        reverse = false,\n        unit = 'character',\n        distance = 1,\n        voids = false,\n      } = options\n      let { at = editor.selection, hanging = false } = options\n\n      if (!at) {\n        return\n      }\n\n      if (Range.isRange(at) && Range.isCollapsed(at)) {\n        at = at.anchor\n      }\n\n      if (Point.isPoint(at)) {\n        const furthestVoid = Editor.void(editor, { at, mode: 'highest' })\n\n        if (!voids && furthestVoid) {\n          const [, voidPath] = furthestVoid\n          at = voidPath\n        } else {\n          const opts = { unit, distance }\n          const target = reverse\n            ? Editor.before(editor, at, opts) || Editor.start(editor, [])\n            : Editor.after(editor, at, opts) || Editor.end(editor, [])\n          at = { anchor: at, focus: target }\n          hanging = true\n        }\n      }\n\n      if (Path.isPath(at)) {\n        Transforms.removeNodes(editor, { at, voids })\n        return\n      }\n\n      if (Range.isCollapsed(at)) {\n        return\n      }\n\n      if (!hanging) {\n        const [, end] = Range.edges(at)\n        const endOfDoc = Editor.end(editor, [])\n\n        if (!Point.equals(end, endOfDoc)) {\n          at = Editor.unhangRange(editor, at, { voids })\n        }\n      }\n\n      let [start, end] = Range.edges(at)\n      const startBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: start,\n        voids,\n      })\n      const endBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: end,\n        voids,\n      })\n      const isAcrossBlocks =\n        startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1])\n      const isSingleText = Path.equals(start.path, end.path)\n      const startVoid = voids\n        ? null\n        : Editor.void(editor, { at: start, mode: 'highest' })\n      const endVoid = voids\n        ? null\n        : Editor.void(editor, { at: end, mode: 'highest' })\n\n      // If the start or end points are inside an inline void, nudge them out.\n      if (startVoid) {\n        const before = Editor.before(editor, start)\n\n        if (\n          before &&\n          startBlock &&\n          Path.isAncestor(startBlock[1], before.path)\n        ) {\n          start = before\n        }\n      }\n\n      if (endVoid) {\n        const after = Editor.after(editor, end)\n\n        if (after && endBlock && Path.isAncestor(endBlock[1], after.path)) {\n          end = after\n        }\n      }\n\n      // Get the highest nodes that are completely inside the range, as well as\n      // the start and end nodes.\n      const matches: NodeEntry[] = []\n      let lastPath: Path | undefined\n\n      for (const entry of Editor.nodes(editor, { at, voids })) {\n        const [node, path] = entry\n\n        if (lastPath && Path.compare(path, lastPath) === 0) {\n          continue\n        }\n\n        if (\n          (!voids && Editor.isVoid(editor, node)) ||\n          (!Path.isCommon(path, start.path) && !Path.isCommon(path, end.path))\n        ) {\n          matches.push(entry)\n          lastPath = path\n        }\n      }\n\n      const pathRefs = Array.from(matches, ([, p]) => Editor.pathRef(editor, p))\n      const startRef = Editor.pointRef(editor, start)\n      const endRef = Editor.pointRef(editor, end)\n\n      if (!isSingleText && !startVoid) {\n        const point = startRef.current!\n        const [node] = Editor.leaf(editor, point)\n        const { path } = point\n        const { offset } = start\n        const text = node.text.slice(offset)\n        if (text.length > 0)\n          editor.apply({ type: 'remove_text', path, offset, text })\n      }\n\n      for (const pathRef of pathRefs) {\n        const path = pathRef.unref()!\n        Transforms.removeNodes(editor, { at: path, voids })\n      }\n\n      if (!endVoid) {\n        const point = endRef.current!\n        const [node] = Editor.leaf(editor, point)\n        const { path } = point\n        const offset = isSingleText ? start.offset : 0\n        const text = node.text.slice(offset, end.offset)\n        if (text.length > 0)\n          editor.apply({ type: 'remove_text', path, offset, text })\n      }\n\n      if (\n        !isSingleText &&\n        isAcrossBlocks &&\n        endRef.current &&\n        startRef.current\n      ) {\n        Transforms.mergeNodes(editor, {\n          at: endRef.current,\n          hanging: true,\n          voids,\n        })\n      }\n\n      const point = reverse\n        ? startRef.unref() || endRef.unref()\n        : endRef.unref() || startRef.unref()\n\n      if (options.at == null && point) {\n        Transforms.select(editor, point)\n      }\n    })\n  },\n\n  /**\n   * Insert a fragment at a specific location in the editor.\n   */\n\n  insertFragment(\n    editor: Editor,\n    fragment: Node[],\n    options: {\n      at?: Location\n      hanging?: boolean\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { hanging = false, voids = false } = options\n      let { at = editor.selection } = options\n\n      if (!fragment.length) {\n        return\n      }\n\n      if (!at) {\n        return\n      } else if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at)\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const [, end] = Range.edges(at)\n\n          if (!voids && Editor.void(editor, { at: end })) {\n            return\n          }\n\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at })\n          at = pointRef.unref()!\n        }\n      } else if (Path.isPath(at)) {\n        at = Editor.start(editor, at)\n      }\n\n      if (!voids && Editor.void(editor, { at })) {\n        return\n      }\n\n      // If the insert point is at the edge of an inline node, move it outside\n      // instead since it will need to be split otherwise.\n      const inlineElementMatch = Editor.above(editor, {\n        at,\n        match: n => Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (inlineElementMatch) {\n        const [, inlinePath] = inlineElementMatch\n\n        if (Editor.isEnd(editor, at, inlinePath)) {\n          const after = Editor.after(editor, inlinePath)!\n          at = after\n        } else if (Editor.isStart(editor, at, inlinePath)) {\n          const before = Editor.before(editor, inlinePath)!\n          at = before\n        }\n      }\n\n      const blockMatch = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at,\n        voids,\n      })!\n      const [, blockPath] = blockMatch\n      const isBlockStart = Editor.isStart(editor, at, blockPath)\n      const isBlockEnd = Editor.isEnd(editor, at, blockPath)\n      const mergeStart = !isBlockStart || (isBlockStart && isBlockEnd)\n      const mergeEnd = !isBlockEnd\n      const [, firstPath] = Node.first({ children: fragment }, [])\n      const [, lastPath] = Node.last({ children: fragment }, [])\n\n      const matches: NodeEntry[] = []\n      const matcher = ([n, p]: NodeEntry) => {\n        if (\n          mergeStart &&\n          Path.isAncestor(p, firstPath) &&\n          Element.isElement(n) &&\n          !editor.isVoid(n) &&\n          !editor.isInline(n)\n        ) {\n          return false\n        }\n\n        if (\n          mergeEnd &&\n          Path.isAncestor(p, lastPath) &&\n          Element.isElement(n) &&\n          !editor.isVoid(n) &&\n          !editor.isInline(n)\n        ) {\n          return false\n        }\n\n        return true\n      }\n\n      for (const entry of Node.nodes(\n        { children: fragment },\n        { pass: matcher }\n      )) {\n        if (entry[1].length > 0 && matcher(entry)) {\n          matches.push(entry)\n        }\n      }\n\n      const starts = []\n      const middles = []\n      const ends = []\n      let starting = true\n      let hasBlocks = false\n\n      for (const [node] of matches) {\n        if (Element.isElement(node) && !editor.isInline(node)) {\n          starting = false\n          hasBlocks = true\n          middles.push(node)\n        } else if (starting) {\n          starts.push(node)\n        } else {\n          ends.push(node)\n        }\n      }\n\n      const [inlineMatch] = Editor.nodes(editor, {\n        at,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })!\n\n      const [, inlinePath] = inlineMatch\n      const isInlineStart = Editor.isStart(editor, at, inlinePath)\n      const isInlineEnd = Editor.isEnd(editor, at, inlinePath)\n\n      const middleRef = Editor.pathRef(\n        editor,\n        isBlockEnd ? Path.next(blockPath) : blockPath\n      )\n\n      const endRef = Editor.pathRef(\n        editor,\n        isInlineEnd ? Path.next(inlinePath) : inlinePath\n      )\n\n      Transforms.splitNodes(editor, {\n        at,\n        match: n =>\n          hasBlocks\n            ? Editor.isBlock(editor, n)\n            : Text.isText(n) || Editor.isInline(editor, n),\n        mode: hasBlocks ? 'lowest' : 'highest',\n        voids,\n      })\n\n      const startRef = Editor.pathRef(\n        editor,\n        !isInlineStart || (isInlineStart && isInlineEnd)\n          ? Path.next(inlinePath)\n          : inlinePath\n      )\n\n      Transforms.insertNodes(editor, starts, {\n        at: startRef.current!,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      Transforms.insertNodes(editor, middles, {\n        at: middleRef.current!,\n        match: n => Editor.isBlock(editor, n),\n        mode: 'lowest',\n        voids,\n      })\n\n      Transforms.insertNodes(editor, ends, {\n        at: endRef.current!,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids,\n      })\n\n      if (!options.at) {\n        let path\n\n        if (ends.length > 0) {\n          path = Path.previous(endRef.current!)\n        } else if (middles.length > 0) {\n          path = Path.previous(middleRef.current!)\n        } else {\n          path = Path.previous(startRef.current!)\n        }\n\n        const end = Editor.end(editor, path)\n        Transforms.select(editor, end)\n      }\n\n      startRef.unref()\n      middleRef.unref()\n      endRef.unref()\n    })\n  },\n\n  /**\n   * Insert a string of text in the Editor.\n   */\n\n  insertText(\n    editor: Editor,\n    text: string,\n    options: {\n      at?: Location\n      voids?: boolean\n    } = {}\n  ): void {\n    Editor.withoutNormalizing(editor, () => {\n      const { voids = false } = options\n      let { at = editor.selection } = options\n\n      if (!at) {\n        return\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at)\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor\n        } else {\n          const end = Range.end(at)\n\n          if (!voids && Editor.void(editor, { at: end })) {\n            return\n          }\n\n          const pointRef = Editor.pointRef(editor, end)\n          Transforms.delete(editor, { at, voids })\n          at = pointRef.unref()!\n          Transforms.setSelection(editor, { anchor: at, focus: at })\n        }\n      }\n\n      if (!voids && Editor.void(editor, { at })) {\n        return\n      }\n\n      const { path, offset } = at\n      if (text.length > 0)\n        editor.apply({ type: 'insert_text', path, offset, text })\n    })\n  },\n}\n","import { GeneralTransforms } from './general'\nimport { NodeTransforms } from './node'\nimport { SelectionTransforms } from './selection'\nimport { TextTransforms } from './text'\n\nexport const Transforms: GeneralTransforms &\n  NodeTransforms &\n  SelectionTransforms &\n  TextTransforms = {\n  ...GeneralTransforms,\n  ...NodeTransforms,\n  ...SelectionTransforms,\n  ...TextTransforms,\n}\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module variables.\n * @private\n */\n\nvar matchHtmlRegExp = /[\"'&<>]/;\n\n/**\n * Module exports.\n * @public\n */\n\nmodule.exports = escapeHtml;\n\n/**\n * Escape special characters in the given string of html.\n *\n * @param  {string} string The string to escape for inserting into HTML\n * @return {string}\n * @public\n */\n\nfunction escapeHtml(string) {\n  var str = '' + string;\n  var match = matchHtmlRegExp.exec(str);\n\n  if (!match) {\n    return str;\n  }\n\n  var escape;\n  var html = '';\n  var index = 0;\n  var lastIndex = 0;\n\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34: // \"\n        escape = '&quot;';\n        break;\n      case 38: // &\n        escape = '&amp;';\n        break;\n      case 39: // '\n        escape = '&#39;';\n        break;\n      case 60: // <\n        escape = '&lt;';\n        break;\n      case 62: // >\n        escape = '&gt;';\n        break;\n      default:\n        continue;\n    }\n\n    if (lastIndex !== index) {\n      html += str.substring(lastIndex, index);\n    }\n\n    lastIndex = index + 1;\n    html += escape;\n  }\n\n  return lastIndex !== index\n    ? html + str.substring(lastIndex, index)\n    : html;\n}\n","import isPlainObject from 'is-plain-object'\nimport { Operation } from 'slate'\n\n/**\n * `History` objects hold all of the operations that are applied to a value, so\n * they can be undone or redone as necessary.\n */\n\nexport interface History {\n  redos: Operation[][]\n  undos: Operation[][]\n}\n\nexport const History = {\n  /**\n   * Check if a value is a `History` object.\n   */\n\n  isHistory(value: any): value is History {\n    return (\n      isPlainObject(value) &&\n      Array.isArray(value.redos) &&\n      Array.isArray(value.undos) &&\n      (value.redos.length === 0 || Operation.isOperationList(value.redos[0])) &&\n      (value.undos.length === 0 || Operation.isOperationList(value.undos[0]))\n    )\n  },\n}\n","import { BaseEditor, Editor } from 'slate'\nimport { History } from './history'\n\n/**\n * Weakmaps for attaching state to the editor.\n */\n\nexport const HISTORY = new WeakMap<Editor, History>()\nexport const SAVING = new WeakMap<Editor, boolean | undefined>()\nexport const MERGING = new WeakMap<Editor, boolean | undefined>()\n\n/**\n * `HistoryEditor` contains helpers for history-enabled editors.\n */\n\nexport interface HistoryEditor extends BaseEditor {\n  history: History\n  undo: () => void\n  redo: () => void\n}\n\nexport const HistoryEditor = {\n  /**\n   * Check if a value is a `HistoryEditor` object.\n   */\n\n  isHistoryEditor(value: any): value is HistoryEditor {\n    return History.isHistory(value.history) && Editor.isEditor(value)\n  },\n\n  /**\n   * Get the merge flag's current value.\n   */\n\n  isMerging(editor: HistoryEditor): boolean | undefined {\n    return MERGING.get(editor)\n  },\n\n  /**\n   * Get the saving flag's current value.\n   */\n\n  isSaving(editor: HistoryEditor): boolean | undefined {\n    return SAVING.get(editor)\n  },\n\n  /**\n   * Redo to the previous saved state.\n   */\n\n  redo(editor: HistoryEditor): void {\n    editor.redo()\n  },\n\n  /**\n   * Undo to the previous saved state.\n   */\n\n  undo(editor: HistoryEditor): void {\n    editor.undo()\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\n   * the new operations into previous save point in the history.\n   */\n\n  withoutMerging(editor: HistoryEditor, fn: () => void): void {\n    const prev = HistoryEditor.isMerging(editor)\n    MERGING.set(editor, false)\n    fn()\n    MERGING.set(editor, prev)\n  },\n\n  /**\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\n   * their operations into the history.\n   */\n\n  withoutSaving(editor: HistoryEditor, fn: () => void): void {\n    const prev = HistoryEditor.isSaving(editor)\n    SAVING.set(editor, false)\n    fn()\n    SAVING.set(editor, prev)\n  },\n}\n","import { Editor, Operation, Path } from 'slate'\n\nimport { HistoryEditor } from './history-editor'\n\n/**\n * The `withHistory` plugin keeps track of the operation history of a Slate\n * editor as operations are applied to it, using undo and redo stacks.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\n\nexport const withHistory = <T extends Editor>(editor: T) => {\n  const e = editor as T & HistoryEditor\n  const { apply } = e\n  e.history = { undos: [], redos: [] }\n\n  e.redo = () => {\n    const { history } = e\n    const { redos } = history\n\n    if (redos.length > 0) {\n      const batch = redos[redos.length - 1]\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (const op of batch) {\n            e.apply(op)\n          }\n        })\n      })\n\n      history.redos.pop()\n      history.undos.push(batch)\n    }\n  }\n\n  e.undo = () => {\n    const { history } = e\n    const { undos } = history\n\n    if (undos.length > 0) {\n      const batch = undos[undos.length - 1]\n\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          const inverseOps = batch.map(Operation.inverse).reverse()\n\n          for (const op of inverseOps) {\n            e.apply(op)\n          }\n        })\n      })\n\n      history.redos.push(batch)\n      history.undos.pop()\n    }\n  }\n\n  e.apply = (op: Operation) => {\n    const { operations, history } = e\n    const { undos } = history\n    const lastBatch = undos[undos.length - 1]\n    const lastOp = lastBatch && lastBatch[lastBatch.length - 1]\n    const overwrite = shouldOverwrite(op, lastOp)\n    let save = HistoryEditor.isSaving(e)\n    let merge = HistoryEditor.isMerging(e)\n\n    if (save == null) {\n      save = shouldSave(op, lastOp)\n    }\n\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false\n        } else if (operations.length !== 0) {\n          merge = true\n        } else {\n          merge = shouldMerge(op, lastOp) || overwrite\n        }\n      }\n\n      if (lastBatch && merge) {\n        if (overwrite) {\n          lastBatch.pop()\n        }\n\n        lastBatch.push(op)\n      } else {\n        const batch = [op]\n        undos.push(batch)\n      }\n\n      while (undos.length > 100) {\n        undos.shift()\n      }\n\n      if (shouldClear(op)) {\n        history.redos = []\n      }\n    }\n\n    apply(op)\n  }\n\n  return e\n}\n\n/**\n * Check whether to merge an operation into the previous operation.\n */\n\nconst shouldMerge = (op: Operation, prev: Operation | undefined): boolean => {\n  if (op.type === 'set_selection') {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'insert_text' &&\n    prev.type === 'insert_text' &&\n    op.offset === prev.offset + prev.text.length &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  if (\n    prev &&\n    op.type === 'remove_text' &&\n    prev.type === 'remove_text' &&\n    op.offset + op.text.length === prev.offset &&\n    Path.equals(op.path, prev.path)\n  ) {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation needs to be saved to the history.\n */\n\nconst shouldSave = (op: Operation, prev: Operation | undefined): boolean => {\n  if (\n    op.type === 'set_selection' &&\n    (op.properties == null || op.newProperties == null)\n  ) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * Check whether an operation should overwrite the previous one.\n */\n\nconst shouldOverwrite = (\n  op: Operation,\n  prev: Operation | undefined\n): boolean => {\n  if (prev && op.type === 'set_selection' && prev.type === 'set_selection') {\n    return true\n  }\n\n  return false\n}\n\n/**\n * Check whether an operation should clear the redos stack.\n */\n\nconst shouldClear = (op: Operation): boolean => {\n  if (op.type === 'set_selection') {\n    return false\n  }\n\n  return true\n}\n","import { Node, Path, Text } from 'slate'\n\n/**\n * A weak map to hold anchor tokens.\n */\n\nconst ANCHOR: WeakMap<Node, [number, AnchorToken]> = new WeakMap()\n\n/**\n * A weak map to hold focus tokens.\n */\n\nconst FOCUS: WeakMap<Node, [number, FocusToken]> = new WeakMap()\n\n/**\n * All tokens inherit from a single constructor for `instanceof` checking.\n */\n\nexport class Token {}\n\n/**\n * Anchor tokens represent the selection's anchor point.\n */\n\nexport class AnchorToken extends Token {\n  offset?: number\n  path?: Path\n\n  constructor(\n    props: {\n      offset?: number\n      path?: Path\n    } = {}\n  ) {\n    super()\n    const { offset, path } = props\n    this.offset = offset\n    this.path = path\n  }\n}\n\n/**\n * Focus tokens represent the selection's focus point.\n */\n\nexport class FocusToken extends Token {\n  offset?: number\n  path?: Path\n\n  constructor(\n    props: {\n      offset?: number\n      path?: Path\n    } = {}\n  ) {\n    super()\n    const { offset, path } = props\n    this.offset = offset\n    this.path = path\n  }\n}\n\n/**\n * Add an anchor token to the end of a text node.\n */\n\nexport const addAnchorToken = (text: Text, token: AnchorToken) => {\n  const offset = text.text.length\n  ANCHOR.set(text, [offset, token])\n}\n\n/**\n * Get the offset if a text node has an associated anchor token.\n */\n\nexport const getAnchorOffset = (\n  text: Text\n): [number, AnchorToken] | undefined => {\n  return ANCHOR.get(text)\n}\n\n/**\n * Add a focus token to the end of a text node.\n */\n\nexport const addFocusToken = (text: Text, token: FocusToken) => {\n  const offset = text.text.length\n  FOCUS.set(text, [offset, token])\n}\n\n/**\n * Get the offset if a text node has an associated focus token.\n */\n\nexport const getFocusOffset = (\n  text: Text\n): [number, FocusToken] | undefined => {\n  return FOCUS.get(text)\n}\n","import {\n  Element,\n  Descendant,\n  Node,\n  Range,\n  Text,\n  Editor,\n  createEditor as makeEditor,\n} from 'slate'\nimport {\n  AnchorToken,\n  FocusToken,\n  Token,\n  addAnchorToken,\n  addFocusToken,\n  getAnchorOffset,\n  getFocusOffset,\n} from './tokens'\n\n/**\n * Resolve the descedants of a node by normalizing the children that can be\n * passed into a hyperscript creator function.\n */\n\nconst STRINGS: WeakSet<Text> = new WeakSet()\n\nconst resolveDescendants = (children: any[]): Descendant[] => {\n  const nodes: Node[] = []\n\n  const addChild = (child: Node | Token): void => {\n    if (child == null) {\n      return\n    }\n\n    const prev = nodes[nodes.length - 1]\n\n    if (typeof child === 'string') {\n      const text = { text: child }\n      STRINGS.add(text)\n      child = text\n    }\n\n    if (Text.isText(child)) {\n      const c = child // HACK: fix typescript complaining\n\n      if (\n        Text.isText(prev) &&\n        STRINGS.has(prev) &&\n        STRINGS.has(c) &&\n        Text.equals(prev, c, { loose: true })\n      ) {\n        prev.text += c.text\n      } else {\n        nodes.push(c)\n      }\n    } else if (Element.isElement(child)) {\n      nodes.push(child)\n    } else if (child instanceof Token) {\n      let n = nodes[nodes.length - 1]\n\n      if (!Text.isText(n)) {\n        addChild('')\n        n = nodes[nodes.length - 1] as Text\n      }\n\n      if (child instanceof AnchorToken) {\n        addAnchorToken(n, child)\n      } else if (child instanceof FocusToken) {\n        addFocusToken(n, child)\n      }\n    } else {\n      throw new Error(`Unexpected hyperscript child object: ${child}`)\n    }\n  }\n\n  for (const child of children.flat(Infinity)) {\n    addChild(child)\n  }\n\n  return nodes\n}\n\n/**\n * Create an anchor token.\n */\n\nexport function createAnchor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): AnchorToken {\n  return new AnchorToken(attributes)\n}\n\n/**\n * Create an anchor and a focus token.\n */\n\nexport function createCursor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Token[] {\n  return [new AnchorToken(attributes), new FocusToken(attributes)]\n}\n\n/**\n * Create an `Element` object.\n */\n\nexport function createElement(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Element {\n  return { ...attributes, children: resolveDescendants(children) }\n}\n\n/**\n * Create a focus token.\n */\n\nexport function createFocus(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): FocusToken {\n  return new FocusToken(attributes)\n}\n\n/**\n * Create a fragment.\n */\n\nexport function createFragment(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Descendant[] {\n  return resolveDescendants(children)\n}\n\n/**\n * Create a `Selection` object.\n */\n\nexport function createSelection(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Range {\n  const anchor: AnchorToken = children.find(c => c instanceof AnchorToken)\n  const focus: FocusToken = children.find(c => c instanceof FocusToken)\n\n  if (!anchor || anchor.offset == null || anchor.path == null) {\n    throw new Error(\n      `The <selection> hyperscript tag must have an <anchor> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    )\n  }\n\n  if (!focus || focus.offset == null || focus.path == null) {\n    throw new Error(\n      `The <selection> hyperscript tag must have a <focus> tag as a child with \\`path\\` and \\`offset\\` attributes defined.`\n    )\n  }\n\n  return {\n    anchor: {\n      offset: anchor.offset,\n      path: anchor.path,\n    },\n    focus: {\n      offset: focus.offset,\n      path: focus.path,\n    },\n    ...attributes,\n  }\n}\n\n/**\n * Create a `Text` object.\n */\n\nexport function createText(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Text {\n  const nodes = resolveDescendants(children)\n\n  if (nodes.length > 1) {\n    throw new Error(\n      `The <text> hyperscript tag must only contain a single node's worth of children.`\n    )\n  }\n\n  let [node] = nodes\n\n  if (node == null) {\n    node = { text: '' }\n  }\n\n  if (!Text.isText(node)) {\n    throw new Error(`\n    The <text> hyperscript tag can only contain text content as children.`)\n  }\n\n  // COMPAT: If they used the <text> tag we want to guarantee that it won't be\n  // merge with other string children.\n  STRINGS.delete(node)\n\n  Object.assign(node, attributes)\n  return node\n}\n\n/**\n * Create a top-level `Editor` object.\n */\n\nexport function createEditor(\n  tagName: string,\n  attributes: { [key: string]: any },\n  children: any[]\n): Editor {\n  const otherChildren: any[] = []\n  let selectionChild: Range | undefined\n\n  for (const child of children) {\n    if (Range.isRange(child)) {\n      selectionChild = child\n    } else {\n      otherChildren.push(child)\n    }\n  }\n\n  const descendants = resolveDescendants(otherChildren)\n  const selection: Partial<Range> = {}\n  const editor = makeEditor()\n  Object.assign(editor, attributes)\n  editor.children = descendants as Element[]\n\n  // Search the document's texts to see if any of them have tokens associated\n  // that need incorporated into the selection.\n  for (const [node, path] of Node.texts(editor)) {\n    const anchor = getAnchorOffset(node)\n    const focus = getFocusOffset(node)\n\n    if (anchor != null) {\n      const [offset] = anchor\n      selection.anchor = { path, offset }\n    }\n\n    if (focus != null) {\n      const [offset] = focus\n      selection.focus = { path, offset }\n    }\n  }\n\n  if (selection.anchor && !selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<anchor />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    )\n  }\n\n  if (!selection.anchor && selection.focus) {\n    throw new Error(\n      `Slate hyperscript ranges must have both \\`<anchor />\\` and \\`<focus />\\` defined if one is defined, but you only defined \\`<focus />\\`. For collapsed selections, use \\`<cursor />\\` instead.`\n    )\n  }\n\n  if (selectionChild != null) {\n    editor.selection = selectionChild\n  } else if (Range.isRange(selection)) {\n    editor.selection = selection\n  }\n\n  return editor\n}\n","import isPlainObject from 'is-plain-object'\nimport { Element } from 'slate'\nimport {\n  createAnchor,\n  createCursor,\n  createEditor,\n  createElement,\n  createFocus,\n  createFragment,\n  createSelection,\n  createText,\n} from './creators'\n\n/**\n * The default creators for Slate objects.\n */\n\nconst DEFAULT_CREATORS = {\n  anchor: createAnchor,\n  cursor: createCursor,\n  editor: createEditor,\n  element: createElement,\n  focus: createFocus,\n  fragment: createFragment,\n  selection: createSelection,\n  text: createText,\n}\n\n/**\n * `HyperscriptCreators` are dictionaries of `HyperscriptCreator` functions\n * keyed by tag name.\n */\n\ntype HyperscriptCreators<T = any> = Record<\n  string,\n  (tagName: string, attributes: { [key: string]: any }, children: any[]) => T\n>\n\n/**\n * `HyperscriptShorthands` are dictionaries of properties applied to specific\n * kind of object, keyed by tag name. They allow you to easily define custom\n * hyperscript tags for your domain.\n */\n\ntype HyperscriptShorthands = Record<string, Record<string, any>>\n\n/**\n * Create a Slate hyperscript function with `options`.\n */\n\nconst createHyperscript = (\n  options: {\n    creators?: HyperscriptCreators\n    elements?: HyperscriptShorthands\n  } = {}\n) => {\n  const { elements = {} } = options\n  const elementCreators = normalizeElements(elements)\n  const creators = {\n    ...DEFAULT_CREATORS,\n    ...elementCreators,\n    ...options.creators,\n  }\n\n  const jsx = createFactory(creators)\n  return jsx\n}\n\n/**\n * Create a Slate hyperscript function with `options`.\n */\n\nconst createFactory = <T extends HyperscriptCreators>(creators: T) => {\n  const jsx = <S extends keyof T & string>(\n    tagName: S,\n    attributes?: Object,\n    ...children: any[]\n  ): ReturnType<T[S]> => {\n    const creator = creators[tagName]\n\n    if (!creator) {\n      throw new Error(`No hyperscript creator found for tag: <${tagName}>`)\n    }\n\n    if (attributes == null) {\n      attributes = {}\n    }\n\n    if (!isPlainObject(attributes)) {\n      children = [attributes].concat(children)\n      attributes = {}\n    }\n\n    children = children.filter(child => Boolean(child)).flat()\n    const ret = creator(tagName, attributes, children)\n    return ret\n  }\n\n  return jsx\n}\n\n/**\n * Normalize a dictionary of element shorthands into creator functions.\n */\n\nconst normalizeElements = (elements: HyperscriptShorthands) => {\n  const creators: HyperscriptCreators<Element> = {}\n\n  for (const tagName in elements) {\n    const props = elements[tagName]\n\n    if (typeof props !== 'object') {\n      throw new Error(\n        `Properties specified for a hyperscript shorthand should be an object, but for the custom element <${tagName}>  tag you passed: ${props}`\n      )\n    }\n\n    creators[tagName] = (\n      tagName: string,\n      attributes: { [key: string]: any },\n      children: any[]\n    ) => {\n      return createElement('element', { ...props, ...attributes }, children)\n    }\n  }\n\n  return creators\n}\n\nexport { createHyperscript, HyperscriptCreators, HyperscriptShorthands }\n","// Components\n// Environment-dependent Editable\nimport { Editable as DefaultEditable } from './components/editable'\nimport { AndroidEditable } from './components/android/android-editable'\nimport { IS_ANDROID } from './utils/environment'\n\nexport const Editable = IS_ANDROID ? AndroidEditable : DefaultEditable\nexport {\n  Editable as DefaultEditable,\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n  DefaultPlaceholder,\n} from './components/editable'\nexport { AndroidEditable } from './components/android/android-editable'\nexport { DefaultElement } from './components/element'\nexport { DefaultLeaf } from './components/leaf'\nexport { Slate } from './components/slate'\n\n// Hooks\nexport { useEditor } from './hooks/use-editor'\nexport { useSlateStatic } from './hooks/use-slate-static'\nexport { useFocused } from './hooks/use-focused'\nexport { useReadOnly } from './hooks/use-read-only'\nexport { useSelected } from './hooks/use-selected'\nexport { useSlate } from './hooks/use-slate'\n\n// Plugin\nexport { ReactEditor } from './plugin/react-editor'\nexport { withReact } from './plugin/with-react'\n","import compute from 'compute-scroll-into-view';\n\nfunction isOptionsObject(options) {\n  return options === Object(options) && Object.keys(options).length !== 0;\n}\n\nfunction defaultBehavior(actions, behavior) {\n  if (behavior === void 0) {\n    behavior = 'auto';\n  }\n\n  var canSmoothScroll = ('scrollBehavior' in document.body.style);\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n\n    if (el.scroll && canSmoothScroll) {\n      el.scroll({\n        top: top,\n        left: left,\n        behavior: behavior\n      });\n    } else {\n      el.scrollTop = top;\n      el.scrollLeft = left;\n    }\n  });\n}\n\nfunction getOptions(options) {\n  if (options === false) {\n    return {\n      block: 'end',\n      inline: 'nearest'\n    };\n  }\n\n  if (isOptionsObject(options)) {\n    return options;\n  }\n\n  return {\n    block: 'start',\n    inline: 'nearest'\n  };\n}\n\nfunction scrollIntoView(target, options) {\n  var targetIsDetached = !target.ownerDocument.documentElement.contains(target);\n\n  if (isOptionsObject(options) && typeof options.behavior === 'function') {\n    return options.behavior(targetIsDetached ? [] : compute(target, options));\n  }\n\n  if (targetIsDetached) {\n    return;\n  }\n\n  var computeOptions = getOptions(options);\n  return defaultBehavior(compute(target, computeOptions), computeOptions.behavior);\n}\n\nexport default scrollIntoView;","var isProduction = process.env.NODE_ENV === 'production';\nvar prefix = 'Invariant failed';\nfunction invariant(condition, message) {\n  if (condition) {\n    return;\n  }\n\n  if (isProduction) {\n    throw new Error(prefix);\n  } else {\n    throw new Error(prefix + \": \" + (message || ''));\n  }\n}\n\nexport default invariant;\n","import React from 'react'\nimport { Editor, Text, Path, Element, Node } from 'slate'\n\nimport { ReactEditor, useSlateStatic } from '..'\n\n/**\n * Leaf content strings.\n */\n\nconst String = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  text: Text\n}) => {\n  const { isLast, leaf, parent, text } = props\n  const editor = useSlateStatic()\n  const path = ReactEditor.findPath(editor, text)\n  const parentPath = Path.parent(path)\n\n  // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n  if (editor.isVoid(parent)) {\n    return <ZeroWidthString length={Node.string(parent).length} />\n  }\n\n  // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n  if (\n    leaf.text === '' &&\n    parent.children[parent.children.length - 1] === text &&\n    !editor.isInline(parent) &&\n    Editor.string(editor, parentPath) === ''\n  ) {\n    return <ZeroWidthString isLineBreak />\n  }\n\n  // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n  if (leaf.text === '') {\n    return <ZeroWidthString />\n  }\n\n  // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return <TextString isTrailing text={leaf.text} />\n  }\n\n  return <TextString text={leaf.text} />\n}\n\n/**\n * Leaf strings with text in them.\n */\n\nconst TextString = (props: { text: string; isTrailing?: boolean }) => {\n  const { text, isTrailing = false } = props\n  return (\n    <span data-slate-string>\n      {text}\n      {isTrailing ? '\\n' : null}\n    </span>\n  )\n}\n\n/**\n * Leaf strings without text, render as zero-width strings.\n */\n\nconst ZeroWidthString = (props: { length?: number; isLineBreak?: boolean }) => {\n  const { length = 0, isLineBreak = false } = props\n  return (\n    <span\n      data-slate-zero-width={isLineBreak ? 'n' : 'z'}\n      data-slate-length={length}\n    >\n      {'\\uFEFF'}\n      {isLineBreak ? <br /> : null}\n    </span>\n  )\n}\n\nexport default String\n","import React, { useRef, useEffect } from 'react'\nimport { Element, Text } from 'slate'\nimport String from './string'\nimport { PLACEHOLDER_SYMBOL } from '../utils/weak-maps'\nimport { RenderLeafProps, RenderPlaceholderProps } from './editable'\n\n// auto-incrementing key for String component, force it refresh to\n// prevent inconsistent rendering by React with IME input\nlet keyForString = 0\n/**\n * Individual leaves in a text node with unique formatting.\n */\n\nconst Leaf = (props: {\n  isLast: boolean\n  leaf: Text\n  parent: Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: Text\n}) => {\n  const {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = (props: RenderLeafProps) => <DefaultLeaf {...props} />,\n  } = props\n\n  const placeholderRef = useRef<HTMLSpanElement | null>(null)\n\n  useEffect(() => {\n    const placeholderEl = placeholderRef?.current\n    const editorEl = document.querySelector<HTMLDivElement>(\n      '[data-slate-editor=\"true\"]'\n    )\n\n    if (!placeholderEl || !editorEl) {\n      return\n    }\n\n    editorEl.style.minHeight = `${placeholderEl.clientHeight}px`\n\n    return () => {\n      editorEl.style.minHeight = 'auto'\n    }\n  }, [placeholderRef, leaf])\n\n  let children = (\n    <String\n      key={keyForString++}\n      isLast={isLast}\n      leaf={leaf}\n      parent={parent}\n      text={text}\n    />\n  )\n\n  if (leaf[PLACEHOLDER_SYMBOL]) {\n    const placeholderProps: RenderPlaceholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none',\n        },\n        contentEditable: false,\n        ref: placeholderRef,\n      },\n    }\n\n    children = (\n      <React.Fragment>\n        {renderPlaceholder(placeholderProps)}\n        {children}\n      </React.Fragment>\n    )\n  }\n\n  // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n  const attributes: {\n    'data-slate-leaf': true\n  } = {\n    'data-slate-leaf': true,\n  }\n\n  return renderLeaf({ attributes, children, leaf, text })\n}\n\nconst MemoizedLeaf = React.memo(Leaf, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.renderPlaceholder === prev.renderPlaceholder &&\n    next.text === prev.text &&\n    next.leaf.text === prev.leaf.text &&\n    Text.matches(next.leaf, prev.leaf) &&\n    next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL]\n  )\n})\n\nexport const DefaultLeaf = (props: RenderLeafProps) => {\n  const { attributes, children } = props\n  return <span {...attributes}>{children}</span>\n}\n\nexport default MemoizedLeaf\n","export const IS_IOS =\n  typeof navigator !== 'undefined' &&\n  typeof window !== 'undefined' &&\n  /iPad|iPhone|iPod/.test(navigator.userAgent) &&\n  !window.MSStream\n\nexport const IS_APPLE =\n  typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent)\n\nexport const IS_ANDROID =\n  typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent)\n\nexport const IS_FIREFOX =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent)\n\nexport const IS_SAFARI =\n  typeof navigator !== 'undefined' &&\n  /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent)\n\n// \"modern\" Edge was released at 79.x\nexport const IS_EDGE_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent)\n\nexport const IS_CHROME =\n  typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent)\n\n// Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\nexport const IS_CHROME_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent)\n\n// Firefox did not support `beforeInput` until `v87`.\nexport const IS_FIREFOX_LEGACY =\n  typeof navigator !== 'undefined' &&\n  /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(\n    navigator.userAgent\n  )\n\n// Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\nexport const CAN_USE_DOM = !!(\n  typeof window !== 'undefined' &&\n  typeof window.document !== 'undefined' &&\n  typeof window.document.createElement !== 'undefined'\n)\n\n// COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\nexport const HAS_BEFORE_INPUT_SUPPORT =\n  !IS_CHROME_LEGACY &&\n  !IS_EDGE_LEGACY &&\n  // globalThis is undefined in older browsers\n  typeof globalThis !== 'undefined' &&\n  globalThis.InputEvent &&\n  // @ts-ignore The `getTargetRanges` property isn't recognized.\n  typeof globalThis.InputEvent.prototype.getTargetRanges === 'function'\n","import { useLayoutEffect, useEffect } from 'react'\nimport { CAN_USE_DOM } from '../utils/environment'\n\n/**\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\n */\n\nexport const useIsomorphicLayoutEffect = CAN_USE_DOM\n  ? useLayoutEffect\n  : useEffect\n","import { Range } from 'slate'\nimport { PLACEHOLDER_SYMBOL } from './weak-maps'\n\nexport const shallowCompare = (obj1: {}, obj2: {}) =>\n  Object.keys(obj1).length === Object.keys(obj2).length &&\n  Object.keys(obj1).every(\n    key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]\n  )\n\n/**\n * Check if a list of decorator ranges are equal to another.\n *\n * PERF: this requires the two lists to also have the ranges inside them in the\n * same order, but this is an okay constraint for us since decorations are\n * kept in order, and the odd case where they aren't is okay to re-render for.\n */\n\nexport const isDecoratorRangeListEqual = (\n  list: Range[],\n  another: Range[]\n): boolean => {\n  if (list.length !== another.length) {\n    return false\n  }\n\n  for (let i = 0; i < list.length; i++) {\n    const range = list[i]\n    const other = another[i]\n\n    const { anchor: rangeAnchor, focus: rangeFocus, ...rangeOwnProps } = range\n    const { anchor: otherAnchor, focus: otherFocus, ...otherOwnProps } = other\n\n    if (\n      !Range.equals(range, other) ||\n      range[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] ||\n      !shallowCompare(rangeOwnProps, otherOwnProps)\n    ) {\n      return false\n    }\n  }\n\n  return true\n}\n","import React, { useRef } from 'react'\nimport { Range, Element, Text as SlateText } from 'slate'\n\nimport Leaf from './leaf'\nimport { ReactEditor, useSlateStatic } from '..'\nimport { RenderLeafProps, RenderPlaceholderProps } from './editable'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport {\n  KEY_TO_ELEMENT,\n  NODE_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n} from '../utils/weak-maps'\nimport { isDecoratorRangeListEqual } from '../utils/range-list'\n\n/**\n * Text.\n */\n\nconst Text = (props: {\n  decorations: Range[]\n  isLast: boolean\n  parent: Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  text: SlateText\n}) => {\n  const {\n    decorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    text,\n  } = props\n  const editor = useSlateStatic()\n  const ref = useRef<HTMLSpanElement>(null)\n  const leaves = SlateText.decorations(text, decorations)\n  const key = ReactEditor.findKey(editor, text)\n  const children = []\n\n  for (let i = 0; i < leaves.length; i++) {\n    const leaf = leaves[i]\n\n    children.push(\n      <Leaf\n        isLast={isLast && i === leaves.length - 1}\n        key={`${key.id}-${i}`}\n        renderPlaceholder={renderPlaceholder}\n        leaf={leaf}\n        text={text}\n        parent={parent}\n        renderLeaf={renderLeaf}\n      />\n    )\n  }\n\n  // Update element-related weak maps with the DOM element ref.\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current) {\n      KEY_TO_ELEMENT.set(key, ref.current)\n      NODE_TO_ELEMENT.set(text, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, text)\n    } else {\n      KEY_TO_ELEMENT.delete(key)\n      NODE_TO_ELEMENT.delete(text)\n    }\n  })\n\n  return (\n    <span data-slate-node=\"text\" ref={ref}>\n      {children}\n    </span>\n  )\n}\n\nconst MemoizedText = React.memo(Text, (prev, next) => {\n  return (\n    next.parent === prev.parent &&\n    next.isLast === prev.isLast &&\n    next.renderLeaf === prev.renderLeaf &&\n    next.text === prev.text &&\n    isDecoratorRangeListEqual(next.decorations, prev.decorations)\n  )\n})\n\nexport default MemoizedText\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `selected` state of an element.\n */\n\nexport const SelectedContext = createContext(false)\n\n/**\n * Get the current `selected` state of an element.\n */\n\nexport const useSelected = (): boolean => {\n  return useContext(SelectedContext)\n}\n","import React, { useRef } from 'react'\nimport getDirection from 'direction'\nimport { Editor, Node, Range, NodeEntry, Element as SlateElement } from 'slate'\n\nimport Text from './text'\nimport useChildren from '../hooks/use-children'\nimport { ReactEditor, useSlateStatic, useReadOnly } from '..'\nimport { SelectedContext } from '../hooks/use-selected'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport {\n  NODE_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  NODE_TO_PARENT,\n  NODE_TO_INDEX,\n  KEY_TO_ELEMENT,\n} from '../utils/weak-maps'\nimport { isDecoratorRangeListEqual } from '../utils/range-list'\nimport {\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n} from './editable'\n\n/**\n * Element.\n */\n\nconst Element = (props: {\n  decorations: Range[]\n  element: SlateElement\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  selection: Range | null\n}) => {\n  const {\n    decorations,\n    element,\n    renderElement = (p: RenderElementProps) => <DefaultElement {...p} />,\n    renderPlaceholder,\n    renderLeaf,\n    selection,\n  } = props\n  const ref = useRef<HTMLElement>(null)\n  const editor = useSlateStatic()\n  const readOnly = useReadOnly()\n  const isInline = editor.isInline(element)\n  const key = ReactEditor.findKey(editor, element)\n  let children: React.ReactNode = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection,\n  })\n\n  // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n  const attributes: {\n    'data-slate-node': 'element'\n    'data-slate-void'?: true\n    'data-slate-inline'?: true\n    contentEditable?: false\n    dir?: 'rtl'\n    ref: any\n  } = {\n    'data-slate-node': 'element',\n    ref,\n  }\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true\n  }\n\n  // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    const text = Node.string(element)\n    const dir = getDirection(text)\n\n    if (dir === 'rtl') {\n      attributes.dir = dir\n    }\n  }\n\n  // If it's a void node, wrap the children in extra void-specific elements.\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false\n    }\n\n    const Tag = isInline ? 'span' : 'div'\n    const [[text]] = Node.texts(element)\n\n    children = readOnly ? null : (\n      <Tag\n        data-slate-spacer\n        style={{\n          height: '0',\n          color: 'transparent',\n          outline: 'none',\n          position: 'absolute',\n        }}\n      >\n        <Text\n          renderPlaceholder={renderPlaceholder}\n          decorations={[]}\n          isLast={false}\n          parent={element}\n          text={text}\n        />\n      </Tag>\n    )\n\n    NODE_TO_INDEX.set(text, 0)\n    NODE_TO_PARENT.set(text, element)\n  }\n\n  // Update element-related weak maps with the DOM element ref.\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current) {\n      KEY_TO_ELEMENT.set(key, ref.current)\n      NODE_TO_ELEMENT.set(element, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, element)\n    } else {\n      KEY_TO_ELEMENT.delete(key)\n      NODE_TO_ELEMENT.delete(element)\n    }\n  })\n\n  return (\n    <SelectedContext.Provider value={!!selection}>\n      {renderElement({ attributes, children, element })}\n    </SelectedContext.Provider>\n  )\n}\n\nconst MemoizedElement = React.memo(Element, (prev, next) => {\n  return (\n    prev.element === next.element &&\n    prev.renderElement === next.renderElement &&\n    prev.renderLeaf === next.renderLeaf &&\n    isDecoratorRangeListEqual(prev.decorations, next.decorations) &&\n    (prev.selection === next.selection ||\n      (!!prev.selection &&\n        !!next.selection &&\n        Range.equals(prev.selection, next.selection)))\n  )\n})\n\n/**\n * The default element renderer.\n */\n\nexport const DefaultElement = (props: RenderElementProps) => {\n  const { attributes, children, element } = props\n  const editor = useSlateStatic()\n  const Tag = editor.isInline(element) ? 'span' : 'div'\n  return (\n    <Tag {...attributes} style={{ position: 'relative' }}>\n      {children}\n    </Tag>\n  )\n}\n\nexport default MemoizedElement\n","import { createContext, useContext } from 'react'\nimport { ReactEditor } from '../plugin/react-editor'\nimport { Editor } from 'slate'\n\n/**\n * A React context for sharing the editor object.\n */\n\nexport const EditorContext = createContext<ReactEditor | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useSlateStatic = (): Editor => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useSlateStatic\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","import { createContext, useContext } from 'react'\nimport { Range, NodeEntry } from 'slate'\n\n/**\n * A React context for sharing the `decorate` prop of the editable.\n */\n\nexport const DecorateContext = createContext<(entry: NodeEntry) => Range[]>(\n  () => []\n)\n\n/**\n * Get the current `decorate` prop of the editable.\n */\n\nexport const useDecorate = (): ((entry: NodeEntry) => Range[]) => {\n  return useContext(DecorateContext)\n}\n","import React from 'react'\nimport { Editor, Range, Element, NodeEntry, Ancestor, Descendant } from 'slate'\n\nimport ElementComponent from '../components/element'\nimport TextComponent from '../components/text'\nimport { ReactEditor } from '..'\nimport { useSlateStatic } from './use-slate-static'\nimport { useDecorate } from './use-decorate'\nimport { NODE_TO_INDEX, NODE_TO_PARENT } from '../utils/weak-maps'\nimport {\n  RenderElementProps,\n  RenderLeafProps,\n  RenderPlaceholderProps,\n} from '../components/editable'\n\n/**\n * Children.\n */\n\nconst useChildren = (props: {\n  decorations: Range[]\n  node: Ancestor\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderPlaceholder: (props: RenderPlaceholderProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  selection: Range | null\n}) => {\n  const {\n    decorations,\n    node,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection,\n  } = props\n  const decorate = useDecorate()\n  const editor = useSlateStatic()\n  const path = ReactEditor.findPath(editor, node)\n  const children = []\n  const isLeafBlock =\n    Element.isElement(node) &&\n    !editor.isInline(node) &&\n    Editor.hasInlines(editor, node)\n\n  for (let i = 0; i < node.children.length; i++) {\n    const p = path.concat(i)\n    const n = node.children[i] as Descendant\n    const key = ReactEditor.findKey(editor, n)\n    const range = Editor.range(editor, p)\n    const sel = selection && Range.intersection(range, selection)\n    const ds = decorate([n, p])\n\n    for (const dec of decorations) {\n      const d = Range.intersection(dec, range)\n\n      if (d) {\n        ds.push(d)\n      }\n    }\n\n    if (Element.isElement(n)) {\n      children.push(\n        <ElementComponent\n          decorations={ds}\n          element={n}\n          key={key.id}\n          renderElement={renderElement}\n          renderPlaceholder={renderPlaceholder}\n          renderLeaf={renderLeaf}\n          selection={sel}\n        />\n      )\n    } else {\n      children.push(\n        <TextComponent\n          decorations={ds}\n          key={key.id}\n          isLast={isLeafBlock && i === node.children.length - 1}\n          parent={node}\n          renderPlaceholder={renderPlaceholder}\n          renderLeaf={renderLeaf}\n          text={n}\n        />\n      )\n    }\n\n    NODE_TO_INDEX.set(n, i)\n    NODE_TO_PARENT.set(n, node)\n  }\n\n  return children\n}\n\nexport default useChildren\n","import { isKeyHotkey } from 'is-hotkey'\nimport { IS_APPLE } from './environment'\n\n/**\n * Hotkey mappings for each platform.\n */\n\nconst HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  splitBlock: 'shift?+enter',\n  undo: 'mod+z',\n}\n\nconst APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t',\n}\n\nconst WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z'],\n}\n\n/**\n * Create a platform-aware hotkey checker.\n */\n\nconst create = (key: string) => {\n  const generic = HOTKEYS[key]\n  const apple = APPLE_HOTKEYS[key]\n  const windows = WINDOWS_HOTKEYS[key]\n  const isGeneric = generic && isKeyHotkey(generic)\n  const isApple = apple && isKeyHotkey(apple)\n  const isWindows = windows && isKeyHotkey(windows)\n\n  return (event: KeyboardEvent) => {\n    if (isGeneric && isGeneric(event)) return true\n    if (IS_APPLE && isApple && isApple(event)) return true\n    if (!IS_APPLE && isWindows && isWindows(event)) return true\n    return false\n  }\n}\n\n/**\n * Hotkeys.\n */\n\nexport default {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo'),\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `readOnly` state of the editor.\n */\n\nexport const ReadOnlyContext = createContext(false)\n\n/**\n * Get the current `readOnly` state of the editor.\n */\n\nexport const useReadOnly = (): boolean => {\n  return useContext(ReadOnlyContext)\n}\n","import { createContext, useContext } from 'react'\nimport { Editor } from 'slate'\nimport { ReactEditor } from '../plugin/react-editor'\n\n/**\n * A React context for sharing the editor object, in a way that re-renders the\n * context whenever changes occur.\n */\n\nexport const SlateContext = createContext<[ReactEditor] | null>(null)\n\n/**\n * Get the current editor object from the React context.\n */\n\nexport const useSlate = (): Editor => {\n  const context = useContext(SlateContext)\n\n  if (!context) {\n    throw new Error(\n      `The \\`useSlate\\` hook must be used inside the <SlateProvider> component's context.`\n    )\n  }\n\n  const [editor] = context\n  return editor\n}\n","/**\n * Types.\n */\n\n// COMPAT: This is required to prevent TypeScript aliases from doing some very\n// weird things for Slate's types with the same name as globals. (2019/11/27)\n// https://github.com/microsoft/TypeScript/issues/35002\nimport DOMNode = globalThis.Node\nimport DOMComment = globalThis.Comment\nimport DOMElement = globalThis.Element\nimport DOMText = globalThis.Text\nimport DOMRange = globalThis.Range\nimport DOMSelection = globalThis.Selection\nimport DOMStaticRange = globalThis.StaticRange\n\nexport {\n  DOMNode,\n  DOMComment,\n  DOMElement,\n  DOMText,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n}\n\ndeclare global {\n  interface Window {\n    Selection: typeof Selection['constructor']\n    DataTransfer: typeof DataTransfer['constructor']\n    Node: typeof Node['constructor']\n  }\n}\n\nexport type DOMPoint = [Node, number]\n\n/**\n * Returns the host window of a DOM node\n */\n\nexport const getDefaultView = (value: any): Window | null => {\n  return (\n    (value && value.ownerDocument && value.ownerDocument.defaultView) || null\n  )\n}\n\n/**\n * Check if a DOM node is a comment node.\n */\n\nexport const isDOMComment = (value: any): value is DOMComment => {\n  return isDOMNode(value) && value.nodeType === 8\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMElement = (value: any): value is DOMElement => {\n  return isDOMNode(value) && value.nodeType === 1\n}\n\n/**\n * Check if a value is a DOM node.\n */\n\nexport const isDOMNode = (value: any): value is DOMNode => {\n  const window = getDefaultView(value)\n  return !!window && value instanceof window.Node\n}\n\n/**\n * Check if a value is a DOM selection.\n */\n\nexport const isDOMSelection = (value: any): value is DOMSelection => {\n  const window = value && value.anchorNode && getDefaultView(value.anchorNode)\n  return !!window && value instanceof window.Selection\n}\n\n/**\n * Check if a DOM node is an element node.\n */\n\nexport const isDOMText = (value: any): value is DOMText => {\n  return isDOMNode(value) && value.nodeType === 3\n}\n\n/**\n * Checks whether a paste event is a plaintext-only event.\n */\n\nexport const isPlainTextOnlyPaste = (event: ClipboardEvent) => {\n  return (\n    event.clipboardData &&\n    event.clipboardData.getData('text/plain') !== '' &&\n    event.clipboardData.types.length === 1\n  )\n}\n\n/**\n * Normalize a DOM point so that it always refers to a text node.\n */\n\nexport const normalizeDOMPoint = (domPoint: DOMPoint): DOMPoint => {\n  let [node, offset] = domPoint\n\n  // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n  if (isDOMElement(node) && node.childNodes.length) {\n    let isLast = offset === node.childNodes.length\n    let index = isLast ? offset - 1 : offset\n    ;[node, index] = getEditableChildAndIndex(\n      node,\n      index,\n      isLast ? 'backward' : 'forward'\n    )\n    // If the editable child found is in front of input offset, we instead seek to its end\n    isLast = index < offset\n\n    // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n    while (isDOMElement(node) && node.childNodes.length) {\n      const i = isLast ? node.childNodes.length - 1 : 0\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward')\n    }\n\n    // Determine the new offset inside the text node.\n    offset = isLast && node.textContent != null ? node.textContent.length : 0\n  }\n\n  // Return the node and offset.\n  return [node, offset]\n}\n\n/**\n * Determines wether the active element is nested within a shadowRoot\n */\n\nexport const hasShadowRoot = () => {\n  return !!(\n    window.document.activeElement && window.document.activeElement.shadowRoot\n  )\n}\n\n/**\n * Get the nearest editable child and index at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChildAndIndex = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): [DOMNode, number] => {\n  const { childNodes } = parent\n  let child = childNodes[index]\n  let i = index\n  let triedForward = false\n  let triedBackward = false\n\n  // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n  while (\n    isDOMComment(child) ||\n    (isDOMElement(child) && child.childNodes.length === 0) ||\n    (isDOMElement(child) && child.getAttribute('contenteditable') === 'false')\n  ) {\n    if (triedForward && triedBackward) {\n      break\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true\n      i = index - 1\n      direction = 'backward'\n      continue\n    }\n\n    if (i < 0) {\n      triedBackward = true\n      i = index + 1\n      direction = 'forward'\n      continue\n    }\n\n    child = childNodes[i]\n    index = i\n    i += direction === 'forward' ? 1 : -1\n  }\n\n  return [child, index]\n}\n\n/**\n * Get the nearest editable child at `index` in a `parent`, preferring\n * `direction`.\n */\n\nexport const getEditableChild = (\n  parent: DOMElement,\n  index: number,\n  direction: 'forward' | 'backward'\n): DOMNode => {\n  const [child] = getEditableChildAndIndex(parent, index, direction)\n  return child\n}\n\n/**\n * Get a plaintext representation of the content of a node, accounting for block\n * elements which get a newline appended.\n *\n * The domNode must be attached to the DOM.\n */\n\nexport const getPlainText = (domNode: DOMNode) => {\n  let text = ''\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue\n  }\n\n  if (isDOMElement(domNode)) {\n    for (const childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode)\n    }\n\n    const display = getComputedStyle(domNode).getPropertyValue('display')\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n'\n    }\n  }\n\n  return text\n}\n","import React, { useEffect, useRef, useMemo, useCallback } from 'react'\nimport {\n  Editor,\n  Element,\n  NodeEntry,\n  Node,\n  Range,\n  Text,\n  Transforms,\n  Path,\n} from 'slate'\nimport getDirection from 'direction'\nimport throttle from 'lodash/throttle'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\nimport useChildren from '../hooks/use-children'\nimport Hotkeys from '../utils/hotkeys'\nimport {\n  HAS_BEFORE_INPUT_SUPPORT,\n  IS_CHROME,\n  IS_FIREFOX,\n  IS_FIREFOX_LEGACY,\n  IS_SAFARI,\n} from '../utils/environment'\nimport { ReactEditor } from '..'\nimport { ReadOnlyContext } from '../hooks/use-read-only'\nimport { useSlate } from '../hooks/use-slate'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\nimport { DecorateContext } from '../hooks/use-decorate'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMRange,\n  getDefaultView,\n  isDOMElement,\n  isDOMNode,\n  isPlainTextOnlyPaste,\n} from '../utils/dom'\n\nimport {\n  EDITOR_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  IS_READ_ONLY,\n  NODE_TO_ELEMENT,\n  IS_FOCUSED,\n  PLACEHOLDER_SYMBOL,\n  EDITOR_TO_WINDOW,\n} from '../utils/weak-maps'\n\n/**\n * `RenderElementProps` are passed to the `renderElement` handler.\n */\n\nexport interface RenderElementProps {\n  children: any\n  element: Element\n  attributes: {\n    'data-slate-node': 'element'\n    'data-slate-inline'?: true\n    'data-slate-void'?: true\n    dir?: 'rtl'\n    ref: any\n  }\n}\n\n/**\n * `RenderLeafProps` are passed to the `renderLeaf` handler.\n */\n\nexport interface RenderLeafProps {\n  children: any\n  leaf: Text\n  text: Text\n  attributes: {\n    'data-slate-leaf': true\n  }\n}\n\n/**\n * `EditableProps` are passed to the `<Editable>` component.\n */\n\nexport type EditableProps = {\n  decorate?: (entry: NodeEntry) => Range[]\n  onDOMBeforeInput?: (event: InputEvent) => void\n  placeholder?: string\n  readOnly?: boolean\n  role?: string\n  style?: React.CSSProperties\n  renderElement?: (props: RenderElementProps) => JSX.Element\n  renderLeaf?: (props: RenderLeafProps) => JSX.Element\n  renderPlaceholder?: (props: RenderPlaceholderProps) => JSX.Element\n  as?: React.ElementType\n} & React.TextareaHTMLAttributes<HTMLDivElement>\n\n/**\n * Editable.\n */\n\nexport const Editable = (props: EditableProps) => {\n  const {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    renderPlaceholder = props => <DefaultPlaceholder {...props} />,\n    style = {},\n    as: Component = 'div',\n    ...attributes\n  } = props\n  const editor = useSlate()\n  const ref = useRef<HTMLDivElement>(null)\n\n  // Update internal state on each render.\n  IS_READ_ONLY.set(editor, readOnly)\n\n  // Keep track of some state for the event handler logic.\n  const state = useMemo(\n    () => ({\n      isComposing: false,\n      isDraggingInternally: false,\n      isUpdatingSelection: false,\n      latestElement: null as DOMElement | null,\n    }),\n    []\n  )\n\n  // Whenever the editor updates...\n  useIsomorphicLayoutEffect(() => {\n    // Update element-related weak maps with the DOM element ref.\n    let window\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window)\n      EDITOR_TO_ELEMENT.set(editor, ref.current)\n      NODE_TO_ELEMENT.set(editor, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, editor)\n    } else {\n      NODE_TO_ELEMENT.delete(editor)\n    }\n\n    // Make sure the DOM selection state is in sync.\n    const { selection } = editor\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    const domSelection = root.getSelection()\n\n    if (state.isComposing || !domSelection || !ReactEditor.isFocused(editor)) {\n      return\n    }\n\n    const hasDomSelection = domSelection.type !== 'None'\n\n    // If the DOM selection is properly unset, we're done.\n    if (!selection && !hasDomSelection) {\n      return\n    }\n\n    // verify that the dom selection is in the editor\n    const editorElement = EDITOR_TO_ELEMENT.get(editor)!\n    let hasDomSelectionInEditor = false\n    if (\n      editorElement.contains(domSelection.anchorNode) &&\n      editorElement.contains(domSelection.focusNode)\n    ) {\n      hasDomSelectionInEditor = true\n    }\n\n    // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n    if (hasDomSelection && hasDomSelectionInEditor && selection) {\n      const slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: true,\n      })\n      if (slateRange && Range.equals(slateRange, selection)) {\n        return\n      }\n    }\n\n    // when <Editable/> is being controlled through external value\n    // then its children might just change - DOM responds to it on its own\n    // but Slate's value is not being updated through any operation\n    // and thus it doesn't transform selection on its own\n    if (selection && !ReactEditor.hasRange(editor, selection)) {\n      editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false,\n      })\n      return\n    }\n\n    // Otherwise the DOM selection is out of sync, so update it.\n    const el = ReactEditor.toDOMNode(editor, editor)\n    state.isUpdatingSelection = true\n\n    const newDomRange = selection && ReactEditor.toDOMRange(editor, selection)\n\n    if (newDomRange) {\n      if (Range.isBackward(selection!)) {\n        domSelection.setBaseAndExtent(\n          newDomRange.endContainer,\n          newDomRange.endOffset,\n          newDomRange.startContainer,\n          newDomRange.startOffset\n        )\n      } else {\n        domSelection.setBaseAndExtent(\n          newDomRange.startContainer,\n          newDomRange.startOffset,\n          newDomRange.endContainer,\n          newDomRange.endOffset\n        )\n      }\n      const leafEl = newDomRange.startContainer.parentElement!\n      leafEl.getBoundingClientRect = newDomRange.getBoundingClientRect.bind(\n        newDomRange\n      )\n      scrollIntoView(leafEl, {\n        scrollMode: 'if-needed',\n        boundary: el,\n      })\n      // @ts-ignore\n      delete leafEl.getBoundingClientRect\n    } else {\n      domSelection.removeAllRanges()\n    }\n\n    setTimeout(() => {\n      // COMPAT: In Firefox, it's not enough to create a range, you also need\n      // to focus the contenteditable element too. (2016/11/16)\n      if (newDomRange && IS_FIREFOX) {\n        el.focus()\n      }\n\n      state.isUpdatingSelection = false\n    })\n  })\n\n  // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus()\n    }\n  }, [autoFocus])\n\n  // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n  const onDOMBeforeInput = useCallback(\n    (event: InputEvent) => {\n      if (\n        !readOnly &&\n        hasEditableTarget(editor, event.target) &&\n        !isDOMEventHandled(event, propsOnDOMBeforeInput)\n      ) {\n        const { selection } = editor\n        const { inputType: type } = event\n        const data = (event as any).dataTransfer || event.data || undefined\n\n        // These two types occur while a user is composing text and can't be\n        // cancelled. Let them through and wait for the composition to end.\n        if (\n          type === 'insertCompositionText' ||\n          type === 'deleteCompositionText'\n        ) {\n          return\n        }\n\n        event.preventDefault()\n\n        // COMPAT: For the deleting forward/backward input types we don't want\n        // to change the selection because it is the range that will be deleted,\n        // and those commands determine that for themselves.\n        if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n          const [targetRange] = (event as any).getTargetRanges()\n\n          if (targetRange) {\n            const range = ReactEditor.toSlateRange(editor, targetRange, {\n              exactMatch: false,\n            })\n\n            if (!selection || !Range.equals(selection, range)) {\n              Transforms.select(editor, range)\n            }\n          }\n        }\n\n        // COMPAT: If the selection is expanded, even if the command seems like\n        // a delete forward/backward command it should delete the selection.\n        if (\n          selection &&\n          Range.isExpanded(selection) &&\n          type.startsWith('delete')\n        ) {\n          const direction = type.endsWith('Backward') ? 'backward' : 'forward'\n          Editor.deleteFragment(editor, { direction })\n          return\n        }\n\n        switch (type) {\n          case 'deleteByComposition':\n          case 'deleteByCut':\n          case 'deleteByDrag': {\n            Editor.deleteFragment(editor)\n            break\n          }\n\n          case 'deleteContent':\n          case 'deleteContentForward': {\n            Editor.deleteForward(editor)\n            break\n          }\n\n          case 'deleteContentBackward': {\n            Editor.deleteBackward(editor)\n            break\n          }\n\n          case 'deleteEntireSoftLine': {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            Editor.deleteForward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteHardLineBackward': {\n            Editor.deleteBackward(editor, { unit: 'block' })\n            break\n          }\n\n          case 'deleteSoftLineBackward': {\n            Editor.deleteBackward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteHardLineForward': {\n            Editor.deleteForward(editor, { unit: 'block' })\n            break\n          }\n\n          case 'deleteSoftLineForward': {\n            Editor.deleteForward(editor, { unit: 'line' })\n            break\n          }\n\n          case 'deleteWordBackward': {\n            Editor.deleteBackward(editor, { unit: 'word' })\n            break\n          }\n\n          case 'deleteWordForward': {\n            Editor.deleteForward(editor, { unit: 'word' })\n            break\n          }\n\n          case 'insertLineBreak':\n          case 'insertParagraph': {\n            Editor.insertBreak(editor)\n            break\n          }\n\n          case 'insertFromComposition':\n          case 'insertFromDrop':\n          case 'insertFromPaste':\n          case 'insertFromYank':\n          case 'insertReplacementText':\n          case 'insertText': {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              state.isComposing = false\n            }\n\n            const window = ReactEditor.getWindow(editor)\n            if (data instanceof window.DataTransfer) {\n              ReactEditor.insertData(editor, data as DataTransfer)\n            } else if (typeof data === 'string') {\n              Editor.insertText(editor, data)\n            }\n\n            break\n          }\n        }\n      }\n    },\n    [readOnly, propsOnDOMBeforeInput]\n  )\n\n  // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  // https://github.com/facebook/react/issues/11211\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n      // @ts-ignore The `beforeinput` event isn't recognized.\n      ref.current.addEventListener('beforeinput', onDOMBeforeInput)\n    }\n\n    return () => {\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput)\n      }\n    }\n  }, [onDOMBeforeInput])\n\n  // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n  const onDOMSelectionChange = useCallback(\n    throttle(() => {\n      if (\n        !readOnly &&\n        !state.isComposing &&\n        !state.isUpdatingSelection &&\n        !state.isDraggingInternally\n      ) {\n        const root = ReactEditor.findDocumentOrShadowRoot(editor)\n        const { activeElement } = root\n        const el = ReactEditor.toDOMNode(editor, editor)\n        const domSelection = root.getSelection()\n\n        if (activeElement === el) {\n          state.latestElement = activeElement\n          IS_FOCUSED.set(editor, true)\n        } else {\n          IS_FOCUSED.delete(editor)\n        }\n\n        if (!domSelection) {\n          return Transforms.deselect(editor)\n        }\n\n        const { anchorNode, focusNode } = domSelection\n\n        const anchorNodeSelectable =\n          hasEditableTarget(editor, anchorNode) ||\n          isTargetInsideVoid(editor, anchorNode)\n\n        const focusNodeSelectable =\n          hasEditableTarget(editor, focusNode) ||\n          isTargetInsideVoid(editor, focusNode)\n\n        if (anchorNodeSelectable && focusNodeSelectable) {\n          const range = ReactEditor.toSlateRange(editor, domSelection, {\n            exactMatch: false,\n          })\n          Transforms.select(editor, range)\n        } else {\n          Transforms.deselect(editor)\n        }\n      }\n    }, 100),\n    [readOnly]\n  )\n\n  // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n  useIsomorphicLayoutEffect(() => {\n    const window = ReactEditor.getWindow(editor)\n    window.document.addEventListener('selectionchange', onDOMSelectionChange)\n\n    return () => {\n      window.document.removeEventListener(\n        'selectionchange',\n        onDOMSelectionChange\n      )\n    }\n  }, [onDOMSelectionChange])\n\n  const decorations = decorate([editor, []])\n\n  if (\n    placeholder &&\n    editor.children.length === 1 &&\n    Array.from(Node.texts(editor)).length === 1 &&\n    Node.string(editor) === ''\n  ) {\n    const start = Editor.start(editor, [])\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start,\n    })\n  }\n\n  return (\n    <ReadOnlyContext.Provider value={readOnly}>\n      <DecorateContext.Provider value={decorate}>\n        <Component\n          // COMPAT: The Grammarly Chrome extension works by changing the DOM\n          // out from under `contenteditable` elements, which leads to weird\n          // behaviors so we have to disable it like editor. (2017/04/24)\n          data-gramm={false}\n          role={readOnly ? undefined : 'textbox'}\n          {...attributes}\n          // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n          // have to use hacks to make these replacement-based features work.\n          spellCheck={!HAS_BEFORE_INPUT_SUPPORT ? false : attributes.spellCheck}\n          autoCorrect={\n            !HAS_BEFORE_INPUT_SUPPORT ? 'false' : attributes.autoCorrect\n          }\n          autoCapitalize={\n            !HAS_BEFORE_INPUT_SUPPORT ? 'false' : attributes.autoCapitalize\n          }\n          data-slate-editor\n          data-slate-node=\"value\"\n          contentEditable={readOnly ? undefined : true}\n          suppressContentEditableWarning\n          ref={ref}\n          style={{\n            // Allow positioning relative to the editable element.\n            position: 'relative',\n            // Prevent the default outline styles.\n            outline: 'none',\n            // Preserve adjacent whitespace and new lines.\n            whiteSpace: 'pre-wrap',\n            // Allow words to break if they are too long.\n            wordWrap: 'break-word',\n            // Allow for passed-in styles to override anything.\n            ...style,\n          }}\n          onBeforeInput={useCallback(\n            (event: React.FormEvent<HTMLDivElement>) => {\n              // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n              // fall back to React's leaky polyfill instead just for it. It\n              // only works for the `insertText` input type.\n              if (\n                !HAS_BEFORE_INPUT_SUPPORT &&\n                !readOnly &&\n                !isEventHandled(event, attributes.onBeforeInput) &&\n                hasEditableTarget(editor, event.target)\n              ) {\n                event.preventDefault()\n                if (!state.isComposing) {\n                  const text = (event as any).data as string\n                  Editor.insertText(editor, text)\n                }\n              }\n            },\n            [readOnly]\n          )}\n          onBlur={useCallback(\n            (event: React.FocusEvent<HTMLDivElement>) => {\n              if (\n                readOnly ||\n                state.isUpdatingSelection ||\n                !hasEditableTarget(editor, event.target) ||\n                isEventHandled(event, attributes.onBlur)\n              ) {\n                return\n              }\n\n              // COMPAT: If the current `activeElement` is still the previous\n              // one, this is due to the window being blurred when the tab\n              // itself becomes unfocused, so we want to abort early to allow to\n              // editor to stay focused when the tab becomes focused again.\n              const root = ReactEditor.findDocumentOrShadowRoot(editor)\n              if (state.latestElement === root.activeElement) {\n                return\n              }\n\n              const { relatedTarget } = event\n              const el = ReactEditor.toDOMNode(editor, editor)\n\n              // COMPAT: The event should be ignored if the focus is returning\n              // to the editor from an embedded editable element (eg. an <input>\n              // element inside a void node).\n              if (relatedTarget === el) {\n                return\n              }\n\n              // COMPAT: The event should be ignored if the focus is moving from\n              // the editor to inside a void node's spacer element.\n              if (\n                isDOMElement(relatedTarget) &&\n                relatedTarget.hasAttribute('data-slate-spacer')\n              ) {\n                return\n              }\n\n              // COMPAT: The event should be ignored if the focus is moving to a\n              // non- editable section of an element that isn't a void node (eg.\n              // a list item of the check list example).\n              if (\n                relatedTarget != null &&\n                isDOMNode(relatedTarget) &&\n                ReactEditor.hasDOMNode(editor, relatedTarget)\n              ) {\n                const node = ReactEditor.toSlateNode(editor, relatedTarget)\n\n                if (Element.isElement(node) && !editor.isVoid(node)) {\n                  return\n                }\n              }\n\n              // COMPAT: Safari doesn't always remove the selection even if the content-\n              // editable element no longer has focus. Refer to:\n              // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n              if (IS_SAFARI) {\n                const domSelection = root.getSelection()\n                domSelection?.removeAllRanges()\n              }\n\n              IS_FOCUSED.delete(editor)\n            },\n            [readOnly, attributes.onBlur]\n          )}\n          onClick={useCallback(\n            (event: React.MouseEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                hasTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onClick) &&\n                isDOMNode(event.target)\n              ) {\n                const node = ReactEditor.toSlateNode(editor, event.target)\n                const path = ReactEditor.findPath(editor, node)\n                const start = Editor.start(editor, path)\n                const end = Editor.end(editor, path)\n\n                const startVoid = Editor.void(editor, { at: start })\n                const endVoid = Editor.void(editor, { at: end })\n\n                if (\n                  startVoid &&\n                  endVoid &&\n                  Path.equals(startVoid[1], endVoid[1])\n                ) {\n                  const range = Editor.range(editor, start)\n                  Transforms.select(editor, range)\n                }\n              }\n            },\n            [readOnly, attributes.onClick]\n          )}\n          onCompositionEnd={useCallback(\n            (event: React.CompositionEvent<HTMLDivElement>) => {\n              if (\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCompositionEnd)\n              ) {\n                state.isComposing = false\n\n                // COMPAT: In Chrome, `beforeinput` events for compositions\n                // aren't correct and never fire the \"insertFromComposition\"\n                // type that we need. So instead, insert whenever a composition\n                // ends since it will already have been committed to the DOM.\n                if (!IS_SAFARI && !IS_FIREFOX_LEGACY && event.data) {\n                  Editor.insertText(editor, event.data)\n                }\n              }\n            },\n            [attributes.onCompositionEnd]\n          )}\n          onCompositionUpdate={useCallback(\n            (event: React.CompositionEvent<HTMLDivElement>) => {\n              if (\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCompositionUpdate)\n              ) {\n                state.isComposing = true\n              }\n            },\n            [attributes.onCompositionUpdate]\n          )}\n          onCompositionStart={useCallback(\n            (event: React.CompositionEvent<HTMLDivElement>) => {\n              if (\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCompositionStart)\n              ) {\n                const { selection } = editor\n                if (selection && Range.isExpanded(selection)) {\n                  Editor.deleteFragment(editor)\n                }\n              }\n            },\n            [attributes.onCompositionStart]\n          )}\n          onCopy={useCallback(\n            (event: React.ClipboardEvent<HTMLDivElement>) => {\n              if (\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCopy)\n              ) {\n                event.preventDefault()\n                ReactEditor.setFragmentData(editor, event.clipboardData)\n              }\n            },\n            [attributes.onCopy]\n          )}\n          onCut={useCallback(\n            (event: React.ClipboardEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCut)\n              ) {\n                event.preventDefault()\n                ReactEditor.setFragmentData(editor, event.clipboardData)\n                const { selection } = editor\n\n                if (selection) {\n                  if (Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    const node = Node.parent(editor, selection.anchor.path)\n                    if (Editor.isVoid(editor, node)) {\n                      Transforms.delete(editor)\n                    }\n                  }\n                }\n              }\n            },\n            [readOnly, attributes.onCut]\n          )}\n          onDragOver={useCallback(\n            (event: React.DragEvent<HTMLDivElement>) => {\n              if (\n                hasTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onDragOver)\n              ) {\n                // Only when the target is void, call `preventDefault` to signal\n                // that drops are allowed. Editable content is droppable by\n                // default, and calling `preventDefault` hides the cursor.\n                const node = ReactEditor.toSlateNode(editor, event.target)\n\n                if (Editor.isVoid(editor, node)) {\n                  event.preventDefault()\n                }\n              }\n            },\n            [attributes.onDragOver]\n          )}\n          onDragStart={useCallback(\n            (event: React.DragEvent<HTMLDivElement>) => {\n              if (\n                hasTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onDragStart)\n              ) {\n                const node = ReactEditor.toSlateNode(editor, event.target)\n                const path = ReactEditor.findPath(editor, node)\n                const voidMatch =\n                  Editor.isVoid(editor, node) ||\n                  Editor.void(editor, { at: path, voids: true })\n\n                // If starting a drag on a void node, make sure it is selected\n                // so that it shows up in the selection's fragment.\n                if (voidMatch) {\n                  const range = Editor.range(editor, path)\n                  Transforms.select(editor, range)\n                }\n\n                state.isDraggingInternally = true\n\n                ReactEditor.setFragmentData(editor, event.dataTransfer)\n              }\n            },\n            [attributes.onDragStart]\n          )}\n          onDrop={useCallback(\n            (event: React.DragEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                hasTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onDrop)\n              ) {\n                event.preventDefault()\n\n                // Keep a reference to the dragged range before updating selection\n                const draggedRange = editor.selection\n\n                // Find the range where the drop happened\n                const range = ReactEditor.findEventRange(editor, event)\n                const data = event.dataTransfer\n\n                Transforms.select(editor, range)\n\n                if (state.isDraggingInternally) {\n                  if (draggedRange) {\n                    Transforms.delete(editor, {\n                      at: draggedRange,\n                    })\n                  }\n\n                  state.isDraggingInternally = false\n                }\n\n                ReactEditor.insertData(editor, data)\n\n                // When dragging from another source into the editor, it's possible\n                // that the current editor does not have focus.\n                if (!ReactEditor.isFocused(editor)) {\n                  ReactEditor.focus(editor)\n                }\n              }\n            },\n            [readOnly, attributes.onDrop]\n          )}\n          onDragEnd={useCallback(\n            (event: React.DragEvent<HTMLDivElement>) => {\n              // When dropping on a different droppable element than the current editor,\n              // `onDrop` is not called. So we need to clean up in `onDragEnd` instead.\n              // Note: `onDragEnd` is only called when `onDrop` is not called\n              if (\n                !readOnly &&\n                state.isDraggingInternally &&\n                hasTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onDragEnd)\n              ) {\n                state.isDraggingInternally = false\n              }\n            },\n            [readOnly, attributes.onDragEnd]\n          )}\n          onFocus={useCallback(\n            (event: React.FocusEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                !state.isUpdatingSelection &&\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onFocus)\n              ) {\n                const el = ReactEditor.toDOMNode(editor, editor)\n                const root = ReactEditor.findDocumentOrShadowRoot(editor)\n                state.latestElement = root.activeElement\n\n                // COMPAT: If the editor has nested editable elements, the focus\n                // can go to them. In Firefox, this must be prevented because it\n                // results in issues with keyboard navigation. (2017/03/30)\n                if (IS_FIREFOX && event.target !== el) {\n                  el.focus()\n                  return\n                }\n\n                IS_FOCUSED.set(editor, true)\n              }\n            },\n            [readOnly, attributes.onFocus]\n          )}\n          onKeyDown={useCallback(\n            (event: React.KeyboardEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onKeyDown)\n              ) {\n                const { nativeEvent } = event\n                const { selection } = editor\n\n                const element =\n                  editor.children[\n                    selection !== null ? selection.focus.path[0] : 0\n                  ]\n                const isRTL = getDirection(Node.string(element)) === 'rtl'\n\n                // COMPAT: Since we prevent the default behavior on\n                // `beforeinput` events, the browser doesn't think there's ever\n                // any history stack to undo or redo, so we have to manage these\n                // hotkeys ourselves. (2019/11/06)\n                if (Hotkeys.isRedo(nativeEvent)) {\n                  event.preventDefault()\n                  const maybeHistoryEditor: any = editor\n\n                  if (typeof maybeHistoryEditor.redo === 'function') {\n                    maybeHistoryEditor.redo()\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isUndo(nativeEvent)) {\n                  event.preventDefault()\n                  const maybeHistoryEditor: any = editor\n\n                  if (typeof maybeHistoryEditor.undo === 'function') {\n                    maybeHistoryEditor.undo()\n                  }\n\n                  return\n                }\n\n                // COMPAT: Certain browsers don't handle the selection updates\n                // properly. In Chrome, the selection isn't properly extended.\n                // And in Firefox, the selection isn't properly collapsed.\n                // (2017/10/17)\n                if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n                  event.preventDefault()\n                  Transforms.move(editor, { unit: 'line', reverse: true })\n                  return\n                }\n\n                if (Hotkeys.isMoveLineForward(nativeEvent)) {\n                  event.preventDefault()\n                  Transforms.move(editor, { unit: 'line' })\n                  return\n                }\n\n                if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n                  event.preventDefault()\n                  Transforms.move(editor, {\n                    unit: 'line',\n                    edge: 'focus',\n                    reverse: true,\n                  })\n                  return\n                }\n\n                if (Hotkeys.isExtendLineForward(nativeEvent)) {\n                  event.preventDefault()\n                  Transforms.move(editor, { unit: 'line', edge: 'focus' })\n                  return\n                }\n\n                // COMPAT: If a void node is selected, or a zero-width text node\n                // adjacent to an inline is selected, we need to handle these\n                // hotkeys manually because browsers won't be able to skip over\n                // the void node with the zero-width space not being an empty\n                // string.\n                if (Hotkeys.isMoveBackward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isCollapsed(selection)) {\n                    Transforms.move(editor, { reverse: !isRTL })\n                  } else {\n                    Transforms.collapse(editor, { edge: 'start' })\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isMoveForward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isCollapsed(selection)) {\n                    Transforms.move(editor, { reverse: isRTL })\n                  } else {\n                    Transforms.collapse(editor, { edge: 'end' })\n                  }\n\n                  return\n                }\n\n                if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Transforms.collapse(editor, { edge: 'focus' })\n                  }\n\n                  Transforms.move(editor, { unit: 'word', reverse: !isRTL })\n                  return\n                }\n\n                if (Hotkeys.isMoveWordForward(nativeEvent)) {\n                  event.preventDefault()\n\n                  if (selection && Range.isExpanded(selection)) {\n                    Transforms.collapse(editor, { edge: 'focus' })\n                  }\n\n                  Transforms.move(editor, { unit: 'word', reverse: isRTL })\n                  return\n                }\n\n                // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                // fall back to guessing at the input intention for hotkeys.\n                // COMPAT: In iOS, some of these hotkeys are handled in the\n                if (!HAS_BEFORE_INPUT_SUPPORT) {\n                  // We don't have a core behavior for these, but they change the\n                  // DOM if we don't prevent them, so we have to.\n                  if (\n                    Hotkeys.isBold(nativeEvent) ||\n                    Hotkeys.isItalic(nativeEvent) ||\n                    Hotkeys.isTransposeCharacter(nativeEvent)\n                  ) {\n                    event.preventDefault()\n                    return\n                  }\n\n                  if (Hotkeys.isSplitBlock(nativeEvent)) {\n                    event.preventDefault()\n                    Editor.insertBreak(editor)\n                    return\n                  }\n\n                  if (Hotkeys.isDeleteBackward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor, { direction: 'backward' })\n                    } else {\n                      Editor.deleteBackward(editor)\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isDeleteForward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor, { direction: 'forward' })\n                    } else {\n                      Editor.deleteForward(editor)\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor, { direction: 'backward' })\n                    } else {\n                      Editor.deleteBackward(editor, { unit: 'line' })\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor, { direction: 'forward' })\n                    } else {\n                      Editor.deleteForward(editor, { unit: 'line' })\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor, { direction: 'backward' })\n                    } else {\n                      Editor.deleteBackward(editor, { unit: 'word' })\n                    }\n\n                    return\n                  }\n\n                  if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n                    event.preventDefault()\n\n                    if (selection && Range.isExpanded(selection)) {\n                      Editor.deleteFragment(editor, { direction: 'forward' })\n                    } else {\n                      Editor.deleteForward(editor, { unit: 'word' })\n                    }\n\n                    return\n                  }\n                } else {\n                  if (IS_CHROME || IS_SAFARI) {\n                    // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n                    // an event when deleting backwards in a selected void inline node\n                    if (\n                      selection &&\n                      (Hotkeys.isDeleteBackward(nativeEvent) ||\n                        Hotkeys.isDeleteForward(nativeEvent)) &&\n                      Range.isCollapsed(selection)\n                    ) {\n                      const currentNode = Node.parent(\n                        editor,\n                        selection.anchor.path\n                      )\n\n                      if (\n                        Element.isElement(currentNode) &&\n                        Editor.isVoid(editor, currentNode) &&\n                        Editor.isInline(editor, currentNode)\n                      ) {\n                        event.preventDefault()\n                        Transforms.delete(editor, { unit: 'block' })\n\n                        return\n                      }\n                    }\n                  }\n                }\n              }\n            },\n            [readOnly, attributes.onKeyDown]\n          )}\n          onPaste={useCallback(\n            (event: React.ClipboardEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onPaste)\n              ) {\n                // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n                // fall back to React's `onPaste` here instead.\n                // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n                // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n                if (\n                  !HAS_BEFORE_INPUT_SUPPORT ||\n                  isPlainTextOnlyPaste(event.nativeEvent)\n                ) {\n                  event.preventDefault()\n                  ReactEditor.insertData(editor, event.clipboardData)\n                }\n              }\n            },\n            [readOnly, attributes.onPaste]\n          )}\n        >\n          {useChildren({\n            decorations,\n            node: editor,\n            renderElement,\n            renderPlaceholder,\n            renderLeaf,\n            selection: editor.selection,\n          })}\n        </Component>\n      </DecorateContext.Provider>\n    </ReadOnlyContext.Provider>\n  )\n}\n\n/**\n * The props that get passed to renderPlaceholder\n */\nexport type RenderPlaceholderProps = {\n  children: any\n  attributes: {\n    'data-slate-placeholder': boolean\n    dir?: 'rtl'\n    contentEditable: boolean\n    ref: React.RefObject<any>\n    style: React.CSSProperties\n  }\n}\n\n/**\n * The default placeholder element\n */\n\nexport const DefaultPlaceholder = ({\n  attributes,\n  children,\n}: RenderPlaceholderProps) => <span {...attributes}>{children}</span>\n\n/**\n * A default memoized decorate function.\n */\n\nexport const defaultDecorate: (entry: NodeEntry) => Range[] = () => []\n\n/**\n * Check if two DOM range objects are equal.\n */\n\nexport const isRangeEqual = (a: DOMRange, b: DOMRange) => {\n  return (\n    (a.startContainer === b.startContainer &&\n      a.startOffset === b.startOffset &&\n      a.endContainer === b.endContainer &&\n      a.endOffset === b.endOffset) ||\n    (a.startContainer === b.endContainer &&\n      a.startOffset === b.endOffset &&\n      a.endContainer === b.startContainer &&\n      a.endOffset === b.startOffset)\n  )\n}\n\n/**\n * Check if the target is in the editor.\n */\n\nexport const hasTarget = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): target is DOMNode => {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target)\n}\n\n/**\n * Check if the target is editable and in the editor.\n */\n\nexport const hasEditableTarget = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): target is DOMNode => {\n  return (\n    isDOMNode(target) &&\n    ReactEditor.hasDOMNode(editor, target, { editable: true })\n  )\n}\n\n/**\n * Check if the target is inside void and in the editor.\n */\n\nexport const isTargetInsideVoid = (\n  editor: ReactEditor,\n  target: EventTarget | null\n): boolean => {\n  const slateNode =\n    hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target)\n  return Editor.isVoid(editor, slateNode)\n}\n\n/**\n * Check if an event is overrided by a handler.\n */\n\nexport const isEventHandled = <\n  EventType extends React.SyntheticEvent<unknown, unknown>\n>(\n  event: EventType,\n  handler?: (event: EventType) => void | boolean\n) => {\n  if (!handler) {\n    return false\n  }\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  const shouldTreatEventAsHandled = handler(event)\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled\n  }\n\n  return event.isDefaultPrevented() || event.isPropagationStopped()\n}\n\n/**\n * Check if a DOM event is overrided by a handler.\n */\n\nexport const isDOMEventHandled = <E extends Event>(\n  event: E,\n  handler?: (event: E) => void | boolean\n) => {\n  if (!handler) {\n    return false\n  }\n\n  // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n  const shouldTreatEventAsHandled = handler(event)\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled\n  }\n\n  return event.defaultPrevented\n}\n","/**\n * An auto-incrementing identifier for keys.\n */\n\nlet n = 0\n\n/**\n * A class that keeps track of a key string. We use a full class here because we\n * want to be able to use them as keys in `WeakMap` objects.\n */\n\nexport class Key {\n  id: string\n\n  constructor() {\n    this.id = `${n++}`\n  }\n}\n","import { Editor, Node, Path, Point, Range, Transforms, BaseEditor } from 'slate'\n\nimport { Key } from '../utils/key'\nimport {\n  EDITOR_TO_ELEMENT,\n  ELEMENT_TO_NODE,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  KEY_TO_ELEMENT,\n  NODE_TO_INDEX,\n  NODE_TO_KEY,\n  NODE_TO_PARENT,\n  EDITOR_TO_WINDOW,\n} from '../utils/weak-maps'\nimport {\n  DOMElement,\n  DOMNode,\n  DOMPoint,\n  DOMRange,\n  DOMSelection,\n  DOMStaticRange,\n  isDOMElement,\n  isDOMSelection,\n  normalizeDOMPoint,\n  hasShadowRoot,\n} from '../utils/dom'\nimport { IS_CHROME } from '../utils/environment'\n\n/**\n * A React and DOM-specific version of the `Editor` interface.\n */\n\nexport interface ReactEditor extends BaseEditor {\n  insertData: (data: DataTransfer) => void\n  setFragmentData: (data: DataTransfer) => void\n  hasRange: (editor: ReactEditor, range: Range) => boolean\n}\n\nexport const ReactEditor = {\n  /**\n   * Return the host window of the current editor.\n   */\n\n  getWindow(editor: ReactEditor): Window {\n    const window = EDITOR_TO_WINDOW.get(editor)\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor')\n    }\n    return window\n  },\n\n  /**\n   * Find a key for a Slate node.\n   */\n\n  findKey(editor: ReactEditor, node: Node): Key {\n    let key = NODE_TO_KEY.get(node)\n\n    if (!key) {\n      key = new Key()\n      NODE_TO_KEY.set(node, key)\n    }\n\n    return key\n  },\n\n  /**\n   * Find the path of Slate node.\n   */\n\n  findPath(editor: ReactEditor, node: Node): Path {\n    const path: Path = []\n    let child = node\n\n    while (true) {\n      const parent = NODE_TO_PARENT.get(child)\n\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path\n        } else {\n          break\n        }\n      }\n\n      const i = NODE_TO_INDEX.get(child)\n\n      if (i == null) {\n        break\n      }\n\n      path.unshift(i)\n      child = parent\n    }\n\n    throw new Error(\n      `Unable to find the path for Slate node: ${JSON.stringify(node)}`\n    )\n  },\n\n  /**\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\n   */\n\n  findDocumentOrShadowRoot(editor: ReactEditor): Document | ShadowRoot {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const root = el.getRootNode()\n\n    // The below exception will always be thrown for iframes because the document inside an iframe\n    // does not inherit it's prototype from the parent document, therefore we return early\n    if (el.ownerDocument !== document) return el.ownerDocument\n\n    if (!(root instanceof Document || root instanceof ShadowRoot))\n      throw new Error(\n        `Unable to find DocumentOrShadowRoot for editor element: ${el}`\n      )\n\n    // COMPAT: Only Chrome implements the DocumentOrShadowRoot mixin for\n    // ShadowRoot; other browsers still implement it on the Document\n    // interface. (2020/08/08)\n    // https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot#Properties\n    if (root.getSelection === undefined && el.ownerDocument !== null)\n      return el.ownerDocument\n\n    return root\n  },\n\n  /**\n   * Check if the editor is focused.\n   */\n\n  isFocused(editor: ReactEditor): boolean {\n    return !!IS_FOCUSED.get(editor)\n  },\n\n  /**\n   * Check if the editor is in read-only mode.\n   */\n\n  isReadOnly(editor: ReactEditor): boolean {\n    return !!IS_READ_ONLY.get(editor)\n  },\n\n  /**\n   * Blur the editor.\n   */\n\n  blur(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    IS_FOCUSED.set(editor, false)\n\n    if (root.activeElement === el) {\n      el.blur()\n    }\n  },\n\n  /**\n   * Focus the editor.\n   */\n\n  focus(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    IS_FOCUSED.set(editor, true)\n\n    if (root.activeElement !== el) {\n      el.focus({ preventScroll: true })\n    }\n  },\n\n  /**\n   * Deselect the editor.\n   */\n\n  deselect(editor: ReactEditor): void {\n    const el = ReactEditor.toDOMNode(editor, editor)\n    const { selection } = editor\n    const root = ReactEditor.findDocumentOrShadowRoot(editor)\n    const domSelection = root.getSelection()\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges()\n    }\n\n    if (selection) {\n      Transforms.deselect(editor)\n    }\n  },\n\n  /**\n   * Check if a DOM node is within the editor.\n   */\n\n  hasDOMNode(\n    editor: ReactEditor,\n    target: DOMNode,\n    options: { editable?: boolean } = {}\n  ): boolean {\n    const { editable = false } = options\n    const editorEl = ReactEditor.toDOMNode(editor, editor)\n    let targetEl\n\n    // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n    try {\n      targetEl = (isDOMElement(target)\n        ? target\n        : target.parentElement) as HTMLElement\n    } catch (err) {\n      if (\n        !err.message.includes('Permission denied to access property \"nodeType\"')\n      ) {\n        throw err\n      }\n    }\n\n    if (!targetEl) {\n      return false\n    }\n\n    return (\n      targetEl.closest(`[data-slate-editor]`) === editorEl &&\n      (!editable ||\n        targetEl.isContentEditable ||\n        !!targetEl.getAttribute('data-slate-zero-width'))\n    )\n  },\n\n  /**\n   * Insert data from a `DataTransfer` into the editor.\n   */\n\n  insertData(editor: ReactEditor, data: DataTransfer): void {\n    editor.insertData(data)\n  },\n\n  /**\n   * Sets data from the currently selected fragment on a `DataTransfer`.\n   */\n\n  setFragmentData(editor: ReactEditor, data: DataTransfer): void {\n    editor.setFragmentData(data)\n  },\n\n  /**\n   * Find the native DOM element from a Slate node.\n   */\n\n  toDOMNode(editor: ReactEditor, node: Node): HTMLElement {\n    const domNode = Editor.isEditor(node)\n      ? EDITOR_TO_ELEMENT.get(editor)\n      : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node))\n\n    if (!domNode) {\n      throw new Error(\n        `Cannot resolve a DOM node from Slate node: ${JSON.stringify(node)}`\n      )\n    }\n\n    return domNode\n  },\n\n  /**\n   * Find a native DOM selection point from a Slate point.\n   */\n\n  toDOMPoint(editor: ReactEditor, point: Point): DOMPoint {\n    const [node] = Editor.node(editor, point.path)\n    const el = ReactEditor.toDOMNode(editor, node)\n    let domPoint: DOMPoint | undefined\n\n    // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n    if (Editor.void(editor, { at: point })) {\n      point = { path: point.path, offset: 0 }\n    }\n\n    // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n    const selector = `[data-slate-string], [data-slate-zero-width]`\n    const texts = Array.from(el.querySelectorAll(selector))\n    let start = 0\n\n    for (const text of texts) {\n      const domNode = text.childNodes[0] as HTMLElement\n\n      if (domNode == null || domNode.textContent == null) {\n        continue\n      }\n\n      const { length } = domNode.textContent\n      const attr = text.getAttribute('data-slate-length')\n      const trueLength = attr == null ? length : parseInt(attr, 10)\n      const end = start + trueLength\n\n      if (point.offset <= end) {\n        const offset = Math.min(length, Math.max(0, point.offset - start))\n        domPoint = [domNode, offset]\n        break\n      }\n\n      start = end\n    }\n\n    if (!domPoint) {\n      throw new Error(\n        `Cannot resolve a DOM point from Slate point: ${JSON.stringify(point)}`\n      )\n    }\n\n    return domPoint\n  },\n\n  /**\n   * Find a native DOM range from a Slate `range`.\n   *\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\n   *\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\n   */\n\n  toDOMRange(editor: ReactEditor, range: Range): DOMRange {\n    const { anchor, focus } = range\n    const isBackward = Range.isBackward(range)\n    const domAnchor = ReactEditor.toDOMPoint(editor, anchor)\n    const domFocus = Range.isCollapsed(range)\n      ? domAnchor\n      : ReactEditor.toDOMPoint(editor, focus)\n\n    const window = ReactEditor.getWindow(editor)\n    const domRange = window.document.createRange()\n    const [startNode, startOffset] = isBackward ? domFocus : domAnchor\n    const [endNode, endOffset] = isBackward ? domAnchor : domFocus\n\n    // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n    const startEl = (isDOMElement(startNode)\n      ? startNode\n      : startNode.parentElement) as HTMLElement\n    const isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width')\n    const endEl = (isDOMElement(endNode)\n      ? endNode\n      : endNode.parentElement) as HTMLElement\n    const isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width')\n\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset)\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset)\n    return domRange\n  },\n\n  /**\n   * Find a Slate node from a native DOM `element`.\n   */\n\n  toSlateNode(editor: ReactEditor, domNode: DOMNode): Node {\n    let domEl = isDOMElement(domNode) ? domNode : domNode.parentElement\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(`[data-slate-node]`)\n    }\n\n    const node = domEl ? ELEMENT_TO_NODE.get(domEl as HTMLElement) : null\n\n    if (!node) {\n      throw new Error(`Cannot resolve a Slate node from DOM node: ${domEl}`)\n    }\n\n    return node\n  },\n\n  /**\n   * Get the target range from a DOM `event`.\n   */\n\n  findEventRange(editor: ReactEditor, event: any): Range {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent\n    }\n\n    const { clientX: x, clientY: y, target } = event\n\n    if (x == null || y == null) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    const node = ReactEditor.toSlateNode(editor, event.target)\n    const path = ReactEditor.findPath(editor, node)\n\n    // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n    if (Editor.isVoid(editor, node)) {\n      const rect = target.getBoundingClientRect()\n      const isPrev = editor.isInline(node)\n        ? x - rect.left < rect.left + rect.width - x\n        : y - rect.top < rect.top + rect.height - y\n\n      const edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end',\n      })\n      const point = isPrev\n        ? Editor.before(editor, edge)\n        : Editor.after(editor, edge)\n\n      if (point) {\n        const range = Editor.range(editor, point)\n        return range\n      }\n    }\n\n    // Else resolve a range from the caret position where the drop occured.\n    let domRange\n    const { document } = window\n\n    // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y)\n    } else {\n      const position = document.caretPositionFromPoint(x, y)\n\n      if (position) {\n        domRange = document.createRange()\n        domRange.setStart(position.offsetNode, position.offset)\n        domRange.setEnd(position.offsetNode, position.offset)\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(`Cannot resolve a Slate range from a DOM event: ${event}`)\n    }\n\n    // Resolve a Slate range from the DOM range.\n    const range = ReactEditor.toSlateRange(editor, domRange, {\n      exactMatch: false,\n    })\n    return range\n  },\n\n  /**\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\n   */\n\n  toSlatePoint<T extends boolean>(\n    editor: ReactEditor,\n    domPoint: DOMPoint,\n    exactMatch: T\n  ): T extends true ? Point | null : Point {\n    const [nearestNode, nearestOffset] = exactMatch\n      ? domPoint\n      : normalizeDOMPoint(domPoint)\n    const parentNode = nearestNode.parentNode as DOMElement\n    let textNode: DOMElement | null = null\n    let offset = 0\n\n    if (parentNode) {\n      const voidNode = parentNode.closest('[data-slate-void=\"true\"]')\n      let leafNode = parentNode.closest('[data-slate-leaf]')\n      let domNode: DOMElement | null = null\n\n      // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n        const window = ReactEditor.getWindow(editor)\n        const range = window.document.createRange()\n        range.setStart(textNode, 0)\n        range.setEnd(nearestNode, nearestOffset)\n        const contents = range.cloneContents()\n        const removals = [\n          ...Array.prototype.slice.call(\n            contents.querySelectorAll('[data-slate-zero-width]')\n          ),\n          ...Array.prototype.slice.call(\n            contents.querySelectorAll('[contenteditable=false]')\n          ),\n        ]\n\n        removals.forEach(el => {\n          el!.parentNode!.removeChild(el)\n        })\n\n        // COMPAT: Edge has a bug where Range.prototype.toString() will\n        // convert \\n into \\r\\n. The bug causes a loop when slate-react\n        // attempts to reposition its cursor to match the native position. Use\n        // textContent.length instead.\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n        offset = contents.textContent!.length\n        domNode = textNode\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent.\n        leafNode = voidNode.querySelector('[data-slate-leaf]')!\n\n        // COMPAT: In read-only editors the leaf is not rendered.\n        if (!leafNode) {\n          offset = 1\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]')!\n          domNode = leafNode\n          offset = domNode.textContent!.length\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent!.length\n          })\n        }\n      }\n\n      // COMPAT: If the parent node is a Slate zero-width space, editor is\n      // because the text node should have no characters. However, during IME\n      // composition the ASCII characters will be prepended to the zero-width\n      // space, so subtract 1 from the offset to account for the zero-width\n      // space character.\n      if (\n        domNode &&\n        offset === domNode.textContent!.length &&\n        parentNode.hasAttribute('data-slate-zero-width')\n      ) {\n        offset--\n      }\n    }\n\n    if (!textNode) {\n      if (exactMatch) {\n        return null as T extends true ? Point | null : Point\n      }\n      throw new Error(\n        `Cannot resolve a Slate point from DOM point: ${domPoint}`\n      )\n    }\n\n    // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n    const slateNode = ReactEditor.toSlateNode(editor, textNode!)\n    const path = ReactEditor.findPath(editor, slateNode)\n    return { path, offset } as T extends true ? Point | null : Point\n  },\n\n  /**\n   * Find a Slate range from a DOM range or selection.\n   */\n\n  toSlateRange<T extends boolean>(\n    editor: ReactEditor,\n    domRange: DOMRange | DOMStaticRange | DOMSelection,\n    options: {\n      exactMatch: T\n    }\n  ): T extends true ? Range | null : Range {\n    const { exactMatch } = options\n    const el = isDOMSelection(domRange)\n      ? domRange.anchorNode\n      : domRange.startContainer\n    let anchorNode\n    let anchorOffset\n    let focusNode\n    let focusOffset\n    let isCollapsed\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        anchorNode = domRange.anchorNode\n        anchorOffset = domRange.anchorOffset\n        focusNode = domRange.focusNode\n        focusOffset = domRange.focusOffset\n        // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n        if (IS_CHROME && hasShadowRoot()) {\n          isCollapsed =\n            domRange.anchorNode === domRange.focusNode &&\n            domRange.anchorOffset === domRange.focusOffset\n        } else {\n          isCollapsed = domRange.isCollapsed\n        }\n      } else {\n        anchorNode = domRange.startContainer\n        anchorOffset = domRange.startOffset\n        focusNode = domRange.endContainer\n        focusOffset = domRange.endOffset\n        isCollapsed = domRange.collapsed\n      }\n    }\n\n    if (\n      anchorNode == null ||\n      focusNode == null ||\n      anchorOffset == null ||\n      focusOffset == null\n    ) {\n      throw new Error(\n        `Cannot resolve a Slate range from DOM range: ${domRange}`\n      )\n    }\n\n    const anchor = ReactEditor.toSlatePoint(\n      editor,\n      [anchorNode, anchorOffset],\n      exactMatch\n    )\n    if (!anchor) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    const focus = isCollapsed\n      ? anchor\n      : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], exactMatch)\n    if (!focus) {\n      return null as T extends true ? Range | null : Range\n    }\n\n    return ({ anchor, focus } as unknown) as T extends true\n      ? Range | null\n      : Range\n  },\n\n  hasRange(editor: ReactEditor, range: Range): boolean {\n    const { anchor, focus } = range\n    return (\n      Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path)\n    )\n  },\n}\n","import { Editor, Path, Range, Text } from 'slate'\n\nimport { ReactEditor } from '../../'\nimport { DOMNode } from '../../utils/dom'\n\nexport type Diff = {\n  start: number\n  end: number\n  insertText: string\n  removeText: string\n}\n\nexport interface TextInsertion {\n  text: Diff\n  path: Path\n}\n\ntype TextRange = {\n  start: number\n  end: number\n}\n\n/**\n * Returns the number of characters that are the same at the beginning of the\n * String.\n *\n * @param prev  the previous text\n * @param next  the next text\n * @returns the offset of the start of the difference; null if there is no difference\n */\nfunction getDiffStart(prev: string, next: string): number | null {\n  const length = Math.min(prev.length, next.length)\n\n  for (let i = 0; i < length; i++) {\n    if (prev.charAt(i) !== next.charAt(i)) return i\n  }\n\n  if (prev.length !== next.length) return length\n  return null\n}\n\n/**\n * Returns the number of characters that are the same at the end of the String\n * up to `max`. Max prevents double-counting characters when there are\n * multiple duplicate characters around the diff area.\n *\n * @param prev  the previous text\n * @param next  the next text\n * @param max  the max length to test.\n * @returns number of characters that are the same at the end of the string\n */\nfunction getDiffEnd(prev: string, next: string, max: number): number | null {\n  const prevLength = prev.length\n  const nextLength = next.length\n  const length = Math.min(prevLength, nextLength, max)\n\n  for (let i = 0; i < length; i++) {\n    const prevChar = prev.charAt(prevLength - i - 1)\n    const nextChar = next.charAt(nextLength - i - 1)\n    if (prevChar !== nextChar) return i\n  }\n\n  if (prev.length !== next.length) return length\n  return null\n}\n\n/**\n * Takes two strings and returns an object representing two offsets. The\n * first, `start` represents the number of characters that are the same at\n * the front of the String. The `end` represents the number of characters\n * that are the same at the end of the String.\n *\n * Returns null if they are identical.\n *\n * @param prev  the previous text\n * @param next  the next text\n * @returns the difference text range; null if there are no differences.\n */\nfunction getDiffOffsets(prev: string, next: string): TextRange | null {\n  if (prev === next) return null\n  const start = getDiffStart(prev, next)\n  if (start === null) return null\n  const maxEnd = Math.min(prev.length - start, next.length - start)\n  const end = getDiffEnd(prev, next, maxEnd)!\n  if (end === null) return null\n  return { start, end }\n}\n\n/**\n * Takes a text string and returns a slice from the string at the given text range\n *\n * @param text  the text\n * @param offsets  the text range\n * @returns the text slice at text range\n */\nfunction sliceText(text: string, offsets: TextRange): string {\n  return text.slice(offsets.start, text.length - offsets.end)\n}\n\n/**\n * Takes two strings and returns a smart diff that can be used to describe the\n * change in a way that can be used as operations like inserting, removing or\n * replacing text.\n *\n * @param prev the previous text\n * @param next the next text\n * @returns the text difference\n */\nexport function diffText(prev?: string, next?: string): Diff | null {\n  if (prev === undefined || next === undefined) return null\n  const offsets = getDiffOffsets(prev, next)\n  if (offsets == null) return null\n  const insertText = sliceText(next, offsets)\n  const removeText = sliceText(prev, offsets)\n  return {\n    start: offsets.start,\n    end: prev.length - offsets.end,\n    insertText,\n    removeText,\n  }\n}\n\nexport function combineInsertedText(insertedText: TextInsertion[]): string {\n  return insertedText.reduce((acc, { text }) => `${acc}${text.insertText}`, '')\n}\n\nexport function getTextInsertion<T extends Editor>(\n  editor: T,\n  domNode: DOMNode\n): TextInsertion | undefined {\n  const node = ReactEditor.toSlateNode(editor, domNode)\n\n  if (!Text.isText(node)) {\n    return undefined\n  }\n\n  const prevText = node.text\n  let nextText = domNode.textContent!\n\n  // textContent will pad an extra \\n when the textContent ends with an \\n\n  if (nextText.endsWith('\\n')) {\n    nextText = nextText.slice(0, nextText.length - 1)\n  }\n\n  // If the text is no different, there is no diff.\n  if (nextText !== prevText) {\n    const textDiff = diffText(prevText, nextText)\n    if (textDiff !== null) {\n      const textPath = ReactEditor.findPath(editor, node)\n\n      return {\n        text: textDiff,\n        path: textPath,\n      }\n    }\n  }\n\n  return undefined\n}\n\nexport function normalizeTextInsertionRange(\n  editor: Editor,\n  range: Range | null,\n  { path, text }: TextInsertion\n) {\n  const insertionRange = {\n    anchor: { path, offset: text.start },\n    focus: { path, offset: text.end },\n  }\n\n  if (!range || !Range.isCollapsed(range)) {\n    return insertionRange\n  }\n\n  const { insertText, removeText } = text\n  const isSingleCharacterInsertion =\n    insertText.length === 1 || removeText.length === 1\n\n  /**\n   * This code handles edge cases that arise from text diffing when the\n   * inserted or removed character is a single character, and the character\n   * right before or after the anchor is the same as the one being inserted or\n   * removed.\n   *\n   * Take this example: hello|o\n   *\n   * If another `o` is inserted at the selection's anchor in the example above,\n   * it should be inserted at the anchor, but using text diffing, we actually\n   * detect that the character was inserted after the second `o`:\n   *\n   * helloo[o]|\n   *\n   * Instead, in these very specific edge cases, we assume that the character\n   * needs to be inserted after the anchor rather than where the diff was found:\n   *\n   * hello[o]|o\n   */\n  if (isSingleCharacterInsertion && Path.equals(range.anchor.path, path)) {\n    const [text] = Array.from(\n      Editor.nodes(editor, { at: range, match: Text.isText })\n    )\n\n    if (text) {\n      const [node] = text\n      const { anchor } = range\n      const characterBeforeAnchor = node.text[anchor.offset - 1]\n      const characterAfterAnchor = node.text[anchor.offset]\n\n      if (insertText.length === 1 && insertText === characterAfterAnchor) {\n        // Assume text should be inserted at the anchor\n        return range\n      }\n\n      if (removeText.length === 1 && removeText === characterBeforeAnchor) {\n        // Assume text should be removed right before the anchor\n        return {\n          anchor: { path, offset: anchor.offset - 1 },\n          focus: { path, offset: anchor.offset },\n        }\n      }\n    }\n  }\n\n  return insertionRange\n}\n","import { Editor, Node, Path, Range } from 'slate'\n\nimport { DOMNode } from '../../utils/dom'\nimport { ReactEditor } from '../..'\nimport { TextInsertion, getTextInsertion } from './diff-text'\n\ninterface MutationData {\n  addedNodes: DOMNode[]\n  removedNodes: DOMNode[]\n  insertedText: TextInsertion[]\n  characterDataMutations: MutationRecord[]\n}\n\ntype MutationDetection = (editor: Editor, mutationData: MutationData) => boolean\n\nexport function gatherMutationData(\n  editor: Editor,\n  mutations: MutationRecord[]\n): MutationData {\n  const addedNodes: DOMNode[] = []\n  const removedNodes: DOMNode[] = []\n  const insertedText: TextInsertion[] = []\n  const characterDataMutations: MutationRecord[] = []\n\n  mutations.forEach(mutation => {\n    switch (mutation.type) {\n      case 'childList': {\n        if (mutation.addedNodes.length) {\n          mutation.addedNodes.forEach(addedNode => {\n            addedNodes.push(addedNode)\n          })\n        }\n\n        mutation.removedNodes.forEach(removedNode => {\n          removedNodes.push(removedNode)\n        })\n\n        break\n      }\n      case 'characterData': {\n        characterDataMutations.push(mutation)\n\n        // Changes to text nodes should consider the parent element\n        const { parentNode } = mutation.target\n\n        if (!parentNode) {\n          return\n        }\n\n        const textInsertion = getTextInsertion(editor, parentNode)\n\n        if (!textInsertion) {\n          return\n        }\n\n        // If we've already detected a diff at that path, we can return early\n        if (\n          insertedText.some(({ path }) => Path.equals(path, textInsertion.path))\n        ) {\n          return\n        }\n\n        // Add the text diff to the array of detected text insertions that need to be reconciled\n        insertedText.push(textInsertion)\n      }\n    }\n  })\n\n  return { addedNodes, removedNodes, insertedText, characterDataMutations }\n}\n\n/**\n * In general, when a line break occurs, there will be more `addedNodes` than `removedNodes`.\n *\n * This isn't always the case however. In some cases, there will be more `removedNodes` than\n * `addedNodes`.\n *\n * To account for these edge cases, the most reliable strategy to detect line break mutations\n * is to check whether a new block was inserted of the same type as the current block.\n */\nexport const isLineBreak: MutationDetection = (editor, { addedNodes }) => {\n  const { selection } = editor\n  const parentNode = selection\n    ? Node.parent(editor, selection.anchor.path)\n    : null\n  const parentDOMNode = parentNode\n    ? ReactEditor.toDOMNode(editor, parentNode)\n    : null\n\n  if (!parentDOMNode) {\n    return false\n  }\n\n  return addedNodes.some(\n    addedNode =>\n      addedNode instanceof HTMLElement &&\n      addedNode.tagName === parentDOMNode?.tagName\n  )\n}\n\n/**\n * So long as we check for line break mutations before deletion mutations,\n * we can safely assume that a set of mutations was a deletion if there are\n * removed nodes.\n */\nexport const isDeletion: MutationDetection = (_, { removedNodes }) => {\n  return removedNodes.length > 0\n}\n\n/**\n * If the selection was expanded and there are removed nodes,\n * the contents of the selection need to be replaced with the diff\n */\nexport const isReplaceExpandedSelection: MutationDetection = (\n  { selection },\n  { removedNodes }\n) => {\n  return selection\n    ? Range.isExpanded(selection) && removedNodes.length > 0\n    : false\n}\n\n/**\n * Plain text insertion\n */\nexport const isTextInsertion: MutationDetection = (_, { insertedText }) => {\n  return insertedText.length > 0\n}\n\n/**\n * Edge case. Detect mutations that remove leaf nodes and also update character data\n */\nexport const isRemoveLeafNodes: MutationDetection = (\n  _,\n  { addedNodes, characterDataMutations, removedNodes }\n) => {\n  return (\n    removedNodes.length > 0 &&\n    addedNodes.length === 0 &&\n    characterDataMutations.length > 0\n  )\n}\n","import { ReactEditor } from '../..'\nimport { EDITOR_TO_RESTORE_DOM } from '../../utils/weak-maps'\n\nexport function restoreDOM(editor: ReactEditor) {\n  try {\n    const onRestoreDOM = EDITOR_TO_RESTORE_DOM.get(editor)\n    if (onRestoreDOM) {\n      onRestoreDOM()\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err)\n  }\n}\n","import { ReactEditor } from '../../plugin/react-editor'\nimport { Editor, Range, Transforms } from 'slate'\n\nimport { DOMNode } from '../../utils/dom'\n\nimport {\n  normalizeTextInsertionRange,\n  combineInsertedText,\n  TextInsertion,\n} from './diff-text'\nimport {\n  gatherMutationData,\n  isDeletion,\n  isLineBreak,\n  isRemoveLeafNodes,\n  isReplaceExpandedSelection,\n  isTextInsertion,\n} from './mutation-detection'\nimport { restoreDOM } from './restore-dom'\n\n// Replace with `const debug = console.log` to debug\nconst debug = (...message: any[]) => {}\n\n/**\n * Based loosely on:\n *\n * https://github.com/facebook/draft-js/blob/master/src/component/handlers/composition/DOMObserver.js\n * https://github.com/ProseMirror/prosemirror-view/blob/master/src/domobserver.js\n *\n * The input manager attempts to map observed mutations on the document to a\n * set of operations in order to reconcile Slate's internal value with the DOM.\n *\n * Mutations are processed synchronously as they come in. Only mutations that occur\n * during a user input loop are processed, as other mutations can occur within the\n * document that were not initiated by user input.\n *\n * The mutation reconciliation process attempts to match mutations to the following\n * patterns:\n *\n * - Text updates\n * - Deletions\n * - Line breaks\n *\n * @param editor\n */\n\nexport class AndroidInputManager {\n  constructor(private editor: ReactEditor) {\n    this.editor = editor\n  }\n\n  /**\n   * Handle MutationObserver flush\n   *\n   * @param mutations\n   */\n\n  flush = (mutations: MutationRecord[]) => {\n    debug('flush')\n\n    try {\n      this.reconcileMutations(mutations)\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(err)\n\n      // Failed to reconcile mutations, restore DOM to its previous state\n      restoreDOM(this.editor)\n    }\n  }\n\n  /**\n   * Reconcile a batch of mutations\n   *\n   * @param mutations\n   */\n\n  private reconcileMutations = (mutations: MutationRecord[]) => {\n    const mutationData = gatherMutationData(this.editor, mutations)\n    const { insertedText, removedNodes } = mutationData\n\n    debug('processMutations', mutations, mutationData)\n\n    if (isReplaceExpandedSelection(this.editor, mutationData)) {\n      const text = combineInsertedText(insertedText)\n      this.replaceExpandedSelection(text)\n    } else if (isLineBreak(this.editor, mutationData)) {\n      this.insertBreak()\n    } else if (isRemoveLeafNodes(this.editor, mutationData)) {\n      this.removeLeafNodes(removedNodes)\n    } else if (isDeletion(this.editor, mutationData)) {\n      this.deleteBackward()\n    } else if (isTextInsertion(this.editor, mutationData)) {\n      this.insertText(insertedText)\n    }\n  }\n\n  /**\n   * Apply text diff\n   */\n\n  private insertText = (insertedText: TextInsertion[]) => {\n    debug('insertText')\n\n    const { selection } = this.editor\n\n    // Insert the batched text diffs\n    insertedText.forEach(insertion => {\n      Transforms.insertText(this.editor, insertion.text.insertText, {\n        at: normalizeTextInsertionRange(this.editor, selection, insertion),\n      })\n    })\n  }\n\n  /**\n   * Handle line breaks\n   */\n\n  private insertBreak = () => {\n    debug('insertBreak')\n\n    const { selection } = this.editor\n\n    Editor.insertBreak(this.editor)\n\n    // To-do: Need a more granular solution to restoring only a specific portion\n    // of the document. Restoring the entire document is expensive.\n    restoreDOM(this.editor)\n\n    if (selection) {\n      // Compat: Move selection to the newly inserted block if it has not moved\n      setTimeout(() => {\n        if (\n          this.editor.selection &&\n          Range.equals(selection, this.editor.selection)\n        ) {\n          Transforms.move(this.editor)\n        }\n      }, 100)\n    }\n  }\n\n  /**\n   * Handle expanded selection being deleted or replaced by text\n   */\n\n  private replaceExpandedSelection = (text: string) => {\n    debug('replaceExpandedSelection')\n\n    // Delete expanded selection\n    Editor.deleteFragment(this.editor)\n\n    if (text.length) {\n      // Selection was replaced by text, insert the entire text diff\n      Editor.insertText(this.editor, text)\n    }\n\n    restoreDOM(this.editor)\n  }\n\n  /**\n   * Handle `backspace` that merges blocks\n   */\n\n  private deleteBackward = () => {\n    debug('deleteBackward')\n\n    Editor.deleteBackward(this.editor)\n    ReactEditor.focus(this.editor)\n\n    restoreDOM(this.editor)\n  }\n\n  /**\n   * Handle mutations that remove specific leaves\n   */\n  private removeLeafNodes = (nodes: DOMNode[]) => {\n    for (const node of nodes) {\n      const slateNode = ReactEditor.toSlateNode(this.editor, node)\n\n      if (slateNode) {\n        const path = ReactEditor.findPath(this.editor, slateNode)\n\n        Transforms.delete(this.editor, { at: path })\n        restoreDOM(this.editor)\n      }\n    }\n  }\n}\n\nexport default AndroidInputManager\n","import { RefObject, useEffect, useState } from 'react'\nimport { useIsomorphicLayoutEffect } from '../../hooks/use-isomorphic-layout-effect'\n\nexport function useMutationObserver(\n  node: RefObject<HTMLElement>,\n  callback: MutationCallback,\n  options: MutationObserverInit\n) {\n  const [mutationObserver] = useState(() => new MutationObserver(callback))\n\n  useIsomorphicLayoutEffect(() => {\n    // Disconnect mutation observer during render phase\n    mutationObserver.disconnect()\n  })\n\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined')\n    }\n\n    // Attach mutation observer after render phase has finished\n    mutationObserver.observe(node.current, options)\n\n    // Clean up after effect\n    return mutationObserver.disconnect.bind(mutationObserver)\n  })\n}\n","import { useCallback, useEffect, useRef } from 'react'\n\nimport { ReactEditor } from '../..'\nimport { useSlateStatic } from '../../hooks/use-slate-static'\n\nexport function useTrackUserInput() {\n  const editor = useSlateStatic()\n  const receivedUserInput = useRef<boolean>(false)\n  const animationFrameRef = useRef<number | null>(null)\n  const onUserInput = useCallback(() => {\n    if (receivedUserInput.current === false) {\n      const window = ReactEditor.getWindow(editor)\n\n      receivedUserInput.current = true\n\n      if (animationFrameRef.current) {\n        window.cancelAnimationFrame(animationFrameRef.current)\n      }\n\n      animationFrameRef.current = window.requestAnimationFrame(() => {\n        receivedUserInput.current = false\n        animationFrameRef.current = null\n      })\n    }\n  }, [])\n\n  useEffect(() => {\n    // Reset user input tracking on every render\n    if (receivedUserInput.current) {\n      receivedUserInput.current = false\n    }\n  })\n\n  return {\n    receivedUserInput,\n    onUserInput,\n  }\n}\n","import { RefObject, useCallback, useRef, useState } from 'react'\n\nimport { useSlateStatic } from '../../hooks/use-slate-static'\n\nimport { AndroidInputManager } from './android-input-manager'\nimport { useMutationObserver } from './use-mutation-observer'\nimport { useTrackUserInput } from './use-track-user-input'\n\nconst MUTATION_OBSERVER_CONFIG: MutationObserverInit = {\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true,\n}\n\nexport function useAndroidInputManager(node: RefObject<HTMLElement>) {\n  const editor = useSlateStatic()\n  const [inputManager] = useState(() => new AndroidInputManager(editor))\n  const { receivedUserInput, onUserInput } = useTrackUserInput()\n  const timeoutId = useRef<NodeJS.Timeout | null>(null)\n  const isReconciling = useRef(false)\n  const flush = useCallback((mutations: MutationRecord[]) => {\n    if (!receivedUserInput.current) {\n      return\n    }\n\n    isReconciling.current = true\n    inputManager.flush(mutations)\n\n    if (timeoutId.current) {\n      clearTimeout(timeoutId.current)\n    }\n\n    timeoutId.current = setTimeout(() => {\n      isReconciling.current = false\n      timeoutId.current = null\n    }, 250)\n  }, [])\n\n  useMutationObserver(node, flush, MUTATION_OBSERVER_CONFIG)\n\n  return {\n    isReconciling,\n    onUserInput,\n  }\n}\n","import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react'\nimport { Descendant, Editor, Element, Node, Range, Transforms } from 'slate'\nimport throttle from 'lodash/throttle'\nimport scrollIntoView from 'scroll-into-view-if-needed'\n\nimport { DefaultPlaceholder, ReactEditor } from '../..'\nimport { ReadOnlyContext } from '../../hooks/use-read-only'\nimport { useSlate } from '../../hooks/use-slate'\nimport { useIsomorphicLayoutEffect } from '../../hooks/use-isomorphic-layout-effect'\nimport { DecorateContext } from '../../hooks/use-decorate'\nimport {\n  DOMElement,\n  isDOMElement,\n  isDOMNode,\n  getDefaultView,\n  isPlainTextOnlyPaste,\n} from '../../utils/dom'\nimport {\n  EDITOR_TO_ELEMENT,\n  EDITOR_TO_RESTORE_DOM,\n  EDITOR_TO_WINDOW,\n  ELEMENT_TO_NODE,\n  IS_FOCUSED,\n  IS_READ_ONLY,\n  NODE_TO_ELEMENT,\n  PLACEHOLDER_SYMBOL,\n} from '../../utils/weak-maps'\nimport { EditableProps } from '../editable'\nimport useChildren from '../../hooks/use-children'\nimport {\n  defaultDecorate,\n  hasEditableTarget,\n  isEventHandled,\n  isDOMEventHandled,\n  isTargetInsideVoid,\n} from '../editable'\n\nimport { useAndroidInputManager } from './use-android-input-manager'\n\n/**\n * Editable.\n */\n\nexport const AndroidEditable = (props: EditableProps): JSX.Element => {\n  const {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    renderPlaceholder = props => <DefaultPlaceholder {...props} />,\n    style = {},\n    as: Component = 'div',\n    ...attributes\n  } = props\n  const editor = useSlate()\n  const ref = useRef<HTMLDivElement>(null)\n  const inputManager = useAndroidInputManager(ref)\n\n  // Update internal state on each render.\n  IS_READ_ONLY.set(editor, readOnly)\n\n  // Keep track of some state for the event handler logic.\n  const state = useMemo(\n    () => ({\n      isUpdatingSelection: false,\n      latestElement: null as DOMElement | null,\n    }),\n    []\n  )\n\n  const [contentKey, setContentKey] = useState(0)\n  const onRestoreDOM = useCallback(() => {\n    setContentKey(prev => prev + 1)\n  }, [contentKey])\n\n  // Whenever the editor updates...\n  useIsomorphicLayoutEffect(() => {\n    // Update element-related weak maps with the DOM element ref.\n    let window\n\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window)\n      EDITOR_TO_ELEMENT.set(editor, ref.current)\n      NODE_TO_ELEMENT.set(editor, ref.current)\n      ELEMENT_TO_NODE.set(ref.current, editor)\n      EDITOR_TO_RESTORE_DOM.set(editor, onRestoreDOM)\n    } else {\n      NODE_TO_ELEMENT.delete(editor)\n      EDITOR_TO_RESTORE_DOM.delete(editor)\n    }\n\n    try {\n      // Make sure the DOM selection state is in sync.\n      const { selection } = editor\n      const root = ReactEditor.findDocumentOrShadowRoot(editor)\n      const domSelection = root.getSelection()\n\n      if (!domSelection || !ReactEditor.isFocused(editor)) {\n        return\n      }\n\n      const hasDomSelection = domSelection.type !== 'None'\n\n      // If the DOM selection is properly unset, we're done.\n      if (!selection && !hasDomSelection) {\n        return\n      }\n\n      // verify that the dom selection is in the editor\n      const editorElement = EDITOR_TO_ELEMENT.get(editor)!\n      let hasDomSelectionInEditor = false\n      if (\n        editorElement.contains(domSelection.anchorNode) &&\n        editorElement.contains(domSelection.focusNode)\n      ) {\n        hasDomSelectionInEditor = true\n      }\n\n      // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n      if (hasDomSelection && hasDomSelectionInEditor && selection) {\n        const slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true,\n        })\n        if (slateRange && Range.equals(slateRange, selection)) {\n          return\n        }\n      }\n\n      // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false,\n        })\n        return\n      }\n\n      // Otherwise the DOM selection is out of sync, so update it.\n      const el = ReactEditor.toDOMNode(editor, editor)\n      state.isUpdatingSelection = true\n\n      const newDomRange = selection && ReactEditor.toDOMRange(editor, selection)\n\n      if (newDomRange) {\n        if (Range.isBackward(selection!)) {\n          domSelection.setBaseAndExtent(\n            newDomRange.endContainer,\n            newDomRange.endOffset,\n            newDomRange.startContainer,\n            newDomRange.startOffset\n          )\n        } else {\n          domSelection.setBaseAndExtent(\n            newDomRange.startContainer,\n            newDomRange.startOffset,\n            newDomRange.endContainer,\n            newDomRange.endOffset\n          )\n        }\n        const leafEl = newDomRange.startContainer.parentElement!\n        leafEl.getBoundingClientRect = newDomRange.getBoundingClientRect.bind(\n          newDomRange\n        )\n        scrollIntoView(leafEl, {\n          scrollMode: 'if-needed',\n          boundary: el,\n        })\n        // @ts-ignore\n        delete leafEl.getBoundingClientRect\n      } else {\n        domSelection.removeAllRanges()\n      }\n\n      setTimeout(() => {\n        state.isUpdatingSelection = false\n      })\n    } catch {\n      // Failed to update selection, likely due to reconciliation error\n      state.isUpdatingSelection = false\n    }\n  })\n\n  // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus()\n    }\n  }, [autoFocus])\n\n  // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n  const onDOMBeforeInput = useCallback(\n    (event: InputEvent) => {\n      if (\n        !readOnly &&\n        hasEditableTarget(editor, event.target) &&\n        !isDOMEventHandled(event, propsOnDOMBeforeInput)\n      ) {\n        inputManager.onUserInput()\n      }\n    },\n    [readOnly, propsOnDOMBeforeInput]\n  )\n\n  // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  useIsomorphicLayoutEffect(() => {\n    const node = ref.current\n\n    // @ts-ignore The `beforeinput` event isn't recognized.\n    node?.addEventListener('beforeinput', onDOMBeforeInput)\n\n    // @ts-ignore The `beforeinput` event isn't recognized.\n    return () => node?.removeEventListener('beforeinput', onDOMBeforeInput)\n  }, [contentKey, propsOnDOMBeforeInput])\n\n  // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n  const onDOMSelectionChange = useCallback(\n    throttle(() => {\n      try {\n        if (\n          !readOnly &&\n          !state.isUpdatingSelection &&\n          !inputManager.isReconciling.current\n        ) {\n          const root = ReactEditor.findDocumentOrShadowRoot(editor)\n          const { activeElement } = root\n          const el = ReactEditor.toDOMNode(editor, editor)\n          const domSelection = root.getSelection()\n\n          if (activeElement === el) {\n            state.latestElement = activeElement\n            IS_FOCUSED.set(editor, true)\n          } else {\n            IS_FOCUSED.delete(editor)\n          }\n\n          if (!domSelection) {\n            return Transforms.deselect(editor)\n          }\n\n          const { anchorNode, focusNode } = domSelection\n\n          const anchorNodeSelectable =\n            hasEditableTarget(editor, anchorNode) ||\n            isTargetInsideVoid(editor, anchorNode)\n\n          const focusNodeSelectable =\n            hasEditableTarget(editor, focusNode) ||\n            isTargetInsideVoid(editor, focusNode)\n\n          if (anchorNodeSelectable && focusNodeSelectable) {\n            const range = ReactEditor.toSlateRange(editor, domSelection, {\n              exactMatch: false,\n            })\n            Transforms.select(editor, range)\n          } else {\n            Transforms.deselect(editor)\n          }\n        }\n      } catch {\n        // Failed to update selection, likely due to reconciliation error\n      }\n    }, 100),\n    [readOnly]\n  )\n\n  // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n  useIsomorphicLayoutEffect(() => {\n    const window = ReactEditor.getWindow(editor)\n    window.document.addEventListener('selectionchange', onDOMSelectionChange)\n\n    return () => {\n      window.document.removeEventListener(\n        'selectionchange',\n        onDOMSelectionChange\n      )\n    }\n  })\n\n  const decorations = decorate([editor, []])\n\n  if (\n    placeholder &&\n    editor.children.length === 1 &&\n    Array.from(Node.texts(editor)).length === 1 &&\n    Node.string(editor) === ''\n  ) {\n    const start = Editor.start(editor, [])\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start,\n    })\n  }\n\n  return (\n    <ReadOnlyContext.Provider value={readOnly}>\n      <DecorateContext.Provider value={decorate}>\n        <Component\n          key={contentKey}\n          role={readOnly ? undefined : 'textbox'}\n          {...attributes}\n          spellCheck={attributes.spellCheck}\n          autoCorrect={attributes.autoCorrect}\n          autoCapitalize={attributes.autoCapitalize}\n          data-slate-editor\n          data-slate-node=\"value\"\n          contentEditable={readOnly ? undefined : true}\n          suppressContentEditableWarning\n          ref={ref}\n          style={{\n            // Allow positioning relative to the editable element.\n            position: 'relative',\n            // Prevent the default outline styles.\n            outline: 'none',\n            // Preserve adjacent whitespace and new lines.\n            whiteSpace: 'pre-wrap',\n            // Allow words to break if they are too long.\n            wordWrap: 'break-word',\n            // Allow for passed-in styles to override anything.\n            ...style,\n          }}\n          onCopy={useCallback(\n            (event: React.ClipboardEvent<HTMLDivElement>) => {\n              if (\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCopy)\n              ) {\n                event.preventDefault()\n                ReactEditor.setFragmentData(editor, event.clipboardData)\n              }\n            },\n            [attributes.onCopy]\n          )}\n          onCut={useCallback(\n            (event: React.ClipboardEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onCut)\n              ) {\n                event.preventDefault()\n                ReactEditor.setFragmentData(editor, event.clipboardData)\n                const { selection } = editor\n\n                if (selection) {\n                  if (Range.isExpanded(selection)) {\n                    Editor.deleteFragment(editor)\n                  } else {\n                    const node = Node.parent(editor, selection.anchor.path)\n                    if (Editor.isVoid(editor, node)) {\n                      Transforms.delete(editor)\n                    }\n                  }\n                }\n              }\n            },\n            [readOnly, attributes.onCut]\n          )}\n          onFocus={useCallback(\n            (event: React.FocusEvent<HTMLDivElement>) => {\n              if (\n                !readOnly &&\n                !state.isUpdatingSelection &&\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onFocus)\n              ) {\n                const root = ReactEditor.findDocumentOrShadowRoot(editor)\n                state.latestElement = root.activeElement\n\n                IS_FOCUSED.set(editor, true)\n              }\n            },\n            [readOnly, attributes.onFocus]\n          )}\n          onBlur={useCallback(\n            (event: React.FocusEvent<HTMLDivElement>) => {\n              if (\n                readOnly ||\n                state.isUpdatingSelection ||\n                !hasEditableTarget(editor, event.target) ||\n                isEventHandled(event, attributes.onBlur)\n              ) {\n                return\n              }\n\n              // COMPAT: If the current `activeElement` is still the previous\n              // one, this is due to the window being blurred when the tab\n              // itself becomes unfocused, so we want to abort early to allow to\n              // editor to stay focused when the tab becomes focused again.\n              const root = ReactEditor.findDocumentOrShadowRoot(editor)\n              if (state.latestElement === root.activeElement) {\n                return\n              }\n\n              const { relatedTarget } = event\n              const el = ReactEditor.toDOMNode(editor, editor)\n\n              // COMPAT: The event should be ignored if the focus is returning\n              // to the editor from an embedded editable element (eg. an <input>\n              // element inside a void node).\n              if (relatedTarget === el) {\n                return\n              }\n\n              // COMPAT: The event should be ignored if the focus is moving from\n              // the editor to inside a void node's spacer element.\n              if (\n                isDOMElement(relatedTarget) &&\n                relatedTarget.hasAttribute('data-slate-spacer')\n              ) {\n                return\n              }\n\n              // COMPAT: The event should be ignored if the focus is moving to a\n              // non- editable section of an element that isn't a void node (eg.\n              // a list item of the check list example).\n              if (\n                relatedTarget != null &&\n                isDOMNode(relatedTarget) &&\n                ReactEditor.hasDOMNode(editor, relatedTarget)\n              ) {\n                const node = ReactEditor.toSlateNode(editor, relatedTarget)\n\n                if (Element.isElement(node) && !editor.isVoid(node)) {\n                  return\n                }\n              }\n\n              IS_FOCUSED.delete(editor)\n            },\n            [readOnly, attributes.onBlur]\n          )}\n          onPaste={useCallback(\n            (event: React.ClipboardEvent<HTMLDivElement>) => {\n              // This unfortunately needs to be handled with paste events instead.\n              if (\n                hasEditableTarget(editor, event.target) &&\n                !isEventHandled(event, attributes.onPaste) &&\n                !readOnly\n              ) {\n                event.preventDefault()\n                ReactEditor.insertData(editor, event.clipboardData)\n              }\n            },\n            [readOnly, attributes.onPaste]\n          )}\n        >\n          {useChildren({\n            decorations,\n            node: editor,\n            renderElement,\n            renderPlaceholder,\n            renderLeaf,\n            selection: editor.selection,\n          })}\n        </Component>\n      </DecorateContext.Provider>\n    </ReadOnlyContext.Provider>\n  )\n}\n","import { createContext, useContext } from 'react'\n\n/**\n * A React context for sharing the `focused` state of the editor.\n */\n\nexport const FocusedContext = createContext(false)\n\n/**\n * Get the current `focused` state of the editor.\n */\n\nexport const useFocused = (): boolean => {\n  return useContext(FocusedContext)\n}\n","import React, { useMemo, useState, useCallback, useEffect } from 'react'\nimport { Editor, Node, Element, Descendant } from 'slate'\nimport invariant from 'tiny-invariant'\n\nimport { ReactEditor } from '../plugin/react-editor'\nimport { FocusedContext } from '../hooks/use-focused'\nimport { EditorContext } from '../hooks/use-slate-static'\nimport { SlateContext } from '../hooks/use-slate'\nimport { EDITOR_TO_ON_CHANGE } from '../utils/weak-maps'\nimport { useIsomorphicLayoutEffect } from '../hooks/use-isomorphic-layout-effect'\n\n/**\n * A wrapper around the provider to handle `onChange` events, because the editor\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\n */\n\nexport const Slate = (props: {\n  editor: ReactEditor\n  value: Descendant[]\n  children: React.ReactNode\n  onChange: (value: Descendant[]) => void\n}) => {\n  const { editor, children, onChange, value, ...rest } = props\n  const [key, setKey] = useState(0)\n  const context: [ReactEditor] = useMemo(() => {\n    invariant(\n      Node.isNodeList(value),\n      `[Slate] value is invalid! Expected a list of elements but got: ${JSON.stringify(\n        value\n      )}`\n    )\n    invariant(\n      Editor.isEditor(editor),\n      `[Slate] editor is invalid! you passed: ${JSON.stringify(editor)}`\n    )\n\n    editor.children = value\n    Object.assign(editor, rest)\n    return [editor]\n  }, [key, value, ...Object.values(rest)])\n\n  const onContextChange = useCallback(() => {\n    onChange(editor.children)\n    setKey(key + 1)\n  }, [key, onChange])\n\n  EDITOR_TO_ON_CHANGE.set(editor, onContextChange)\n\n  useEffect(() => {\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {})\n    }\n  }, [])\n\n  const [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor))\n\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor))\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    const fn = () => setIsFocused(ReactEditor.isFocused(editor))\n    document.addEventListener('focus', fn, true)\n    return () => document.removeEventListener('focus', fn, true)\n  }, [])\n\n  useIsomorphicLayoutEffect(() => {\n    const fn = () => setIsFocused(ReactEditor.isFocused(editor))\n    document.addEventListener('blur', fn, true)\n    return () => document.removeEventListener('blur', fn, true)\n  }, [])\n\n  return (\n    <SlateContext.Provider value={context}>\n      <EditorContext.Provider value={editor}>\n        <FocusedContext.Provider value={isFocused}>\n          {children}\n        </FocusedContext.Provider>\n      </EditorContext.Provider>\n    </SlateContext.Provider>\n  )\n}\n","import { useContext } from 'react'\n\nimport { EditorContext } from './use-slate-static'\n\n/**\n * Get the current editor object from the React context.\n * @deprecated Use useSlateStatic instead.\n */\n\nexport const useEditor = () => {\n  const editor = useContext(EditorContext)\n\n  if (!editor) {\n    throw new Error(\n      `The \\`useEditor\\` hook must be used inside the <Slate> component's context.`\n    )\n  }\n\n  return editor\n}\n","/**\n * Utilities for single-line deletion\n */\n\nimport { Range, Editor } from 'slate'\nimport { ReactEditor } from '..'\n\nconst doRectsIntersect = (rect: DOMRect, compareRect: DOMRect) => {\n  const middle = (compareRect.top + compareRect.bottom) / 2\n\n  return rect.top <= middle && rect.bottom >= middle\n}\n\nconst areRangesSameLine = (\n  editor: ReactEditor,\n  range1: Range,\n  range2: Range\n) => {\n  const rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect()\n  const rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect()\n\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1)\n}\n\n/**\n * A helper utility that returns the end portion of a `Range`\n * which is located on a single line.\n *\n * @param {Editor} editor The editor object to compare against\n * @param {Range} parentRange The parent range to compare against\n * @returns {Range} A valid portion of the parentRange which is one a single line\n */\nexport const findCurrentLineRange = (\n  editor: ReactEditor,\n  parentRange: Range\n): Range => {\n  const parentRangeBoundary = Editor.range(editor, Range.end(parentRange))\n  const positions = Array.from(Editor.positions(editor, { at: parentRange }))\n\n  let left = 0\n  let right = positions.length\n  let middle = Math.floor(right / 2)\n\n  if (\n    areRangesSameLine(\n      editor,\n      Editor.range(editor, positions[left]),\n      parentRangeBoundary\n    )\n  ) {\n    return Editor.range(editor, positions[left], parentRangeBoundary)\n  }\n\n  if (positions.length < 2) {\n    return Editor.range(\n      editor,\n      positions[positions.length - 1],\n      parentRangeBoundary\n    )\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (\n      areRangesSameLine(\n        editor,\n        Editor.range(editor, positions[middle]),\n        parentRangeBoundary\n      )\n    ) {\n      right = middle\n    } else {\n      left = middle\n    }\n\n    middle = Math.floor((left + right) / 2)\n  }\n\n  return Editor.range(editor, positions[right], parentRangeBoundary)\n}\n","import ReactDOM from 'react-dom'\nimport { Editor, Node, Path, Operation, Transforms, Range } from 'slate'\n\nimport { ReactEditor } from './react-editor'\nimport { Key } from '../utils/key'\nimport { EDITOR_TO_ON_CHANGE, NODE_TO_KEY } from '../utils/weak-maps'\nimport { isDOMText, getPlainText } from '../utils/dom'\nimport { findCurrentLineRange } from '../utils/lines'\n\n/**\n * `withReact` adds React and DOM specific behaviors to the editor.\n *\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\n * this plugin.\n *\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\n */\n\nexport const withReact = <T extends Editor>(editor: T) => {\n  const e = editor as T & ReactEditor\n  const { apply, onChange, deleteBackward } = e\n\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit)\n    }\n\n    if (editor.selection && Range.isCollapsed(editor.selection)) {\n      const parentBlockEntry = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: editor.selection,\n      })\n\n      if (parentBlockEntry) {\n        const [, parentBlockPath] = parentBlockEntry\n        const parentElementRange = Editor.range(\n          editor,\n          parentBlockPath,\n          editor.selection.anchor\n        )\n\n        const currentLineRange = findCurrentLineRange(e, parentElementRange)\n\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(editor, { at: currentLineRange })\n        }\n      }\n    }\n  }\n\n  e.apply = (op: Operation) => {\n    const matches: [Path, Key][] = []\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node': {\n        for (const [node, path] of Editor.levels(e, { at: op.path })) {\n          const key = ReactEditor.findKey(e, node)\n          matches.push([path, key])\n        }\n\n        break\n      }\n\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node': {\n        for (const [node, path] of Editor.levels(e, {\n          at: Path.parent(op.path),\n        })) {\n          const key = ReactEditor.findKey(e, node)\n          matches.push([path, key])\n        }\n\n        break\n      }\n\n      case 'move_node': {\n        for (const [node, path] of Editor.levels(e, {\n          at: Path.common(Path.parent(op.path), Path.parent(op.newPath)),\n        })) {\n          const key = ReactEditor.findKey(e, node)\n          matches.push([path, key])\n        }\n        break\n      }\n    }\n\n    apply(op)\n\n    for (const [path, key] of matches) {\n      const [node] = Editor.node(e, path)\n      NODE_TO_KEY.set(node, key)\n    }\n  }\n\n  e.setFragmentData = (data: DataTransfer) => {\n    const { selection } = e\n\n    if (!selection) {\n      return\n    }\n\n    const [start, end] = Range.edges(selection)\n    const startVoid = Editor.void(e, { at: start.path })\n    const endVoid = Editor.void(e, { at: end.path })\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return\n    }\n\n    // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n    const domRange = ReactEditor.toDOMRange(e, selection)\n    let contents = domRange.cloneContents()\n    let attach = contents.childNodes[0] as HTMLElement\n\n    // Make sure attach is non-empty, since empty nodes will not get copied.\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node as HTMLElement\n      }\n    })\n\n    // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n    if (endVoid) {\n      const [voidNode] = endVoid\n      const r = domRange.cloneRange()\n      const domNode = ReactEditor.toDOMNode(e, voidNode)\n      r.setEndAfter(domNode)\n      contents = r.cloneContents()\n    }\n\n    // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]')! as HTMLElement\n    }\n\n    // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(\n      zw => {\n        const isNewline = zw.getAttribute('data-slate-zero-width') === 'n'\n        zw.textContent = isNewline ? '\\n' : ''\n      }\n    )\n\n    // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n    if (isDOMText(attach)) {\n      const span = document.createElement('span')\n      // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n      span.style.whiteSpace = 'pre'\n      span.appendChild(attach)\n      contents.appendChild(span)\n      attach = span\n    }\n\n    const fragment = e.getFragment()\n    const string = JSON.stringify(fragment)\n    const encoded = window.btoa(encodeURIComponent(string))\n    attach.setAttribute('data-slate-fragment', encoded)\n    data.setData('application/x-slate-fragment', encoded)\n\n    // Add the content to a <div> so that we can get its inner HTML.\n    const div = document.createElement('div')\n    div.appendChild(contents)\n    div.setAttribute('hidden', 'true')\n    document.body.appendChild(div)\n    data.setData('text/html', div.innerHTML)\n    data.setData('text/plain', getPlainText(div))\n    document.body.removeChild(div)\n  }\n\n  e.insertData = (data: DataTransfer) => {\n    const fragment = data.getData('application/x-slate-fragment')\n\n    if (fragment) {\n      const decoded = decodeURIComponent(window.atob(fragment))\n      const parsed = JSON.parse(decoded) as Node[]\n      e.insertFragment(parsed)\n      return\n    }\n\n    const text = data.getData('text/plain')\n\n    if (text) {\n      const lines = text.split(/\\r\\n|\\r|\\n/)\n      let split = false\n\n      for (const line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, { always: true })\n        }\n\n        e.insertText(line)\n        split = true\n      }\n    }\n  }\n\n  e.onChange = () => {\n    // COMPAT: React doesn't batch `setState` hook calls, which means that the\n    // children and selection can get out of sync for one render pass. So we\n    // have to use this unstable API to ensure it batches them. (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    ReactDOM.unstable_batchedUpdates(() => {\n      const onContextChange = EDITOR_TO_ON_CHANGE.get(e)\n\n      if (onContextChange) {\n        onContextChange()\n      }\n\n      onChange()\n    })\n  }\n\n  return e\n}\n","import createCache from '@emotion/cache';\nimport { serializeStyles } from '@emotion/serialize';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (process.env.NODE_ENV !== 'production' && this.ctr !== 0) {\n      throw new Error('speedy must be changed before any rules are inserted');\n    }\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nexport default createEmotion;\n","import '@emotion/cache';\nimport '@emotion/serialize';\nimport '@emotion/utils';\nimport createEmotion from '../create-instance/dist/emotion-css-create-instance.esm.js';\n\nvar _createEmotion = createEmotion({\n  key: 'css'\n}),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    cache = _createEmotion.cache;\n\nexport { cache, css, cx, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet };\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n}\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport default isPlainObject;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/*! https://mths.be/esrever v0.2.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar regexSymbolWithCombiningMarks = /([\\0-\\u02FF\\u0370-\\u1AAF\\u1B00-\\u1DBF\\u1E00-\\u20CF\\u2100-\\uD7FF\\uE000-\\uFE1F\\uFE30-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])([\\u0300-\\u036F\\u1AB0-\\u1AFF\\u1DC0-\\u1DFF\\u20D0-\\u20FF\\uFE20-\\uFE2F]+)/g;\n\tvar regexSurrogatePair = /([\\uD800-\\uDBFF])([\\uDC00-\\uDFFF])/g;\n\n\tvar reverse = function(string) {\n\t\t// Step 1: deal with combining marks and astral symbols (surrogate pairs)\n\t\tstring = string\n\t\t\t// Swap symbols with their combining marks so the combining marks go first\n\t\t\t.replace(regexSymbolWithCombiningMarks, function($0, $1, $2) {\n\t\t\t\t// Reverse the combining marks so they will end up in the same order\n\t\t\t\t// later on (after another round of reversing)\n\t\t\t\treturn reverse($2) + $1;\n\t\t\t})\n\t\t\t// Swap high and low surrogates so the low surrogates go first\n\t\t\t.replace(regexSurrogatePair, '$2$1');\n\t\t// Step 2: reverse the code units in the string\n\t\tvar result = '';\n\t\tvar index = string.length;\n\t\twhile (index--) {\n\t\t\tresult += string.charAt(index);\n\t\t}\n\t\treturn result;\n\t};\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar esrever = {\n\t\t'version': '0.2.0',\n\t\t'reverse': reverse\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn esrever;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = esrever;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in esrever) {\n\t\t\t\tesrever.hasOwnProperty(key) && (freeExports[key] = esrever[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.esrever = esrever;\n\t}\n\n}(this));\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n"]},"banner":"For license information please see 2.6eb32afc.chunk.js.LICENSE.txt","extractedComments":"/*!\n * escape-html\n * Copyright(c) 2012-2013 TJ Holowaychuk\n * Copyright(c) 2015 Andreas Lubbe\n * Copyright(c) 2015 Tiancheng \"Timothy\" Gu\n * MIT Licensed\n */\n\n/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n/*! https://mths.be/esrever v0.2.0 by @mathias */\n","commentsFilename":"static/js/2.6eb32afc.chunk.js.LICENSE.txt"}
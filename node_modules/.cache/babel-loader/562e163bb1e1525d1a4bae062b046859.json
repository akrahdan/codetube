{"ast":null,"code":"import{useEffect,useRef}from'react';import{useHistory}from'react-router-dom';export var usePrompt=function usePrompt(when){var message=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'Are you sure you want to quit without saving your changes?';var history=useHistory();var self=useRef(null);var onWindowOrTabClose=function onWindowOrTabClose(event){if(!when){return;}if(typeof event=='undefined'){event=window.event;}if(event){event.returnValue=message;}return message;};useEffect(function(){if(when){self.current=history.block(message);}else{self.current=null;}window.addEventListener('beforeunload',onWindowOrTabClose);return function(){if(self.current){self.current();self.current=null;}window.removeEventListener('beforeunload',onWindowOrTabClose);};},[message,when]);};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/userPrompt.ts"],"names":["useEffect","useRef","useHistory","usePrompt","when","message","history","self","onWindowOrTabClose","event","window","returnValue","current","block","addEventListener","removeEventListener"],"mappings":"AAAA,OAASA,SAAT,CAAoBC,MAApB,KAAkC,OAAlC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,IAAD,CAAmG,IAAnFC,CAAAA,OAAmF,2DAAjE,4DAAiE,CAC1H,GAAMC,CAAAA,OAAO,CAAGJ,UAAU,EAA1B,CAEA,GAAMK,CAAAA,IAAI,CAAGN,MAAM,CAAC,IAAD,CAAnB,CAEA,GAAMO,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,KAAK,CAAI,CAClC,GAAI,CAACL,IAAL,CAAW,CACT,OACD,CAED,GAAI,MAAOK,CAAAA,KAAP,EAAgB,WAApB,CAAiC,CAC/BA,KAAK,CAAGC,MAAM,CAACD,KAAf,CACD,CAED,GAAIA,KAAJ,CAAW,CACTA,KAAK,CAACE,WAAN,CAAoBN,OAApB,CACD,CAED,MAAOA,CAAAA,OAAP,CACD,CAdD,CAgBAL,SAAS,CAAC,UAAM,CACd,GAAII,IAAJ,CAAU,CACRG,IAAI,CAACK,OAAL,CAAeN,OAAO,CAACO,KAAR,CAAcR,OAAd,CAAf,CACD,CAFD,IAEO,CACLE,IAAI,CAACK,OAAL,CAAe,IAAf,CACD,CAEDF,MAAM,CAACI,gBAAP,CAAwB,cAAxB,CAAwCN,kBAAxC,EAEA,MAAO,WAAM,CACX,GAAID,IAAI,CAACK,OAAT,CAAkB,CAChBL,IAAI,CAACK,OAAL,GACAL,IAAI,CAACK,OAAL,CAAe,IAAf,CACD,CAEDF,MAAM,CAACK,mBAAP,CAA2B,cAA3B,CAA2CP,kBAA3C,EACD,CAPD,CAQD,CAjBQ,CAiBN,CAACH,OAAD,CAAUD,IAAV,CAjBM,CAAT,CAkBD,CAvCM","sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport const usePrompt = (when: boolean, message: string = 'Are you sure you want to quit without saving your changes?') => {\n  const history = useHistory();\n\n  const self = useRef(null);\n\n  const onWindowOrTabClose = event => {\n    if (!when) {\n      return;\n    }\n\n    if (typeof event == 'undefined') {\n      event = window.event;\n    }\n\n    if (event) {\n      event.returnValue = message;\n    }\n\n    return message;\n  };\n\n  useEffect(() => {\n    if (when) {\n      self.current = history.block(message as any);\n    } else {\n      self.current = null;\n    }\n\n    window.addEventListener('beforeunload', onWindowOrTabClose);\n\n    return () => {\n      if (self.current) {\n        self.current();\n        self.current = null;\n      }\n\n      window.removeEventListener('beforeunload', onWindowOrTabClose);\n    }\n  }, [message, when]);\n};"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import MousetrapClass from'mousetrap';// import { analytics } from '../analytics'\nvar mousetrapInstance;function initMousetrap(element){if(element)mousetrapInstance=new MousetrapClass(document);else mousetrapInstance=new window.Mousetrap();mousetrapInstance.stopCallback=function(e,element,combo){return element.tagName=='LI'||element.tagName=='INPUT'||element.tagName=='SELECT'||element.tagName=='TEXTAREA'||element.getAttribute('role')=='slider'||element.id=='playback-speed-option'||element.contentEditable&&element.contentEditable=='true';};}var defaultShortcutKeys={togglePlayPause:{sequence:['space','k','K'],display:'k, spacebar',description:'play/pause'},toggleFullscreen:{sequence:['f','F'],display:'f',description:'full screen'},toggleMute:{sequence:['m','M'],display:'m',description:'mute on/off'},decreaseSpeed:{sequence:['-'],display:'-',description:'decrease playback speed'},increaseSpeed:{sequence:['=','plus'],display:'+',description:'increase playback speed'},previousClip:{sequence:['<'],display:'< (shift+,)',description:'previous clip'},nextClip:{sequence:['>'],display:'> (shift+.)',description:'next clip'},fastRewind:{sequence:['left'],display:'←',description:'back 10 seconds'},fastForward:{sequence:['right'],display:'→',description:'forward 10 seconds'},volumeUp:{sequence:['up'],display:'↑',description:'volume up'},volumeDown:{sequence:['down'],display:'↓',description:'volume down'},closeMenu:{sequence:['esc'],display:'esc',description:'close menu / exit full screen'},toggleKeyboardShortcutsModal:{sequence:['shift+/','h','H'],display:'h, ? (shift+/)',description:'toggle keyboard shortcuts list'},toggleClosedCaptioning:{sequence:['c','C'],display:'c',description:'toggle closed captions'}};var SPACE_BAR=32;var LEFT_KEY=37;var RIGHT_KEY=39;var keysNotToTrack=[SPACE_BAR,LEFT_KEY,RIGHT_KEY];var getKey=function getKey(keyName){return function(shortcutName){var shortcut=defaultShortcutKeys[shortcutName];return shortcut&&shortcut[keyName];};};var getShortcutKeySequence=getKey('sequence');var getShortcutKeySequenceDisplay=getKey('display');function registerShortcutKeyHandler(shortcutName,handler,handleGetClip){var mousetrap=arguments.length>3&&arguments[3]!==undefined?arguments[3]:mousetrapInstance;if(!shortcutName)throw new Error('shortcutName is required');if(typeof handler!=='function')throw new Error(\"shortcut \".concat(shortcutName,\": handler is required and must be a function\"));var sequence=getShortcutKeySequence(shortcutName);if(!sequence)throw new Error(\"no key sequence found for: \".concat(sequence));mousetrap&&mousetrap.bind(sequence,function(e){handler();var _handleGetClip=handleGetClip(),clipId=_handleGetClip.clipId;var isKeyToTrack=!keysNotToTrack.some(function(i){return i===e.which;});if(isKeyToTrack){//   analytics.trackGenericClick('Keyboard Shortcut Pressed', {\n//     source: 'eplayer',\n//     keyPressed: e.code,\n//     keyPressedAction: shortcutName,\n//     clipId,\n//   })\n}return false;});}function unregisterShortcutKeyHandler(shortcutName){var mousetrap=arguments.length>1&&arguments[1]!==undefined?arguments[1]:mousetrapInstance;var sequence=getShortcutKeySequence(shortcutName);mousetrap&&mousetrap.unbind(sequence);}var resetMoustrap=function resetMoustrap(){var mousetrap=arguments.length>0&&arguments[0]!==undefined?arguments[0]:mousetrapInstance;return mousetrap.reset();};export{initMousetrap,defaultShortcutKeys,getShortcutKeySequence,getShortcutKeySequenceDisplay,registerShortcutKeyHandler,unregisterShortcutKeyHandler,mousetrapInstance,resetMoustrap};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/keyboard/shortcut-keys.js"],"names":["MousetrapClass","mousetrapInstance","initMousetrap","element","document","window","Mousetrap","stopCallback","e","combo","tagName","getAttribute","id","contentEditable","defaultShortcutKeys","togglePlayPause","sequence","display","description","toggleFullscreen","toggleMute","decreaseSpeed","increaseSpeed","previousClip","nextClip","fastRewind","fastForward","volumeUp","volumeDown","closeMenu","toggleKeyboardShortcutsModal","toggleClosedCaptioning","SPACE_BAR","LEFT_KEY","RIGHT_KEY","keysNotToTrack","getKey","keyName","shortcutName","shortcut","getShortcutKeySequence","getShortcutKeySequenceDisplay","registerShortcutKeyHandler","handler","handleGetClip","mousetrap","Error","bind","clipId","isKeyToTrack","some","i","which","unregisterShortcutKeyHandler","unbind","resetMoustrap","reset"],"mappings":"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","sourcesContent":["import MousetrapClass from 'mousetrap'\n// import { analytics } from '../analytics'\n\nlet mousetrapInstance\n\nfunction initMousetrap(element) {\n  if (element) mousetrapInstance = new MousetrapClass(document)\n  else mousetrapInstance = new window.Mousetrap()\n\n  mousetrapInstance.stopCallback = function (e, element, combo) {\n    return (\n      element.tagName == 'LI' ||\n      element.tagName == 'INPUT' ||\n      element.tagName == 'SELECT' ||\n      element.tagName == 'TEXTAREA' ||\n      element.getAttribute('role') == 'slider' ||\n      element.id == 'playback-speed-option' ||\n      (element.contentEditable && element.contentEditable == 'true')\n    )\n  }\n}\n\nconst defaultShortcutKeys = {\n  togglePlayPause: {\n    sequence: ['space', 'k', 'K'],\n    display: 'k, spacebar',\n    description: 'play/pause',\n  },\n  toggleFullscreen: {\n    sequence: ['f', 'F'],\n    display: 'f',\n    description: 'full screen',\n  },\n  toggleMute: {\n    sequence: ['m', 'M'],\n    display: 'm',\n    description: 'mute on/off',\n  },\n  decreaseSpeed: {\n    sequence: ['-'],\n    display: '-',\n    description: 'decrease playback speed',\n  },\n  increaseSpeed: {\n    sequence: ['=', 'plus'],\n    display: '+',\n    description: 'increase playback speed',\n  },\n  previousClip: {\n    sequence: ['<'],\n    display: '< (shift+,)',\n    description: 'previous clip',\n  },\n  nextClip: {\n    sequence: ['>'],\n    display: '> (shift+.)',\n    description: 'next clip',\n  },\n  fastRewind: {\n    sequence: ['left'],\n    display: '←',\n    description: 'back 10 seconds',\n  },\n  fastForward: {\n    sequence: ['right'],\n    display: '→',\n    description: 'forward 10 seconds',\n  },\n  volumeUp: {\n    sequence: ['up'],\n    display: '↑',\n    description: 'volume up',\n  },\n  volumeDown: {\n    sequence: ['down'],\n    display: '↓',\n    description: 'volume down',\n  },\n  closeMenu: {\n    sequence: ['esc'],\n    display: 'esc',\n    description: 'close menu / exit full screen',\n  },\n  toggleKeyboardShortcutsModal: {\n    sequence: ['shift+/', 'h', 'H'],\n    display: 'h, ? (shift+/)',\n    description: 'toggle keyboard shortcuts list',\n  },\n  toggleClosedCaptioning: {\n    sequence: ['c', 'C'],\n    display: 'c',\n    description: 'toggle closed captions',\n  },\n}\n\nconst SPACE_BAR = 32\nconst LEFT_KEY = 37\nconst RIGHT_KEY = 39\n\nconst keysNotToTrack = [SPACE_BAR, LEFT_KEY, RIGHT_KEY]\n\nconst getKey = (keyName) => (shortcutName) => {\n  const shortcut = defaultShortcutKeys[shortcutName]\n  return shortcut && shortcut[keyName]\n}\n\nconst getShortcutKeySequence = getKey('sequence')\n\nconst getShortcutKeySequenceDisplay = getKey('display')\n\nfunction registerShortcutKeyHandler(shortcutName, handler, handleGetClip, mousetrap = mousetrapInstance) {\n  if (!shortcutName) throw new Error('shortcutName is required')\n  if (typeof handler !== 'function')\n    throw new Error(`shortcut ${shortcutName}: handler is required and must be a function`)\n\n  let sequence = getShortcutKeySequence(shortcutName)\n\n  if (!sequence) throw new Error(`no key sequence found for: ${sequence}`)\n\n  mousetrap && mousetrap.bind(sequence, (e) => {\n    handler()\n    const { clipId } = handleGetClip()\n\n    const isKeyToTrack = !keysNotToTrack.some((i) => i === e.which)\n\n    if (isKeyToTrack) {\n    //   analytics.trackGenericClick('Keyboard Shortcut Pressed', {\n    //     source: 'eplayer',\n    //     keyPressed: e.code,\n    //     keyPressedAction: shortcutName,\n    //     clipId,\n    //   })\n    }\n    return false\n  })\n}\n\nfunction unregisterShortcutKeyHandler(shortcutName, mousetrap = mousetrapInstance) {\n  let sequence = getShortcutKeySequence(shortcutName)\n  mousetrap && mousetrap.unbind(sequence)\n}\n\nconst resetMoustrap = (mousetrap = mousetrapInstance) => mousetrap.reset()\n\nexport {\n  initMousetrap,\n  defaultShortcutKeys,\n  getShortcutKeySequence,\n  getShortcutKeySequenceDisplay,\n  registerShortcutKeyHandler,\n  unregisterShortcutKeyHandler,\n  mousetrapInstance,\n  resetMoustrap,\n}\n"]},"metadata":{},"sourceType":"module"}
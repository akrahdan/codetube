{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import { NavLink } from \"react-router-dom\";\nimport{selectLocationPathName,selectLocationPayload}from\"state/location/selectors\";import{selectCourse}from\"state/course/courseSplice\";import{useFetchCourseQuery,useFetchPricingQuery,useSubmitReviewMutation}from\"services/courses\";import{useAlert}from\"react-alert\";import{useAppSelector}from\"store/hooks\";import{selectPricing}from\"state/course/courseSplice\";import{selectExperience,selectGoals,selectRequirements}from\"state/target/targetSplice\";import{useEffect,useState}from\"react\";import{NavLink}from\"redux-first-router-link\";import classNames from\"classnames\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ManageSidebar=function ManageSidebar(_ref){var projectId=_ref.projectId;var locationPayload=useAppSelector(selectLocationPayload);var locationType=useAppSelector(selectLocationPathName);var selectedExperience=useAppSelector(selectExperience);var selectedGoals=useAppSelector(selectGoals);var selectedRequirements=useAppSelector(selectRequirements);var _useState=useState(locationType),_useState2=_slicedToArray(_useState,2),active=_useState2[0],setActive=_useState2[1];var course=useAppSelector(selectCourse);var pricing=useAppSelector(selectPricing);var alert=useAlert();var _useState3=useState(course),_useState4=_slicedToArray(_useState3,2),courseUpdate=_useState4[0],setCourseUpdate=_useState4[1];var _useState5=useState(pricing),_useState6=_slicedToArray(_useState5,2),price=_useState6[0],setPrice=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),review=_useState8[0],setReview=_useState8[1];var _useState9=useState(selectedExperience),_useState10=_slicedToArray(_useState9,2),experience=_useState10[0],setExperience=_useState10[1];var _useState11=useState(selectedGoals),_useState12=_slicedToArray(_useState11,2),goals=_useState12[0],setGoals=_useState12[1];var _useState13=useState(selectedRequirements),_useState14=_slicedToArray(_useState13,2),requirements=_useState14[0],setRequirements=_useState14[1];var _useFetchCourseQuery=useFetchCourseQuery(locationPayload.id),courseQuery=_useFetchCourseQuery.data;var _useFetchPricingQuery=useFetchPricingQuery(locationPayload.id),pricingQuery=_useFetchPricingQuery.data;var _useSubmitReviewMutat=useSubmitReviewMutation(),_useSubmitReviewMutat2=_slicedToArray(_useSubmitReviewMutat,1),submitReview=_useSubmitReviewMutat2[0];useEffect(function(){console.log('location:',locationType);setActive(locationType);},[locationType]);useEffect(function(){setCourseUpdate(course||courseQuery);},[course,courseQuery]);useEffect(function(){setPrice(pricing);},[pricing]);useEffect(function(){setExperience(selectedExperience);setRequirements(selectedRequirements);setGoals(selectedGoals);},[selectedExperience,selectedGoals,selectedRequirements]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app--nav--QVTHS\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"side-nav--side-nav--h8FTL\",\"data-purpose\":\"side-menu\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav-collapse\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"menu-base\",className:\"nav-collapse__toggle\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"menu-base\",\"data-type\":\"button\",className:\"nav-collapse__toggle-btn btn btn-tertiary\",children:/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-reorder\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-container\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav-steps nav nav-tabs nav-stacked\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"active sub-nav\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"sub-nav__title\",children:\"Plan your project\"}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-container\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"nav\",children:/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:classNames({'active':active==\"/instructor/project/\".concat(projectId,\"/manage/goals\"),'checked':experience&&experience.filter(function(item){return item.name;}).length&&goals&&goals.filter(function(item){return item.name;}).length&&requirements&&requirements.filter(function(item){return item.name;}).length}),children:/*#__PURE__*/_jsx(NavLink,{to:\"/instructor/project/\".concat(projectId,\"/manage/goals\"),children:\"Target your students\"})})})})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"active sub-nav\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"sub-nav__title\",children:\"Publish your project\"}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-container\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"nav\",children:[/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:classNames({'active':active==\"/instructor/project/\".concat(projectId,\"/manage/basics\"),'checked':courseUpdate&&Object.keys(courseUpdate).every(function(k){return courseUpdate[k];})}),children:/*#__PURE__*/_jsx(NavLink,{to:\"/instructor/project/\".concat(projectId,\"/manage/basics\"),children:\"Project landing page\"})}),/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:classNames({'active':active==\"/instructor/project/\".concat(projectId,\"/manage/pricing\"),'checked':price&&price.amount&&price.currency}),children:/*#__PURE__*/_jsx(NavLink,{to:\"/instructor/project/\".concat(projectId,\"/manage/pricing\"),children:\"Pricing\"})})]})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"side-nav--publish-button--yW0v1\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setReview(!review);submitReview({id:locationPayload.id,state:'PENDING'}).then(function(res){console.log(res.data);setReview(false);if(res.data&&res.data.state==\"LIVE\"){alert.show(\"Congratulations! Your project is now published on Codefluent\");}});},type:\"button\",className:\"btn btn-lg btn-primary\",children:\"Submit for Review\"}),/*#__PURE__*/_jsx(\"div\",{})]})]}),review&&/*#__PURE__*/_jsx(\"div\",{className:\"fxc popup-backdrop\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-label\":\"Loading\",className:\"text-white cfi-large cfi cfi-circle-loader\"})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Projects/Sidebar/ManageSidebar.tsx"],"names":["selectLocationPathName","selectLocationPayload","selectCourse","useFetchCourseQuery","useFetchPricingQuery","useSubmitReviewMutation","useAlert","useAppSelector","selectPricing","selectExperience","selectGoals","selectRequirements","useEffect","useState","NavLink","classNames","ManageSidebar","projectId","locationPayload","locationType","selectedExperience","selectedGoals","selectedRequirements","active","setActive","course","pricing","alert","courseUpdate","setCourseUpdate","price","setPrice","review","setReview","experience","setExperience","goals","setGoals","requirements","setRequirements","id","courseQuery","data","pricingQuery","submitReview","console","log","filter","item","name","length","Object","keys","every","k","amount","currency","state","then","res","show"],"mappings":"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","sourcesContent":["// import { NavLink } from \"react-router-dom\";\n\nimport { selectLocationPathName, selectLocationPayload } from \"state/location/selectors\";\nimport { selectCourse } from \"state/course/courseSplice\";\nimport {useFetchCourseQuery, useFetchPricingQuery, useSubmitReviewMutation } from \"services/courses\";\nimport type { Review } from \"services/courses\";\nimport { useAlert } from \"react-alert\";\nimport type { CourseResponse, Requirement, Experience, Goal } from \"services/courses\";\n\nimport { useAppSelector } from \"store/hooks\";\nimport { selectPricing } from \"state/course/courseSplice\";\nimport { selectExperience, selectGoals, selectRequirements } from \"state/target/targetSplice\";\nimport { useEffect, useState } from \"react\";\nimport { NavLink } from \"redux-first-router-link\";\nimport classNames from \"classnames\";\nexport const ManageSidebar = ({ projectId }) => {\n\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const locationType = useAppSelector(selectLocationPathName)\n  const selectedExperience = useAppSelector(selectExperience)\n  const selectedGoals = useAppSelector(selectGoals)\n  const selectedRequirements = useAppSelector(selectRequirements)\n\n  const [active, setActive] = useState(locationType);\n  const course = useAppSelector(selectCourse)\n  const pricing = useAppSelector(selectPricing)\n  const alert = useAlert()\n  const [courseUpdate, setCourseUpdate] = useState<CourseResponse>(course)\n  const [price, setPrice] = useState(pricing)\n  const [review, setReview] = useState(false)\n  const [experience, setExperience] = useState<Experience[]>(selectedExperience)\n  const [goals, setGoals] = useState<Goal[]>(selectedGoals)\n  const [requirements, setRequirements] = useState<Requirement[]>(selectedRequirements)\n  const { data: courseQuery } = useFetchCourseQuery(locationPayload.id)\n  const { data: pricingQuery } = useFetchPricingQuery(locationPayload.id)\n  const [submitReview] = useSubmitReviewMutation()\n\n  useEffect(() => {\n    console.log('location:', locationType)\n    setActive(locationType)\n  }, [locationType])\n  useEffect(() => {\n    setCourseUpdate(course || courseQuery)\n  }, [course, courseQuery])\n\n  useEffect(() => {\n    setPrice(pricing)\n  }, [pricing])\n\n  useEffect(() => {\n    setExperience(selectedExperience)\n    setRequirements(selectedRequirements)\n    setGoals(selectedGoals)\n  }, [selectedExperience, selectedGoals, selectedRequirements])\n\n  return (\n    <div className=\"app--nav--QVTHS\">\n      <div className=\"side-nav--side-nav--h8FTL\" data-purpose=\"side-menu\">\n        <div className=\"nav-collapse\">\n          <input\n            type=\"checkbox\"\n            id=\"menu-base\"\n            className=\"nav-collapse__toggle\"\n          />\n          <label\n            htmlFor=\"menu-base\"\n            data-type=\"button\"\n            className=\"nav-collapse__toggle-btn btn btn-tertiary\"\n          >\n            <span className=\"cfi cfi-reorder\" />\n          </label>\n          <div className=\"nav-container\">\n            <ul className=\"nav-steps nav nav-tabs nav-stacked\">\n              <li className=\"active sub-nav\">\n                <strong className=\"sub-nav__title\">Plan your project</strong>\n                <div className=\"nav-container\">\n                  <ul className=\"nav\">\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/project/${projectId}/manage/goals`,\n                      'checked': experience && experience.filter(item => item.name).length && goals\n                        && goals.filter(item => item.name).length && requirements && requirements.filter(item => item.name).length\n                    })}>\n                      <NavLink\n                        to={`/instructor/project/${projectId}/manage/goals`}\n                      >\n                        Target your students\n                      </NavLink>\n                    </li>\n                  </ul>\n                </div>\n              </li>\n             \n              <li className=\"active sub-nav\">\n                <strong className=\"sub-nav__title\">Publish your project</strong>\n                <div className=\"nav-container\">\n                  <ul className=\"nav\">\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/project/${projectId}/manage/basics`,\n                      'checked': courseUpdate && Object.keys(courseUpdate).every((k) => courseUpdate[k])\n                    })}>\n                      <NavLink\n\n                        to={`/instructor/project/${projectId}/manage/basics`}\n                      >\n                        Project landing page\n                      </NavLink>\n                    </li>\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/project/${projectId}/manage/pricing`,\n                      'checked': price && price.amount && price.currency\n                    })}>\n                      <NavLink\n\n                        to={`/instructor/project/${projectId}/manage/pricing`}\n                      >\n                        Pricing\n                      </NavLink>\n                    </li>\n\n                   \n                  </ul>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div className=\"side-nav--publish-button--yW0v1\">\n          <button onClick={() => {\n            setReview(!review)\n\n            submitReview({\n              id: locationPayload.id,\n              state: 'PENDING'\n            \n            }).then((res: { data: Review}) => {\n              console.log(res.data)\n              setReview(false)\n             \n              if(res.data && res.data.state == \"LIVE\") {\n                alert.show(\"Congratulations! Your project is now published on Codefluent\")\n              }\n            })\n          }\n          } type=\"button\" className=\"btn btn-lg btn-primary\">\n            Submit for Review\n          </button>\n          <div />\n        </div>\n      </div>\n      {review && (<div className=\"fxc popup-backdrop\">\n        <span\n          aria-label=\"Loading\"\n          className=\"text-white cfi-large cfi cfi-circle-loader\"\n        />\n      </div>)}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
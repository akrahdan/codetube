{"ast":null,"code":"import _classCallCheck from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import classnames from'classnames';import{connect}from'react-redux';import{InteractionModes,Menus}from'../constants';import{setActiveMenu as _setActiveMenu,play as _play,pause as _pause}from'state/player/playerSlice';import css from'./command-layer.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";export var CommandLayer=/*#__PURE__*/function(_Component){_inherits(CommandLayer,_Component);var _super=_createSuper(CommandLayer);function CommandLayer(props){var _this;_classCallCheck(this,CommandLayer);_this=_super.call(this,props);_this.handleClick=function(e){var _this$props=_this.props,activeMenu=_this$props.activeMenu,pause=_this$props.pause,play=_this$props.play,playing=_this$props.playing,visible=_this$props.visible,setActiveMenu=_this$props.setActiveMenu;if(activeMenu!==Menus.NONE){setActiveMenu(Menus.NONE);}if(visible){playing?pause(true):play(true);}};_this.state={clientY:null};return _this;}_createClass(CommandLayer,[{key:\"handleTouchStart\",value:function handleTouchStart(e){e&&e.preventDefault();var touch=e&&e.touches[0];touch&&this.setState({clientY:touch.clientY});}},{key:\"handleTouchEnd\",value:function handleTouchEnd(e){var newTouch=e&&e.changedTouches[0];var offset=newTouch&&Math.abs(this.state.clientY-newTouch.clientY);var minimumScrollDistance=50;if(!offset||offset<minimumScrollDistance)this.handleClick();e&&e.preventDefault();}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(\"div\",{className:css.commandLayer,onClick:this.handleClick,onTouchStart:function onTouchStart(e){return _this2.handleTouchStart(e);},onTouchEnd:function onTouchEnd(e){return _this2.handleTouchEnd(e);},ref:function ref(_ref){return _this2.ref=_ref;}});}}]);return CommandLayer;}(Component);export default connect(function(state){return{activeMenu:state.player.activeMenu,playing:state.player.playing,visible:state.player.visible};},function(dispatch){return{pause:function pause(payload){return dispatch(_pause(payload));},play:function play(payload){return dispatch(_play(payload));},setActiveMenu:function setActiveMenu(payload){return dispatch(_setActiveMenu(payload));}};})(CommandLayer);","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/command-layer/command-layer.js"],"names":["React","Component","classnames","connect","InteractionModes","Menus","setActiveMenu","play","pause","css","CommandLayer","props","handleClick","e","activeMenu","playing","visible","NONE","state","clientY","preventDefault","touch","touches","setState","newTouch","changedTouches","offset","Math","abs","minimumScrollDistance","commandLayer","handleTouchStart","handleTouchEnd","ref","player","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\n\nimport classnames from 'classnames'\nimport {connect} from 'react-redux';\nimport { InteractionModes, Menus } from '../constants';\nimport { setActiveMenu, play, pause } from 'state/player/playerSlice';\nimport css from './command-layer.module.css'\n\nexport class CommandLayer extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      clientY: null,\n    }\n  }\n\n  handleTouchStart(e) {\n    e && e.preventDefault()\n\n    const touch = e && e.touches[0]\n    touch && this.setState({ clientY: touch.clientY })\n  }\n\n  handleTouchEnd(e) {\n    const newTouch = e && e.changedTouches[0]\n    const offset = newTouch && Math.abs(this.state.clientY - newTouch.clientY)\n    const minimumScrollDistance = 50\n\n    if (!offset || offset < minimumScrollDistance) this.handleClick()\n    e && e.preventDefault()\n  }\n\n  handleClick = e => {\n    const { activeMenu, pause, play, playing, visible, setActiveMenu } = this.props\n\n    if (activeMenu !== Menus.NONE) {\n      setActiveMenu(Menus.NONE)\n    }\n\n    if (visible) {\n      playing ? pause(true) : play(true)\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={css.commandLayer}\n        onClick={this.handleClick}\n        onTouchStart={e => this.handleTouchStart(e)}\n        onTouchEnd={e => this.handleTouchEnd(e)}\n        ref={ref => (this.ref = ref)}\n      />\n    )\n  }\n}\n\n\n\nexport default connect(\n  state => ({\n    activeMenu: state.player.activeMenu,\n    playing: state.player.playing,\n    visible: state.player.visible,\n  }),\n  dispatch => ({\n    pause: (payload) => dispatch(pause(payload)),\n    play: (payload) => dispatch(play(payload)),\n    setActiveMenu: (payload) => dispatch(setActiveMenu(payload)),\n   \n  })\n)(CommandLayer)\n"]},"metadata":{},"sourceType":"module"}
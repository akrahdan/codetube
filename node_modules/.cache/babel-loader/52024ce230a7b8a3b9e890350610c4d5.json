{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport Button from '@pluralsight/ps-design-system-button';\nimport { breakpoints } from '@pluralsight/ps-design-system-core';\nimport Scrollable from '@pluralsight/ps-design-system-scrollable';\nimport Theme, { useTheme } from '@pluralsight/ps-design-system-theme';\nimport { canUseDOM, isFunction, useMatchMedia, usePrevious } from '@pluralsight/ps-design-system-util';\nimport polyfillFocusWithin from 'focus-within';\nimport glamorDefault, * as glamorExports from 'glamor';\nimport React from 'react';\nimport stylesheet from '../css/index';\nimport polyfillElementClosest from '../js/polyfill-element-closest';\nimport useBodyScrollLock from './use-body-scroll-lock';\nimport useOnClickOutside from './use-on-click-outside';\nimport useOnEscape from './use-on-escape';\nimport useOnInnerFocus from './use-on-inner-focus';\nimport * as vars from '../vars/index';\nvar glamor = glamorDefault || glamorExports;\n\nif (canUseDOM()) {\n  polyfillElementClosest();\n  polyfillFocusWithin(document);\n}\n\nvar SKIP_TARGET_ID = 'ps-appframe--skip-target';\nvar TOP_NAV_ID = 'ps-appframe--topnav';\nvar styles = {\n  appframe: function (themeName) {\n    return glamor.compose(glamor.css(stylesheet['.psds-appframe']), glamor.css(stylesheet[\".psds-appframe.psds-theme--\" + themeName]));\n  },\n  skipBanner: function () {\n    return glamor.css(stylesheet['.psds-appframe__skip-banner']);\n  },\n  container: function (variant) {\n    return glamor.compose(glamor.css(stylesheet['.psds-appframe__container']), variant && glamor.css(stylesheet[\".psds-appframe__container--\" + variant]));\n  },\n  content: function () {\n    return glamor.css(stylesheet['.psds-appframe__content']);\n  },\n  sidenav: function (variant) {\n    return glamor.compose(glamor.css(stylesheet['.psds-appframe__sidenav']), variant && glamor.css(stylesheet[\".psds-appframe__sidenav--\" + variant]));\n  },\n  sidenavOverflowMask: function () {\n    return glamor.css(stylesheet['.psds-appframe__sidenav__overflow-mask']);\n  },\n  sidenavInner: function () {\n    return glamor.css(stylesheet['.psds-appframe__sidenav__inner']);\n  },\n  topnav: function () {\n    return glamor.css(stylesheet['.psds-appframe__topnav']);\n  }\n};\nvar AppFrameContext = React.createContext({\n  closeSidenav: function () {},\n  openSidenav: function () {},\n  sidenavOpen: undefined,\n  sidenavVariant: vars.sidenavVariants.closed\n});\nvar AppFrame = React.forwardRef(function (props, forwardedRef) {\n  var children = props.children,\n      onRequestSideNavClose = props.onRequestSideNavClose,\n      onRequestSideNavOpen = props.onRequestSideNavOpen,\n      sidenav = props.sidenav,\n      initialSidenavOpen = props.sidenavOpen,\n      topnav = props.topnav,\n      rest = __rest(props, [\"children\", \"onRequestSideNavClose\", \"onRequestSideNavOpen\", \"sidenav\", \"sidenavOpen\", \"topnav\"]);\n\n  var ref = React.useRef(null);\n  React.useImperativeHandle(forwardedRef, function () {\n    return ref.current;\n  });\n  var themeName = useTheme();\n  var smallMedia = useMatchMedia(\"(min-width: \" + breakpoints.small + \")\");\n  var largeMedia = useMatchMedia(\"(min-width: \" + breakpoints.large + \")\");\n  var prevLargeMedia = usePrevious(largeMedia);\n  var defaultSidenavOpen = React.useMemo(function () {\n    var controlled = typeof initialSidenavOpen !== 'undefined';\n    return controlled ? initialSidenavOpen : largeMedia;\n  }, [initialSidenavOpen, largeMedia]);\n\n  var _a = React.useState(defaultSidenavOpen),\n      sidenavOpen = _a[0],\n      setSidenavOpen = _a[1];\n\n  var closeSidenav = React.useCallback(function () {\n    var controlled = typeof props.sidenavOpen !== 'undefined';\n    if (controlled && isFunction(onRequestSideNavClose)) onRequestSideNavClose();else if (!controlled) setSidenavOpen(false);\n  }, [props.sidenavOpen, onRequestSideNavClose]);\n  var openSidenav = React.useCallback(function () {\n    var controlled = typeof props.sidenavOpen !== 'undefined';\n    if (controlled && isFunction(onRequestSideNavOpen)) onRequestSideNavOpen();else if (!controlled) setSidenavOpen(true);\n  }, [props.sidenavOpen, onRequestSideNavOpen]);\n  React.useEffect(function () {\n    var enteringXLarge = prevLargeMedia !== largeMedia && largeMedia;\n    if (enteringXLarge) openSidenav();\n  }, [prevLargeMedia, largeMedia, openSidenav]);\n  React.useEffect(function () {\n    var controlled = typeof props.sidenavOpen !== 'undefined';\n    var next = controlled ? props.sidenavOpen : defaultSidenavOpen;\n    setSidenavOpen(next);\n  }, [props.sidenavOpen, defaultSidenavOpen]);\n  var sidenavVariant = React.useMemo(function () {\n    var variants = vars.sidenavVariants;\n    if (!sidenav) return variants.closed;\n\n    if (sidenavOpen) {\n      return largeMedia ? variants.open : variants.overlay;\n    } else {\n      return smallMedia ? variants.minimized : variants.closed;\n    }\n  }, [sidenav, sidenavOpen, smallMedia, largeMedia]);\n  var skipTargetRef = React.useRef(null);\n  var focusSkipTarget = React.useCallback(function () {\n    if (!skipTargetRef.current) return;\n    skipTargetRef.current.focus();\n  }, []);\n  var contextValue = {\n    closeSidenav: closeSidenav,\n    openSidenav: openSidenav,\n    sidenavOpen: sidenavOpen,\n    sidenavVariant: sidenavVariant\n  };\n  return React.createElement(AppFrameContext.Provider, {\n    value: contextValue\n  }, React.createElement(\"div\", __assign({\n    ref: ref\n  }, styles.appframe(themeName), rest), React.createElement(SkipBanner, {\n    href: '#' + SKIP_TARGET_ID\n  }), React.createElement(TopNav, {\n    id: TOP_NAV_ID\n  }, topnav), React.createElement(Container, null, sidenav && React.createElement(SideNav, null, sidenav), React.createElement(\"main\", __assign({}, styles.content()), React.createElement(SkipTarget, {\n    id: SKIP_TARGET_ID,\n    onClick: focusSkipTarget,\n    ref: skipTargetRef\n  }), children))));\n});\nAppFrame.displayName = 'AppFrame';\n\nvar SkipBanner = function (props) {\n  return React.createElement(Theme, {\n    name: Theme.names.dark\n  }, React.createElement(\"div\", __assign({}, styles.skipBanner(), props), React.createElement(Button, {\n    appearance: Button.appearances.secondary,\n    size: Button.sizes.small,\n    tabIndex: 0\n  }, \"skip to main content\")));\n};\n\nvar SkipTarget = React.forwardRef(function (props, ref) {\n  return React.createElement(\"a\", __assign({\n    ref: ref,\n    tabIndex: -1\n  }, props));\n});\nSkipTarget.displayName = 'SkipTarget';\n\nvar Container = function (props) {\n  var context = React.useContext(AppFrameContext);\n  return React.createElement(\"div\", __assign({}, styles.container(context.sidenavVariant), props));\n};\n\nvar SideNav = function (props) {\n  var variants = vars.sidenavVariants;\n  var children = props.children;\n\n  var _a = React.useContext(AppFrameContext),\n      closeSidenav = _a.closeSidenav,\n      openSidenav = _a.openSidenav,\n      sidenavVariant = _a.sidenavVariant;\n\n  var hoverable = sidenavVariant === variants.minimized;\n\n  var _b = React.useState(false),\n      hovered = _b[0],\n      setHovered = _b[1];\n\n  var variant = hoverable && hovered ? variants.overlay : sidenavVariant;\n  var visible = variant === variants.overlay || variant === variants.open;\n  var ref = React.useRef(null);\n  var overlayed = variant === variants.overlay;\n  useBodyScrollLock(ref, overlayed);\n  var closeIfOverlayed = React.useCallback(function () {\n    if (overlayed) closeSidenav();\n  }, [overlayed, closeSidenav]);\n  useOnClickOutside(ref, function (evt) {\n    var target = evt.target;\n    var inTopNav = target && !!target.closest(\"#\" + TOP_NAV_ID);\n    if (!inTopNav) closeIfOverlayed();\n  });\n  useOnEscape(closeIfOverlayed);\n  useOnInnerFocus(ref, {\n    onEnter: openSidenav,\n    onLeave: closeIfOverlayed\n  });\n  return React.createElement(Theme, {\n    name: Theme.names.dark\n  }, React.createElement(\"div\", __assign({\n    ref: ref\n  }, styles.sidenav(variant), props, hoverable && {\n    onMouseEnter: function () {\n      return setHovered(true);\n    },\n    onMouseLeave: function () {\n      return setHovered(false);\n    }\n  }), React.createElement(\"div\", __assign({}, styles.sidenavOverflowMask()), React.createElement(Scrollable, __assign({}, styles.sidenavInner()), typeof children === 'function' ? children({\n    visible: visible\n  }) : children))));\n};\n\nSideNav.variants = vars.sidenavVariants;\n\nvar TopNav = function (props) {\n  var children = props.children;\n\n  var _a = React.useContext(AppFrameContext),\n      closeSidenav = _a.closeSidenav,\n      openSidenav = _a.openSidenav,\n      sidenavOpen = _a.sidenavOpen;\n\n  var meta = {\n    closeSidenav: closeSidenav,\n    openSidenav: openSidenav,\n    sidenavOpen: sidenavOpen\n  };\n  return React.createElement(Theme, {\n    name: Theme.names.dark\n  }, React.createElement(\"div\", __assign({}, styles.topnav(), props), isFunction(children) ? children(meta) : children));\n};\n\nAppFrame.SideNav = SideNav;\nAppFrame.SideNav.displayName = 'AppFrame.SideNav';\nAppFrame.TopNav = TopNav;\nAppFrame.TopNav.displayName = 'AppFrame.TopNav';\nexport default AppFrame;","map":{"version":3,"sources":["../../../src/react/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport Button from '@pluralsight/ps-design-system-button';\nimport { breakpoints } from '@pluralsight/ps-design-system-core';\nimport Scrollable from '@pluralsight/ps-design-system-scrollable';\nimport Theme, { useTheme } from '@pluralsight/ps-design-system-theme';\nimport { canUseDOM, isFunction, useMatchMedia, usePrevious } from '@pluralsight/ps-design-system-util';\nimport polyfillFocusWithin from 'focus-within';\nimport glamorDefault, * as glamorExports from 'glamor';\nimport React from 'react';\nimport stylesheet from '../css/index';\nimport polyfillElementClosest from '../js/polyfill-element-closest';\nimport useBodyScrollLock from './use-body-scroll-lock';\nimport useOnClickOutside from './use-on-click-outside';\nimport useOnEscape from './use-on-escape';\nimport useOnInnerFocus from './use-on-inner-focus';\nimport * as vars from '../vars/index';\nvar glamor = glamorDefault || glamorExports;\nif (canUseDOM()) {\n    polyfillElementClosest();\n    polyfillFocusWithin(document);\n}\nvar SKIP_TARGET_ID = 'ps-appframe--skip-target';\nvar TOP_NAV_ID = 'ps-appframe--topnav';\nvar styles = {\n    appframe: function (themeName) {\n        return glamor.compose(glamor.css(stylesheet['.psds-appframe']), glamor.css(stylesheet[\".psds-appframe.psds-theme--\" + themeName]));\n    },\n    skipBanner: function () { return glamor.css(stylesheet['.psds-appframe__skip-banner']); },\n    container: function (variant) {\n        return glamor.compose(glamor.css(stylesheet['.psds-appframe__container']), variant && glamor.css(stylesheet[\".psds-appframe__container--\" + variant]));\n    },\n    content: function () { return glamor.css(stylesheet['.psds-appframe__content']); },\n    sidenav: function (variant) {\n        return glamor.compose(glamor.css(stylesheet['.psds-appframe__sidenav']), variant && glamor.css(stylesheet[\".psds-appframe__sidenav--\" + variant]));\n    },\n    sidenavOverflowMask: function () {\n        return glamor.css(stylesheet['.psds-appframe__sidenav__overflow-mask']);\n    },\n    sidenavInner: function () { return glamor.css(stylesheet['.psds-appframe__sidenav__inner']); },\n    topnav: function () { return glamor.css(stylesheet['.psds-appframe__topnav']); }\n};\nvar AppFrameContext = React.createContext({\n    closeSidenav: function () { },\n    openSidenav: function () { },\n    sidenavOpen: undefined,\n    sidenavVariant: vars.sidenavVariants.closed\n});\nvar AppFrame = React.forwardRef(function (props, forwardedRef) {\n    var children = props.children, onRequestSideNavClose = props.onRequestSideNavClose, onRequestSideNavOpen = props.onRequestSideNavOpen, sidenav = props.sidenav, initialSidenavOpen = props.sidenavOpen, topnav = props.topnav, rest = __rest(props, [\"children\", \"onRequestSideNavClose\", \"onRequestSideNavOpen\", \"sidenav\", \"sidenavOpen\", \"topnav\"]);\n    var ref = React.useRef(null);\n    React.useImperativeHandle(forwardedRef, function () { return ref.current; });\n    var themeName = useTheme();\n    var smallMedia = useMatchMedia(\"(min-width: \" + breakpoints.small + \")\");\n    var largeMedia = useMatchMedia(\"(min-width: \" + breakpoints.large + \")\");\n    var prevLargeMedia = usePrevious(largeMedia);\n    var defaultSidenavOpen = React.useMemo(function () {\n        var controlled = typeof initialSidenavOpen !== 'undefined';\n        return controlled ? initialSidenavOpen : largeMedia;\n    }, [initialSidenavOpen, largeMedia]);\n    var _a = React.useState(defaultSidenavOpen), sidenavOpen = _a[0], setSidenavOpen = _a[1];\n    var closeSidenav = React.useCallback(function () {\n        var controlled = typeof props.sidenavOpen !== 'undefined';\n        if (controlled && isFunction(onRequestSideNavClose))\n            onRequestSideNavClose();\n        else if (!controlled)\n            setSidenavOpen(false);\n    }, [props.sidenavOpen, onRequestSideNavClose]);\n    var openSidenav = React.useCallback(function () {\n        var controlled = typeof props.sidenavOpen !== 'undefined';\n        if (controlled && isFunction(onRequestSideNavOpen))\n            onRequestSideNavOpen();\n        else if (!controlled)\n            setSidenavOpen(true);\n    }, [props.sidenavOpen, onRequestSideNavOpen]);\n    React.useEffect(function () {\n        var enteringXLarge = prevLargeMedia !== largeMedia && largeMedia;\n        if (enteringXLarge)\n            openSidenav();\n    }, [prevLargeMedia, largeMedia, openSidenav]);\n    React.useEffect(function () {\n        var controlled = typeof props.sidenavOpen !== 'undefined';\n        var next = controlled ? props.sidenavOpen : defaultSidenavOpen;\n        setSidenavOpen(next);\n    }, [props.sidenavOpen, defaultSidenavOpen]);\n    var sidenavVariant = React.useMemo(function () {\n        var variants = vars.sidenavVariants;\n        if (!sidenav)\n            return variants.closed;\n        if (sidenavOpen) {\n            return largeMedia ? variants.open : variants.overlay;\n        }\n        else {\n            return smallMedia ? variants.minimized : variants.closed;\n        }\n    }, [sidenav, sidenavOpen, smallMedia, largeMedia]);\n    var skipTargetRef = React.useRef(null);\n    var focusSkipTarget = React.useCallback(function () {\n        if (!skipTargetRef.current)\n            return;\n        skipTargetRef.current.focus();\n    }, []);\n    var contextValue = {\n        closeSidenav: closeSidenav,\n        openSidenav: openSidenav,\n        sidenavOpen: sidenavOpen,\n        sidenavVariant: sidenavVariant\n    };\n    return (React.createElement(AppFrameContext.Provider, { value: contextValue },\n        React.createElement(\"div\", __assign({ ref: ref }, styles.appframe(themeName), rest),\n            React.createElement(SkipBanner, { href: '#' + SKIP_TARGET_ID }),\n            React.createElement(TopNav, { id: TOP_NAV_ID }, topnav),\n            React.createElement(Container, null,\n                sidenav && React.createElement(SideNav, null, sidenav),\n                React.createElement(\"main\", __assign({}, styles.content()),\n                    React.createElement(SkipTarget, { id: SKIP_TARGET_ID, onClick: focusSkipTarget, ref: skipTargetRef }),\n                    children)))));\n});\nAppFrame.displayName = 'AppFrame';\nvar SkipBanner = function (props) {\n    return (React.createElement(Theme, { name: Theme.names.dark },\n        React.createElement(\"div\", __assign({}, styles.skipBanner(), props),\n            React.createElement(Button, { appearance: Button.appearances.secondary, size: Button.sizes.small, tabIndex: 0 }, \"skip to main content\"))));\n};\nvar SkipTarget = React.forwardRef(function (props, ref) {\n    return React.createElement(\"a\", __assign({ ref: ref, tabIndex: -1 }, props));\n});\nSkipTarget.displayName = 'SkipTarget';\nvar Container = function (props) {\n    var context = React.useContext(AppFrameContext);\n    return React.createElement(\"div\", __assign({}, styles.container(context.sidenavVariant), props));\n};\nvar SideNav = function (props) {\n    var variants = vars.sidenavVariants;\n    var children = props.children;\n    var _a = React.useContext(AppFrameContext), closeSidenav = _a.closeSidenav, openSidenav = _a.openSidenav, sidenavVariant = _a.sidenavVariant;\n    var hoverable = sidenavVariant === variants.minimized;\n    var _b = React.useState(false), hovered = _b[0], setHovered = _b[1];\n    var variant = hoverable && hovered ? variants.overlay : sidenavVariant;\n    var visible = variant === variants.overlay || variant === variants.open;\n    var ref = React.useRef(null);\n    var overlayed = variant === variants.overlay;\n    useBodyScrollLock(ref, overlayed);\n    var closeIfOverlayed = React.useCallback(function () {\n        if (overlayed)\n            closeSidenav();\n    }, [overlayed, closeSidenav]);\n    useOnClickOutside(ref, function (evt) {\n        var target = evt.target;\n        var inTopNav = target && !!target.closest(\"#\" + TOP_NAV_ID);\n        if (!inTopNav)\n            closeIfOverlayed();\n    });\n    useOnEscape(closeIfOverlayed);\n    useOnInnerFocus(ref, { onEnter: openSidenav, onLeave: closeIfOverlayed });\n    return (React.createElement(Theme, { name: Theme.names.dark },\n        React.createElement(\"div\", __assign({ ref: ref }, styles.sidenav(variant), props, (hoverable && {\n            onMouseEnter: function () { return setHovered(true); },\n            onMouseLeave: function () { return setHovered(false); }\n        })),\n            React.createElement(\"div\", __assign({}, styles.sidenavOverflowMask()),\n                React.createElement(Scrollable, __assign({}, styles.sidenavInner()), typeof children === 'function' ? children({ visible: visible }) : children)))));\n};\nSideNav.variants = vars.sidenavVariants;\nvar TopNav = function (props) {\n    var children = props.children;\n    var _a = React.useContext(AppFrameContext), closeSidenav = _a.closeSidenav, openSidenav = _a.openSidenav, sidenavOpen = _a.sidenavOpen;\n    var meta = { closeSidenav: closeSidenav, openSidenav: openSidenav, sidenavOpen: sidenavOpen };\n    return (React.createElement(Theme, { name: Theme.names.dark },\n        React.createElement(\"div\", __assign({}, styles.topnav(), props), isFunction(children)\n            ? children(meta)\n            : children)));\n};\nAppFrame.SideNav = SideNav;\nAppFrame.SideNav.displayName = 'AppFrame.SideNav';\nAppFrame.TopNav = TopNav;\nAppFrame.TopNav.displayName = 'AppFrame.TopNav';\nexport default AppFrame;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import styles from\"./styles.module.css\";import Manager from\"./Manager\";import{useEffect,useState}from\"react\";import{useAppDispatch}from\"store/hooks\";import Container from\"./Container\";import ActionOverlay from\"./Overlay\";import ControlBar from\"./control-bar/control-bar\";import ProgressBar from\"./progress-bar/progress-bar\";import Header from\"./header/header\";import CommandLayer from\"./command-layer/command-layer\";import BufferingIndicator from\"./buffering-indicator/buffering-indicator\";import Video from\"./video/video\";import SyncSettings from\"./sync-settings/sync-settings\";import SyncClipProgress from\"./sync-clip-progress/sync-clip-progress\";import Captions from\"./captions/captions\";import ErrorModal from\"./error-modal/error-modal\";import KeyboardShortcuts from\"./keyboard-shortcuts/keyboard-shortcuts\";import classNames from\"classnames\";import{Lecture}from\"./contentItem/lecture\";import{selectLocationPayload,selectLocationQuery}from\"state/location/selectors\";import{useAppSelector}from\"store/hooks\";import _ from'lodash';import{selectPlayerCourse,setCurrentUrl,setTitle,setClipId,setCurrentLecture,setCurrentViews}from\"state/player/playerSlice\";import{selectAnalytics}from\"state/course/courseSplice\";import{usePlayer}from\"store/usePlayer\";import{useFetchPlayerCourseQuery,useFetchCourseViewsQuery}from\"services/courses\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CoursePlayer=function CoursePlayer(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toggle=_useState2[0],setToggle=_useState2[1];var locationPayload=useAppSelector(selectLocationPayload);var dispatch=useAppDispatch();var locationQuery=useAppSelector(selectLocationQuery);var selectedViews=useAppSelector(selectAnalytics);var selectedCourse=useAppSelector(selectPlayerCourse);var _useFetchPlayerCourse=useFetchPlayerCourseQuery(locationPayload.id),courseQuery=_useFetchPlayerCourse.data;var _useFetchCourseViewsQ=useFetchCourseViewsQuery(),viewsQuery=_useFetchCourseViewsQ.data;var _usePlayer=usePlayer(),player=_usePlayer.player;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),course=_useState4[0],setCourse=_useState4[1];var _useState5=useState(selectedViews?selectedViews.map(function(view){return view.lecture;}):[]),_useState6=_slicedToArray(_useState5,2),views=_useState6[0],setViews=_useState6[1];useEffect(function(){if(selectedCourse){var _selectedCourse$secti;setCourse(selectedCourse);dispatch(setTitle(selectedCourse.title));var lectures=(_selectedCourse$secti=selectedCourse.sections)===null||_selectedCourse$secti===void 0?void 0:_selectedCourse$secti.flatMap(function(sec){return sec.lectures;});if(lectures){var currentLecture=lectures===null||lectures===void 0?void 0:lectures.find(function(lec){var _lec$video;return((_lec$video=lec.video)===null||_lec$video===void 0?void 0:_lec$video.key)==(locationQuery===null||locationQuery===void 0?void 0:locationQuery.clipid);});if(currentLecture)dispatch(setCurrentLecture(currentLecture));}}},[selectedCourse]);useEffect(function(){if(selectedViews){var _views=_.uniq(selectedViews.map(function(view){return view.lecture;}));dispatch(setCurrentViews(selectedViews));setViews(_views);}},[selectedViews]);useEffect(function(){if(locationQuery){var baseUrl=\"https://cdn.filestackcontent.com/\".concat(locationQuery.clipid);dispatch(setCurrentUrl(baseUrl));dispatch(setClipId(locationQuery.clipid));}},[locationQuery]);if(!course)return null;return/*#__PURE__*/_jsx(\"div\",{className:styles.next,children:/*#__PURE__*/_jsxs(\"div\",{className:classNames(styles.courseLayout,_defineProperty({},styles.navCollapse,toggle)),children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.coursePlayerLayout,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.navToggleButtonContainer,children:/*#__PURE__*/_jsx(\"button\",{className:styles.navToggle,onClick:function onClick(){setToggle(!toggle);},children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:styles.navToggleSvg,xmlns:\"http://www.w3.org/2000/svg\",width:\"24px\",height:\"24px\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M2 17.02h17.33v2H2zM2 11.06h15.49v2H2zM18.55 2.52L17.2 3.98l1.16 1.08H2v2h16.4L17.35 8.2l1.46 1.37L22.2 5.9l-3.64-3.39zm.78 3.54v-.08l.04.04-.04.04z\"})})})})}),/*#__PURE__*/_jsx(\"div\",{tabIndex:-1,children:/*#__PURE__*/_jsx(\"div\",{className:styles.playerWrapper,children:/*#__PURE__*/_jsx(Manager,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(SyncSettings,{}),/*#__PURE__*/_jsx(SyncClipProgress,{}),/*#__PURE__*/_jsx(ErrorModal,{}),/*#__PURE__*/_jsx(ActionOverlay,{}),/*#__PURE__*/_jsx(Captions,{}),/*#__PURE__*/_jsx(BufferingIndicator,{}),/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(KeyboardShortcuts,{}),/*#__PURE__*/_jsx(CommandLayer,{}),/*#__PURE__*/_jsx(Video,{}),/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",bottom:0,right:0,left:0},children:[/*#__PURE__*/_jsx(ProgressBar,{}),/*#__PURE__*/_jsx(ControlBar,{})]})]})})})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.courseLayoutNav,children:/*#__PURE__*/_jsx(\"div\",{className:styles.courseLayoutNavContent,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.navNavigation,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.navHeader,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.courseTitleSection,children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.courseTitle,children:/*#__PURE__*/_jsx(\"a\",{className:styles.courseTitleLink,children:course.title})}),/*#__PURE__*/_jsx(\"h2\",{className:styles.courseSubTitle,children:course.headline})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{role:\"tablist\",tabIndex:0,className:styles.tabList,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.tabListHeader,children:[/*#__PURE__*/_jsx(\"button\",{tabIndex:-1,className:classNames(styles.navTab,styles.navTabItem),children:/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,className:styles.navTabItemCss,children:[/*#__PURE__*/_jsx(\"div\",{tabIndex:-1,className:styles.nestedCss,children:\"Table of Contents\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.tableContentBackground})]})}),/*#__PURE__*/_jsx(\"button\",{className:classNames(styles.navTab,styles.navTabItem),children:/*#__PURE__*/_jsxs(\"div\",{tabIndex:-1,className:styles.navTabItemCss,children:[/*#__PURE__*/_jsx(\"div\",{tabIndex:-1,className:styles.nestedCss,children:\"Notes\"}),/*#__PURE__*/_jsx(\"span\",{className:styles.notesBackground})]})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.navContent,children:/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",className:styles.navTabPanel,children:course.sections&&course.sections.map(function(section,index){return/*#__PURE__*/_jsx(Lecture,{position:index,section:section,views:views},section.id);})})})]})})})]})});};export default CoursePlayer;","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/index.tsx"],"names":["styles","Manager","useEffect","useState","useAppDispatch","Container","ActionOverlay","ControlBar","ProgressBar","Header","CommandLayer","BufferingIndicator","Video","SyncSettings","SyncClipProgress","Captions","ErrorModal","KeyboardShortcuts","classNames","Lecture","selectLocationPayload","selectLocationQuery","useAppSelector","_","selectPlayerCourse","setCurrentUrl","setTitle","setClipId","setCurrentLecture","setCurrentViews","selectAnalytics","usePlayer","useFetchPlayerCourseQuery","useFetchCourseViewsQuery","CoursePlayer","toggle","setToggle","locationPayload","dispatch","locationQuery","selectedViews","selectedCourse","id","courseQuery","data","viewsQuery","player","course","setCourse","map","view","lecture","views","setViews","title","lectures","sections","flatMap","sec","currentLecture","find","lec","video","key","clipid","uniq","baseUrl","next","courseLayout","navCollapse","coursePlayerLayout","navToggleButtonContainer","navToggle","navToggleSvg","playerWrapper","position","bottom","right","left","courseLayoutNav","courseLayoutNavContent","navNavigation","navHeader","courseTitleSection","courseTitle","courseTitleLink","courseSubTitle","headline","tabList","tabListHeader","navTab","navTabItem","navTabItemCss","nestedCss","tableContentBackground","notesBackground","navContent","navTabPanel","section","index"],"mappings":"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","sourcesContent":["import styles from \"./styles.module.css\";\nimport Manager from \"./Manager\";\nimport { useEffect, useState } from \"react\";\nimport { useAppDispatch } from \"store/hooks\";\nimport Container from \"./Container\";\nimport ActionOverlay from \"./Overlay\";\nimport ControlBar from \"./control-bar/control-bar\";\nimport ProgressBar from \"./progress-bar/progress-bar\";\nimport Header from \"./header/header\";\nimport CommandLayer from \"./command-layer/command-layer\";\nimport BufferingIndicator from \"./buffering-indicator/buffering-indicator\";\nimport Video from \"./video/video\";\nimport SyncSettings from \"./sync-settings/sync-settings\";\nimport SyncClipProgress from \"./sync-clip-progress/sync-clip-progress\";\nimport Captions from \"./captions/captions\";\nimport ErrorModal from \"./error-modal/error-modal\";\nimport KeyboardShortcuts from \"./keyboard-shortcuts/keyboard-shortcuts\";\nimport classNames from \"classnames\";\nimport { Lecture } from \"./contentItem/lecture\";\nimport { selectLocationPayload, selectLocationQuery } from \"state/location/selectors\";\nimport { useAppSelector } from \"store/hooks\";\nimport _ from 'lodash';\nimport { selectPlayerCourse, setCurrentUrl, setTitle, setClipId, setCurrentLecture, setCurrentViews } from \"state/player/playerSlice\";\nimport { selectAnalytics } from \"state/course/courseSplice\";\nimport { usePlayer } from \"store/usePlayer\";\nimport { CoursePlayerResponse, useFetchPlayerCourseQuery, useFetchViewsQuery, useFetchCourseViewsQuery, VideoAnalytics } from \"services/courses\";\n\nconst CoursePlayer = () => {\n  const [toggle, setToggle] = useState(false);\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const dispatch = useAppDispatch()\n  const locationQuery = useAppSelector(selectLocationQuery)\n  const selectedViews = useAppSelector(selectAnalytics)\n  const selectedCourse = useAppSelector(selectPlayerCourse)\n  const { data: courseQuery } = useFetchPlayerCourseQuery(locationPayload.id)\n  const { data: viewsQuery } = useFetchCourseViewsQuery()\n  const { player } = usePlayer()\n  const [course, setCourse] = useState<CoursePlayerResponse>();\n  const [views, setViews] = useState(selectedViews ? selectedViews.map((view: VideoAnalytics) => view.lecture) : [])\n\n  useEffect(() => {\n    if (selectedCourse) {\n      setCourse(selectedCourse)\n      dispatch(setTitle(selectedCourse.title))\n      const lectures = selectedCourse.sections?.flatMap(sec => sec.lectures)\n      if(lectures) {\n        const currentLecture = lectures?.find(lec => lec.video?.key == locationQuery?.clipid)\n        if(currentLecture) dispatch(setCurrentLecture(currentLecture))\n      }\n    }\n\n  }, [selectedCourse])\n\n  useEffect(() => {\n    if (selectedViews) {\n      const views = _.uniq(selectedViews.map((view: VideoAnalytics) => view.lecture))\n      dispatch(setCurrentViews(selectedViews))\n    \n      setViews(views)\n    }\n\n  }, [selectedViews])\n\n  useEffect(() => {\n    if (locationQuery) {\n      const baseUrl = `https://cdn.filestackcontent.com/${locationQuery.clipid}`;\n\n      dispatch(setCurrentUrl(baseUrl))\n      dispatch(setClipId(locationQuery.clipid))\n    }\n  }, [locationQuery])\n\n  if (!course) return null;\n\n  return (\n    <div className={styles.next}>\n      <div\n        className={classNames(styles.courseLayout, {\n          [styles.navCollapse]: toggle,\n        })}\n      >\n        <div className={styles.coursePlayerLayout}>\n          <div className={styles.navToggleButtonContainer}>\n            <button\n              className={styles.navToggle}\n              onClick={() => {\n                setToggle(!toggle);\n              }}\n            >\n              <span>\n                <svg\n                  className={styles.navToggleSvg}\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24px\"\n                  height=\"24px\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M2 17.02h17.33v2H2zM2 11.06h15.49v2H2zM18.55 2.52L17.2 3.98l1.16 1.08H2v2h16.4L17.35 8.2l1.46 1.37L22.2 5.9l-3.64-3.39zm.78 3.54v-.08l.04.04-.04.04z\"></path>\n                </svg>\n              </span>\n            </button>\n          </div>\n          <div tabIndex={-1}>\n            <div className={styles.playerWrapper}>\n              <Manager>\n                <Container>\n                  <SyncSettings />\n                  <SyncClipProgress />\n                  <ErrorModal />\n                  <ActionOverlay />\n                  <Captions />\n                  <BufferingIndicator />\n                  <Header />\n                  <KeyboardShortcuts />\n                  <CommandLayer />\n                  <Video />\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      bottom: 0,\n                      right: 0,\n                      left: 0,\n                    }}\n                  >\n                    <ProgressBar />\n                    <ControlBar />\n                  </div>\n                </Container>\n              </Manager>\n            </div>\n          </div>\n        </div>\n        <div className={styles.courseLayoutNav}>\n          <div className={styles.courseLayoutNavContent}>\n            <div className={styles.navNavigation}>\n              <div className={styles.navHeader}>\n                <div className={styles.courseTitleSection}>\n                  <h1 className={styles.courseTitle}>\n                    <a className={styles.courseTitleLink}>\n                      {course.title}\n                    </a>\n                  </h1>\n                  <h2 className={styles.courseSubTitle}>\n                    {course.headline}\n                  </h2>\n                </div>\n                <div>\n                  <div role={\"tablist\"} tabIndex={0} className={styles.tabList}>\n                    <div className={styles.tabListHeader}>\n                      <button\n                        tabIndex={-1}\n                        className={classNames(styles.navTab, styles.navTabItem)}\n                      >\n                        <div tabIndex={-1} className={styles.navTabItemCss}>\n                          <div tabIndex={-1} className={styles.nestedCss}>\n                            Table of Contents\n                          </div>\n                          <span\n                            className={styles.tableContentBackground}\n                          ></span>\n                        </div>\n                      </button>\n                      <button\n                        className={classNames(styles.navTab, styles.navTabItem)}\n                      >\n                        <div tabIndex={-1} className={styles.navTabItemCss}>\n                          <div tabIndex={-1} className={styles.nestedCss}>\n                            Notes\n                          </div>\n                          <span className={styles.notesBackground}></span>\n                        </div>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className={styles.navContent}>\n                <div role={\"tabpanel\"} className={styles.navTabPanel}>\n\n                  {course.sections && course.sections.map((section, index) =>\n                    <Lecture key={section.id} position={index} section={section} views={views} />)}\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CoursePlayer;\n"]},"metadata":{},"sourceType":"module"}
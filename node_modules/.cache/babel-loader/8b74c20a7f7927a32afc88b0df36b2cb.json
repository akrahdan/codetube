{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/Sidebar/ManageSidebar.tsx\",\n    _s = $RefreshSig$();\n\n// import { NavLink } from \"react-router-dom\";\nimport { selectLocationPathName, selectLocationPayload } from \"state/location/selectors\";\nimport { selectCourse } from \"state/course/courseSplice\";\nimport { selectSections } from \"state/curriculum/currriculumSplice\";\nimport { useFetchCourseQuery, useFetchPricingQuery, useSubmitReviewMutation, useFetchSectionsQuery } from \"services/courses\";\nimport { useAlert } from \"react-alert\";\nimport { useAppSelector } from \"store/hooks\";\nimport { selectPricing } from \"state/course/courseSplice\";\nimport { selectExperience, selectGoals, selectRequirements } from \"state/target/targetSplice\";\nimport { useEffect, useState } from \"react\";\nimport { NavLink } from \"redux-first-router-link\";\nimport classNames from \"classnames\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ManageSidebar = ({\n  courseId\n}) => {\n  _s();\n\n  const locationPayload = useAppSelector(selectLocationPayload);\n  const locationType = useAppSelector(selectLocationPathName);\n  const selectedExperience = useAppSelector(selectExperience);\n  const selectedGoals = useAppSelector(selectGoals);\n  const selectedRequirements = useAppSelector(selectRequirements);\n  const [active, setActive] = useState(locationType);\n  const course = useAppSelector(selectCourse);\n  const selectedSections = useAppSelector(selectSections);\n  const pricing = useAppSelector(selectPricing);\n  const alert = useAlert();\n  const [courseUpdate, setCourseUpdate] = useState(course);\n  const [price, setPrice] = useState(pricing);\n  const [review, setReview] = useState(false);\n  const [experience, setExperience] = useState(selectedExperience);\n  const [goals, setGoals] = useState(selectedGoals);\n  const [requirements, setRequirements] = useState(selectedRequirements);\n  const {\n    data: courseQuery\n  } = useFetchCourseQuery(locationPayload.id);\n  const {\n    data: sectionsQuery\n  } = useFetchSectionsQuery(locationPayload.id);\n  const {\n    data: pricingQuery\n  } = useFetchPricingQuery(locationPayload.id);\n  const [submitReview] = useSubmitReviewMutation();\n  const [sections, setSections] = useState();\n  const [clips, setClips] = useState();\n  const [duration, setDuration] = useState(0);\n  useEffect(() => {\n    setActive(locationType);\n  }, [locationType]);\n  useEffect(() => {\n    setCourseUpdate(course || courseQuery); //setSections(course?.s)\n  }, [course, courseQuery]);\n  useEffect(() => {\n    setSections(selectedSections);\n    const lectures = selectedSections === null || selectedSections === void 0 ? void 0 : selectedSections.flatMap(sec => sec === null || sec === void 0 ? void 0 : sec.lectures);\n\n    if (lectures && (lectures === null || lectures === void 0 ? void 0 : lectures.length)) {\n      const clips = lectures === null || lectures === void 0 ? void 0 : lectures.flatMap(lecture => lecture === null || lecture === void 0 ? void 0 : lecture.video_url);\n      console.log('Clips');\n      setClips(clips);\n    }\n  }, [selectedSections]);\n  useEffect(() => {\n    setPrice(pricing);\n  }, [pricing]);\n  useEffect(() => {\n    setExperience(selectedExperience);\n    setRequirements(selectedRequirements);\n    setGoals(selectedGoals);\n  }, [selectedExperience, selectedGoals, selectedRequirements]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app--nav--QVTHS\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"side-nav--side-nav--h8FTL\",\n      \"data-purpose\": \"side-menu\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav-collapse\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          id: \"menu-base\",\n          className: \"nav-collapse__toggle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"menu-base\",\n          \"data-type\": \"button\",\n          className: \"nav-collapse__toggle-btn btn btn-tertiary\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"cfi cfi-reorder\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nav-container\",\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"nav-steps nav nav-tabs nav-stacked\",\n            children: [/*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"active sub-nav\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"sub-nav__title\",\n                children: \"Plan your course\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"nav-container\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"nav\",\n                  children: /*#__PURE__*/_jsxDEV(\"li\", {\n                    role: \"presentation\",\n                    className: classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/goals`,\n                      'checked': experience && experience.filter(item => item.name).length && goals && goals.filter(item => item.name).length && requirements && requirements.filter(item => item.name).length\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(NavLink, {\n                      to: `/instructor/course/${courseId}/manage/goals`,\n                      children: \"Target your students\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 105,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 99,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"active sub-nav\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"sub-nav__title\",\n                children: \"Create your content\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"nav-container\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"nav\",\n                  children: /*#__PURE__*/_jsxDEV(\"li\", {\n                    role: \"presentation\",\n                    className: classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/curriculum`,\n                      'checked': (clips === null || clips === void 0 ? void 0 : clips.length) > 4\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(NavLink, {\n                      to: `/instructor/course/${courseId}/manage/curriculum`,\n                      children: \"Curriculum\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 117,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"active sub-nav\",\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                className: \"sub-nav__title\",\n                children: \"Publish your course\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"nav-container\",\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  className: \"nav\",\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    role: \"presentation\",\n                    className: classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/basics`,\n                      'checked': courseUpdate && Object.keys(courseUpdate).every(k => courseUpdate[k])\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(NavLink, {\n                      to: `/instructor/course/${courseId}/manage/basics`,\n                      children: \"Course landing page\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 140,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    role: \"presentation\",\n                    className: classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/pricing`,\n                      'checked': price && price.amount && price.currency\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(NavLink, {\n                      to: `/instructor/course/${courseId}/manage/pricing`,\n                      children: \"Pricing\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 151,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    role: \"presentation\",\n                    className: classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/messages`\n                    }),\n                    children: /*#__PURE__*/_jsxDEV(NavLink, {\n                      to: `/instructor/course/${courseId}/manage/messages`,\n                      children: \"Course messages\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 162,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 159,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"side-nav--publish-button--yW0v1\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setReview(!review);\n            submitReview({\n              id: locationPayload.id,\n              state: 'PENDING'\n            }).then(res => {\n              console.log(res.data);\n              setReview(false);\n\n              if (res.data && res.data.state == \"LIVE\") {\n                alert.show(\"Congratulations! Your course is now published on Codefluent\");\n              }\n            });\n          },\n          type: \"button\",\n          className: \"btn btn-lg btn-primary\",\n          children: \"Submit for Review\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), review && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fxc popup-backdrop\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        \"aria-label\": \"Loading\",\n        className: \"text-white cfi-large cfi cfi-circle-loader\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ManageSidebar, \"cwbuGQA5vQDuB17Mgz9YMTs8Tuc=\", false, function () {\n  return [useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAlert, useFetchCourseQuery, useFetchSectionsQuery, useFetchPricingQuery, useSubmitReviewMutation];\n});\n\n_c = ManageSidebar;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageSidebar\");","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/Sidebar/ManageSidebar.tsx"],"names":["selectLocationPathName","selectLocationPayload","selectCourse","selectSections","useFetchCourseQuery","useFetchPricingQuery","useSubmitReviewMutation","useFetchSectionsQuery","useAlert","useAppSelector","selectPricing","selectExperience","selectGoals","selectRequirements","useEffect","useState","NavLink","classNames","ManageSidebar","courseId","locationPayload","locationType","selectedExperience","selectedGoals","selectedRequirements","active","setActive","course","selectedSections","pricing","alert","courseUpdate","setCourseUpdate","price","setPrice","review","setReview","experience","setExperience","goals","setGoals","requirements","setRequirements","data","courseQuery","id","sectionsQuery","pricingQuery","submitReview","sections","setSections","clips","setClips","duration","setDuration","lectures","flatMap","sec","length","lecture","video_url","console","log","filter","item","name","Object","keys","every","k","amount","currency","state","then","res","show"],"mappings":"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","sourcesContent":["// import { NavLink } from \"react-router-dom\";\n\nimport { selectLocationPathName, selectLocationPayload } from \"state/location/selectors\";\nimport { selectCourse } from \"state/course/courseSplice\";\nimport { selectSections } from \"state/curriculum/currriculumSplice\";\nimport {Section, useFetchCourseQuery, useFetchPricingQuery, useSubmitReviewMutation, useFetchSectionsQuery } from \"services/courses\";\nimport type { Review } from \"services/courses\";\nimport { useAlert } from \"react-alert\";\nimport type { CourseResponse, Requirement, Experience, Goal } from \"services/courses\";\n\nimport { useAppSelector } from \"store/hooks\";\nimport { selectPricing } from \"state/course/courseSplice\";\nimport { selectExperience, selectGoals, selectRequirements } from \"state/target/targetSplice\";\nimport { useEffect, useState } from \"react\";\nimport { NavLink } from \"redux-first-router-link\";\nimport * as paths from \"portal/state/location/paths\";\nimport classNames from \"classnames\";\nexport const ManageSidebar = ({ courseId }) => {\n\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const locationType = useAppSelector(selectLocationPathName)\n  const selectedExperience = useAppSelector(selectExperience)\n  const selectedGoals = useAppSelector(selectGoals)\n  const selectedRequirements = useAppSelector(selectRequirements)\n\n  const [active, setActive] = useState(locationType);\n  const course = useAppSelector(selectCourse)\n  const selectedSections = useAppSelector(selectSections)\n  const pricing = useAppSelector(selectPricing)\n  const alert = useAlert()\n  const [courseUpdate, setCourseUpdate] = useState<CourseResponse>(course)\n  const [price, setPrice] = useState(pricing)\n  const [review, setReview] = useState(false)\n  const [experience, setExperience] = useState<Experience[]>(selectedExperience)\n  const [goals, setGoals] = useState<Goal[]>(selectedGoals)\n  const [requirements, setRequirements] = useState<Requirement[]>(selectedRequirements)\n  const { data: courseQuery } = useFetchCourseQuery(locationPayload.id)\n  const { data: sectionsQuery } = useFetchSectionsQuery(locationPayload.id)\n  const { data: pricingQuery } = useFetchPricingQuery(locationPayload.id)\n  const [submitReview] = useSubmitReviewMutation()\n  const [sections, setSections] = useState<Section[]>()\n  const [clips, setClips] = useState<String[]>()\n  const [duration, setDuration ] = useState(0)\n\n  useEffect(() => {\n    \n    setActive(locationType)\n  }, [locationType])\n  useEffect(() => {\n    setCourseUpdate(course || courseQuery)\n\n    //setSections(course?.s)\n  }, [course, courseQuery])\n\n  useEffect(() => {\n      setSections(selectedSections)\n      const  lectures = selectedSections?.flatMap(sec => sec?.lectures)\n      if(lectures && lectures?.length) {\n\n        const clips = lectures?.flatMap(lecture => lecture?.video_url)\n        console.log('Clips', )\n        setClips(clips)\n\n      }\n\n  }, [selectedSections])\n\n  useEffect(() => {\n    setPrice(pricing)\n  }, [pricing])\n\n  useEffect(() => {\n    setExperience(selectedExperience)\n    setRequirements(selectedRequirements)\n    setGoals(selectedGoals)\n  }, [selectedExperience, selectedGoals, selectedRequirements])\n\n  return (\n    <div className=\"app--nav--QVTHS\">\n      <div className=\"side-nav--side-nav--h8FTL\" data-purpose=\"side-menu\">\n        <div className=\"nav-collapse\">\n          <input\n            type=\"checkbox\"\n            id=\"menu-base\"\n            className=\"nav-collapse__toggle\"\n          />\n          <label\n            htmlFor=\"menu-base\"\n            data-type=\"button\"\n            className=\"nav-collapse__toggle-btn btn btn-tertiary\"\n          >\n            <span className=\"cfi cfi-reorder\" />\n          </label>\n          <div className=\"nav-container\">\n            <ul className=\"nav-steps nav nav-tabs nav-stacked\">\n              <li className=\"active sub-nav\">\n                <strong className=\"sub-nav__title\">Plan your course</strong>\n                <div className=\"nav-container\">\n                  <ul className=\"nav\">\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/goals`,\n                      'checked': experience && experience.filter(item => item.name).length && goals\n                        && goals.filter(item => item.name).length && requirements && requirements.filter(item => item.name).length\n                    })}>\n                      <NavLink\n                        to={`/instructor/course/${courseId}/manage/goals`}\n                      >\n                        Target your students\n                      </NavLink>\n                    </li>\n                  </ul>\n                </div>\n              </li>\n              <li className=\"active sub-nav\">\n                <strong className=\"sub-nav__title\">Create your content</strong>\n                <div className=\"nav-container\">\n                  <ul className=\"nav\">\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/curriculum`,\n                      'checked': clips?.length > 4\n                    })}>\n                      <NavLink\n\n                        to={`/instructor/course/${courseId}/manage/curriculum`}\n                      >\n                        Curriculum\n                      </NavLink>\n                    </li>\n                  </ul>\n                </div>\n              </li>\n              <li className=\"active sub-nav\">\n                <strong className=\"sub-nav__title\">Publish your course</strong>\n                <div className=\"nav-container\">\n                  <ul className=\"nav\">\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/basics`,\n                      'checked': courseUpdate && Object.keys(courseUpdate).every((k) => courseUpdate[k])\n                    })}>\n                      <NavLink\n\n                        to={`/instructor/course/${courseId}/manage/basics`}\n                      >\n                        Course landing page\n                      </NavLink>\n                    </li>\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/pricing`,\n                      'checked': price && price.amount && price.currency\n                    })}>\n                      <NavLink\n\n                        to={`/instructor/course/${courseId}/manage/pricing`}\n                      >\n                        Pricing\n                      </NavLink>\n                    </li>\n\n                    <li role=\"presentation\" className={classNames({\n                      'active': active == `/instructor/course/${courseId}/manage/messages`\n                    })}>\n                      <NavLink\n\n                        to={`/instructor/course/${courseId}/manage/messages`}\n                      >\n                        Course messages\n                      </NavLink>\n                    </li>\n                  </ul>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div className=\"side-nav--publish-button--yW0v1\">\n          <button onClick={() => {\n            setReview(!review)\n\n            submitReview({\n              id: locationPayload.id,\n              state: 'PENDING'\n            \n            }).then((res: { data: Review}) => {\n              console.log(res.data)\n              setReview(false)\n             \n              if(res.data && res.data.state == \"LIVE\") {\n                alert.show(\"Congratulations! Your course is now published on Codefluent\")\n              }\n            })\n          }\n          } type=\"button\" className=\"btn btn-lg btn-primary\">\n            Submit for Review\n          </button>\n          <div />\n        </div>\n      </div>\n      {review && (<div className=\"fxc popup-backdrop\">\n        <span\n          aria-label=\"Loading\"\n          className=\"text-white cfi-large cfi cfi-circle-loader\"\n        />\n      </div>)}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
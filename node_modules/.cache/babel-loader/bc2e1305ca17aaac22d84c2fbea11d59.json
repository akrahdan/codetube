{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/akrah/Documents/dev/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import{pxRem}from'@codecademy/gamut-styles';import styled from'@emotion/styled';import React,{useState}from'react';import{useIsomorphicLayoutEffect}from'react-use';import{BASE_STATIC_ASSET_PATH}from'../../remoteAssets/components';import{jsx as _jsx}from\"react/jsx-runtime\";var StyledImg=styled.img(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: block;\\n  margin: 0 auto;\\n  width: \",\";\\n\"])),pxRem(160));var getPlaceholderAssetPath=function getPlaceholderAssetPath(pathProgressState){var progressState=pathProgressState?\"-\".concat(pathProgressState):'';return\"\".concat(BASE_STATIC_ASSET_PATH,\"/curriculum/path/placeholder\").concat(progressState,\".svg\");};export var Image=function Image(_ref){var image=_ref.image,progressState=_ref.progressState;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),ready=_useState2[0],setReady=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];/** Delay initial render once to ensure that rehydration does not conflict with portal mounting */useIsomorphicLayoutEffect(function(){setReady(typeof document!=='undefined');},[]);if(!ready)return null;var addDefaultImageSource=function addDefaultImageSource(event){if(!error){event.target.onerror=null;event.target.src=getPlaceholderAssetPath(progressState);setError(true);}};return/*#__PURE__*/_jsx(StyledImg,{src:image,alt:\"\",onError:addDefaultImageSource});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/codefluent/src/components/gamut-overrides/CurriculumCard/Image/index.tsx"],"names":["pxRem","styled","React","useState","useIsomorphicLayoutEffect","BASE_STATIC_ASSET_PATH","StyledImg","img","getPlaceholderAssetPath","pathProgressState","progressState","Image","image","ready","setReady","error","setError","document","addDefaultImageSource","event","target","onerror","src"],"mappings":"4VAAA,OAASA,KAAT,KAAsB,0BAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,yBAAT,KAA0C,WAA1C,CAEA,OAASC,sBAAT,KAAuC,+BAAvC,C,2CAEA,GAAMC,CAAAA,SAAS,CAAGL,MAAM,CAACM,GAAV,wHAGJP,KAAK,CAAC,GAAD,CAHD,CAAf,CAQA,GAAMQ,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACC,iBAAD,CAAuC,CACrE,GAAMC,CAAAA,aAAa,CAAGD,iBAAiB,YAAOA,iBAAP,EAA6B,EAApE,CACA,gBAAUJ,sBAAV,wCAA+DK,aAA/D,SACD,CAHD,CAUA,MAAO,IAAMC,CAAAA,KAA2B,CAAG,QAA9BA,CAAAA,KAA8B,MAA8B,IAA3BC,CAAAA,KAA2B,MAA3BA,KAA2B,CAApBF,aAAoB,MAApBA,aAAoB,eAC7CP,QAAQ,CAAC,KAAD,CADqC,wCAChEU,KADgE,eACzDC,QADyD,8BAE7CX,QAAQ,CAAC,KAAD,CAFqC,yCAEhEY,KAFgE,eAEzDC,QAFyD,eAIvE,kGACAZ,yBAAyB,CAAC,UAAM,CAC9BU,QAAQ,CAAC,MAAOG,CAAAA,QAAP,GAAoB,WAArB,CAAR,CACD,CAFwB,CAEtB,EAFsB,CAAzB,CAIA,GAAI,CAACJ,KAAL,CAAY,MAAO,KAAP,CAEZ,GAAMK,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACC,KAAD,CAAiC,CAC7D,GAAI,CAACJ,KAAL,CAAY,CACTI,KAAK,CAACC,MAAP,CAAmCC,OAAnC,CAA6C,IAA7C,CACCF,KAAK,CAACC,MAAP,CAAmCE,GAAnC,CAAyCd,uBAAuB,CAC9DE,aAD8D,CAAhE,CAGAM,QAAQ,CAAC,IAAD,CAAR,CACD,CACF,CARD,CAUA,mBAAO,KAAC,SAAD,EAAW,GAAG,CAAEJ,KAAhB,CAAuB,GAAG,CAAC,EAA3B,CAA8B,OAAO,CAAEM,qBAAvC,EAAP,CACD,CAtBM","sourcesContent":["import { pxRem } from '@codecademy/gamut-styles';\nimport styled from '@emotion/styled';\nimport React, { useState } from 'react';\nimport { useIsomorphicLayoutEffect } from 'react-use';\n\nimport { BASE_STATIC_ASSET_PATH } from '../../remoteAssets/components';\n\nconst StyledImg = styled.img`\n  display: block;\n  margin: 0 auto;\n  width: ${pxRem(160)};\n`;\n\ntype ProgressState = 'inProgress' | 'completed';\n\nconst getPlaceholderAssetPath = (pathProgressState?: ProgressState) => {\n  const progressState = pathProgressState ? `-${pathProgressState}` : '';\n  return `${BASE_STATIC_ASSET_PATH}/curriculum/path/placeholder${progressState}.svg`;\n};\n\nexport type ImageProps = {\n  image: string;\n  progressState?: ProgressState;\n};\n\nexport const Image: React.FC<ImageProps> = ({ image, progressState }) => {\n  const [ready, setReady] = useState(false);\n  const [error, setError] = useState(false);\n\n  /** Delay initial render once to ensure that rehydration does not conflict with portal mounting */\n  useIsomorphicLayoutEffect(() => {\n    setReady(typeof document !== 'undefined');\n  }, []);\n\n  if (!ready) return null;\n\n  const addDefaultImageSource = (event: React.SyntheticEvent) => {\n    if (!error) {\n      (event.target as HTMLImageElement).onerror = null;\n      (event.target as HTMLImageElement).src = getPlaceholderAssetPath(\n        progressState\n      );\n      setError(true);\n    }\n  };\n\n  return <StyledImg src={image} alt=\"\" onError={addDefaultImageSource} />;\n};\n"]},"metadata":{},"sourceType":"module"}
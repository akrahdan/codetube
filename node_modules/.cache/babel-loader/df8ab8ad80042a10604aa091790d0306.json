{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck = require(\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EmojiActor = void 0;\n\nvar range_1 = require(\"./range\");\n\nvar utils_1 = require(\"./utils\");\n/**\r\n * Pixel distance out of the screen bounds to treat actors as out-of-bounds.\r\n */\n\n\nvar outOfBounds = 350;\n/**\r\n * Contains the position state and DOM element for a single displayed emoji.\r\n *\r\n * @remarks\r\n * This creates and keeps a single DOM element span in the DOM.\r\n * Text content for the span is determined by the provided actors.\r\n *\r\n * On each game tick, this actor will:\r\n *  1. Dispose itself if it's moved past out of the game screen\r\n *  2. Reduce opacity a little bit\r\n *  3. Dispose itself if it's no longer visible at all\r\n *  4. Adjust position and velocity as per its physics constants\r\n *  5. Update the DOM element's opacity and position to reflect those changes\r\n *\r\n * \"Disposing\" an actor means removing its element from the document.\r\n */\n\nvar EmojiActor = /*#__PURE__*/function () {\n  function EmojiActor(settings) {\n    _classCallCheck(this, EmojiActor);\n\n    /**\r\n     * CSS opacity style, starting at 1 for fully visible.\r\n     */\n    this.opacity = 1;\n    this.element = document.createElement(settings.tagName);\n    this.element.className = settings.className;\n    this.element.style.transition = \"16ms opacity, 16ms transform\";\n    this.element.textContent = utils_1.randomArrayMember(settings.emojis); // https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/accessible-emoji.md\n\n    this.element.setAttribute(\"aria-label\", \"Random emoji\");\n    this.element.setAttribute(\"role\", \"img\");\n    this.element.style.fontSize = \"\".concat(range_1.randomInRange(settings.physics.fontSize), \"px\");\n    this.physics = settings.physics;\n    this.position = {\n      rotation: range_1.randomInRange(settings.physics.rotation),\n      x: settings.position.x,\n      y: settings.position.y\n    };\n    this.velocity = {\n      rotation: range_1.randomInRange(settings.physics.initialVelocities.rotation),\n      x: range_1.randomInRange(settings.physics.initialVelocities.x),\n      y: range_1.randomInRange(settings.physics.initialVelocities.y)\n    };\n    this.updateElement();\n    settings.process(this.element);\n    settings.container.appendChild(this.element);\n  }\n  /**\r\n   * Moves the actor forward one tick.\r\n   *\r\n   * @param timeElapsed   How many milliseconds have passed since the last action.\r\n   * @returns Whether this is now dead.\r\n   */\n\n\n  _createClass(EmojiActor, [{\n    key: \"act\",\n    value: function act(timeElapsed) {\n      if (this.physics.opacityDecay) {\n        this.opacity -= timeElapsed / (this.physics.opacityDecay * this.physics.framerate);\n\n        if (this.opacity <= 0) {\n          return true;\n        }\n      }\n\n      this.velocity.rotation *= this.physics.rotationDeceleration;\n      this.velocity.y += this.physics.gravity;\n      this.position.rotation += this.velocity.rotation;\n      this.position.x += this.velocity.x * timeElapsed / this.physics.framerate;\n      this.position.y += this.velocity.y * timeElapsed / this.physics.framerate;\n      var windowHeight = window.outerHeight || document.documentElement.clientHeight;\n      var windowWidth = window.outerWidth || document.documentElement.clientWidth;\n\n      if (!this.physics.preserveOutOfBounds) {\n        if (this.position.y - this.element.clientHeight > windowHeight + outOfBounds) {\n          return true;\n        }\n\n        if (this.position.y + this.element.clientHeight < -outOfBounds) {\n          return true;\n        }\n\n        if (this.position.x - this.element.clientWidth > windowWidth + outOfBounds) {\n          return true;\n        }\n\n        if (this.position.x + this.element.clientWidth < -outOfBounds) {\n          return true;\n        }\n      }\n\n      this.updateElement();\n      return false;\n    }\n    /**\r\n     * Disposes of the attached DOM element upon actor death.\r\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.element.parentElement !== null) {\n        this.element.parentElement.removeChild(this.element);\n      }\n    }\n    /**\r\n     * Updates the attached DOM element to match tracking position.\r\n     */\n\n  }, {\n    key: \"updateElement\",\n    value: function updateElement() {\n      this.element.style.opacity = \"\".concat(this.opacity);\n      this.element.style.transform = \"translate(\".concat(this.position.x, \"px, \").concat(this.position.y, \"px) rotate(\").concat(Math.round(this.position.rotation), \"deg)\");\n    }\n  }]);\n\n  return EmojiActor;\n}();\n\nexports.EmojiActor = EmojiActor;","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/emojisplosion/src/actor.js"],"names":["Object","defineProperty","exports","value","EmojiActor","range_1","require","utils_1","outOfBounds","settings","opacity","element","document","createElement","tagName","className","style","transition","textContent","randomArrayMember","emojis","setAttribute","fontSize","randomInRange","physics","position","rotation","x","y","velocity","initialVelocities","updateElement","process","container","appendChild","timeElapsed","opacityDecay","framerate","rotationDeceleration","gravity","windowHeight","window","outerHeight","documentElement","clientHeight","windowWidth","outerWidth","clientWidth","preserveOutOfBounds","parentElement","removeChild","transform","Math","round"],"mappings":"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","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmojiActor = void 0;\r\nconst range_1 = require(\"./range\");\r\nconst utils_1 = require(\"./utils\");\r\n/**\r\n * Pixel distance out of the screen bounds to treat actors as out-of-bounds.\r\n */\r\nconst outOfBounds = 350;\r\n/**\r\n * Contains the position state and DOM element for a single displayed emoji.\r\n *\r\n * @remarks\r\n * This creates and keeps a single DOM element span in the DOM.\r\n * Text content for the span is determined by the provided actors.\r\n *\r\n * On each game tick, this actor will:\r\n *  1. Dispose itself if it's moved past out of the game screen\r\n *  2. Reduce opacity a little bit\r\n *  3. Dispose itself if it's no longer visible at all\r\n *  4. Adjust position and velocity as per its physics constants\r\n *  5. Update the DOM element's opacity and position to reflect those changes\r\n *\r\n * \"Disposing\" an actor means removing its element from the document.\r\n */\r\nclass EmojiActor {\r\n    constructor(settings) {\r\n        /**\r\n         * CSS opacity style, starting at 1 for fully visible.\r\n         */\r\n        this.opacity = 1;\r\n        this.element = document.createElement(settings.tagName);\r\n        this.element.className = settings.className;\r\n        this.element.style.transition = \"16ms opacity, 16ms transform\";\r\n        this.element.textContent = utils_1.randomArrayMember(settings.emojis);\r\n        // https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/accessible-emoji.md\r\n        this.element.setAttribute(\"aria-label\", \"Random emoji\");\r\n        this.element.setAttribute(\"role\", \"img\");\r\n        this.element.style.fontSize = `${range_1.randomInRange(settings.physics.fontSize)}px`;\r\n        this.physics = settings.physics;\r\n        this.position = {\r\n            rotation: range_1.randomInRange(settings.physics.rotation),\r\n            x: settings.position.x,\r\n            y: settings.position.y,\r\n        };\r\n        this.velocity = {\r\n            rotation: range_1.randomInRange(settings.physics.initialVelocities.rotation),\r\n            x: range_1.randomInRange(settings.physics.initialVelocities.x),\r\n            y: range_1.randomInRange(settings.physics.initialVelocities.y),\r\n        };\r\n        this.updateElement();\r\n        settings.process(this.element);\r\n        settings.container.appendChild(this.element);\r\n    }\r\n    /**\r\n     * Moves the actor forward one tick.\r\n     *\r\n     * @param timeElapsed   How many milliseconds have passed since the last action.\r\n     * @returns Whether this is now dead.\r\n     */\r\n    act(timeElapsed) {\r\n        if (this.physics.opacityDecay) {\r\n            this.opacity -= timeElapsed / (this.physics.opacityDecay * this.physics.framerate);\r\n            if (this.opacity <= 0) {\r\n                return true;\r\n            }\r\n        }\r\n        this.velocity.rotation *= this.physics.rotationDeceleration;\r\n        this.velocity.y += this.physics.gravity;\r\n        this.position.rotation += this.velocity.rotation;\r\n        this.position.x += this.velocity.x * timeElapsed / this.physics.framerate;\r\n        this.position.y += this.velocity.y * timeElapsed / this.physics.framerate;\r\n        const windowHeight = window.outerHeight || document.documentElement.clientHeight;\r\n        const windowWidth = window.outerWidth || document.documentElement.clientWidth;\r\n        if (!this.physics.preserveOutOfBounds) {\r\n            if (this.position.y - this.element.clientHeight >\r\n                windowHeight + outOfBounds) {\r\n                return true;\r\n            }\r\n            if (this.position.y + this.element.clientHeight < -outOfBounds) {\r\n                return true;\r\n            }\r\n            if (this.position.x - this.element.clientWidth >\r\n                windowWidth + outOfBounds) {\r\n                return true;\r\n            }\r\n            if (this.position.x + this.element.clientWidth < -outOfBounds) {\r\n                return true;\r\n            }\r\n        }\r\n        this.updateElement();\r\n        return false;\r\n    }\r\n    /**\r\n     * Disposes of the attached DOM element upon actor death.\r\n     */\r\n    dispose() {\r\n        if (this.element.parentElement !== null) {\r\n            this.element.parentElement.removeChild(this.element);\r\n        }\r\n    }\r\n    /**\r\n     * Updates the attached DOM element to match tracking position.\r\n     */\r\n    updateElement() {\r\n        this.element.style.opacity = `${this.opacity}`;\r\n        this.element.style.transform = `translate(${this.position.x}px, ${this.position.y}px) rotate(${Math.round(this.position.rotation)}deg)`;\r\n    }\r\n}\r\nexports.EmojiActor = EmojiActor;\r\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"import React from 'react';\nimport { useCombinedRefs } from '../use-combined-refs';\nexport var searchListItem = function searchListItem(el, down) {\n  if (down === void 0) {\n    down = true;\n  }\n\n  if (!el) return;\n  var isDisabled = el.hasAttribute('[data-disabled]');\n  var isListItem = el.tagName === 'LI';\n  if (isListItem && !isDisabled) return el;\n  var nextEl = down ? el.nextElementSibling : el.previousElementSibling;\n  return searchListItem(nextEl, down);\n};\n\nvar rightArrow = function rightArrow(evt) {\n  var target = evt.target;\n  var subMenu = target.querySelector('* > ul');\n  if (!subMenu) return;\n  var firstElementChild = subMenu.firstElementChild;\n  var firstChild = searchListItem(firstElementChild);\n  if (!firstChild) return;\n  firstChild.focus();\n};\n\nvar leftArrow = function leftArrow(evt) {\n  var _a;\n\n  var target = evt.target;\n  var atMenuRoot = target.parentNode === evt.currentTarget;\n  if (atMenuRoot) return;\n  target.blur();\n  var parent = (_a = target.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement;\n  if (!parent) return;\n  parent.focus();\n};\n\nvar downArrow = function downArrow(evt) {\n  var _a;\n\n  var target = evt.target;\n  var nextEl = target.nextElementSibling;\n  var nextSibling = searchListItem(nextEl);\n  var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n  var firstChild = searchListItem(firstChildEl);\n  if (nextSibling) nextSibling.focus();else if (firstChild) firstChild.focus();\n};\n\nvar upArrow = function upArrow(evt) {\n  var _a;\n\n  var target = evt.target;\n  var prevEl = target.previousElementSibling;\n  var prevSibling = searchListItem(prevEl, false);\n  var lastEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n  var lastChild = searchListItem(lastEl, false);\n  if (prevSibling) prevSibling.focus();else if (lastChild) lastChild.focus();\n};\n\nvar home = function home(evt) {\n  var _a;\n\n  var target = evt.target;\n  var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n  var firstChild = searchListItem(firstChildEl);\n  if (firstChild) firstChild.focus();\n};\n\nvar end = function end(evt) {\n  var _a;\n\n  var target = evt.target;\n  var lastChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n  var lastChild = searchListItem(lastChildEl, false);\n  if (lastChild) lastChild.focus();\n};\n\nvar startsWith = function startsWith(el, key) {\n  if (el && typeof el.innerText === 'string') {\n    return el.innerText.startsWith(key) || el.innerText.startsWith(key.toUpperCase());\n  }\n\n  return false;\n};\n\nvar character = function character(evt) {\n  var _a;\n\n  var target = evt.target;\n  var char = evt.key.length === 1 ? evt.key : false;\n  if (!char) return;\n  var nextSiblingEl = target.nextElementSibling;\n  var firstParentChild = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n  var sibling = searchListItem(nextSiblingEl) || searchListItem(firstParentChild);\n  var siblings = [];\n\n  while (sibling) {\n    if (sibling === target) break;\n    var nextSiblingsSiblingEl = sibling.nextElementSibling;\n    siblings.push(sibling);\n    sibling = searchListItem(nextSiblingsSiblingEl) || searchListItem(firstParentChild);\n  }\n\n  for (var _i = 0, siblings_1 = siblings; _i < siblings_1.length; _i++) {\n    var el = siblings_1[_i];\n\n    if (startsWith(el, char)) {\n      el.focus();\n      break;\n    }\n  }\n};\n\nexport var handleMenuKeyDownEvents = function handleMenuKeyDownEvents(synthetic) {\n  var evt = synthetic.nativeEvent;\n  evt.key === 'ArrowDown' ? downArrow(evt) : evt.key === 'ArrowUp' ? upArrow(evt) : evt.key === 'Home' ? home(evt) : evt.key === 'End' ? end(evt) : character(evt);\n  evt.preventDefault();\n};\nexport var handleMenuKeyUpEvents = function handleMenuKeyUpEvents(synthetic) {\n  var evt = synthetic.nativeEvent;\n  evt.key === 'ArrowRight' && rightArrow(evt);\n  evt.key === 'ArrowLeft' && leftArrow(evt);\n  evt.preventDefault();\n};\nexport var useMenuRef = function useMenuRef(focus) {\n  if (focus === void 0) {\n    focus = false;\n  }\n\n  var outer = React.createRef();\n  var inner = React.useCallback(function (node) {\n    if (node && focus) {\n      var firstMenuItem = searchListItem(node.firstElementChild);\n      firstMenuItem && firstMenuItem.focus();\n    }\n  }, [focus]);\n  return useCombinedRefs(outer, inner);\n};","map":{"version":3,"sources":["../../../src/menu-keys/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React from 'react';\nimport { useCombinedRefs } from '../use-combined-refs';\nexport var searchListItem = function (el, down) {\n    if (down === void 0) { down = true; }\n    if (!el)\n        return;\n    var isDisabled = el.hasAttribute('[data-disabled]');\n    var isListItem = el.tagName === 'LI';\n    if (isListItem && !isDisabled)\n        return el;\n    var nextEl = down ? el.nextElementSibling : el.previousElementSibling;\n    return searchListItem(nextEl, down);\n};\nvar rightArrow = function (evt) {\n    var target = evt.target;\n    var subMenu = target.querySelector('* > ul');\n    if (!subMenu)\n        return;\n    var firstElementChild = subMenu.firstElementChild;\n    var firstChild = searchListItem(firstElementChild);\n    if (!firstChild)\n        return;\n    firstChild.focus();\n};\nvar leftArrow = function (evt) {\n    var _a;\n    var target = evt.target;\n    var atMenuRoot = target.parentNode === evt.currentTarget;\n    if (atMenuRoot)\n        return;\n    target.blur();\n    var parent = (_a = target.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement;\n    if (!parent)\n        return;\n    parent.focus();\n};\nvar downArrow = function (evt) {\n    var _a;\n    var target = evt.target;\n    var nextEl = target.nextElementSibling;\n    var nextSibling = searchListItem(nextEl);\n    var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    var firstChild = searchListItem(firstChildEl);\n    if (nextSibling)\n        nextSibling.focus();\n    else if (firstChild)\n        firstChild.focus();\n};\nvar upArrow = function (evt) {\n    var _a;\n    var target = evt.target;\n    var prevEl = target.previousElementSibling;\n    var prevSibling = searchListItem(prevEl, false);\n    var lastEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n    var lastChild = searchListItem(lastEl, false);\n    if (prevSibling)\n        prevSibling.focus();\n    else if (lastChild)\n        lastChild.focus();\n};\nvar home = function (evt) {\n    var _a;\n    var target = evt.target;\n    var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    var firstChild = searchListItem(firstChildEl);\n    if (firstChild)\n        firstChild.focus();\n};\nvar end = function (evt) {\n    var _a;\n    var target = evt.target;\n    var lastChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n    var lastChild = searchListItem(lastChildEl, false);\n    if (lastChild)\n        lastChild.focus();\n};\nvar startsWith = function (el, key) {\n    if (el && typeof el.innerText === 'string') {\n        return (el.innerText.startsWith(key) || el.innerText.startsWith(key.toUpperCase()));\n    }\n    return false;\n};\nvar character = function (evt) {\n    var _a;\n    var target = evt.target;\n    var char = evt.key.length === 1 ? evt.key : false;\n    if (!char)\n        return;\n    var nextSiblingEl = target.nextElementSibling;\n    var firstParentChild = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    var sibling = searchListItem(nextSiblingEl) || searchListItem(firstParentChild);\n    var siblings = [];\n    while (sibling) {\n        if (sibling === target)\n            break;\n        var nextSiblingsSiblingEl = sibling.nextElementSibling;\n        siblings.push(sibling);\n        sibling =\n            searchListItem(nextSiblingsSiblingEl) || searchListItem(firstParentChild);\n    }\n    for (var _i = 0, siblings_1 = siblings; _i < siblings_1.length; _i++) {\n        var el = siblings_1[_i];\n        if (startsWith(el, char)) {\n            el.focus();\n            break;\n        }\n    }\n};\nexport var handleMenuKeyDownEvents = function (synthetic) {\n    var evt = synthetic.nativeEvent;\n    evt.key === 'ArrowDown'\n        ? downArrow(evt)\n        : evt.key === 'ArrowUp'\n            ? upArrow(evt)\n            : evt.key === 'Home'\n                ? home(evt)\n                : evt.key === 'End'\n                    ? end(evt)\n                    : character(evt);\n    evt.preventDefault();\n};\nexport var handleMenuKeyUpEvents = function (synthetic) {\n    var evt = synthetic.nativeEvent;\n    evt.key === 'ArrowRight' && rightArrow(evt);\n    evt.key === 'ArrowLeft' && leftArrow(evt);\n    evt.preventDefault();\n};\nexport var useMenuRef = function (focus) {\n    if (focus === void 0) { focus = false; }\n    var outer = React.createRef();\n    var inner = React.useCallback(function (node) {\n        if (node && focus) {\n            var firstMenuItem = searchListItem(node.firstElementChild);\n            firstMenuItem && firstMenuItem.focus();\n        }\n    }, [focus]);\n    return useCombinedRefs(outer, inner);\n};\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}
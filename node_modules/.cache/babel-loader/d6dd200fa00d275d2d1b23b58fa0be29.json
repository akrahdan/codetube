{"ast":null,"code":"import{createApi,fetchBaseQuery}from\"@reduxjs/toolkit/query/react\";import cookie from\"react-cookies\";export var authApi=createApi({baseQuery:fetchBaseQuery({baseUrl:\"/\",prepareHeaders:function prepareHeaders(headers){var csrfToken=cookie.load(\"csrftoken\");if(csrfToken){headers.set(\"X-CSRFToken\",csrfToken);}headers.set(\"Content-Type\",\"application/json\");return headers;}}),tagTypes:[\"Login\",\"Signup\",\"Logout\"],endpoints:function endpoints(build){return{login:build.mutation({query:function query(body){return{url:\"rest-auth/login/\",method:\"POST\",body:body,responseHandler:function responseHandler(response){return response.json();}};}}),signup:build.mutation({query:function query(body){return{url:\"rest-auth/registration/\",method:\"POST\",body:body,responseHandler:function responseHandler(response){return response.json();}};}}),logout:build.mutation({query:function query(body){return{url:\"rest-auth/logout/\",method:\"POST\",body:body,responseHandler:function responseHandler(response){return response.json();}};}})};}});var useLoginMutation=authApi.useLoginMutation,useSignupMutation=authApi.useSignupMutation,useLogoutMutation=authApi.useLogoutMutation;export{useLoginMutation,useSignupMutation,useLogoutMutation};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/services/auth.ts"],"names":["createApi","fetchBaseQuery","cookie","authApi","baseQuery","baseUrl","prepareHeaders","headers","csrfToken","load","set","tagTypes","endpoints","build","login","mutation","query","body","url","method","responseHandler","response","json","signup","logout","useLoginMutation","useSignupMutation","useLogoutMutation"],"mappings":"AAAA,OAASA,SAAT,CAAoBC,cAApB,KAA0C,8BAA1C,CAEA,MAAOC,CAAAA,MAAP,KAAmB,eAAnB,CAoBA,MAAO,IAAMC,CAAAA,OAAO,CAAGH,SAAS,CAAC,CAC/BI,SAAS,CAAEH,cAAc,CAAC,CACxBI,OAAO,CAAE,GADe,CAExBC,cAAc,CAAE,wBAACC,OAAD,CAAa,CAC3B,GAAMC,CAAAA,SAAS,CAAGN,MAAM,CAACO,IAAP,CAAY,WAAZ,CAAlB,CACA,GAAID,SAAJ,CAAe,CACbD,OAAO,CAACG,GAAR,CAAY,aAAZ,CAA2BF,SAA3B,EAED,CACDD,OAAO,CAACG,GAAR,CAAY,cAAZ,CAA4B,kBAA5B,EAEA,MAAOH,CAAAA,OAAP,CACD,CAXuB,CAAD,CADM,CAc/BI,QAAQ,CAAE,CAAC,OAAD,CAAU,QAAV,CAAoB,QAApB,CAdqB,CAe/BC,SAAS,CAAE,mBAACC,KAAD,QAAY,CACrBC,KAAK,CAAED,KAAK,CAACE,QAAN,CAAsC,CAC3CC,KAAK,CAAE,eAACC,IAAD,QAAW,CAChBC,GAAG,CAAE,kBADW,CAEhBC,MAAM,CAAE,MAFQ,CAGhBF,IAAI,CAAJA,IAHgB,CAIhBG,eAAe,CAAE,yBAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAJD,CAAX,EADoC,CAAtC,CADc,CASrBC,MAAM,CAAEV,KAAK,CAACE,QAAN,CAAwC,CAC9CC,KAAK,CAAE,eAACC,IAAD,QAAW,CAChBC,GAAG,CAAE,yBADW,CAEhBC,MAAM,CAAE,MAFQ,CAGhBF,IAAI,CAAJA,IAHgB,CAIhBG,eAAe,CAAE,yBAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAJD,CAAX,EADuC,CAAxC,CATa,CAiBrBE,MAAM,CAAEX,KAAK,CAACE,QAAN,CAAwC,CAC9CC,KAAK,CAAE,eAACC,IAAD,QAAW,CAChBC,GAAG,CAAE,mBADW,CAEhBC,MAAM,CAAE,MAFQ,CAGhBF,IAAI,CAAJA,IAHgB,CAIhBG,eAAe,CAAE,yBAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAJD,CAAX,EADuC,CAAxC,CAjBa,CAAZ,EAfoB,CAAD,CAAzB,C,GA2CQG,CAAAA,gB,CAA2DtB,O,CAA3DsB,gB,CAAkBC,iB,CAAyCvB,O,CAAzCuB,iB,CAAmBC,iB,CAAsBxB,O,CAAtBwB,iB","sourcesContent":["import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\nimport { head } from \"lodash\";\nimport cookie from \"react-cookies\";\n\nexport interface Login {\n  login: string;\n  password: string;\n}\n\nexport interface Signup {\n  email: string;\n  username: string;\n  password1: string;\n  password2: string;\n  csrfmiddlewaretoken:string;\n}\n\nexport interface Logout {\n \n  csrfmiddlewaretoken:string;\n}\n\nexport const authApi = createApi({\n  baseQuery: fetchBaseQuery({\n    baseUrl: \"/\",\n    prepareHeaders: (headers) => {\n      const csrfToken = cookie.load(\"csrftoken\");\n      if (csrfToken) {\n        headers.set(\"X-CSRFToken\", csrfToken);\n        \n      }\n      headers.set(\"Content-Type\", \"application/json\");\n\n      return headers;\n    },\n  }),\n  tagTypes: [\"Login\", \"Signup\", \"Logout\"],\n  endpoints: (build) => ({\n    login: build.mutation<Login, Partial<Login>>({\n      query: (body) => ({\n        url: \"rest-auth/login/\",\n        method: \"POST\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    signup: build.mutation<Signup, Partial<Signup>>({\n      query: (body) => ({\n        url: \"rest-auth/registration/\",\n        method: \"POST\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    logout: build.mutation<Logout, Partial<Logout>>({\n      query: (body) => ({\n        url: \"rest-auth/logout/\",\n        method: \"POST\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n  }),\n});\n\nexport const { useLoginMutation, useSignupMutation, useLogoutMutation } = authApi;\n"]},"metadata":{},"sourceType":"module"}
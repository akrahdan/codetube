{"ast":null,"code":"export function getClipProgressFromLocalStorage(){var clipProgress=localStorage.getItem('ps-embeddable-player-clip-progress')||'[]';return JSON.parse(clipProgress);}export function getClipProgressById(clipProgress,clipId){var _clipProgress$find;return clipProgress&&((_clipProgress$find=clipProgress.find(function(clipProg){return clipProg.clipId===clipId;}))===null||_clipProgress$find===void 0?void 0:_clipProgress$find.videoSecondsWatched)||0;}function isNearEnd(videoSecondsWatched,clipDuration){return clipDuration-videoSecondsWatched<=5;}export function buildClipProgress(oldClipProgress,newClipProgress,duration){var clipProgress=oldClipProgress.filter(function(clipProg){return clipProg.clipId!==newClipProgress.clipId;});if(!isNearEnd(newClipProgress.videoSecondsWatched,duration)){clipProgress.push(newClipProgress);}while(clipProgress.length>50){clipProgress.shift();}return clipProgress;}export function setClipProgress(newClipProgress){localStorage.setItem('ps-embeddable-player-clip-progress',JSON.stringify(newClipProgress));}","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/utilities/sync-clip-progress.js"],"names":["getClipProgressFromLocalStorage","clipProgress","localStorage","getItem","JSON","parse","getClipProgressById","clipId","find","clipProg","videoSecondsWatched","isNearEnd","clipDuration","buildClipProgress","oldClipProgress","newClipProgress","duration","filter","push","length","shift","setClipProgress","setItem","stringify"],"mappings":"AAAA,MAAO,SAASA,CAAAA,+BAAT,EAA2C,CAC9C,GAAMC,CAAAA,YAAY,CAAGC,YAAY,CAACC,OAAb,CAAqB,oCAArB,GAA8D,IAAnF,CACA,MAAOC,CAAAA,IAAI,CAACC,KAAL,CAAWJ,YAAX,CAAP,CACH,CAED,MAAO,SAASK,CAAAA,mBAAT,CAA6BL,YAA7B,CAA2CM,MAA3C,CAAmD,wBACtD,MAAON,CAAAA,YAAY,uBAAIA,YAAY,CAACO,IAAb,CAAkB,SAAAC,QAAQ,QAAIA,CAAAA,QAAQ,CAACF,MAAT,GAAoBA,MAAxB,EAA1B,CAAJ,6CAAI,mBAA2DG,mBAA/D,CAAZ,EAAkG,CAAzG,CACH,CAED,QAASC,CAAAA,SAAT,CAAmBD,mBAAnB,CAAwCE,YAAxC,CAAsD,CAClD,MAAOA,CAAAA,YAAY,CAAGF,mBAAf,EAAsC,CAA7C,CACH,CAED,MAAO,SAASG,CAAAA,iBAAT,CAA2BC,eAA3B,CAA4CC,eAA5C,CAA6DC,QAA7D,CAAuE,CAC1E,GAAMf,CAAAA,YAAY,CAAGa,eAAe,CAACG,MAAhB,CAAuB,SAAAR,QAAQ,QAAIA,CAAAA,QAAQ,CAACF,MAAT,GAAoBQ,eAAe,CAACR,MAAxC,EAA/B,CAArB,CACA,GAAI,CAACI,SAAS,CAACI,eAAe,CAACL,mBAAjB,CAAsCM,QAAtC,CAAd,CAA+D,CAC3Df,YAAY,CAACiB,IAAb,CAAkBH,eAAlB,EACH,CAED,MAAOd,YAAY,CAACkB,MAAb,CAAsB,EAA7B,EAAiClB,YAAY,CAACmB,KAAb,GAAjC,CACA,MAAOnB,CAAAA,YAAP,CACH,CAED,MAAO,SAASoB,CAAAA,eAAT,CAAyBN,eAAzB,CAA0C,CAC7Cb,YAAY,CAACoB,OAAb,CAAqB,oCAArB,CAA2DlB,IAAI,CAACmB,SAAL,CAAeR,eAAf,CAA3D,EACH","sourcesContent":["export function getClipProgressFromLocalStorage() {\n    const clipProgress = localStorage.getItem('ps-embeddable-player-clip-progress') || '[]'\n    return JSON.parse(clipProgress)\n}\n\nexport function getClipProgressById(clipProgress, clipId) {\n    return clipProgress && clipProgress.find(clipProg => clipProg.clipId === clipId)?.videoSecondsWatched || 0\n}\n\nfunction isNearEnd(videoSecondsWatched, clipDuration) {\n    return clipDuration - videoSecondsWatched <= 5\n}\n\nexport function buildClipProgress(oldClipProgress, newClipProgress, duration) {\n    const clipProgress = oldClipProgress.filter(clipProg => clipProg.clipId !== newClipProgress.clipId)\n    if (!isNearEnd(newClipProgress.videoSecondsWatched, duration)) {\n        clipProgress.push(newClipProgress)\n    }\n\n    while (clipProgress.length > 50) clipProgress.shift()\n    return clipProgress\n}\n\nexport function setClipProgress(newClipProgress) {\n    localStorage.setItem('ps-embeddable-player-clip-progress', JSON.stringify(newClipProgress))\n}"]},"metadata":{},"sourceType":"module"}
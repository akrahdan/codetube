{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/Curriculum/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCreateSectionMutation, useEditSectionMutation, useCreateResourceMutation } from 'services/courses';\nimport classNames from 'classnames';\nimport { selectSections } from 'state/curriculum/currriculumSplice';\nimport { useFetchSectionsQuery } from 'services/courses';\nimport { useAppSelector } from 'store/hooks';\nimport { selectLocationPayload } from 'state/location/selectors';\nimport { PickerOverlay } from 'filestack-react';\nimport \"./styles.scss\";\nimport styles from '../Landing/style.module.scss';\nimport { Section } from \"./Section\";\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Curriculum = () => {\n  _s();\n\n  const [pickerOpen, setPickerOpen] = useState(false);\n  const [createSection, {\n    isLoading\n  }] = useCreateSectionMutation();\n  const [createResource] = useCreateResourceMutation();\n  const [editSection] = useEditSectionMutation();\n  const selectedSections = useAppSelector(selectSections);\n  const locationPayload = useAppSelector(selectLocationPayload);\n  const {\n    data: querySections\n  } = useFetchSectionsQuery(locationPayload.id);\n  const [sections, setSections] = useState(selectedSections);\n\n  const onUploadSuccess = results => {\n    const data = results.filesUploaded;\n    data && Array.from(data).forEach(async file => {\n      const media = {\n        name: file.filename,\n        filetype: file.mimetype,\n        size: file.size,\n        key: file.handle,\n        course: locationPayload.id\n      };\n\n      try {\n        const result = createResource(media);\n      } catch (err) {\n        console.log(err);\n      }\n    });\n  };\n\n  const onClose = event => {\n    setPickerOpen(false);\n  };\n\n  useEffect(() => {\n    setSections(selectedSections);\n    console.log('SelectedSections', selectedSections);\n  }, [selectedSections]);\n\n  if (isLoading || !sections || sections.length == 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ud-app-loader\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sub-header--wrapper--3Vunm\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sub-header--main-content--22it3\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            \"data-purpose\": \"page-title\",\n            className: \"font-heading-serif-xl sub-header--title--2VD8q\",\n            children: \"Course landing page\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content--wrap_component--2TEkz\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classNames(\"cfi-medium\", \"cfi\", \"cfi-circle-loader\", styles.loader)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [pickerOpen && /*#__PURE__*/_jsxDEV(PickerOverlay, {\n      apikey: \"AVBagqtWmRWyWVqWas0m9z\",\n      onSuccess: onUploadSuccess,\n      pickerOptions: {\n        onClose,\n        maxFiles: 20\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sub-header--wrapper--3Vunm\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sub-header--main-content--22it3\",\n          children: /*#__PURE__*/_jsxDEV(\"h2\", {\n            \"data-purpose\": \"page-title\",\n            className: \"font-heading-serif-xl sub-header--title--2VD8q\",\n            children: \"Curriculum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sub-header--actions--1Nblj\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPickerOpen(!pickerOpen),\n              type: \"button\",\n              className: \"btn-bulk-uploader btn btn-default\",\n              children: \"Bulk Uploader\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-content--wrap_component--2TEkz\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"curriculum-editor--alert-container--zgMwN\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pb20\",\n            children: \"Start putting together your course by creating sections, lectures and practice (quizzes, coding exercises and assignments).\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-purpose\": \"free-course-message\",\n            children: \"If you\\u2019re intending to offer your course for free, the total length of video content must be less than 2 hours.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: sections.map((section, index) => /*#__PURE__*/_jsxDEV(Section, {\n              editSection: value => {\n                editSection({\n                  id: section.id,\n                  description: value.description,\n                  title: value.title,\n                  course: locationPayload.id\n                });\n              },\n              index: index,\n              sectionResult: section,\n              addSection: value => {\n                createSection({\n                  title: value.title,\n                  description: value.description,\n                  course: locationPayload.id,\n                  position: value.position,\n                  neighbor: section.id || null\n                });\n              }\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 49\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Curriculum, \"m2RVS2pa5sGxUZf7JW9fgcB7cSU=\", false, function () {\n  return [useCreateSectionMutation, useCreateResourceMutation, useEditSectionMutation, useAppSelector, useAppSelector, useFetchSectionsQuery];\n});\n\n_c = Curriculum;\nexport default Curriculum;\n\nvar _c;\n\n$RefreshReg$(_c, \"Curriculum\");","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/Curriculum/index.tsx"],"names":["useCreateSectionMutation","useEditSectionMutation","useCreateResourceMutation","classNames","selectSections","useFetchSectionsQuery","useAppSelector","selectLocationPayload","PickerOverlay","styles","Section","useEffect","useState","Curriculum","pickerOpen","setPickerOpen","createSection","isLoading","createResource","editSection","selectedSections","locationPayload","data","querySections","id","sections","setSections","onUploadSuccess","results","filesUploaded","Array","from","forEach","file","media","name","filename","filetype","mimetype","size","key","handle","course","result","err","console","log","onClose","event","length","loader","maxFiles","map","section","index","value","description","title","position","neighbor"],"mappings":"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","sourcesContent":["import { useCreateSectionMutation, useEditSectionMutation,\n   useCreateResourceMutation, useFetchResourcesQuery } from 'services/courses';\nimport classNames from 'classnames';\nimport { selectSections } from 'state/curriculum/currriculumSplice';\nimport { useFetchSectionsQuery } from 'services/courses';\nimport { useAppSelector } from 'store/hooks';\nimport { selectLocationPayload } from 'state/location/selectors';\nimport { PickerOverlay, client } from 'filestack-react';\nimport { PickerResponse } from 'filestack-js';\nimport \"./styles.scss\";\nimport styles from '../Landing/style.module.scss';\nimport { Section } from \"./Section\";\nimport { useEffect, useState } from \"react\";\n\nexport const Curriculum = () => {\n  const [pickerOpen, setPickerOpen] = useState(false)\n  const [createSection, { isLoading }] = useCreateSectionMutation()\n  const [ createResource ] = useCreateResourceMutation()\n  const [editSection] = useEditSectionMutation()\n\n  const selectedSections = useAppSelector(selectSections)\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const { data: querySections } = useFetchSectionsQuery(locationPayload.id)\n\n  const [sections, setSections] = useState(selectedSections)\n\n  const onUploadSuccess = (results: PickerResponse) => {\n    const data = results.filesUploaded\n    data && Array.from(data).forEach( async file => {\n      const media = {\n        name: file.filename,\n        filetype: file.mimetype,\n        size: file.size,\n        key: file.handle,\n        course: locationPayload.id\n      };\n      try {\n       const result = createResource(media)\n      } catch(err) {\n        console.log(err)\n      }\n    })\n  }\n  const onClose = (event) => {\n    setPickerOpen(false)\n  }\n\n\n\n  useEffect(() => {\n    setSections(selectedSections)\n    console.log('SelectedSections', selectedSections)\n  }, [selectedSections])\n\n  if (isLoading || !sections || (sections.length == 0)) {\n\n    return (\n      <div className=\"ud-app-loader\">\n        <div className=\"sub-header--wrapper--3Vunm\">\n          <div className=\"sub-header--main-content--22it3\">\n            <h2\n              data-purpose=\"page-title\"\n              className=\"font-heading-serif-xl sub-header--title--2VD8q\"\n            >\n              Course landing page\n            </h2>\n          </div>\n        </div>\n        <div className=\"main-content--wrap_component--2TEkz\">\n          <form>\n            <div className=\"form-group\">\n              <div className={classNames(\"cfi-medium\", \"cfi\", \"cfi-circle-loader\",\n                styles.loader)}>\n\n              </div>\n            </div>\n          </form>\n\n        </div>\n\n\n      </div>\n    );\n  }\n  return (\n    <>\n      {pickerOpen && <PickerOverlay  apikey=\"AVBagqtWmRWyWVqWas0m9z\"\n        onSuccess={onUploadSuccess}\n        pickerOptions={{\n          onClose,\n          maxFiles: 20\n        }}\n      />}\n      <div>\n        <div className=\"sub-header--wrapper--3Vunm\">\n          <div className=\"sub-header--main-content--22it3\">\n            <h2\n              data-purpose=\"page-title\"\n              className=\"font-heading-serif-xl sub-header--title--2VD8q\"\n            >\n              Curriculum\n            </h2>\n          </div>\n          <div className=\"sub-header--actions--1Nblj\">\n            <div>\n              <button onClick={() => setPickerOpen(!pickerOpen)} type=\"button\" className=\"btn-bulk-uploader btn btn-default\">\n                Bulk Uploader\n              </button>\n            </div>\n          </div>\n        </div>\n        <div className=\"main-content--wrap_component--2TEkz\">\n          <div className=\"curriculum-editor--alert-container--zgMwN\">\n            <div className=\"pb20\">\n              Start putting together your course by creating sections, lectures\n              and practice (quizzes, coding exercises and assignments).\n            </div>\n            <p data-purpose=\"free-course-message\">\n              If youâ€™re intending to offer your course for free, the total length\n              of video content must be less than 2 hours.\n            </p>\n          </div>\n          <div>\n            <ul >\n              {sections.map((section, index) => <Section editSection={value => {\n\n                editSection({\n                  id: section.id,\n                  description: value.description,\n                  title: value.title,\n                  course: locationPayload.id\n                })\n\n              }} key={index} index={index} sectionResult={section} addSection={value => {\n\n                createSection({\n                  title: value.title,\n                  description: value.description,\n                  course: locationPayload.id,\n                  position: value.position,\n                  neighbor: section.id || null\n\n                })\n\n              }} />)}\n\n            </ul>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Curriculum;\n"]},"metadata":{},"sourceType":"module"}
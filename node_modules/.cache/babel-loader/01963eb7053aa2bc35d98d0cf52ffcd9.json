{"ast":null,"code":"import _toConsumableArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{connect}from'react-redux';import classNames from'classnames';import{onResolutionChange,getQualityFromHeight,getQualityAriaLabel,onKeyPressLanguage,onKeyDownLanguage}from'./settings-menu-utils';import{SearchIcon}from'@pluralsight/ps-design-system-icon';import{setActiveMenu as _setActiveMenu,setAutoplay as _setAutoplay,setLoading as _setLoading,setPlaybackSpeed as _setPlaybackSpeed,setCurrentResolution as _setCurrentResolution,setPreferredResolutions as _setPreferredResolutions}from'state/player/playerSlice';import{CaptionLanguages,Menus,InteractionModes,PlaybackSpeedStops}from'../constants';import{displayFeedbackForm}from'../utilities/feedback';import LayeredMenuContainer from'../layered-menu/layered-menu-container';import LayeredMenu from'../layered-menu/layered-menu';import LayeredMenuSubmenu from'../layered-menu/layered-menu-submenu';import LayeredMenuItem from'../layered-menu/layered-menu-item';import css from'./settings-menu.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var getScrollPaneHeight=function getScrollPaneHeight(layout,_ref){var desktopHeight=_ref.desktopHeight,heightToSubtract=_ref.heightToSubtract;heightToSubtract=heightToSubtract||0;switch(layout){case'120p':case'240p':return\"\".concat(96-heightToSubtract,\"px\");case'360p':return\"\".concat(128-heightToSubtract,\"px\");case'480p':return\"\".concat(180-heightToSubtract,\"px\");case'720p':case'1080p':return desktopHeight||\"\".concat(212-heightToSubtract,\"px\");default:return null;}};var SettingsMenu=function SettingsMenu(props){var menuRef=useRef(null);var activeMenu=props.activeMenu,currentResolution=props.currentResolution,closedCaptioningLanguage=props.closedCaptioningLanguage,playbackSpeed=props.playbackSpeed,layout=props.layout,setPlaybackSpeed=props.setPlaybackSpeed,interactionMode=props.interactionMode,setAutoplay=props.setAutoplay,userAutoplaySetting=props.userAutoplaySetting,nextCallback=props.nextCallback,isActive=props.isActive;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),languageFilterString=_useState2[0],setLanguageFilterString=_useState2[1];var _useState3=useState({id:'MAIN',level:0,height:68}),_useState4=_slicedToArray(_useState3,2),activeSettingsMenu=_useState4[0],setActiveSettingsMenu=_useState4[1];var _useState5=useState({QUALITY:'1080p',CAPTIONS:closedCaptioningLanguage&&closedCaptioningLanguage.name,SPEED:'1x'}),_useState6=_slicedToArray(_useState5,2),activeItems=_useState6[0],setActiveItems=_useState6[1];var setActive=function setActive(id,level){var menu=document.getElementById(id);var height=menu&&menu.offsetHeight;setActiveSettingsMenu({id:id,level:level,height:height});};var setActiveItem=function setActiveItem(menu,id){return setActiveItems(_objectSpread(_objectSpread({},activeItems),{},_defineProperty({},menu,id)));};var trapTabs=function trapTabs(e){if(e.which===9){var currentFocus=document.activeElement;var focusableChildren=Array.from(menuRef.current.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), object, embed, *[tabindex], *[contenteditable]'));var focusableCount=focusableChildren.length;var focusedIndex=focusableChildren.indexOf(currentFocus);if(e.shiftKey){if(focusedIndex===0){e.preventDefault();focusableChildren[focusableCount-1].focus();}}else{if(focusedIndex===focusableCount-1){e.preventDefault();focusableChildren[0].focus();}}}};useEffect(function(){setActive('MAIN',0);},[]);useEffect(function(){setActive('MAIN',0);},[activeMenu]);useEffect(function(){menuRef&&menuRef.current.children[0].children[0].children[0].focus();},[isActive]);useEffect(function(){setLanguageFilterString('');},[activeSettingsMenu]);useEffect(function(){closedCaptioningLanguage&&setActiveItem('CAPTIONS',closedCaptioningLanguage.name);},[closedCaptioningLanguage]);useEffect(function(){setActiveItem('SPEED',\"\".concat(playbackSpeed,\"x\"));},[playbackSpeed]);var showPlaybackSpeed=layout==='360p'||layout==='240p'||layout==='120p';var getQualityMenuItems=function getQualityMenuItems(){var supportedResolutions=props.supportedResolutions,currentResolution=props.currentResolution;//console.log('Resolutions: ', currentResolution)\nvar supportedResolves=_toConsumableArray(supportedResolutions);return supportedResolves&&supportedResolves.sort(function(a,b){return b.height-a.height;}).map(function(r,i){var quality=getQualityFromHeight(r.height,props);return/*#__PURE__*/_jsx(LayeredMenuItem,{label:quality,ariaLabel:getQualityAriaLabel(r.height,currentResolution),onClick:function onClick(){setActiveItem('QUALITY',quality);onResolutionChange(r,props);},isActive:currentResolution&&currentResolution.height===r.height},\"\".concat(quality,\"-\").concat(i));});};// const getLanguageMenuItems = () => {\n//   const { closedCaptioningLanguage, setClosedCaptioningLanguage } = props\n//   return CaptionLanguages.filter(language => language.name.toLowerCase().includes(languageFilterString)).map(\n//     language => {\n//       const selected = closedCaptioningLanguage && closedCaptioningLanguage.code === language.code\n//       return (\n//         <LayeredMenuItem\n//           data-testid={`caption-language-${language.code}`}\n//           data-value={language.code}\n//           key={language.code}\n//           onClick={() => {\n//             setClosedCaptioningLanguage && setClosedCaptioningLanguage(language)\n//             language && setActiveItem('CAPTIONS', language.name)\n//           }}\n//           onKeyPress={onKeyPressLanguage(language, props)}\n//           onKeyDown={onKeyDownLanguage(language, props)}\n//           aria-selected={selected}\n//           tabIndex=\"0\"\n//           role=\"radiobutton\"\n//           label={language.name}\n//           isActive={selected}\n//         />\n//       )\n//     }\n//   )\n// }\nvar getPlaybackSpeedItems=function getPlaybackSpeedItems(){return PlaybackSpeedStops.map(function(speed){return/*#__PURE__*/_jsx(LayeredMenuItem,{label:\"\".concat(speed,\"x\"),onClick:function onClick(){setActiveItem('SPEED',\"\".concat(speed,\"x\"));setPlaybackSpeed(speed);},isActive:speed===playbackSpeed},\"\".concat(speed,\"x\"));});};var getIsAutoplayText=function getIsAutoplayText(){return userAutoplaySetting?'On':'Off';};return/*#__PURE__*/_jsx(\"div\",{className:css['settings-menu'],ref:menuRef,tabIndex:\"-1\",onKeyDown:trapTabs,children:/*#__PURE__*/_jsx(LayeredMenuContainer,{hidden:activeMenu!==Menus.SETTINGS,height:activeSettingsMenu.height,children:/*#__PURE__*/_jsxs(LayeredMenu,{id:\"MAIN\",isActive:activeSettingsMenu==='MAIN',activeSettingsMenu:activeSettingsMenu,isUsingKeyboard:interactionMode&&interactionMode===InteractionModes.KEYBOARD,children:[nextCallback&&/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"forward\",label:\"Autoplay:\",onClick:function onClick(){return setActive('AUTOPLAY',1);},selectedSubItem:getIsAutoplayText()}),/*#__PURE__*/_jsxs(LayeredMenuSubmenu,{id:\"AUTOPLAY\",isActive:activeSettingsMenu.id==='AUTOPLAY',ariaLabel:\"select autoplay default\",children:[/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"back\",label:\"Autoplay\",onClick:function onClick(){return setActive('MAIN',0);},ariaLabel:\"back to main menu\"}),/*#__PURE__*/_jsx(LayeredMenuItem,{onClick:function onClick(){return setAutoplay&&setAutoplay(true);},label:\"On\",isActive:userAutoplaySetting}),/*#__PURE__*/_jsx(LayeredMenuItem,{onClick:function onClick(){return setAutoplay&&setAutoplay(false);},label:\"Off\",isActive:!userAutoplaySetting})]}),/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"forward\",label:\"Quality:\",onClick:function onClick(){return setActive('QUALITY',1);},selectedSubItem:getQualityFromHeight(currentResolution&&currentResolution.height,props)}),/*#__PURE__*/_jsxs(LayeredMenuSubmenu,{id:\"QUALITY\",isActive:activeSettingsMenu.id==='QUALITY',children:[/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"back\",label:\"Quality\",onClick:function onClick(){return setActive('MAIN',0);}}),/*#__PURE__*/_jsx(\"div\",{className:css.scrollable,style:{maxHeight:getScrollPaneHeight(layout,{desktopHeight:'auto'})},\"aria-label\":\"set quality\",role:\"list\",children:getQualityMenuItems()})]}),/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"forward\",label:\"Captions:\",onClick:function onClick(){return setActive('CAPTIONS',1);},selectedSubItem:activeItems&&activeItems.CAPTIONS}),/*#__PURE__*/_jsxs(LayeredMenuSubmenu,{id:\"CAPTIONS\",isActive:activeSettingsMenu.id==='CAPTIONS',ariaLabel:\"select caption language\",children:[/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"back\",label:\"Captions\",onClick:function onClick(){return setActive('MAIN',0);},ariaLabel:\"back to captions menu\"}),/*#__PURE__*/_jsxs(\"span\",{className:classNames(css['searchbox']),children:[/*#__PURE__*/_jsx(SearchIcon,{size:SearchIcon.sizes.small}),/*#__PURE__*/_jsx(\"input\",{name:\"caption-language-searchbox\",className:css['searchbox__input'],\"data-testid\":\"searchbox-input\",\"aria-label\":\"Search caption languages\",placeholder:\"Search\",onChange:function onChange(e){return setLanguageFilterString(e.target.value.toLowerCase());},value:languageFilterString,onTouchEnd:function onTouchEnd(e){return e.stopPropagation();},onTouchStart:function onTouchStart(e){return e.stopPropagation();}})]}),/*#__PURE__*/_jsx(\"div\",{className:css.scrollable,style:{height:getScrollPaneHeight(layout,{heightToSubtract:46})},\"aria-label\":\"set caption language\",role:\"list\"})]}),showPlaybackSpeed&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"forward\",label:\"Speed:\",onClick:function onClick(){return setActive('SPEED',1);},selectedSubItem:\"\".concat(playbackSpeed,\"x\")}),/*#__PURE__*/_jsxs(LayeredMenuSubmenu,{id:\"SPEED\",isActive:activeSettingsMenu.id==='SPEED',\"aria-label\":'set playback speed',children:[/*#__PURE__*/_jsx(LayeredMenuItem,{direction:\"back\",label:\"Speed\",onClick:function onClick(){return setActive('MAIN',0);},ariaLabel:\"back to captions menu\"}),/*#__PURE__*/_jsx(\"div\",{className:css.scrollable,style:{maxHeight:getScrollPaneHeight(layout,{})},\"aria-label\":\"set playback speed\",role:\"list\",children:getPlaybackSpeedItems()})]})]})]})})});};export default connect(function(state){var _ref2;return _ref2={activeMenu:state.player.activeMenu,activeSettingsMenu:state.player.activeSettingsMenu,userAutoplaySetting:state.player.userAutoplaySetting,// boundedContext: state.boundedContext,\nbufferedTime:state.player.bufferedTime,// clipId: state.clipId,\n// clipTitle: state.clipTitle,\n// closedCaptioningEnabled: state.closedCaptioningEnabled,\n// closedCaptioningLanguage: state.closedCaptioningLanguage,\ncourseTitle:state.player.courseTitle,currentResolution:state.player.currentResolution,// currentUrlIndex: state.currentUrlIndex,\nduration:state.player.duration,fullscreenState:state.player.fullscreenState,interactionMode:state.player.interactionMode,mediaType:state.player.mediaType,playbackSpeed:state.player.playbackSpeed,playing:state.player.playing,preferredResolutions:state.player.preferredResolutions,resolution:state.player.resolution,// resolutionValue: state.resolutionValue,\n// sessionId: state.sessionId,\nsubtitle:state.player.subtitle,supportedResolutions:state.player.supportedResolutions,time:state.player.time,title:state.player.title,// urls: state.urls,\n// userId: state.userId,\n// versions: state.versions,\nvolume:state.player.volume},_defineProperty(_ref2,\"playbackSpeed\",state.player.playbackSpeed),_defineProperty(_ref2,\"layout\",state.player.layout),_ref2;},function(dispatch){return{setActiveMenu:function setActiveMenu(payload){return dispatch(_setActiveMenu(payload));},setCurrentResolution:function setCurrentResolution(payload){return dispatch(_setCurrentResolution(payload));},setLoading:function setLoading(payload){return dispatch(_setLoading(payload));},setPreferredResolutions:function setPreferredResolutions(payload){return dispatch(_setPreferredResolutions(payload));},setPlaybackSpeed:function setPlaybackSpeed(payload){return dispatch(_setPlaybackSpeed(payload));},setAutoplay:function setAutoplay(payload){return dispatch(_setAutoplay(payload));}};})(SettingsMenu);export{SettingsMenu};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/settings-menu/settings-menu.js"],"names":["React","useState","useEffect","useRef","connect","classNames","onResolutionChange","getQualityFromHeight","getQualityAriaLabel","onKeyPressLanguage","onKeyDownLanguage","SearchIcon","setActiveMenu","setAutoplay","setLoading","setPlaybackSpeed","setCurrentResolution","setPreferredResolutions","CaptionLanguages","Menus","InteractionModes","PlaybackSpeedStops","displayFeedbackForm","LayeredMenuContainer","LayeredMenu","LayeredMenuSubmenu","LayeredMenuItem","css","getScrollPaneHeight","layout","desktopHeight","heightToSubtract","SettingsMenu","props","menuRef","activeMenu","currentResolution","closedCaptioningLanguage","playbackSpeed","interactionMode","userAutoplaySetting","nextCallback","isActive","languageFilterString","setLanguageFilterString","id","level","height","activeSettingsMenu","setActiveSettingsMenu","QUALITY","CAPTIONS","name","SPEED","activeItems","setActiveItems","setActive","menu","document","getElementById","offsetHeight","setActiveItem","trapTabs","e","which","currentFocus","activeElement","focusableChildren","Array","from","current","querySelectorAll","focusableCount","length","focusedIndex","indexOf","shiftKey","preventDefault","focus","children","showPlaybackSpeed","getQualityMenuItems","supportedResolutions","supportedResolves","sort","a","b","map","r","i","quality","getPlaybackSpeedItems","speed","getIsAutoplayText","SETTINGS","KEYBOARD","scrollable","maxHeight","sizes","small","target","value","toLowerCase","stopPropagation","state","player","bufferedTime","courseTitle","duration","fullscreenState","mediaType","playing","preferredResolutions","resolution","subtitle","time","title","volume","dispatch","payload"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport { connect } from 'react-redux'\nimport classNames from 'classnames'\n\nimport {\n  onResolutionChange,\n  getQualityFromHeight,\n  getQualityAriaLabel,\n  onKeyPressLanguage,\n  onKeyDownLanguage,\n} from './settings-menu-utils'\n\nimport { SearchIcon } from '@pluralsight/ps-design-system-icon'\nimport { setActiveMenu, setAutoplay, setLoading, setPlaybackSpeed, setCurrentResolution, setPreferredResolutions } from 'state/player/playerSlice'\nimport { CaptionLanguages, Menus, InteractionModes, PlaybackSpeedStops } from '../constants'\nimport { displayFeedbackForm } from '../utilities/feedback'\nimport LayeredMenuContainer from '../layered-menu/layered-menu-container'\nimport LayeredMenu from '../layered-menu/layered-menu'\nimport LayeredMenuSubmenu from '../layered-menu/layered-menu-submenu'\nimport LayeredMenuItem from '../layered-menu/layered-menu-item'\nimport css from './settings-menu.module.scss'\n\nconst getScrollPaneHeight = (layout, { desktopHeight, heightToSubtract }) => {\n  heightToSubtract = heightToSubtract || 0\n  switch (layout) {\n    case '120p':\n    case '240p':\n      return `${96 - heightToSubtract}px`\n    case '360p':\n      return `${128 - heightToSubtract}px`\n    case '480p':\n      return `${180 - heightToSubtract}px`\n    case '720p':\n    case '1080p':\n      return desktopHeight || `${212 - heightToSubtract}px`\n    default:\n      return null\n  }\n}\n\nconst SettingsMenu = props => {\n  const menuRef = useRef(null)\n  const {\n    activeMenu,\n    currentResolution,\n    closedCaptioningLanguage,\n    playbackSpeed,\n    layout,\n    setPlaybackSpeed,\n    interactionMode,\n    setAutoplay,\n    userAutoplaySetting,\n    nextCallback,\n    isActive,\n  } = props\n\n  const [languageFilterString, setLanguageFilterString] = useState('')\n\n  const [activeSettingsMenu, setActiveSettingsMenu] = useState({ id: 'MAIN', level: 0, height: 68 })\n  const [activeItems, setActiveItems] = useState({\n    QUALITY: '1080p',\n    CAPTIONS: closedCaptioningLanguage && closedCaptioningLanguage.name,\n    SPEED: '1x',\n  })\n\n  const setActive = (id, level) => {\n    const menu = document.getElementById(id)\n    const height = menu && menu.offsetHeight\n    setActiveSettingsMenu({ id, level, height })\n  }\n  const setActiveItem = (menu, id) => setActiveItems({ ...activeItems, [menu]: id })\n\n  const trapTabs = e => {\n    if (e.which === 9) {\n      const currentFocus = document.activeElement\n      const focusableChildren = Array.from(\n        menuRef.current.querySelectorAll(\n          'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), object, embed, *[tabindex], *[contenteditable]'\n        )\n      )\n      const focusableCount = focusableChildren.length\n\n      const focusedIndex = focusableChildren.indexOf(currentFocus)\n      if (e.shiftKey) {\n        if (focusedIndex === 0) {\n          e.preventDefault()\n          focusableChildren[focusableCount - 1].focus()\n        }\n      } else {\n        if (focusedIndex === focusableCount - 1) {\n          e.preventDefault()\n          focusableChildren[0].focus()\n        }\n      }\n    }\n  }\n\n  useEffect(() => {\n    setActive('MAIN', 0)\n  }, [])\n\n  useEffect(() => {\n    setActive('MAIN', 0)\n  }, [activeMenu])\n\n  useEffect(() => {\n    menuRef && menuRef.current.children[0].children[0].children[0].focus()\n  }, [isActive])\n\n  useEffect(() => {\n    setLanguageFilterString('')\n  }, [activeSettingsMenu])\n\n  useEffect(() => {\n    closedCaptioningLanguage && setActiveItem('CAPTIONS', closedCaptioningLanguage.name)\n  }, [closedCaptioningLanguage])\n\n  useEffect(() => {\n    setActiveItem('SPEED', `${playbackSpeed}x`)\n  }, [playbackSpeed])\n\n  const showPlaybackSpeed = layout === '360p' || layout === '240p' || layout === '120p'\n\n  const getQualityMenuItems = () => {\n    const { supportedResolutions, currentResolution } = props\n    //console.log('Resolutions: ', currentResolution)\n    const supportedResolves = [...supportedResolutions]\n    return (\n      supportedResolves &&\n      supportedResolves\n        .sort((a, b) => b.height - a.height)\n        .map((r, i) => {\n          const quality = getQualityFromHeight(r.height, props)\n          return (\n            <LayeredMenuItem\n              key={`${quality}-${i}`}\n              label={quality}\n              ariaLabel={getQualityAriaLabel(r.height, currentResolution)}\n              onClick={() => {\n                setActiveItem('QUALITY', quality)\n                onResolutionChange(r, props)\n              }}\n              isActive={currentResolution && currentResolution.height === r.height}\n            />\n          )\n        })\n    )\n  }\n\n  // const getLanguageMenuItems = () => {\n  //   const { closedCaptioningLanguage, setClosedCaptioningLanguage } = props\n\n  //   return CaptionLanguages.filter(language => language.name.toLowerCase().includes(languageFilterString)).map(\n  //     language => {\n  //       const selected = closedCaptioningLanguage && closedCaptioningLanguage.code === language.code\n  //       return (\n  //         <LayeredMenuItem\n  //           data-testid={`caption-language-${language.code}`}\n  //           data-value={language.code}\n  //           key={language.code}\n  //           onClick={() => {\n  //             setClosedCaptioningLanguage && setClosedCaptioningLanguage(language)\n  //             language && setActiveItem('CAPTIONS', language.name)\n  //           }}\n  //           onKeyPress={onKeyPressLanguage(language, props)}\n  //           onKeyDown={onKeyDownLanguage(language, props)}\n  //           aria-selected={selected}\n  //           tabIndex=\"0\"\n  //           role=\"radiobutton\"\n  //           label={language.name}\n  //           isActive={selected}\n  //         />\n  //       )\n  //     }\n  //   )\n  // }\n\n  const getPlaybackSpeedItems = () => {\n    return PlaybackSpeedStops.map(speed => (\n      <LayeredMenuItem\n        key={`${speed}x`}\n        label={`${speed}x`}\n        onClick={() => {\n          setActiveItem('SPEED', `${speed}x`)\n          setPlaybackSpeed(speed)\n        }}\n        isActive={speed === playbackSpeed}\n      />\n    ))\n  }\n\n  const getIsAutoplayText = () => {\n    return userAutoplaySetting ? 'On' : 'Off'\n  }\n\n  return (\n    <div className={css['settings-menu']} ref={menuRef} tabIndex=\"-1\" onKeyDown={trapTabs}>\n      <LayeredMenuContainer hidden={activeMenu !== Menus.SETTINGS} height={activeSettingsMenu.height}>\n        <LayeredMenu\n          id=\"MAIN\"\n          isActive={activeSettingsMenu === 'MAIN'}\n          activeSettingsMenu={activeSettingsMenu}\n          isUsingKeyboard={interactionMode && interactionMode === InteractionModes.KEYBOARD}\n        >\n          {nextCallback && (\n            <LayeredMenuItem\n              direction=\"forward\"\n              label=\"Autoplay:\"\n              onClick={() => setActive('AUTOPLAY', 1)}\n              selectedSubItem={getIsAutoplayText()}\n            />\n          )}\n          <LayeredMenuSubmenu\n            id=\"AUTOPLAY\"\n            isActive={activeSettingsMenu.id === 'AUTOPLAY'}\n            ariaLabel={`select autoplay default`}\n          >\n            <LayeredMenuItem\n              direction=\"back\"\n              label=\"Autoplay\"\n              onClick={() => setActive('MAIN', 0)}\n              ariaLabel={`back to main menu`}\n            />\n            <LayeredMenuItem\n              onClick={() => setAutoplay && setAutoplay(true)}\n              label={`On`}\n              isActive={userAutoplaySetting}\n            ></LayeredMenuItem>\n            <LayeredMenuItem\n              onClick={() => setAutoplay && setAutoplay(false)}\n              label={`Off`}\n              isActive={!userAutoplaySetting}\n            ></LayeredMenuItem>\n          </LayeredMenuSubmenu>\n\n          <LayeredMenuItem\n            direction=\"forward\"\n            label=\"Quality:\"\n            onClick={() => setActive('QUALITY', 1)}\n            selectedSubItem={getQualityFromHeight(currentResolution && currentResolution.height, props)}\n          />\n          <LayeredMenuSubmenu id=\"QUALITY\" isActive={activeSettingsMenu.id === 'QUALITY'}>\n            <LayeredMenuItem direction=\"back\" label=\"Quality\" onClick={() => setActive('MAIN', 0)} />\n            <div\n              className={css.scrollable}\n              style={{ maxHeight: getScrollPaneHeight(layout, { desktopHeight: 'auto' }) }}\n              aria-label=\"set quality\"\n              role=\"list\"\n            >\n              {getQualityMenuItems()}\n            </div>\n          </LayeredMenuSubmenu>\n\n          <LayeredMenuItem\n            direction=\"forward\"\n            label=\"Captions:\"\n            onClick={() => setActive('CAPTIONS', 1)}\n            selectedSubItem={activeItems && activeItems.CAPTIONS}\n          />\n          <LayeredMenuSubmenu\n            id=\"CAPTIONS\"\n            isActive={activeSettingsMenu.id === 'CAPTIONS'}\n            ariaLabel={`select caption language`}\n          >\n            <LayeredMenuItem\n              direction=\"back\"\n              label=\"Captions\"\n              onClick={() => setActive('MAIN', 0)}\n              ariaLabel={`back to captions menu`}\n            />\n            <span className={classNames(css['searchbox'])}>\n              <SearchIcon size={SearchIcon.sizes.small} />\n              <input\n                name=\"caption-language-searchbox\"\n                className={css['searchbox__input']}\n                data-testid=\"searchbox-input\"\n                aria-label=\"Search caption languages\"\n                placeholder=\"Search\"\n                onChange={e => setLanguageFilterString(e.target.value.toLowerCase())}\n                value={languageFilterString}\n                onTouchEnd={e => e.stopPropagation()}\n                onTouchStart={e => e.stopPropagation()}\n              />\n            </span>\n            <div\n              className={css.scrollable}\n              style={{ height: getScrollPaneHeight(layout, { heightToSubtract: 46 }) }}\n              aria-label=\"set caption language\"\n              role=\"list\"\n            >\n              {/* {getLanguageMenuItems()} */}\n            </div>\n          </LayeredMenuSubmenu>\n          {showPlaybackSpeed && (\n            <>\n              <LayeredMenuItem\n                direction=\"forward\"\n                label=\"Speed:\"\n                onClick={() => setActive('SPEED', 1)}\n                selectedSubItem={`${playbackSpeed}x`}\n              />\n              <LayeredMenuSubmenu\n                id=\"SPEED\"\n                isActive={activeSettingsMenu.id === 'SPEED'}\n                aria-label={'set playback speed'}\n              >\n                <LayeredMenuItem\n                  direction=\"back\"\n                  label=\"Speed\"\n                  onClick={() => setActive('MAIN', 0)}\n                  ariaLabel={`back to captions menu`}\n                />\n                <div\n                  className={css.scrollable}\n                  style={{ maxHeight: getScrollPaneHeight(layout, {}) }}\n                  aria-label=\"set playback speed\"\n                  role=\"list\"\n                >\n                  {getPlaybackSpeedItems()}\n                </div>\n              </LayeredMenuSubmenu>\n            </>\n          )}\n          {/* <LayeredMenuItem onClick={() => displayFeedbackForm(props)} label=\"Send Feedback\" /> */}\n        </LayeredMenu>\n      </LayeredMenuContainer>\n    </div>\n  )\n}\n\nexport default connect(\n  state => ({\n    activeMenu: state.player.activeMenu,\n    activeSettingsMenu: state.player.activeSettingsMenu,\n    userAutoplaySetting: state.player.userAutoplaySetting,\n    // boundedContext: state.boundedContext,\n    bufferedTime: state.player.bufferedTime,\n    // clipId: state.clipId,\n    // clipTitle: state.clipTitle,\n    // closedCaptioningEnabled: state.closedCaptioningEnabled,\n    // closedCaptioningLanguage: state.closedCaptioningLanguage,\n    courseTitle: state.player.courseTitle,\n    currentResolution: state.player.currentResolution,\n    // currentUrlIndex: state.currentUrlIndex,\n    duration: state.player.duration,\n    fullscreenState: state.player.fullscreenState,\n    interactionMode: state.player.interactionMode,\n    mediaType: state.player.mediaType,\n    playbackSpeed: state.player.playbackSpeed,\n    playing: state.player.playing,\n    preferredResolutions: state.player.preferredResolutions,\n    resolution: state.player.resolution,\n    // resolutionValue: state.resolutionValue,\n    // sessionId: state.sessionId,\n    subtitle: state.player.subtitle,\n    supportedResolutions: state.player.supportedResolutions,\n    time: state.player.time,\n    title: state.player.title,\n    // urls: state.urls,\n    // userId: state.userId,\n    // versions: state.versions,\n    volume: state.player.volume,\n    playbackSpeed: state.player.playbackSpeed,\n    layout: state.player.layout,\n    // nextCallback: state.nextCallback,\n  }),\n  dispatch => ({\n    \n    setActiveMenu: payload => dispatch(setActiveMenu(payload)),\n\n    setCurrentResolution: payload => dispatch(setCurrentResolution(payload)),\n    setLoading: payload => dispatch(setLoading(payload)),\n    setPreferredResolutions: payload => dispatch(setPreferredResolutions(payload)),\n    setPlaybackSpeed: payload => dispatch(setPlaybackSpeed(payload)),\n    setAutoplay: payload => dispatch(setAutoplay(payload)),\n  })\n)(SettingsMenu)\n\nexport { SettingsMenu }\n"]},"metadata":{},"sourceType":"module"}
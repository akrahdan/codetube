{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/Manager/index.tsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'unistore/react';\nimport classnames from 'classnames';\nimport { isFullscreen } from '../container/fullscreen-helper';\nimport { FullscreenState, InteractionModes, TOUCH_TIMEOUT_DURATION, MOUSE_TIMEOUT_DURATION } from '../../constants';\nimport * as actions from '../../actions';\nimport { initMousetrap, resetMoustrap } from '../../keyboard/shortcut-keys';\nimport { registerDefaultShortcuts } from '../../keyboard/register-shortcuts';\nimport css from './ui-manager.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class UIManager extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateMediaUI = () => {\n      if (!navigator || !navigator.mediaSession) return;\n      const {\n        title,\n        playing\n      } = this.props;\n      navigator.mediaSession.playbackState = playing ? 'playing' : 'paused';\n      navigator.mediaSession.metadata = new MediaMetadata({\n        title\n      });\n    };\n\n    this.handleGetClip = () => ({\n      clipId: this.props.clipId || null\n    });\n\n    this.handleFullscreenChange = () => {\n      const {\n        setFullscreen\n      } = this.props;\n      const fullscreenState = isFullscreen() ? FullscreenState.FULLSCREEN : FullscreenState.NORMAL;\n      setFullscreen && setFullscreen(fullscreenState);\n    };\n\n    this.handleMouseMove = e => {\n      const {\n        setInteractionMode\n      } = this.props;\n      setInteractionMode(InteractionModes.MOUSE);\n      this.showUI();\n      this.hideUITimeout && clearTimeout(this.hideUITimeout);\n      this.hideUITimeout = setTimeout(this.hideUI, MOUSE_TIMEOUT_DURATION);\n    };\n\n    this.handleMouseEnter = e => {\n      const {\n        setInteractionMode\n      } = this.props;\n      setInteractionMode(InteractionModes.MOUSE);\n      this.showUI();\n    };\n\n    this.handleMouseDown = e => {\n      const {\n        activeMenu,\n        setInteractionMode\n      } = this.props;\n      setInteractionMode(InteractionModes.MOUSE);\n      this.showUI();\n    };\n\n    this.handleTouchStart = e => {\n      const {\n        activeMenu,\n        setInteractionMode\n      } = this.props;\n      this.cancelEvent(e);\n      setInteractionMode(InteractionModes.TOUCH);\n      this.showUI();\n      this.hideUITimeout && clearTimeout(this.hideUITimeout);\n      this.hideUITimeout = setTimeout(this.hideUI, TOUCH_TIMEOUT_DURATION);\n    };\n\n    this.handleKeyUp = e => {\n      const {\n        setInteractionMode\n      } = this.props;\n      setInteractionMode(InteractionModes.KEYBOARD);\n    };\n\n    this.cancelEvent = e => {\n      e && e.preventDefault();\n    };\n\n    this.showUI = () => {\n      const {\n        showUI\n      } = this.props;\n      showUI && showUI();\n    };\n\n    this.hideUI = () => {\n      const {\n        hideUI,\n        activeMenu\n      } = this.props;\n\n      if (!activeMenu) {\n        hideUI && hideUI();\n      }\n    };\n\n    this.handleBlur = e => {\n      const {\n        interactionMode\n      } = this.props;\n      const target = e.relatedTarget || document.activeElement;\n\n      if (interactionMode === InteractionModes.KEYBOARD && !this.mainRef.current.contains(target)) {\n        this.hideUI();\n      }\n    };\n\n    this.mainRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    const {\n      keyboardShortcutsEnabled\n    } = this.props;\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange);\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange);\n    initMousetrap(this.mainRef.current);\n    if (keyboardShortcutsEnabled !== false) registerDefaultShortcuts(this.props, this.handleGetClip);\n    this.updateMediaUI();\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange);\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange);\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange);\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange);\n    resetMoustrap();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.keyboardShortcutsEnabled === nextProps.keyboardShortcutsEnabled) return;\n    if (nextProps.keyboardShortcutsEnabled !== false) registerDefaultShortcuts(this.props, this.handleGetClip);\n    if (nextProps.keyboardShortcutsEnabled == false) resetMoustrap();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.title !== this.props.title || prevProps.playing !== this.props.playing) this.updateMediaUI();\n  }\n\n  render() {\n    const {\n      children,\n      visible\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      tabIndex: \"-1\",\n      onMouseEnter: this.handleMouseEnter,\n      onMouseLeave: this.hideUI,\n      onMouseDown: this.handleMouseDown,\n      onMouseMove: this.handleMouseMove,\n      onTouchEnd: this.cancelEvent,\n      onTouchStart: this.handleTouchStart,\n      onFocus: this.showUI,\n      onBlur: this.handleBlur,\n      onKeyUp: this.handleKeyUp,\n      className: classnames(css.manager, {\n        [css.hidden]: !visible\n      }),\n      ref: this.mainRef,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default connect(state => ({\n  clipId: state.clipId,\n  title: state.title,\n  playing: state.playing,\n  activeMenu: state.activeMenu,\n  interactionMode: state.interactionMode,\n  visible: state.visible,\n  registeredShortcuts: state.registeredShortcuts,\n  hiddenButtons: state.hiddenButtons,\n  keyboardShortcutsEnabled: state.keyboardShortcutsEnabled\n}), actions)(UIManager);","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/Manager/index.tsx"],"names":["React","Component","connect","classnames","isFullscreen","FullscreenState","InteractionModes","TOUCH_TIMEOUT_DURATION","MOUSE_TIMEOUT_DURATION","actions","initMousetrap","resetMoustrap","registerDefaultShortcuts","css","UIManager","constructor","props","updateMediaUI","navigator","mediaSession","title","playing","playbackState","metadata","MediaMetadata","handleGetClip","clipId","handleFullscreenChange","setFullscreen","fullscreenState","FULLSCREEN","NORMAL","handleMouseMove","e","setInteractionMode","MOUSE","showUI","hideUITimeout","clearTimeout","setTimeout","hideUI","handleMouseEnter","handleMouseDown","activeMenu","handleTouchStart","cancelEvent","TOUCH","handleKeyUp","KEYBOARD","preventDefault","handleBlur","interactionMode","target","relatedTarget","document","activeElement","mainRef","current","contains","createRef","componentDidMount","keyboardShortcutsEnabled","addEventListener","componentWillUnmount","removeEventListener","componentWillReceiveProps","nextProps","componentDidUpdate","prevProps","render","children","visible","manager","hidden","state","registeredShortcuts","hiddenButtons"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'unistore/react'\nimport classnames from 'classnames'\n\nimport { isFullscreen } from '../container/fullscreen-helper'\nimport { FullscreenState, InteractionModes, TOUCH_TIMEOUT_DURATION, MOUSE_TIMEOUT_DURATION } from '../../constants'\nimport * as actions from '../../actions'\nimport { initMousetrap, resetMoustrap } from '../../keyboard/shortcut-keys'\nimport { registerDefaultShortcuts } from '../../keyboard/register-shortcuts'\n\nimport css from './ui-manager.css'\n\nexport class UIManager extends Component {\n  constructor(props) {\n    super(props)\n    this.mainRef = React.createRef()\n  }\n\n  componentDidMount() {\n    const { keyboardShortcutsEnabled } = this.props\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange)\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange)\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange)\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange)\n    initMousetrap(this.mainRef.current)\n    if (keyboardShortcutsEnabled !== false) registerDefaultShortcuts(this.props, this.handleGetClip)\n    this.updateMediaUI()\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange)\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange)\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange)\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange)\n    resetMoustrap()\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.keyboardShortcutsEnabled === nextProps.keyboardShortcutsEnabled) return\n    if (nextProps.keyboardShortcutsEnabled !== false) registerDefaultShortcuts(this.props, this.handleGetClip)\n    if (nextProps.keyboardShortcutsEnabled == false) resetMoustrap()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.title !== this.props.title || prevProps.playing !== this.props.playing) this.updateMediaUI()\n  }\n\n  updateMediaUI = () => {\n    if (!navigator || !navigator.mediaSession) return\n    const { title, playing } = this.props\n    navigator.mediaSession.playbackState = playing ? 'playing' : 'paused'\n    navigator.mediaSession.metadata = new MediaMetadata({ title })\n  }\n\n  handleGetClip = () => ({ clipId: this.props.clipId || null })\n\n  handleFullscreenChange = () => {\n    const { setFullscreen } = this.props\n\n    const fullscreenState = isFullscreen() ? FullscreenState.FULLSCREEN : FullscreenState.NORMAL\n\n    setFullscreen && setFullscreen(fullscreenState)\n  }\n\n  handleMouseMove = (e) => {\n    const { setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.MOUSE)\n\n    this.showUI()\n\n    this.hideUITimeout && clearTimeout(this.hideUITimeout)\n\n    this.hideUITimeout = setTimeout(this.hideUI, MOUSE_TIMEOUT_DURATION)\n  }\n\n  handleMouseEnter = (e) => {\n    const { setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.MOUSE)\n\n    this.showUI()\n  }\n\n  handleMouseDown = (e) => {\n    const { activeMenu, setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.MOUSE)\n\n    this.showUI()\n  }\n\n  handleTouchStart = (e) => {\n    const { activeMenu, setInteractionMode } = this.props\n\n    this.cancelEvent(e)\n\n    setInteractionMode(InteractionModes.TOUCH)\n\n    this.showUI()\n\n    this.hideUITimeout && clearTimeout(this.hideUITimeout)\n\n    this.hideUITimeout = setTimeout(this.hideUI, TOUCH_TIMEOUT_DURATION)\n  }\n\n  handleKeyUp = (e) => {\n    const { setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.KEYBOARD)\n  }\n\n  cancelEvent = (e) => {\n    e && e.preventDefault()\n  }\n\n  showUI = () => {\n    const { showUI } = this.props\n\n    showUI && showUI()\n  }\n\n  hideUI = () => {\n    const { hideUI, activeMenu } = this.props\n\n    if (!activeMenu) {\n      hideUI && hideUI()\n    }\n  }\n\n  handleBlur = (e) => {\n    const { interactionMode } = this.props\n\n    const target = e.relatedTarget || document.activeElement\n\n    if (interactionMode === InteractionModes.KEYBOARD && !this.mainRef.current.contains(target)) {\n      this.hideUI()\n    }\n  }\n\n  render() {\n    const { children, visible } = this.props\n\n    return (\n      <div\n        tabIndex=\"-1\"\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.hideUI}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onTouchEnd={this.cancelEvent}\n        onTouchStart={this.handleTouchStart}\n        onFocus={this.showUI}\n        onBlur={this.handleBlur}\n        onKeyUp={this.handleKeyUp}\n        className={classnames(css.manager, { [css.hidden]: !visible })}\n        ref={this.mainRef}\n      >\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  (state) => ({\n    clipId: state.clipId,\n    title: state.title,\n    playing: state.playing,\n    activeMenu: state.activeMenu,\n    interactionMode: state.interactionMode,\n    visible: state.visible,\n    registeredShortcuts: state.registeredShortcuts,\n    hiddenButtons: state.hiddenButtons,\n    keyboardShortcutsEnabled: state.keyboardShortcutsEnabled,\n  }),\n  actions\n)(UIManager)\n"]},"metadata":{},"sourceType":"module"}
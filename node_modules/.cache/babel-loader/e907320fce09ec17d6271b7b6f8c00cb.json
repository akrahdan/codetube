{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./styles.scss\";import{Header}from\"./header\";import{useAuth,useAvatar}from'store/useAuth';import{useGetMyProjectsQuery}from'services/projects';import{useFetchProjectsQuery}from'services/projects';import{projectDetailPath}from\"libs/urlHelpers\";import{useFetchCourseViewsQuery}from\"services/courses\";import avatarLogo from\"static/images/avatar/profile-avatar.png\";import{useAppSelector}from\"store/hooks\";import{selectAnalytics}from\"state/course/courseSplice\";import{useState,useEffect}from\"react\";import{CourseProgress}from'./Course';import{ProjectSection}from\"./ProjectSection\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Learn=function Learn(){var _useAuth=useAuth(),user=_useAuth.user;var _useAvatar=useAvatar(),avatar=_useAvatar.avatar;var _useGetMyProjectsQuer=useGetMyProjectsQuery(),projectsQuery=_useGetMyProjectsQuer.data,isLoading=_useGetMyProjectsQuer.isLoading;var _useFetchProjectsQuer=useFetchProjectsQuery(),projectsMore=_useFetchProjectsQuer.data;var _useFetchCourseViewsQ=useFetchCourseViewsQuery(),analyticsQuery=_useFetchCourseViewsQ.data;var analytics=useAppSelector(selectAnalytics);var _useState=useState(),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var _useState3=useState(analytics),_useState4=_slicedToArray(_useState3,2),views=_useState4[0],setViews=_useState4[1];useEffect(function(){if(projectsQuery&&projectsQuery.length){var rresult=projectsQuery.map(function(q){return q.project;});setProjects(rresult);}},[projectsQuery]);useEffect(function(){if(analytics){setViews(analytics);}},[analytics]);if(!user)return null;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"spa-route-content cf-page__content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid cf-mt-3 cf-mb-12\",\"data-ba\":\"my-progress-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center cf-pb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatar?avatar:avatarLogo,className:\"cf-corners--circle cf-mr-6\",style:{height:\"48px\",width:\"48px\"}}),/*#__PURE__*/_jsx(\"p\",{className:\"cf-text--capitalize cf-mr-auto\",children:user.first_name?\"\".concat(user.first_name,\" \").concat(user.last_name):user.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"cf-ml-6\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"cf-text-h6 cf-text--right\",children:\"24\"}),/*#__PURE__*/_jsx(\"p\",{className:\"cf-text-small cf-opacity--hinted\",children:\"Lectures Watched\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cf-ml-6\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"cf-text-h6 cf-text--right\",children:\"0\"}),/*#__PURE__*/_jsx(\"p\",{className:\"cf-text-small cf-opacity--hinted\",children:\"Projects Completed\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"cf-separator cf-mb-6\"}),projects===null||projects===void 0?void 0:projects.map(function(proj,index){var _proj$header,_proj$courses;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"cf-text-h4\",children:proj.title}),/*#__PURE__*/_jsx(\"p\",{className:\"cf-opacity--muted cf-mb-8\",children:(_proj$header=proj.header)===null||_proj$header===void 0?void 0:_proj$header.heading}),/*#__PURE__*/_jsxs(\"div\",{className:\"my-progress-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:(_proj$courses=proj.courses)===null||_proj$courses===void 0?void 0:_proj$courses.map(function(course){return/*#__PURE__*/_jsx(CourseProgress,{course:course,instructor:proj.instructor,analytics:views},course.id);})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center cf-mt-9\",children:/*#__PURE__*/_jsx(\"button\",{className:\"c-button c-button--secondary c-button--md col-4 col-md-3\",\"data-testid\":\"showAllButton\",children:\"SHOW ALL (17)\"})})]})]});}),/*#__PURE__*/_jsx(\"div\",{className:\"uncontainer\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cf-mb-9\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"cf-text-h4\",children:\"Checkup Some New Projects\"}),/*#__PURE__*/_jsx(\"p\",{className:\"cf-opacity--muted cf-mb-8\",children:\"Master any skill one project at a time\"}),/*#__PURE__*/_jsx(\"div\",{className:\"my-progress-row\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(ProjectSection,{projects:projectsMore,linkCallback:function linkCallback(pro){return projectDetailPath(pro.slug);}})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center cf-mt-9\",children:/*#__PURE__*/_jsx(\"button\",{className:\"c-button c-button--secondary c-button--md col-4 col-md-3\",\"data-testid\":\"showAllButton\",children:\"SHOW ALL (16)\"})})]})]})})]});};export default Learn;","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Profile/Learn/index.tsx"],"names":["Header","useAuth","useAvatar","useGetMyProjectsQuery","useFetchProjectsQuery","projectDetailPath","useFetchCourseViewsQuery","avatarLogo","useAppSelector","selectAnalytics","useState","useEffect","CourseProgress","ProjectSection","Learn","user","avatar","projectsQuery","data","isLoading","projectsMore","analyticsQuery","analytics","projects","setProjects","views","setViews","length","rresult","map","q","project","height","width","first_name","last_name","username","proj","index","title","header","heading","courses","course","instructor","id","pro","slug"],"mappings":"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","sourcesContent":["import \"./styles.scss\";\nimport { Header } from \"./header\";\nimport { useAuth, useAvatar } from 'store/useAuth';\nimport { useGetMyProjectsQuery } from 'services/projects';\nimport type { OrderResponse, ProjectEntityResponse } from 'services/projects';\nimport { useFetchProjectsQuery } from 'services/projects';\nimport { projectDetailPath } from \"libs/urlHelpers\";\nimport { useFetchCourseViewsQuery, VideoAnalytics } from \"services/courses\";\nimport avatarLogo from \"static/images/avatar/profile-avatar.png\";\nimport { useAppSelector } from \"store/hooks\";\nimport { selectAnalytics } from \"state/course/courseSplice\";\nimport { useState, useEffect } from \"react\";\nimport { CourseProgress } from './Course';\n\nimport { ProjectSection } from \"./ProjectSection\";\nexport const Learn = () => {\n  const { user } = useAuth()\n  const { avatar } = useAvatar()\n  const { data: projectsQuery, isLoading } = useGetMyProjectsQuery()\n  const { data: projectsMore } = useFetchProjectsQuery()\n  const { data: analyticsQuery } = useFetchCourseViewsQuery()\n  const analytics = useAppSelector(selectAnalytics)\n  const [projects, setProjects] = useState<ProjectEntityResponse[]>()\n  const [views, setViews ] = useState<VideoAnalytics[]>(analytics)\n  useEffect(() => {\n    if (projectsQuery && projectsQuery.length) {\n      const rresult: ProjectEntityResponse[] = projectsQuery.map(q => q.project)\n      setProjects(rresult)\n    }\n  }, [projectsQuery])\n\n  useEffect(() => {\n        if(analytics) {\n          \n          setViews(analytics)\n        }\n  }, [analytics])\n\n\n  if (!user) return null;\n  return (\n    <div>\n      <Header />\n      <div className=\"spa-route-content cf-page__content\">\n        <div\n          className=\"container-fluid cf-mt-3 cf-mb-12\"\n          data-ba=\"my-progress-page\"\n        >\n          <div className=\"d-flex align-items-center cf-pb-3\">\n            <img\n              src={avatar ? avatar : avatarLogo}\n              className=\"cf-corners--circle cf-mr-6\"\n              style={{ height: \"48px\", width: \"48px\" }}\n            />\n            <p className=\"cf-text--capitalize cf-mr-auto\">{user.first_name ? `${user.first_name} ${user.last_name}` : user.username}</p>\n            <div className=\"cf-ml-6\">\n              <h6 className=\"cf-text-h6 cf-text--right\">24</h6>\n              <p className=\"cf-text-small cf-opacity--hinted\">\n                Lectures Watched\n              </p>\n            </div>\n            <div className=\"cf-ml-6\">\n              <h6 className=\"cf-text-h6 cf-text--right\">0</h6>\n              <p className=\"cf-text-small cf-opacity--hinted\">\n                Projects Completed\n              </p>\n            </div>\n          </div>\n          <hr className=\"cf-separator cf-mb-6\" />\n          {projects?.map((proj, index) => {\n            return (\n              <>\n                <h4 className=\"cf-text-h4\">{proj.title}</h4>\n                <p className=\"cf-opacity--muted cf-mb-8\">\n                  {proj.header?.heading}\n                </p>\n                <div className=\"my-progress-row\">\n                  <div className=\"row\">\n                    {proj.courses?.map(course => <CourseProgress key={course.id}  course={course} instructor = { proj.instructor} analytics={views}/>)}\n                  </div>\n                  <div className=\"d-flex justify-content-center cf-mt-9\">\n                    <button\n                      className=\"c-button c-button--secondary c-button--md col-4 col-md-3\"\n                      data-testid=\"showAllButton\"\n                    >\n                      SHOW ALL (17)\n                    </button>\n                  </div>\n                </div>\n\n              </>\n            );\n          })}\n         \n          <div className=\"uncontainer\" />\n          <div className=\"cf-mb-9\">\n            <h4 className=\"cf-text-h4\">Checkup Some New Projects</h4>\n            <p className=\"cf-opacity--muted cf-mb-8\">\n              Master any skill one project at a time\n            </p>\n            <div className=\"my-progress-row\">\n              <div>\n                <div className=\"row\">\n                  <ProjectSection \n                  projects={projectsMore} \n                  linkCallback={(pro) => projectDetailPath(pro.slug)}/>\n                 \n                </div>\n              </div>\n            </div>\n            <div className=\"d-flex justify-content-center cf-mt-9\">\n              <button\n                className=\"c-button c-button--secondary c-button--md col-4 col-md-3\"\n                data-testid=\"showAllButton\"\n              >\n                SHOW ALL (16)\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Learn;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) r[k] = a[j];\n\n  return r;\n};\n\nimport differenceInCalendarMonths from 'date-fns/differenceInCalendarMonths';\nimport format from 'date-fns/format';\nimport parse from 'date-fns/parse';\nimport isMatch from 'date-fns/isMatch';\nimport glamorDefault, * as glamorExports from 'glamor';\nimport React from 'react';\nimport stylesheet from '../css/index';\nimport { slides } from '../vars/index';\nvar glamor = glamorDefault || glamorExports;\nvar style = {\n  start: function () {\n    return glamor.css(stylesheet['.psds-calendar__date--selected-start']);\n  },\n  end: function () {\n    return glamor.css(stylesheet['.psds-calendar__date--selected-end']);\n  },\n  inRange: function (arg) {\n    return glamor.css(arg && stylesheet['.psds-calendar__date--in-range']);\n  }\n};\nexport var useIsInRange = function (selected) {\n  if (selected === void 0) {\n    selected = [];\n  }\n\n  var _a = React.useState(),\n      hoveredDate = _a[0],\n      setHoveredDate = _a[1]; // Calendar level\n\n\n  var onMouseLeave = function () {\n    setHoveredDate(undefined);\n  }; // Date level\n\n\n  var onMouseEnter = function (date) {\n    if (!selected.length) {\n      return;\n    }\n\n    setHoveredDate(date);\n  };\n\n  var isInRange = function (date) {\n    if (selected.length) {\n      var firstSelected = selected[0].getTime();\n\n      if (selected.length === 2) {\n        var secondSelected = selected[1].getTime();\n        return __assign(__assign(__assign({}, style.inRange(firstSelected < date.getTime() && secondSelected > date.getTime())), firstSelected === date.getTime() && style.start()), secondSelected === date.getTime() && style.end());\n      } else {\n        return __assign(__assign({}, style.inRange(hoveredDate && (firstSelected < date.getTime() && hoveredDate.getTime() >= date.getTime() || date.getTime() < firstSelected && date.getTime() >= hoveredDate.getTime()))), firstSelected === date.getTime() && style.start());\n      }\n    }\n\n    return {};\n  };\n\n  return {\n    onMouseLeave: onMouseLeave,\n    onMouseEnter: onMouseEnter,\n    isInRange: isInRange\n  };\n};\nexport var onRangeDateSelected = function (_a) {\n  var _b = _a.selected,\n      selected = _b === void 0 ? [] : _b,\n      setSelected = _a.setSelected,\n      onSelect = _a.onSelect;\n  return function (dateObj, evt) {\n    var selectable = dateObj.selectable,\n        date = dateObj.date;\n\n    if (!selectable) {\n      return;\n    }\n\n    var dateTime = date.getTime();\n\n    var newDates = __spreadArrays(selected);\n\n    if (selected.length) {\n      if (selected.length === 1) {\n        var firstTime = selected[0].getTime();\n\n        if (firstTime < dateTime) {\n          newDates.push(date);\n        } else {\n          newDates.unshift(date);\n        }\n\n        setSelected(newDates);\n      } else if (newDates.length === 2) {\n        setSelected([date]);\n      }\n    } else {\n      newDates.push(date);\n      setSelected(newDates);\n    }\n\n    onSelect && onSelect(evt, dateObj);\n  };\n};\n\nvar getDateIndex = function (selected, condition) {\n  var index;\n  selected.some(function (date, i) {\n    index = i;\n\n    if (condition(date.getTime())) {\n      return true;\n    } // If we loop through all the selected dates and still didn't find\n    // one, make sure to add it to the end of the array.\n\n\n    index++;\n    return false;\n  });\n  return index;\n};\n\nexport var onMultiDateSelected = function (_a) {\n  var _b = _a.selected,\n      selected = _b === void 0 ? [] : _b,\n      setSelected = _a.setSelected,\n      onSelect = _a.onSelect;\n  return function (dateObj, evt) {\n    var isSelected = dateObj.selected,\n        selectable = dateObj.selectable,\n        date = dateObj.date;\n\n    if (!selectable) {\n      return;\n    }\n\n    var newSelectedDates = selected.slice();\n    var selectedTime = date.getTime();\n\n    if (isSelected) {\n      var index = getDateIndex(selected, function (time) {\n        return selectedTime === time;\n      });\n      newSelectedDates.splice(index, 1);\n    } else {\n      // Add\n      var index = getDateIndex(selected, function (time) {\n        return selectedTime < time;\n      });\n      newSelectedDates.splice(index, 0, date);\n    }\n\n    setSelected(newSelectedDates);\n    onSelect && onSelect(evt, dateObj);\n  };\n};\nexport var useDateSelectChange = function (_a) {\n  var selected = _a.selected,\n      setSlide = _a.setSlide,\n      setSelected = _a.setSelected,\n      _b = _a.dateFormat,\n      dateFormat = _b === void 0 ? 'MM/dd/yyyy' : _b;\n\n  var _c = React.useState(selected ? format(selected, dateFormat) : ''),\n      value = _c[0],\n      setValue = _c[1];\n\n  React.useEffect(function () {\n    selected ? setValue(format(selected, dateFormat)) : '';\n  }, [selected]);\n\n  var onChange = function (evt) {\n    var nextValue = evt.target.value;\n    setValue(nextValue);\n    var fulldate = false;\n\n    try {\n      fulldate = isMatch(nextValue, dateFormat);\n    } catch (err) {\n      if (!(err instanceof RangeError)) {\n        throw err;\n      }\n    }\n\n    var nextSelected = fulldate ? parse(nextValue, dateFormat, new Date()) : selected;\n\n    if (nextSelected instanceof Date && !isNaN(nextSelected)) {\n      var nextSlide = void 0;\n\n      if (selected) {\n        nextSlide = differenceInCalendarMonths(nextSelected, selected) > 0 ? 'forward' : differenceInCalendarMonths(nextSelected, selected) < 0 ? 'backward' : undefined;\n      }\n\n      setSelected(nextSelected);\n      setSlide(nextSlide);\n    }\n  };\n\n  return [value, onChange];\n};\nexport var useRangeSelectChange = function (_a) {\n  var start = _a.start,\n      _b = _a.selected,\n      selected = _b === void 0 ? [] : _b,\n      setSlide = _a.setSlide,\n      setSelected = _a.setSelected,\n      _c = _a.dateFormat,\n      dateFormat = _c === void 0 ? 'MM/dd/yyyy' : _c;\n\n  var _selected = start ? selected[0] : selected[1];\n\n  var _d = React.useState(_selected ? format(_selected, dateFormat) : ''),\n      value = _d[0],\n      setValue = _d[1];\n\n  React.useEffect(function () {\n    _selected ? setValue(format(_selected, dateFormat)) : '';\n  }, [_selected]);\n\n  var onChange = function (evt) {\n    var nextValue = evt.target.value;\n    setValue(nextValue);\n    var fulldate = false;\n\n    try {\n      fulldate = isMatch(nextValue, dateFormat);\n    } catch (err) {\n      if (!(err instanceof RangeError)) {\n        throw err;\n      }\n    }\n\n    var nextSelected = fulldate ? parse(nextValue, dateFormat, new Date()) : selected;\n\n    if (nextSelected instanceof Date && !isNaN(nextSelected)) {\n      var nextSlide = void 0;\n\n      if (selected) {\n        !selected[0] && setSelected([]);\n        start && setSelected([nextSelected, selected[1]].filter(Boolean));\n        selected[0] && !start && setSelected([selected[0], nextSelected]);\n        nextSlide = differenceInCalendarMonths(nextSelected, _selected) > 0 ? slides.forward : differenceInCalendarMonths(nextSelected, _selected) < 0 ? slides.backward : slides.undefined;\n      }\n\n      setSlide(nextSlide);\n    }\n  };\n\n  return [value, onChange];\n};","map":{"version":3,"sources":["../../../src/react/utils.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport differenceInCalendarMonths from 'date-fns/differenceInCalendarMonths';\nimport format from 'date-fns/format';\nimport parse from 'date-fns/parse';\nimport isMatch from 'date-fns/isMatch';\nimport glamorDefault, * as glamorExports from 'glamor';\nimport React from 'react';\nimport stylesheet from '../css/index';\nimport { slides } from '../vars/index';\nvar glamor = glamorDefault || glamorExports;\nvar style = {\n    start: function () { return glamor.css(stylesheet['.psds-calendar__date--selected-start']); },\n    end: function () { return glamor.css(stylesheet['.psds-calendar__date--selected-end']); },\n    inRange: function (arg) {\n        return glamor.css(arg && stylesheet['.psds-calendar__date--in-range']);\n    }\n};\nexport var useIsInRange = function (selected) {\n    if (selected === void 0) { selected = []; }\n    var _a = React.useState(), hoveredDate = _a[0], setHoveredDate = _a[1];\n    // Calendar level\n    var onMouseLeave = function () {\n        setHoveredDate(undefined);\n    };\n    // Date level\n    var onMouseEnter = function (date) {\n        if (!selected.length) {\n            return;\n        }\n        setHoveredDate(date);\n    };\n    var isInRange = function (date) {\n        if (selected.length) {\n            var firstSelected = selected[0].getTime();\n            if (selected.length === 2) {\n                var secondSelected = selected[1].getTime();\n                return __assign(__assign(__assign({}, style.inRange(firstSelected < date.getTime() && secondSelected > date.getTime())), (firstSelected === date.getTime() && style.start())), (secondSelected === date.getTime() && style.end()));\n            }\n            else {\n                return __assign(__assign({}, style.inRange(hoveredDate &&\n                    ((firstSelected < date.getTime() &&\n                        hoveredDate.getTime() >= date.getTime()) ||\n                        (date.getTime() < firstSelected &&\n                            date.getTime() >= hoveredDate.getTime())))), (firstSelected === date.getTime() && style.start()));\n            }\n        }\n        return {};\n    };\n    return { onMouseLeave: onMouseLeave, onMouseEnter: onMouseEnter, isInRange: isInRange };\n};\nexport var onRangeDateSelected = function (_a) {\n    var _b = _a.selected, selected = _b === void 0 ? [] : _b, setSelected = _a.setSelected, onSelect = _a.onSelect;\n    return function (dateObj, evt) {\n        var selectable = dateObj.selectable, date = dateObj.date;\n        if (!selectable) {\n            return;\n        }\n        var dateTime = date.getTime();\n        var newDates = __spreadArrays(selected);\n        if (selected.length) {\n            if (selected.length === 1) {\n                var firstTime = selected[0].getTime();\n                if (firstTime < dateTime) {\n                    newDates.push(date);\n                }\n                else {\n                    newDates.unshift(date);\n                }\n                setSelected(newDates);\n            }\n            else if (newDates.length === 2) {\n                setSelected([date]);\n            }\n        }\n        else {\n            newDates.push(date);\n            setSelected(newDates);\n        }\n        onSelect && onSelect(evt, dateObj);\n    };\n};\nvar getDateIndex = function (selected, condition) {\n    var index;\n    selected.some(function (date, i) {\n        index = i;\n        if (condition(date.getTime())) {\n            return true;\n        }\n        // If we loop through all the selected dates and still didn't find\n        // one, make sure to add it to the end of the array.\n        index++;\n        return false;\n    });\n    return index;\n};\nexport var onMultiDateSelected = function (_a) {\n    var _b = _a.selected, selected = _b === void 0 ? [] : _b, setSelected = _a.setSelected, onSelect = _a.onSelect;\n    return function (dateObj, evt) {\n        var isSelected = dateObj.selected, selectable = dateObj.selectable, date = dateObj.date;\n        if (!selectable) {\n            return;\n        }\n        var newSelectedDates = selected.slice();\n        var selectedTime = date.getTime();\n        if (isSelected) {\n            var index = getDateIndex(selected, function (time) { return selectedTime === time; });\n            newSelectedDates.splice(index, 1);\n        }\n        else {\n            // Add\n            var index = getDateIndex(selected, function (time) { return selectedTime < time; });\n            newSelectedDates.splice(index, 0, date);\n        }\n        setSelected(newSelectedDates);\n        onSelect && onSelect(evt, dateObj);\n    };\n};\nexport var useDateSelectChange = function (_a) {\n    var selected = _a.selected, setSlide = _a.setSlide, setSelected = _a.setSelected, _b = _a.dateFormat, dateFormat = _b === void 0 ? 'MM/dd/yyyy' : _b;\n    var _c = React.useState(selected ? format(selected, dateFormat) : ''), value = _c[0], setValue = _c[1];\n    React.useEffect(function () {\n        selected ? setValue(format(selected, dateFormat)) : '';\n    }, [selected]);\n    var onChange = function (evt) {\n        var nextValue = evt.target.value;\n        setValue(nextValue);\n        var fulldate = false;\n        try {\n            fulldate = isMatch(nextValue, dateFormat);\n        }\n        catch (err) {\n            if (!(err instanceof RangeError)) {\n                throw err;\n            }\n        }\n        var nextSelected = fulldate\n            ? parse(nextValue, dateFormat, new Date())\n            : selected;\n        if (nextSelected instanceof Date &&\n            !isNaN(nextSelected)) {\n            var nextSlide = void 0;\n            if (selected) {\n                nextSlide =\n                    differenceInCalendarMonths(nextSelected, selected) > 0\n                        ? 'forward'\n                        : differenceInCalendarMonths(nextSelected, selected) < 0\n                            ? 'backward'\n                            : undefined;\n            }\n            setSelected(nextSelected);\n            setSlide(nextSlide);\n        }\n    };\n    return [value, onChange];\n};\nexport var useRangeSelectChange = function (_a) {\n    var start = _a.start, _b = _a.selected, selected = _b === void 0 ? [] : _b, setSlide = _a.setSlide, setSelected = _a.setSelected, _c = _a.dateFormat, dateFormat = _c === void 0 ? 'MM/dd/yyyy' : _c;\n    var _selected = start ? selected[0] : selected[1];\n    var _d = React.useState(_selected ? format(_selected, dateFormat) : ''), value = _d[0], setValue = _d[1];\n    React.useEffect(function () {\n        _selected ? setValue(format(_selected, dateFormat)) : '';\n    }, [_selected]);\n    var onChange = function (evt) {\n        var nextValue = evt.target.value;\n        setValue(nextValue);\n        var fulldate = false;\n        try {\n            fulldate = isMatch(nextValue, dateFormat);\n        }\n        catch (err) {\n            if (!(err instanceof RangeError)) {\n                throw err;\n            }\n        }\n        var nextSelected = fulldate\n            ? parse(nextValue, dateFormat, new Date())\n            : selected;\n        if (nextSelected instanceof Date &&\n            !isNaN(nextSelected)) {\n            var nextSlide = void 0;\n            if (selected) {\n                !selected[0] && setSelected([]);\n                start && setSelected([nextSelected, selected[1]].filter(Boolean));\n                selected[0] && !start && setSelected([selected[0], nextSelected]);\n                nextSlide =\n                    differenceInCalendarMonths(nextSelected, _selected) > 0\n                        ? slides.forward\n                        : differenceInCalendarMonths(nextSelected, _selected) < 0\n                            ? slides.backward\n                            : slides.undefined;\n            }\n            setSlide(nextSlide);\n        }\n    };\n    return [value, onChange];\n};\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Anchor,Text}from'@codecademy/gamut';import{ListSection}from'@codecademy/gamut-labs';import React,{useEffect,useState}from'react';import{catalogPath}from'libs/urlHelpers';import{useGetMyProjectsQuery}from'services/projects';import{EnrollmentCard}from'./EnrollmentCard';import{EnrollmentLoadingCard}from'./EnrollmentLoadingCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var CoursesSection=function CoursesSection(_ref){var isCurrentUser=_ref.isCurrentUser,enrollments=_ref.enrollments;var _useGetMyProjectsQuer=useGetMyProjectsQuery(),projectsQuery=_useGetMyProjectsQuer.data,isLoading=_useGetMyProjectsQuer.isLoading;var _useState=useState(),_useState2=_slicedToArray(_useState,2),projects=_useState2[0],setProjects=_useState2[1];var loadingCardsToDisplay=enrollments.length>3?enrollments.slice(0,3):enrollments;var isEmpty=(projects===null||projects===void 0?void 0:projects.length)===0;var renderEmptyMessage=function renderEmptyMessage(){return/*#__PURE__*/_jsxs(Text,{children:[/*#__PURE__*/_jsx(Anchor,{href:catalogPath,onClick:function onClick(){return console.log();},variant:\"standard\",children:\"Browse our Projects\"}),' ',\"to start a course now\"]});};useEffect(function(){if(projectsQuery&&projectsQuery.length){var rresult=projectsQuery.map(function(q){return q.project;});setProjects(rresult);}},[projectsQuery]);var renderContent=function renderContent(courses){return isEmpty?renderEmptyMessage():courses===null||courses===void 0?void 0:courses.map(function(course){return/*#__PURE__*/_jsx(EnrollmentCard,{containerProgress:{percent_complete:0},id:course.id,title:course.title,onEnrollmentClick:function onEnrollmentClick(value){return console.log();}},course.id);});};var renderProjectConent=function renderProjectConent(){return isEmpty?renderEmptyMessage():projects===null||projects===void 0?void 0:projects.map(function(project){return/*#__PURE__*/_jsx(ListSection,{title:project.title,onShowAllOrLessClick:function onShowAllOrLessClick(){return console.log();},children:renderContent(project.courses)});});};var renderLoadingState=function renderLoadingState(){return loadingCardsToDisplay.map(function(enrollment){return/*#__PURE__*/_jsx(EnrollmentLoadingCard,{},\"enrollment-loading-card-\".concat(enrollment.id));});};if(!isCurrentUser&&isEmpty)return null;return/*#__PURE__*/_jsx(\"div\",{children:isLoading?renderLoadingState():renderProjectConent()});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Profile/CoursesSection/index.tsx"],"names":["Anchor","Text","ListSection","React","useEffect","useState","catalogPath","useGetMyProjectsQuery","EnrollmentCard","EnrollmentLoadingCard","CoursesSection","isCurrentUser","enrollments","projectsQuery","data","isLoading","projects","setProjects","loadingCardsToDisplay","length","slice","isEmpty","renderEmptyMessage","console","log","rresult","map","q","project","renderContent","courses","course","percent_complete","id","title","value","renderProjectConent","renderLoadingState","enrollment"],"mappings":"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","sourcesContent":["import { Anchor, Text } from '@codecademy/gamut';\nimport { ListSection } from '@codecademy/gamut-labs';\nimport React, { useEffect, useState } from 'react';\n\nimport { catalogPath } from 'libs/urlHelpers';\nimport { useGetMyProjectsQuery } from 'services/projects';\nimport type { OrderResponse, ProjectEntityResponse } from 'services/projects';\nimport { allCourses } from './allCourses';\n\nimport { EnrollmentCard } from './EnrollmentCard';\nimport { EnrollmentLoadingCard } from './EnrollmentLoadingCard';\nimport { projectApi } from 'services/dist/projects';\n\nexport interface Enrollment {\n  length: number,\n  id: string\n}\nexport type CoursesSectionProps = {\n  isCurrentUser: boolean;\n  enrollments: Enrollment[];\n};\n\n\n\nexport const CoursesSection: React.FC<CoursesSectionProps> = ({\n  isCurrentUser,\n  enrollments,\n}) => {\n\n\n  const { data: projectsQuery, isLoading } = useGetMyProjectsQuery()\n  const [projects, setProjects] = useState<ProjectEntityResponse[]>()\n  const loadingCardsToDisplay =\n    enrollments.length > 3 ? enrollments.slice(0, 3) : enrollments;\n  const isEmpty = projects?.length === 0;\n  const renderEmptyMessage = () => (\n    <Text>\n      <Anchor\n        href={catalogPath}\n        onClick={() => console.log()}\n        variant=\"standard\"\n      >\n        Browse our Projects\n      </Anchor>{' '}\n      to start a course now\n    </Text>\n  );\n\n  useEffect(() => {\n    if (projectsQuery && projectsQuery.length) {\n      const rresult: ProjectEntityResponse[] = projectsQuery.map(q => q.project)\n      setProjects(rresult)\n    }\n  }, [projectsQuery])\n\n\n\n  const renderContent = (courses) =>\n    isEmpty\n      ? renderEmptyMessage()\n      : courses?.map((course) => (\n        <EnrollmentCard\n          key={course.id}\n          containerProgress={\n            {\n              percent_complete: 0\n            }\n          }\n          id={course.id}\n          title={course.title}\n\n          onEnrollmentClick={(value) => console.log()}\n        />\n      ));\n\n\n\n  const renderProjectConent = () =>\n    isEmpty ? renderEmptyMessage()\n      : projects?.map((project) => (\n        <ListSection\n          title={project.title}\n          onShowAllOrLessClick={() => console.log()}\n        >\n          {renderContent(project.courses)}\n         \n        </ListSection>\n      ));\n\n  const renderLoadingState = () =>\n    loadingCardsToDisplay.map((enrollment) => (\n      <EnrollmentLoadingCard key={`enrollment-loading-card-${enrollment.id}`} />\n    ));\n\n  if (!isCurrentUser && isEmpty) return null;\n  return (\n    <div>\n      {isLoading ? renderLoadingState() : renderProjectConent()}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
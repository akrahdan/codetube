{"ast":null,"code":"import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\nimport cookie from \"react-cookies\";\nexport const authApi = createApi({\n  reducerPath: \"authApi\",\n  baseQuery: fetchBaseQuery({\n    baseUrl: \"/\",\n    prepareHeaders: (headers, {\n      getState\n    }) => {\n      const csrfToken = cookie.load(\"csrftoken\");\n\n      if (csrfToken) {\n        headers.set(\"X-CSRFToken\", csrfToken);\n      }\n\n      const token = getState().auth.token || localStorage.getItem(\"token\");\n\n      if (token) {\n        headers.set(\"Authorization\", `Token ${token}`);\n      }\n\n      headers.set(\"Content-Type\", \"application/json\");\n      return headers;\n    }\n  }),\n  tagTypes: [\"LoginRequest\", \"SignupRequest\", \"Logout\", \"User\", \"UserResponse\"],\n  endpoints: build => ({\n    login: build.mutation({\n      query: body => ({\n        url: \"/api/auth/login/\",\n        method: \"POST\",\n        body,\n        responseHandler: response => response.json()\n      })\n    }),\n    signup: build.mutation({\n      query: body => ({\n        url: \"/api/auth/signup/\",\n        method: \"POST\",\n        body,\n        responseHandler: response => response.json()\n      })\n    }),\n    logout: build.mutation({\n      query: body => ({\n        url: \"/api/auth/logout/\",\n        method: \"POST\",\n        body,\n        responseHandler: response => response.json()\n      })\n    }),\n    facebookLogin: build.mutation({\n      query: body => ({\n        url: \"/api/auth/facebook/\",\n        method: \"POST\",\n        body,\n        responseHandler: response => response.json()\n      })\n    }),\n    googleLogin: build.mutation({\n      query: body => ({\n        url: \"/api/auth/google/\",\n        method: \"POST\",\n        body,\n        responseHandler: response => response.json()\n      })\n    }),\n    googleLoginUrl: build.mutation({\n      query: () => ({\n        url: \"/api/auth/google/url\",\n        method: \"POST\",\n        responseHandler: response => response.json()\n      })\n    }),\n    facebookLoginUrl: build.mutation({\n      query: () => ({\n        url: \"/api/auth/facebook/url\",\n        method: \"POST\",\n        responseHandler: response => response.json()\n      })\n    }),\n    getCurrentUser: build.query({\n      query: () => ({\n        url: \"rest-auth/user/\",\n        method: \"GET\",\n        responseHandler: response => response.json()\n      })\n    }),\n    updateProfile: build.mutation({\n      query: body => ({\n        url: \"/api/auth/update_profile/\",\n        method: \"PUT\",\n        body,\n        responseHandler: response => response.json()\n      })\n    }),\n    getProfile: build.query({\n      query: () => ({\n        url: \"/api/auth/profile/\",\n        method: \"GET\",\n        responseHandler: response => response.json()\n      })\n    }),\n    updateAvatar: build.mutation({\n      query: body => ({\n        url: \"/api/auth/update_avatar/\",\n        method: \"PUT\",\n        body,\n        responseHandler: response => response.json()\n      })\n    })\n  })\n});\nexport const {\n  getCurrentUser,\n  getProfile\n} = authApi.endpoints;\nexport const {\n  useLoginMutation,\n  useSignupMutation,\n  useLogoutMutation,\n  useGetCurrentUserQuery,\n  useFacebookLoginMutation,\n  useGoogleLoginMutation,\n  useFacebookLoginUrlMutation,\n  useGoogleLoginUrlMutation,\n  useUpdateAvatarMutation,\n  useUpdateProfileMutation,\n  useGetProfileQuery\n} = authApi;","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/services/auth.ts"],"names":["createApi","fetchBaseQuery","cookie","authApi","reducerPath","baseQuery","baseUrl","prepareHeaders","headers","getState","csrfToken","load","set","token","auth","localStorage","getItem","tagTypes","endpoints","build","login","mutation","query","body","url","method","responseHandler","response","json","signup","logout","facebookLogin","googleLogin","googleLoginUrl","facebookLoginUrl","getCurrentUser","updateProfile","getProfile","updateAvatar","useLoginMutation","useSignupMutation","useLogoutMutation","useGetCurrentUserQuery","useFacebookLoginMutation","useGoogleLoginMutation","useFacebookLoginUrlMutation","useGoogleLoginUrlMutation","useUpdateAvatarMutation","useUpdateProfileMutation","useGetProfileQuery"],"mappings":"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","sourcesContent":["import { createApi, fetchBaseQuery } from \"@reduxjs/toolkit/query/react\";\nimport { head } from \"lodash\";\nimport cookie from \"react-cookies\";\nimport { RootState } from \"store\";\nimport internal from \"stream\";\n\nexport interface LoginRequest {\n  email: string;\n  password: string;\n  csrfmiddlewaretoken: string;\n}\n\nexport interface UserRequest {\n  email: string;\n  first_name: string;\n  last_name: string;\n  csrfmiddlewaretoken: string;\n}\n\nexport interface Avatar {\n  avatar: string;\n}\n\nexport interface SignupRequest {\n  email: string;\n  username: string;\n  password1: string;\n  password2: string;\n  csrfmiddlewaretoken: string;\n}\n\nexport interface Token {\n  key: string;\n}\n\nexport interface Access {\n  access_token: string\n}\n\nexport interface User {\n  pk: number;\n  email: string;\n  username: string;\n  first_name: string;\n  last_name: string;\n}\n\nexport interface UserResponse {\n  user: User;\n  token: string;\n  avatar: string;\n}\n\nexport interface Logout {\n  csrfmiddlewaretoken: string;\n}\n\nexport interface LogoutResponse {\n  detail: string;\n}\n\nexport const authApi = createApi({\n  reducerPath: \"authApi\",\n  baseQuery: fetchBaseQuery({\n    baseUrl: \"/\",\n    prepareHeaders: (headers, { getState }) => {\n      const csrfToken = cookie.load(\"csrftoken\");\n\n      if (csrfToken) {\n        headers.set(\"X-CSRFToken\", csrfToken);\n      }\n      const token =\n        (getState() as RootState).auth.token || localStorage.getItem(\"token\");\n      if (token) {\n        headers.set(\"Authorization\", `Token ${token}`);\n      }\n\n      headers.set(\"Content-Type\", \"application/json\");\n\n      return headers;\n    },\n  }),\n  tagTypes: [\"LoginRequest\", \"SignupRequest\", \"Logout\", \"User\", \"UserResponse\"],\n  endpoints: (build) => ({\n    login: build.mutation<UserResponse, Partial<LoginRequest>>({\n      query: (body) => ({\n        url: \"/api/auth/login/\",\n        method: \"POST\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    signup: build.mutation<UserResponse, Partial<SignupRequest>>({\n      query: (body) => ({\n        url: \"/api/auth/signup/\",\n        method: \"POST\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    logout: build.mutation<LogoutResponse, void>({\n      query: (body) => ({\n        url: \"/api/auth/logout/\",\n        method: \"POST\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    facebookLogin: build.mutation<User, Access>({\n      query: (body) => ({\n        url: \"/api/auth/facebook/\",\n        method: \"POST\",\n        body,\n\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n\n    googleLogin: build.mutation<Token, Access>({\n      query: (body) => ({\n        url: \"/api/auth/google/\",\n        method: \"POST\",\n        body,\n\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n\n    googleLoginUrl: build.mutation<User, void>({\n      query: () => ({\n        url: \"/api/auth/google/url\",\n        method: \"POST\",\n\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n\n    facebookLoginUrl: build.mutation<User, void>({\n      query: () => ({\n        url: \"/api/auth/facebook/url\",\n        method: \"POST\",\n\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n\n    getCurrentUser: build.query<User, void>({\n      query: () => ({\n        url: \"rest-auth/user/\",\n        method: \"GET\",\n\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    updateProfile: build.mutation<User, Partial<UserRequest>>({\n      query: (body) => ({\n        url: \"/api/auth/update_profile/\",\n        method: \"PUT\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n\n    getProfile: build.query<UserResponse, void>({\n      query: () => ({\n        url: \"/api/auth/profile/\",\n        method: \"GET\",\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n    updateAvatar: build.mutation<UserResponse, Partial<Avatar>>({\n      query: (body) => ({\n        url: \"/api/auth/update_avatar/\",\n        method: \"PUT\",\n        body,\n        responseHandler: (response) => response.json(),\n      }),\n    }),\n  }),\n});\n\nexport const { getCurrentUser, getProfile } = authApi.endpoints;\n\nexport const {\n  useLoginMutation,\n  useSignupMutation,\n  useLogoutMutation,\n  useGetCurrentUserQuery,\n  useFacebookLoginMutation,\n  useGoogleLoginMutation,\n  useFacebookLoginUrlMutation,\n  useGoogleLoginUrlMutation,\n  useUpdateAvatarMutation,\n  useUpdateProfileMutation,\n  useGetProfileQuery\n} = authApi;\n"]},"metadata":{},"sourceType":"module"}
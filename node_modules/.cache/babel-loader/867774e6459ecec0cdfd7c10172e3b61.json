{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { coursesApi } from \"services/courses\";\nexport const initialState = {\n  sections: null,\n  lectures: null\n};\nexport const curriculumSplice = createSlice({\n  name: \"curriculum\",\n  initialState,\n  reducers: {// addSection: (state, action: PayloadAction<Section>) => {\n    //   state.sections.push(action.payload);\n    // },\n    // addLecture: (state, action: PayloadAction<Lecture>) => {\n    //   state.lectures = action.payload;\n    // },\n  },\n  extraReducers: builder => {\n    builder.addMatcher(coursesApi.endpoints.createSection.matchFulfilled, (state, {\n      payload\n    }) => {\n      state.sections = payload;\n    }).addMatcher(coursesApi.endpoints.fetchSections.matchFulfilled, (state, {\n      payload\n    }) => {\n      state.sections = payload;\n    }).addMatcher(coursesApi.endpoints.fetchLectures.matchFulfilled, (state, {\n      payload\n    }) => {\n      state.lectures = payload;\n    }).addMatcher(coursesApi.endpoints.createLecture.matchFulfilled, (state, {\n      payload\n    }) => {\n      state.lectures = payload;\n    }).addMatcher(coursesApi.endpoints.editSection.matchFulfilled, (state, {\n      payload\n    }) => {\n      const sections = state.sections.map(section => {\n        if (section.id == payload.id) {\n          return payload;\n        }\n\n        return section;\n      });\n      state.sections = sections;\n    }).addMatcher(coursesApi.endpoints.editLecture.matchFulfilled, (state, {\n      payload\n    }) => {\n      const lectures = state.lectures.map(section => {\n        if (section.id == payload.id) {\n          return payload;\n        }\n\n        return section;\n      });\n      state.sections = lectures;\n    }).addMatcher(coursesApi.endpoints.deleteSection.matchFulfilled, (state, {\n      payload\n    }) => {\n      state.sections = state.sections.filter(section => section.id != payload.id);\n    });\n  }\n}); // export const { addSection, addLecture } = curriculumSplice.actions;\n\nexport default curriculumSplice.reducer;\nexport const selectSections = state => state.curriculum.sections;","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/state/curriculum/currriculumSplice.ts"],"names":["createSlice","coursesApi","initialState","sections","lectures","curriculumSplice","name","reducers","extraReducers","builder","addMatcher","endpoints","createSection","matchFulfilled","state","payload","fetchSections","fetchLectures","createLecture","editSection","map","section","id","editLecture","deleteSection","filter","reducer","selectSections","curriculum"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { coursesApi, Lecture } from \"services/courses\";\nimport { AppThunk, RootState } from \"store\";\n\nexport interface CurriculumState {\n  sections: Section[];\n  lectures: Lecture[];\n}\n\nexport interface Section {\n  title: string;\n  id: number;\n  course: number;\n  description?: string;\n  order: number;\n}\n\n\n\n\n\nexport const initialState: CurriculumState = {\n  sections: null,\n  lectures: null,\n};\n\nexport const curriculumSplice = createSlice({\n  name: \"curriculum\",\n  initialState,\n  reducers: {\n    // addSection: (state, action: PayloadAction<Section>) => {\n    //   state.sections.push(action.payload);\n    // },\n\n    // addLecture: (state, action: PayloadAction<Lecture>) => {\n    //   state.lectures = action.payload;\n    // },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addMatcher(\n        coursesApi.endpoints.createSection.matchFulfilled,\n        (state, { payload }) => {\n          state.sections = payload;\n        }\n      ).addMatcher(\n        coursesApi.endpoints.fetchSections.matchFulfilled,\n        (state, { payload }) => {\n          state.sections = payload\n        }\n      ).addMatcher(\n        coursesApi.endpoints.fetchLectures.matchFulfilled,\n        (state, { payload }) => {\n          state.lectures = payload\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.createLecture.matchFulfilled,\n        (state, { payload }) => {\n          state.lectures = payload\n        }\n      ).addMatcher(\n        coursesApi.endpoints.editSection.matchFulfilled,\n        (state, { payload }) => {\n          const sections = state.sections.map(section => {\n              if (section.id == payload.id) {\n                  return payload\n              }\n              return section\n          });\n          state.sections = sections\n        }\n      ).addMatcher(\n        coursesApi.endpoints.editLecture.matchFulfilled,\n        (state, { payload }) => {\n          const lectures = state.lectures.map(section => {\n              if (section.id == payload.id) {\n                  return payload\n              }\n              return section\n          });\n          state.sections = lectures\n        }\n      ).addMatcher(\n        coursesApi.endpoints.deleteSection.matchFulfilled,\n        (state, { payload }) => {\n          state.sections = state.sections.filter(section => section.id != payload.id)\n        }\n      );\n  },\n});\n\n// export const { addSection, addLecture } = curriculumSplice.actions;\n\nexport default curriculumSplice.reducer;\nexport const selectSections  = (state: RootState) => state.curriculum.sections"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{clamp}from'../utilities/clamp';import classNames from'classnames';import css from'./slider.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Slider=/*#__PURE__*/function(_Component){_inherits(Slider,_Component);var _super=_createSuper(Slider);function Slider(props){var _this;_classCallCheck(this,Slider);_this=_super.call(this,props);_this.handleStart=function(e){var _this$props=_this.props,onChangeStart=_this$props.onChangeStart,onChange=_this$props.onChange;e&&e.preventDefault&&e.preventDefault();document.addEventListener('mousemove',_this.handleDrag);document.addEventListener('touchmove',_this.handleDrag);document.addEventListener('mouseup',_this.handleEnd);document.addEventListener('touchend',_this.handleEnd);var box=_this.slider.getBoundingClientRect();var ratio=getRatio(box,e);_this.setState({dragging:true,hovering:e&&e.type==='mousedown'},function(){onChangeStart&&onChangeStart(ratio);_this.hoverChange(ratio);});};_this.handleEnd=function(e){var onChangeEnd=_this.props.onChangeEnd;var hovering=_this.state.hovering;e&&e.preventDefault&&e.preventDefault();var box=_this.slider.getBoundingClientRect();var ratio=getRatio(box,e);_this.setState({dragging:false,hovering:e&&e.type==='touchend'?false:hovering},function(){onChangeEnd&&onChangeEnd(ratio);_this.hoverChange(ratio);});document.removeEventListener('mousemove',_this.handleDrag);document.removeEventListener('touchmove',_this.handleDrag);document.removeEventListener('mouseup',_this.handleEnd);document.removeEventListener('touchend',_this.handleEnd);};_this.handleDrag=function(e){e.stopPropagation();var onChange=_this.props.onChange;var box=_this.slider.getBoundingClientRect();var value=getRatio(box,e);onChange&&onChange(value);_this.hoverChange(value);};_this.onMouseEnter=function(e){_this.setState({hovering:true},_this.hoverChange);};_this.onMouseLeave=function(e){_this.setState({hovering:false},_this.hoverChange);};_this.onMouseMove=function(e){var box=_this.slider.getBoundingClientRect();var value=getRatio(box,e);_this.hoverChange(value);};_this.handleKeyDown=function(e){var keyCode=e.keyCode;var _this$props2=_this.props,value=_this$props2.value,onChange=_this$props2.onChange,passedStep=_this$props2.step;var min=0,max=1,step=passedStep||0.1;switch(keyCode){case 38:// up\ncase 39:// right\ne.preventDefault&&e.preventDefault();onChange&&onChange(clamp(value+step,0,1));break;case 37:// left\ncase 40:// down\ne.preventDefault&&e.preventDefault();onChange&&onChange(clamp(value-step,0,1));break;}};_this.hoverChange=function(ratio){var onHoverChange=_this.props.onHoverChange;var _this$state=_this.state,hovering=_this$state.hovering,dragging=_this$state.dragging;onHoverChange&&onHoverChange({ratio:ratio||null,active:hovering||dragging});};_this.cancelEvent=function(e){e.preventDefault();};_this.renderBackgroundBars=function(active,verticalStyle){var _this$props3=_this.props,bars=_this$props3.bars,barClass=_this$props3.barClass;if(!bars)return/*#__PURE__*/_jsx(\"div\",{style:verticalStyle,className:classNames(css.bar,barClass,css.backgroundFill,_defineProperty({},css.hovering,active))});return bars.map(function(bar){return/*#__PURE__*/_jsx(\"div\",{className:classNames(css.bar,bar.fillStyle,barClass,css.fill,_defineProperty({},css.hovering,active)),style:_objectSpread(_objectSpread({},{width:\"\".concat(clamp(bar.value*100,0,100),\"%\")}),verticalStyle)},bar.key);});};_this.renderMarkerTicks=function(markerClusters,active,styles){return markerClusters.map(function(c){return/*#__PURE__*/_jsx(\"span\",{className:classNames(css['marker-tick'],_defineProperty({},css.hovering,active)),style:_objectSpread(_objectSpread({},styles),{},{left:\"calc(\".concat(c.leftOffset,\"% + 7px)\")})},c.markers[0].id);});};_this.state={hovering:false,dragging:false};return _this;}_createClass(Slider,[{key:\"render\",value:// prettier-ignore\nfunction render(){var _classNames4,_this2=this;var _this$props4=this.props,ariaLabel=_this$props4.ariaLabel,ariaValueText=_this$props4.ariaValueText,className=_this$props4.className,bars=_this$props4.bars,barClass=_this$props4.barClass,fillClass=_this$props4.fillClass,hoveringOverride=_this$props4.hovering,value=_this$props4.value,padded=_this$props4.padded,bottom=_this$props4.bottom,verticalAlign=_this$props4.verticalAlign,markerClusters=_this$props4.markerClusters;var _this$state2=this.state,hovering=_this$state2.hovering,dragging=_this$state2.dragging;var active=hoveringOverride||hovering||dragging;var clampedValue=clamp((value||0)*100,0,100);var percentageValue=Math.round(clampedValue);var verticalStyle={top:\"\".concat(verticalAlign?verticalAlign:50,\"%\")};var fillStyle={width:\"\".concat(clampedValue,\"%\")};var handleStyle={left:\"\".concat(clampedValue,\"%\")};return/*#__PURE__*/_jsxs(\"div\",{className:classNames(className,css.slider,(_classNames4={},_defineProperty(_classNames4,css.hovering,active),_defineProperty(_classNames4,css.padded,padded),_defineProperty(_classNames4,css.bottom,bottom),_classNames4)),ref:function ref(_ref2){return _this2.slider=_ref2;},onContextMenu:this.cancelEvent,onMouseDown:this.handleStart,onTouchStart:this.handleStart,onMouseMove:this.onMouseMove,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:[this.props.children,this.renderBackgroundBars(active,verticalStyle),/*#__PURE__*/_jsx(\"div\",{className:classNames(css.bar,barClass,fillClass,css.fill,_defineProperty({},css.hovering,active)),style:_objectSpread(_objectSpread({},fillStyle),verticalStyle)}),/*#__PURE__*/_jsx(\"span\",{\"aria-label\":ariaLabel,role:\"slider\",\"aria-valuemin\":\"0\",\"aria-valuemax\":\"100\",\"aria-valuenow\":percentageValue,\"aria-valuetext\":ariaValueText,tabIndex:\"0\",onKeyDown:this.handleKeyDown,className:classNames(css.handle,_defineProperty({},css.hovering,active)),onContextMenu:this.cancelEvent,ref:function ref(_ref){return _this2.handle=_ref;},style:_objectSpread(_objectSpread({},handleStyle),verticalStyle)}),markerClusters&&this.renderMarkerTicks(markerClusters,active,verticalStyle)]});}}]);return Slider;}(Component);export{Slider as default};function getRatio(boundingRect,event){if(!event)return 0;var boxWidth=boundingRect.width,x=boundingRect.left;var pageX=event.pageX||event.touches&&event.touches.length>0&&event.touches[0].pageX||0;var numerator=pageX-x;return Math.max(Math.min(numerator,boxWidth),0)/boxWidth;}export function getPercentage(boundingRect,event){return getRatio(boundingRect,event)*100;}","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/slider/slider.js"],"names":["React","Component","clamp","classNames","css","Slider","props","handleStart","e","onChangeStart","onChange","preventDefault","document","addEventListener","handleDrag","handleEnd","box","slider","getBoundingClientRect","ratio","getRatio","setState","dragging","hovering","type","hoverChange","onChangeEnd","state","removeEventListener","stopPropagation","value","onMouseEnter","onMouseLeave","onMouseMove","handleKeyDown","keyCode","passedStep","step","min","max","onHoverChange","active","cancelEvent","renderBackgroundBars","verticalStyle","bars","barClass","bar","backgroundFill","map","fillStyle","fill","width","key","renderMarkerTicks","markerClusters","styles","c","left","leftOffset","markers","id","ariaLabel","ariaValueText","className","fillClass","hoveringOverride","padded","bottom","verticalAlign","clampedValue","percentageValue","Math","round","top","handleStyle","ref","children","handle","boundingRect","event","boxWidth","x","pageX","touches","length","numerator","getPercentage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { clamp } from '../utilities/clamp'\nimport classNames from 'classnames';\nimport css from './slider.module.scss';\n\nexport default class Slider extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = { hovering: false, dragging: false }\n  }\n\n  handleStart = (e) => {\n    const { onChangeStart, onChange } = this.props\n\n    e && e.preventDefault && e.preventDefault()\n\n    document.addEventListener('mousemove', this.handleDrag)\n    document.addEventListener('touchmove', this.handleDrag)\n    document.addEventListener('mouseup', this.handleEnd)\n    document.addEventListener('touchend', this.handleEnd)\n\n    const box = this.slider.getBoundingClientRect()\n    const ratio = getRatio(box, e)\n\n    this.setState(\n      {\n        dragging: true,\n        hovering: e && e.type === 'mousedown',\n      },\n      () => {\n        onChangeStart && onChangeStart(ratio)\n\n        this.hoverChange(ratio)\n      }\n    )\n  }\n\n  handleEnd = (e) => {\n    const { onChangeEnd } = this.props\n    const { hovering } = this.state\n\n    e && e.preventDefault && e.preventDefault()\n\n    const box = this.slider.getBoundingClientRect()\n    const ratio = getRatio(box, e)\n\n    this.setState(\n      {\n        dragging: false,\n        hovering: e && e.type === 'touchend' ? false : hovering,\n      },\n      () => {\n        onChangeEnd && onChangeEnd(ratio)\n\n        this.hoverChange(ratio)\n      }\n    )\n\n    document.removeEventListener('mousemove', this.handleDrag)\n    document.removeEventListener('touchmove', this.handleDrag)\n    document.removeEventListener('mouseup', this.handleEnd)\n    document.removeEventListener('touchend', this.handleEnd)\n  }\n\n  handleDrag = (e) => {\n    e.stopPropagation()\n\n    const { onChange } = this.props\n\n    const box = this.slider.getBoundingClientRect()\n    let value = getRatio(box, e)\n\n    onChange && onChange(value)\n\n    this.hoverChange(value)\n  }\n\n  onMouseEnter = (e) => {\n    this.setState({ hovering: true }, this.hoverChange)\n  }\n\n  onMouseLeave = (e) => {\n    this.setState({ hovering: false }, this.hoverChange)\n  }\n\n  onMouseMove = (e) => {\n    const box = this.slider.getBoundingClientRect()\n    const value = getRatio(box, e)\n\n    this.hoverChange(value)\n  }\n\n  handleKeyDown = (e) => {\n    const { keyCode } = e\n    const { value, onChange, step: passedStep } = this.props\n    const min = 0,\n      max = 1,\n      step = passedStep || 0.1\n\n    switch (keyCode) {\n      case 38: // up\n      case 39: // right\n        e.preventDefault && e.preventDefault()\n\n        onChange && onChange(clamp(value + step, 0, 1))\n        break\n      case 37: // left\n      case 40: // down\n        e.preventDefault && e.preventDefault()\n\n        onChange && onChange(clamp(value - step, 0, 1))\n        break\n    }\n  }\n\n  hoverChange = (ratio) => {\n    const { onHoverChange } = this.props\n    const { hovering, dragging } = this.state\n\n    onHoverChange &&\n      onHoverChange({\n        ratio: ratio || null,\n        active: hovering || dragging,\n      })\n  }\n\n  cancelEvent = (e) => {\n    e.preventDefault()\n  }\n\n  renderBackgroundBars = (active, verticalStyle) => {\n    const { bars, barClass } = this.props\n\n    if (!bars)\n      return (\n        <div\n          style={verticalStyle}\n          className={classNames(css.bar, barClass, css.backgroundFill, { [css.hovering]: active })}\n        />\n      )\n\n    return bars.map((bar) => (\n      <div\n        key={bar.key}\n        className={classNames(css.bar, bar.fillStyle, barClass, css.fill, { [css.hovering]: active })}\n        style={{ ...{ width: `${clamp(bar.value * 100, 0, 100)}%` }, ...verticalStyle }}\n      />\n    ))\n  }\n\n  renderMarkerTicks = (markerClusters, active, styles) => {\n    return markerClusters.map((c) => (\n      <span\n        className={classNames(css['marker-tick'], { [css.hovering]: active })}\n        key={c.markers[0].id}\n        style={{ ...styles, left: `calc(${c.leftOffset}% + 7px)` }}\n      />\n    ))\n  }\n\n  // prettier-ignore\n  render() {\n    const { ariaLabel, ariaValueText, className, bars, barClass, fillClass, hovering: hoveringOverride, value, padded, bottom, verticalAlign, markerClusters } = this.props\n    const { hovering, dragging } = this.state\n\n    const active = hoveringOverride || (hovering || dragging)\n\n    const clampedValue = clamp((value || 0) * 100, 0, 100)\n    const percentageValue = Math.round(clampedValue)\n\n    const verticalStyle = { top: `${verticalAlign ? verticalAlign : 50}%`}\n    const fillStyle = { width: `${clampedValue}%` }\n    const handleStyle = { left: `${clampedValue}%` }\n\n    return <div \n            className={classNames(className, css.slider, {\n              [css.hovering]: active,\n              [css.padded]: padded,\n              [css.bottom]: bottom,\n            })} \n            ref={ref => (this.slider = ref)} \n            onContextMenu={this.cancelEvent} \n            onMouseDown={this.handleStart} \n            onTouchStart={this.handleStart} \n            onMouseMove={this.onMouseMove} \n            onMouseEnter={this.onMouseEnter} \n            onMouseLeave={this.onMouseLeave}\n          >\n            {this.props.children}\n            {this.renderBackgroundBars(active, verticalStyle)}\n          <div className={classNames(css.bar, barClass, fillClass, css.fill, { [css.hovering]: active})} \n            style={{ ...fillStyle, ...verticalStyle }} \n          />\n            <span \n              aria-label={ariaLabel} \n              role=\"slider\" \n              aria-valuemin=\"0\" \n              aria-valuemax=\"100\" \n              aria-valuenow={percentageValue} \n              aria-valuetext={ariaValueText} \n              tabIndex=\"0\" \n              onKeyDown={this.handleKeyDown} \n              className={classNames(css.handle,{ [css.hovering]: active })} \n              onContextMenu={this.cancelEvent} \n              ref={ref => (this.handle = ref)} \n              style={{ ...handleStyle, ...verticalStyle }} \n            />\n            { markerClusters && this.renderMarkerTicks(markerClusters, active, verticalStyle) }\n          </div>\n  }\n}\n\nfunction getRatio(boundingRect, event) {\n  if (!event) return 0\n\n  const { width: boxWidth, left: x } = boundingRect\n\n  const pageX = event.pageX || (event.touches && event.touches.length > 0 && event.touches[0].pageX) || 0\n\n  const numerator = pageX - x\n\n  return Math.max(Math.min(numerator, boxWidth), 0) / boxWidth\n}\n\nexport function getPercentage(boundingRect, event) {\n  return getRatio(boundingRect, event) * 100\n}\n"]},"metadata":{},"sourceType":"module"}
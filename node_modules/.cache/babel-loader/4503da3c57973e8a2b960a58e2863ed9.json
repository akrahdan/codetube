{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useLogoutMutation}from'services/auth';import cookie from'react-cookies';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UserDropdown=function UserDropdown(_ref){var profile=_ref.profile;var _useHistory=useHistory(),push=_useHistory.push;var _useLogoutMutation=useLogoutMutation(),_useLogoutMutation2=_slicedToArray(_useLogoutMutation,1),logout=_useLogoutMutation2[0];if(!profile){return null;}var initialAvatar=function initialAvatar(profile){var firstName=profile.first_name;var lastName=profile.last_name;if(firstName&&firstName!==\"\"){return firstName.substr(0,2);}if(lastName&&lastName!==\"\"){return lastName.substr(0,2);}var user=profile.user;if(user.email&&user.email!==\"\"){return user.email.substr(0,2);}};return/*#__PURE__*/_jsxs(\"ul\",{role:\"menu\",className:\"dropdown-menu dropdown-menu-right\",\"aria-labelledby\":\"header.profile\",children:[/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"menu__link\",children:/*#__PURE__*/_jsxs(\"a\",{\"aria-label\":\"Edit your profile\",\"data-purpose\":\"edit-profile\",href:\"/instructor/user/edit-profile/\",rel:\" noopener noreferrer\",target:\"_self\",role:\"menuitem\",children:[profile.avatar?/*#__PURE__*/_jsx(\"img\",{alt:\"\",className:\"user-avatar user-avatar--image\",height:48,src:profile.avatar,width:48}):/*#__PURE__*/_jsx(\"div\",{role:\"img\",\"aria-label\":profile&&profile.email,className:\"user-avatar user-avatar--initials\",style:{backgroundColor:\"rgb(28, 29, 31)\",fontSize:\"15px\",width:\"48px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar__inner fx-c\",children:/*#__PURE__*/_jsx(\"span\",{className:\"user-initials\",children:initialAvatar(profile)})})}),/*#__PURE__*/_jsxs(\"span\",{className:\"fx ml-space-xs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-midnight ellipsis\",children:profile.first_name?\"\".concat(profile.first_name,\" \").concat(profile.last_name):profile.email?profile.email:profile.user.email}),/*#__PURE__*/_jsx(\"span\",{className:\"a11 text-midnight-lighter ellipsis\",children:profile.email?profile.email:profile.user?profile.user.email:''})]})]})}),/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"menu__link hidden-lg hidden-xl\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/instructor/courses\",rel:\" noopener noreferrer\",target:\"_self\",role:\"menuitem\",children:/*#__PURE__*/_jsx(\"span\",{children:\"My notifications\"})})}),/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"menu__link\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/profiles/me\",rel:\"nofollow noreferrer noopener noopener noreferrer\",target:\"_blank\",role:\"menuitem\",children:\"Public profile\"})}),/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"menu__link\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/instructor/user/edit-info\",rel:\" noopener noreferrer\",target:\"_self\",role:\"menuitem\",children:\"Payout settings\"})}),/*#__PURE__*/_jsx(\"li\",{role:\"separator\",className:\"divider\"}),/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"menu__link\",children:/*#__PURE__*/_jsx(\"a\",{\"data-purpose\":\"do-logout\",onClick:function onClick(event){event.preventDefault();var obj={csrfmiddlewaretoken:cookie.load('csrftoken')};logout().then(function(res){if(res.data.detail){localStorage.clear();push('/');}});},rel:\" noopener noreferrer\",target:\"_self\",role:\"menuitem\",children:\"Log out\"})}),/*#__PURE__*/_jsx(\"li\",{role:\"separator\",className:\"divider--account-ads divider\"}),/*#__PURE__*/_jsx(\"li\",{role:\"presentation\",className:\"menu__link account-menu-ufb-ad\",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",rel:\"noopener noopener\",target:\"_blank\",role:\"menuitem\"})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Dashboard/UserDropdown.tsx"],"names":["useLogoutMutation","cookie","useHistory","UserDropdown","profile","push","logout","initialAvatar","firstName","first_name","lastName","last_name","substr","user","email","avatar","backgroundColor","fontSize","width","event","preventDefault","obj","csrfmiddlewaretoken","load","then","res","data","detail","localStorage","clear"],"mappings":"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","sourcesContent":["import type { InstructorResponse } from \"services/courses\";\nimport { LogoutResponse, useLogoutMutation} from 'services/auth';\nimport cookie from 'react-cookies';\nimport { useHistory } from 'react-router-dom'\ntype DropdownProps = {\n  profile: InstructorResponse\n}\nexport const UserDropdown: React.FC<DropdownProps> = ({ profile }) => {\n\n  const { push } = useHistory()\n  const [ logout ] = useLogoutMutation()\n  if (!profile) {\n    return null;\n  }\n\n  const initialAvatar = (profile: InstructorResponse) => {\n    const firstName = profile.first_name;\n    const lastName = profile.last_name;\n    if(firstName && firstName !== \"\") {\n      return firstName.substr(0,2)\n    }\n    if(lastName && lastName !== \"\") {\n      return lastName.substr(0,2)\n    }\n    const user = profile.user;\n    if (user.email && user.email !== \"\") {\n      return user.email.substr(0,2)\n    }\n  }\n\n  return (\n    <ul\n      role=\"menu\"\n      className=\"dropdown-menu dropdown-menu-right\"\n      aria-labelledby=\"header.profile\"\n    >\n      <li role=\"presentation\" className=\"menu__link\">\n        <a\n          aria-label=\"Edit your profile\"\n          data-purpose=\"edit-profile\"\n          href=\"/instructor/user/edit-profile/\"\n          rel=\" noopener noreferrer\"\n          target=\"_self\"\n\n          role=\"menuitem\"\n        >\n          {profile.avatar ? (<img alt=\"\" className=\"user-avatar user-avatar--image\" height={48} src={profile.avatar} width={48} />\n          ) : (<div\n            role=\"img\"\n            aria-label={profile && profile.email}\n            className=\"user-avatar user-avatar--initials\"\n            style={{\n              backgroundColor: \"rgb(28, 29, 31)\",\n              fontSize: \"15px\",\n              width: \"48px\",\n            }}\n          >\n            <div className=\"user-avatar__inner fx-c\">\n              <span className=\"user-initials\">{initialAvatar(profile)}</span>\n            </div>\n          </div>)}\n          <span className=\"fx ml-space-xs\">\n            <span className=\"text-midnight ellipsis\">{profile.first_name ? `${profile.first_name} ${profile.last_name}` : profile.email ? profile.email : profile.user.email}</span>\n            <span className=\"a11 text-midnight-lighter ellipsis\">\n              {profile.email ? profile.email : profile.user ? profile.user.email : ''}\n            </span>\n          </span>\n        </a>\n      </li>\n      <li role=\"presentation\" className=\"menu__link hidden-lg hidden-xl\">\n        <a\n          href=\"/instructor/courses\"\n          rel=\" noopener noreferrer\"\n          target=\"_self\"\n\n          role=\"menuitem\"\n        >\n          <span>My notifications</span>\n        </a>\n      </li>\n      <li role=\"presentation\" className=\"menu__link\">\n        <a\n          href=\"/profiles/me\"\n          rel=\"nofollow noreferrer noopener noopener noreferrer\"\n          target=\"_blank\"\n\n          role=\"menuitem\"\n        >\n          Public profile\n        </a>\n      </li>\n\n      <li role=\"presentation\" className=\"menu__link\">\n        <a\n          href=\"/instructor/user/edit-info\"\n          rel=\" noopener noreferrer\"\n          target=\"_self\"\n\n          role=\"menuitem\"\n        >\n          Payout settings\n        </a>\n      </li>\n      <li role=\"separator\" className=\"divider\" />\n      <li role=\"presentation\" className=\"menu__link\">\n        <a\n          data-purpose=\"do-logout\"\n          onClick = {event => {\n            event.preventDefault()\n            const obj = {\n              csrfmiddlewaretoken: cookie.load('csrftoken')\n            }\n            logout().then((res: { data: LogoutResponse}) => {\n              if(res.data.detail) {\n                localStorage.clear()\n                push('/')\n              }\n              \n            })\n          }}\n\n          rel=\" noopener noreferrer\"\n          target=\"_self\"\n\n          role=\"menuitem\"\n        >\n          Log out\n        </a>\n      </li>\n      <li role=\"separator\" className=\"divider--account-ads divider\" />\n      <li role=\"presentation\" className=\"menu__link account-menu-ufb-ad\">\n        <a\n\n          href=\"#\"\n          rel=\"noopener noopener\"\n          target=\"_blank\"\n          role=\"menuitem\"\n        >\n\n        </a>\n      </li>\n    </ul>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
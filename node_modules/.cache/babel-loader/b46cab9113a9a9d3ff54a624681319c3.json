{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/codefluent/src/components/gamut-overrides/CurriculumCard/Image/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { pxRem } from '@codecademy/gamut-styles';\nimport styled from '@emotion/styled';\nimport React, { useState } from 'react';\nimport { useIsomorphicLayoutEffect } from 'react-use';\nimport { BASE_STATIC_ASSET_PATH } from '../../remoteAssets/components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StyledImg = styled.img`\n  display: block;\n  margin: 0 auto;\n  width: ${pxRem(160)};\n`;\n_c = StyledImg;\n\nconst getPlaceholderAssetPath = pathProgressState => {\n  const progressState = pathProgressState ? `-${pathProgressState}` : '';\n  return `${BASE_STATIC_ASSET_PATH}/curriculum/path/placeholder${progressState}.svg`;\n};\n\nexport const Image = ({\n  image,\n  progressState\n}) => {\n  _s();\n\n  const [ready, setReady] = useState(false);\n  const [error, setError] = useState(false);\n  /** Delay initial render once to ensure that rehydration does not conflict with portal mounting */\n\n  useIsomorphicLayoutEffect(() => {\n    setReady(typeof document !== 'undefined');\n  }, []);\n  if (!ready) return null;\n\n  const addDefaultImageSource = event => {\n    if (!error) {\n      event.target.onerror = null;\n      event.target.src = getPlaceholderAssetPath(progressState);\n      setError(true);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(StyledImg, {\n    src: image,\n    alt: \"\",\n    onError: addDefaultImageSource\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Image, \"KKw3IcIAIJR4PnsRgnTZrtnJtA8=\", false, function () {\n  return [useIsomorphicLayoutEffect];\n});\n\n_c2 = Image;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"StyledImg\");\n$RefreshReg$(_c2, \"Image\");","map":{"version":3,"sources":["/Users/akrah/Documents/dev/codefluent/src/components/gamut-overrides/CurriculumCard/Image/index.tsx"],"names":["pxRem","styled","React","useState","useIsomorphicLayoutEffect","BASE_STATIC_ASSET_PATH","StyledImg","img","getPlaceholderAssetPath","pathProgressState","progressState","Image","image","ready","setReady","error","setError","document","addDefaultImageSource","event","target","onerror","src"],"mappings":";;;AAAA,SAASA,KAAT,QAAsB,0BAAtB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,yBAAT,QAA0C,WAA1C;AAEA,SAASC,sBAAT,QAAuC,+BAAvC;;AAEA,MAAMC,SAAS,GAAGL,MAAM,CAACM,GAAI;AAC7B;AACA;AACA,WAAWP,KAAK,CAAC,GAAD,CAAM;AACtB,CAJA;KAAMM,S;;AAQN,MAAME,uBAAuB,GAAIC,iBAAD,IAAuC;AACrE,QAAMC,aAAa,GAAGD,iBAAiB,GAAI,IAAGA,iBAAkB,EAAzB,GAA6B,EAApE;AACA,SAAQ,GAAEJ,sBAAuB,+BAA8BK,aAAc,MAA7E;AACD,CAHD;;AAUA,OAAO,MAAMC,KAA2B,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASF,EAAAA;AAAT,CAAD,KAA8B;AAAA;;AACvE,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,KAAD,CAAlC;AAEA;;AACAC,EAAAA,yBAAyB,CAAC,MAAM;AAC9BU,IAAAA,QAAQ,CAAC,OAAOG,QAAP,KAAoB,WAArB,CAAR;AACD,GAFwB,EAEtB,EAFsB,CAAzB;AAIA,MAAI,CAACJ,KAAL,EAAY,OAAO,IAAP;;AAEZ,QAAMK,qBAAqB,GAAIC,KAAD,IAAiC;AAC7D,QAAI,CAACJ,KAAL,EAAY;AACTI,MAAAA,KAAK,CAACC,MAAP,CAAmCC,OAAnC,GAA6C,IAA7C;AACCF,MAAAA,KAAK,CAACC,MAAP,CAAmCE,GAAnC,GAAyCd,uBAAuB,CAC9DE,aAD8D,CAAhE;AAGAM,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF,GARD;;AAUA,sBAAO,QAAC,SAAD;AAAW,IAAA,GAAG,EAAEJ,KAAhB;AAAuB,IAAA,GAAG,EAAC,EAA3B;AAA8B,IAAA,OAAO,EAAEM;AAAvC;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,CAtBM;;GAAMP,K;UAKXP,yB;;;MALWO,K","sourcesContent":["import { pxRem } from '@codecademy/gamut-styles';\nimport styled from '@emotion/styled';\nimport React, { useState } from 'react';\nimport { useIsomorphicLayoutEffect } from 'react-use';\n\nimport { BASE_STATIC_ASSET_PATH } from '../../remoteAssets/components';\n\nconst StyledImg = styled.img`\n  display: block;\n  margin: 0 auto;\n  width: ${pxRem(160)};\n`;\n\ntype ProgressState = 'inProgress' | 'completed';\n\nconst getPlaceholderAssetPath = (pathProgressState?: ProgressState) => {\n  const progressState = pathProgressState ? `-${pathProgressState}` : '';\n  return `${BASE_STATIC_ASSET_PATH}/curriculum/path/placeholder${progressState}.svg`;\n};\n\nexport type ImageProps = {\n  image: string;\n  progressState?: ProgressState;\n};\n\nexport const Image: React.FC<ImageProps> = ({ image, progressState }) => {\n  const [ready, setReady] = useState(false);\n  const [error, setError] = useState(false);\n\n  /** Delay initial render once to ensure that rehydration does not conflict with portal mounting */\n  useIsomorphicLayoutEffect(() => {\n    setReady(typeof document !== 'undefined');\n  }, []);\n\n  if (!ready) return null;\n\n  const addDefaultImageSource = (event: React.SyntheticEvent) => {\n    if (!error) {\n      (event.target as HTMLImageElement).onerror = null;\n      (event.target as HTMLImageElement).src = getPlaceholderAssetPath(\n        progressState\n      );\n      setError(true);\n    }\n  };\n\n  return <StyledImg src={image} alt=\"\" onError={addDefaultImageSource} />;\n};\n"]},"metadata":{},"sourceType":"module"}
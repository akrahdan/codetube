{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Box}from'@codecademy/gamut';import{useTheme}from'@emotion/react';import cx from'classnames';import React,{useCallback,useEffect,useState}from'react';import{AppHeader,AppHeaderMobile}from'..';import{isAppHeaderItemWithHref}from'../AppHeader/AppHeaderElements/types';import{anonDefaultHeaderItems,anonDefaultMobileHeaderItems,anonLandingHeaderItems,anonLandingMobileHeaderItems,anonLoginHeaderItems,anonLoginMobileHeaderItems,anonSignupHeaderItems,anonSignupMobileHeaderItems,freeHeaderItems,freeMobileHeaderItems,loadingHeaderItems,loadingMobileHeaderItems,proHeaderItems,proMobileHeaderItems}from'./GlobalHeaderVariants';import styles from'./styles.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getAppHeaderItems=function getAppHeaderItems(props){var _props$renderNotifica,_props$renderNotifica2;switch(props.type){case'anon':switch(props.variant){case'landing':return anonLandingHeaderItems();case'login':return anonLoginHeaderItems();case'signup':return anonSignupHeaderItems();default:return anonDefaultHeaderItems();}case'free':return freeHeaderItems(props.user,(_props$renderNotifica=props.renderNotifications)===null||_props$renderNotifica===void 0?void 0:_props$renderNotifica.desktop);case'pro':return proHeaderItems(props.user,(_props$renderNotifica2=props.renderNotifications)===null||_props$renderNotifica2===void 0?void 0:_props$renderNotifica2.desktop);case'loading':return loadingHeaderItems;}};var getMobileAppHeaderItems=function getMobileAppHeaderItems(props){var _props$renderNotifica3,_props$renderNotifica4;switch(props.type){case'anon':switch(props.variant){case'landing':return anonLandingMobileHeaderItems();case'login':return anonLoginMobileHeaderItems();case'signup':return anonSignupMobileHeaderItems();default:return anonDefaultMobileHeaderItems();}case'free':return freeMobileHeaderItems(props.user,(_props$renderNotifica3=props.renderNotifications)===null||_props$renderNotifica3===void 0?void 0:_props$renderNotifica3.mobile);case'pro':return proMobileHeaderItems(props.user,(_props$renderNotifica4=props.renderNotifications)===null||_props$renderNotifica4===void 0?void 0:_props$renderNotifica4.mobile);case'loading':return loadingMobileHeaderItems;}};export var GlobalHeader=function GlobalHeader(props){var action=props.action,onLinkAction=props.onLinkAction;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isInHeaderRegion=_useState2[0],setIsInHeaderRegion=_useState2[1];// it is not recommended to replicate this logic in other components unless absolutely necessary, as it is\n// a workaround for style rehydration issues when using react-use/useWindowScroll. The reasoning behind this\n// workaround is discussed here: https://github.com/Codecademy/client-modules/pull/1822#discussion_r650125406\nuseEffect(function(){var checkScroll=function checkScroll(){var _window;return setIsInHeaderRegion(((_window=window)===null||_window===void 0?void 0:_window.pageYOffset)===0);};checkScroll();document.addEventListener('scroll',checkScroll);return function(){return document.removeEventListener('scroll',checkScroll);};},[]);var theme=useTheme();var combinedAction=useCallback(function(event,item){action(event,item);if(isAppHeaderItemWithHref(item))onLinkAction===null||onLinkAction===void 0?void 0:onLinkAction(event,item);},[action,onLinkAction]);var headerClasses=cx(styles.stickyHeader,isInHeaderRegion&&styles.transitionFadeOut);return/*#__PURE__*/_jsxs(Box,{as:\"header\",position:\"sticky\",top:0,zIndex:theme.elements.headerZ,children:[/*#__PURE__*/_jsx(Box,{display:{_:'none',md:'block'},height:theme.elements.headerHeight,className:headerClasses,children:/*#__PURE__*/_jsx(AppHeader,{action:combinedAction,items:getAppHeaderItems(props),search:props.search,redirectParam:props.type==='anon'?props.redirectParam:undefined})}),/*#__PURE__*/_jsx(Box,{display:{_:'block',md:'none'},height:theme.elements.headerHeight,className:headerClasses,children:/*#__PURE__*/_jsx(AppHeaderMobile,{action:combinedAction,items:getMobileAppHeaderItems(props),onSearch:props.search.onSearch,redirectParam:props.type==='anon'?props.redirectParam:undefined})}),props.children]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/codefluent/src/components/gamut-overrides/GlobalHeader/index.tsx"],"names":["Box","useTheme","cx","React","useCallback","useEffect","useState","AppHeader","AppHeaderMobile","isAppHeaderItemWithHref","anonDefaultHeaderItems","anonDefaultMobileHeaderItems","anonLandingHeaderItems","anonLandingMobileHeaderItems","anonLoginHeaderItems","anonLoginMobileHeaderItems","anonSignupHeaderItems","anonSignupMobileHeaderItems","freeHeaderItems","freeMobileHeaderItems","loadingHeaderItems","loadingMobileHeaderItems","proHeaderItems","proMobileHeaderItems","styles","getAppHeaderItems","props","type","variant","user","renderNotifications","desktop","getMobileAppHeaderItems","mobile","GlobalHeader","action","onLinkAction","isInHeaderRegion","setIsInHeaderRegion","checkScroll","window","pageYOffset","document","addEventListener","removeEventListener","theme","combinedAction","event","item","headerClasses","stickyHeader","transitionFadeOut","elements","headerZ","_","md","headerHeight","search","redirectParam","undefined","onSearch","children"],"mappings":"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","sourcesContent":["import { Box } from '@codecademy/gamut';\nimport { useTheme } from '@emotion/react';\nimport cx from 'classnames';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nimport { AppHeader, AppHeaderMobile } from '..';\nimport {\n  AppHeaderItem,\n  isAppHeaderItemWithHref,\n} from '../AppHeader/AppHeaderElements/types';\nimport {\n  FormattedAppHeaderItems,\n  FormattedMobileAppHeaderItems,\n} from '../AppHeader/types';\nimport {\n  anonDefaultHeaderItems,\n  anonDefaultMobileHeaderItems,\n  anonLandingHeaderItems,\n  anonLandingMobileHeaderItems,\n  anonLoginHeaderItems,\n  anonLoginMobileHeaderItems,\n  anonSignupHeaderItems,\n  anonSignupMobileHeaderItems,\n  freeHeaderItems,\n  freeMobileHeaderItems,\n  loadingHeaderItems,\n  loadingMobileHeaderItems,\n  proHeaderItems,\n  proMobileHeaderItems,\n} from './GlobalHeaderVariants';\nimport styles from './styles.module.scss';\nimport { AnonHeader, FreeHeader, LoadingHeader, ProHeader } from './types';\n\nexport type GlobalHeaderProps =\n  | AnonHeader\n  | FreeHeader\n  | ProHeader\n  | LoadingHeader;\n\nconst getAppHeaderItems = (\n  props: GlobalHeaderProps\n): FormattedAppHeaderItems => {\n  switch (props.type) {\n    case 'anon':\n      switch (props.variant) {\n        case 'landing':\n          return anonLandingHeaderItems();\n        case 'login':\n          return anonLoginHeaderItems();\n        case 'signup':\n          return anonSignupHeaderItems();\n        default:\n          return anonDefaultHeaderItems();\n      }\n    case 'free':\n      return freeHeaderItems(props.user, props.renderNotifications?.desktop);\n    case 'pro':\n      return proHeaderItems(props.user, props.renderNotifications?.desktop);\n    case 'loading':\n      return loadingHeaderItems;\n  }\n};\n\nconst getMobileAppHeaderItems = (\n  props: GlobalHeaderProps\n): FormattedMobileAppHeaderItems => {\n  switch (props.type) {\n    case 'anon':\n      switch (props.variant) {\n        case 'landing':\n          return anonLandingMobileHeaderItems();\n        case 'login':\n          return anonLoginMobileHeaderItems();\n        case 'signup':\n          return anonSignupMobileHeaderItems();\n        default:\n          return anonDefaultMobileHeaderItems();\n      }\n    case 'free':\n      return freeMobileHeaderItems(\n        props.user,\n        props.renderNotifications?.mobile\n      );\n    case 'pro':\n      return proMobileHeaderItems(\n        props.user,\n        props.renderNotifications?.mobile\n      );\n    case 'loading':\n      return loadingMobileHeaderItems;\n  }\n};\n\nexport const GlobalHeader: React.FC<GlobalHeaderProps> = (props) => {\n  const { action, onLinkAction } = props;\n\n  const [isInHeaderRegion, setIsInHeaderRegion] = useState(true);\n\n  // it is not recommended to replicate this logic in other components unless absolutely necessary, as it is\n  // a workaround for style rehydration issues when using react-use/useWindowScroll. The reasoning behind this\n  // workaround is discussed here: https://github.com/Codecademy/client-modules/pull/1822#discussion_r650125406\n  useEffect(() => {\n    const checkScroll = () => setIsInHeaderRegion(window?.pageYOffset === 0);\n    checkScroll();\n    document.addEventListener('scroll', checkScroll);\n    return () => document.removeEventListener('scroll', checkScroll);\n  }, []);\n\n  const theme = useTheme();\n\n  const combinedAction = useCallback(\n    (event: React.MouseEvent, item: AppHeaderItem) => {\n      action(event, item);\n      if (isAppHeaderItemWithHref(item)) onLinkAction?.(event, item);\n    },\n    [action, onLinkAction]\n  );\n\n  const headerClasses = cx(\n    styles.stickyHeader,\n    isInHeaderRegion && styles.transitionFadeOut\n  );\n\n  return (\n    <Box as=\"header\" position=\"sticky\" top={0} zIndex={theme.elements.headerZ}>\n      <Box\n        display={{ _: 'none', md: 'block' }}\n        height={theme.elements.headerHeight}\n        className={headerClasses}\n      >\n        <AppHeader\n          action={combinedAction}\n          items={getAppHeaderItems(props)}\n          search={props.search}\n          redirectParam={\n            props.type === 'anon' ? props.redirectParam : undefined\n          }\n        />\n      </Box>\n      <Box\n        display={{ _: 'block', md: 'none' }}\n        height={theme.elements.headerHeight}\n        className={headerClasses}\n      >\n        <AppHeaderMobile\n          action={combinedAction}\n          items={getMobileAppHeaderItems(props)}\n          onSearch={props.search.onSearch}\n          redirectParam={\n            props.type === 'anon' ? props.redirectParam : undefined\n          }\n        />\n      </Box>\n      {props.children}\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
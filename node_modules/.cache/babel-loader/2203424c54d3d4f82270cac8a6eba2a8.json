{"ast":null,"code":"export function getClipProgressFromLocalStorage() {\n  const clipProgress = localStorage.getItem('ps-embeddable-player-clip-progress') || '[]';\n  return JSON.parse(clipProgress);\n}\nexport function getClipProgressById(clipProgress, clipId) {\n  var _clipProgress$find;\n\n  return clipProgress && ((_clipProgress$find = clipProgress.find(clipProg => clipProg.clipId === clipId)) === null || _clipProgress$find === void 0 ? void 0 : _clipProgress$find.videoSecondsWatched) || 0;\n}\n\nfunction isNearEnd(videoSecondsWatched, clipDuration) {\n  return clipDuration - videoSecondsWatched <= 5;\n}\n\nexport function buildClipProgress(oldClipProgress, newClipProgress, duration) {\n  const clipProgress = oldClipProgress.filter(clipProg => clipProg.clipId !== newClipProgress.clipId);\n\n  if (!isNearEnd(newClipProgress.videoSecondsWatched, duration)) {\n    clipProgress.push(newClipProgress);\n  }\n\n  while (clipProgress.length > 50) clipProgress.shift();\n\n  return clipProgress;\n}\nexport function setClipProgress(newClipProgress) {\n  localStorage.setItem('ps-embeddable-player-clip-progress', JSON.stringify(newClipProgress));\n}","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/utilities/sync-clip-progress.js"],"names":["getClipProgressFromLocalStorage","clipProgress","localStorage","getItem","JSON","parse","getClipProgressById","clipId","find","clipProg","videoSecondsWatched","isNearEnd","clipDuration","buildClipProgress","oldClipProgress","newClipProgress","duration","filter","push","length","shift","setClipProgress","setItem","stringify"],"mappings":"AAAA,OAAO,SAASA,+BAAT,GAA2C;AAC9C,QAAMC,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,oCAArB,KAA8D,IAAnF;AACA,SAAOC,IAAI,CAACC,KAAL,CAAWJ,YAAX,CAAP;AACH;AAED,OAAO,SAASK,mBAAT,CAA6BL,YAA7B,EAA2CM,MAA3C,EAAmD;AAAA;;AACtD,SAAON,YAAY,2BAAIA,YAAY,CAACO,IAAb,CAAkBC,QAAQ,IAAIA,QAAQ,CAACF,MAAT,KAAoBA,MAAlD,CAAJ,uDAAI,mBAA2DG,mBAA/D,CAAZ,IAAkG,CAAzG;AACH;;AAED,SAASC,SAAT,CAAmBD,mBAAnB,EAAwCE,YAAxC,EAAsD;AAClD,SAAOA,YAAY,GAAGF,mBAAf,IAAsC,CAA7C;AACH;;AAED,OAAO,SAASG,iBAAT,CAA2BC,eAA3B,EAA4CC,eAA5C,EAA6DC,QAA7D,EAAuE;AAC1E,QAAMf,YAAY,GAAGa,eAAe,CAACG,MAAhB,CAAuBR,QAAQ,IAAIA,QAAQ,CAACF,MAAT,KAAoBQ,eAAe,CAACR,MAAvE,CAArB;;AACA,MAAI,CAACI,SAAS,CAACI,eAAe,CAACL,mBAAjB,EAAsCM,QAAtC,CAAd,EAA+D;AAC3Df,IAAAA,YAAY,CAACiB,IAAb,CAAkBH,eAAlB;AACH;;AAED,SAAOd,YAAY,CAACkB,MAAb,GAAsB,EAA7B,EAAiClB,YAAY,CAACmB,KAAb;;AACjC,SAAOnB,YAAP;AACH;AAED,OAAO,SAASoB,eAAT,CAAyBN,eAAzB,EAA0C;AAC7Cb,EAAAA,YAAY,CAACoB,OAAb,CAAqB,oCAArB,EAA2DlB,IAAI,CAACmB,SAAL,CAAeR,eAAf,CAA3D;AACH","sourcesContent":["export function getClipProgressFromLocalStorage() {\n    const clipProgress = localStorage.getItem('ps-embeddable-player-clip-progress') || '[]'\n    return JSON.parse(clipProgress)\n}\n\nexport function getClipProgressById(clipProgress, clipId) {\n    return clipProgress && clipProgress.find(clipProg => clipProg.clipId === clipId)?.videoSecondsWatched || 0\n}\n\nfunction isNearEnd(videoSecondsWatched, clipDuration) {\n    return clipDuration - videoSecondsWatched <= 5\n}\n\nexport function buildClipProgress(oldClipProgress, newClipProgress, duration) {\n    const clipProgress = oldClipProgress.filter(clipProg => clipProg.clipId !== newClipProgress.clipId)\n    if (!isNearEnd(newClipProgress.videoSecondsWatched, duration)) {\n        clipProgress.push(newClipProgress)\n    }\n\n    while (clipProgress.length > 50) clipProgress.shift()\n    return clipProgress\n}\n\nexport function setClipProgress(newClipProgress) {\n    localStorage.setItem('ps-embeddable-player-clip-progress', JSON.stringify(newClipProgress))\n}"]},"metadata":{},"sourceType":"module"}
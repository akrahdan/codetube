{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import{Box,ContentContainer,FlexBox,FocusTrap,Text,TextButton}from'@codecademy/gamut';import{SearchIcon,SupportIcon}from'@codecademy/gamut-icons';import{system}from'@codecademy/gamut-styles';import{useTheme}from'@emotion/react';import styled from'@emotion/styled';import{camelCase}from'lodash';import React,{useEffect,useRef,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var searchTerms=['Data Science','Python','Web Development','HTML','Java'];var Form=Box.withComponent('form');var Input=Box.withComponent('input');var QueryContainer=styled(ContentContainer)(system.css({display:'flex',pb:0,pt:16,width:'100%'}));var SuggestionContainer=styled(ContentContainer)(system.css({pb:24,pt:16}));var StyledInput=styled(Input)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  outline: none;\\n\"])));export var SearchPaneContents=function SearchPaneContents(_ref){var onSearch=_ref.onSearch,onTrackingClick=_ref.onTrackingClick,toggleSearch=_ref.toggleSearch;var theme=useTheme();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var searchElementRef=useRef(null);var inputRef=useRef(null);var handleOutsideClick=function handleOutsideClick(e){var _searchElementRef$cur;var target=e.target;if((_searchElementRef$cur=searchElementRef.current)===null||_searchElementRef$cur===void 0?void 0:_searchElementRef$cur.contains(target)){return;}if(target.closest('header')){return;}toggleSearch();};var navigateToSearch=function navigateToSearch(searchTerm){onSearch(searchTerm);toggleSearch();};var handleChange=function handleChange(event){setValue(event.target.value);};var handleSubmit=function handleSubmit(event){event.preventDefault();navigateToSearch(value);};useEffect(function(){var _inputRef$current;(_inputRef$current=inputRef.current)===null||_inputRef$current===void 0?void 0:_inputRef$current.focus();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Box,{\"aria-hidden\":true,bg:\"shadow-black-slight\",height:\"100%\",onClick:toggleSearch,position:\"fixed\"// We add 5rem here in case there's some sort of branded banner above search\n// The search area is much taller than 5rem so this is a safe amount of padding\n,top:\"calc(\".concat(theme.elements.headerHeight,\" + 5rem)\"),width:1}),/*#__PURE__*/_jsx(FocusTrap,{onClickOutside:handleOutsideClick,onEscapeKey:toggleSearch,allowPageInteraction:true,children:/*#__PURE__*/_jsxs(Box,{bg:\"white\",borderColorBottom:\"navy\",borderColorTop:\"gray-100\",borderStyle:\"solid\",borderWidth:\"2px 0 1px\",\"data-testid\":\"header-search-dropdown\",position:\"absolute\",ref:searchElementRef,width:\"100%\",children:[/*#__PURE__*/_jsx(Box,{border:\"none\",width:\"auto\",children:/*#__PURE__*/_jsx(QueryContainer,{children:/*#__PURE__*/_jsxs(FlexBox,{alignItems:\"baseline\",borderColor:\"gray-600\",borderStyleBottom:\"solid\",borderWidthBottom:\"1px\",width:\"100%\",children:[/*#__PURE__*/_jsx(SearchIcon,{color:\"gray-600\",height:24,width:24}),/*#__PURE__*/_jsx(Form,{action:\"/search\",id:\"search-form\",ml:8,onSubmit:handleSubmit,width:\"100%\",children:/*#__PURE__*/_jsx(StyledInput,{background:\"none\",border:\"none\",fontSize:34,fontWeight:\"bold\",id:\"header-search-bar\",name:\"query\",onChange:handleChange,onKeyDown:function onKeyDown(event){return event.stopPropagation();},placeholder:\"Search our catalog\",ref:inputRef,type:\"search\",value:value,width:\"100%\"})})]})})}),/*#__PURE__*/_jsxs(SuggestionContainer,{children:[/*#__PURE__*/_jsx(Text,{as:\"h3\",fontSize:20,my:16,children:\"Popular Searches\"}),/*#__PURE__*/_jsxs(FlexBox,{justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(\"div\",{children:searchTerms.map(function(searchTerm){return/*#__PURE__*/_jsx(TextButton,{mr:16,onClick:function onClick(){navigateToSearch(searchTerm);onTrackingClick(\"popular_search_term_\".concat(camelCase(searchTerm)));},children:searchTerm},searchTerm);})}),/*#__PURE__*/_jsxs(TextButton,{href:\"/help\",onClick:function onClick(){return onTrackingClick('help_center');},children:[/*#__PURE__*/_jsx(SupportIcon,{mr:8,size:20}),\" Help Center\"]})]})]})]})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/components/gamut-overrides/AppHeader/Search/SearchPaneContents.tsx"],"names":["Box","ContentContainer","FlexBox","FocusTrap","Text","TextButton","SearchIcon","SupportIcon","system","useTheme","styled","camelCase","React","useEffect","useRef","useState","searchTerms","Form","withComponent","Input","QueryContainer","css","display","pb","pt","width","SuggestionContainer","StyledInput","SearchPaneContents","onSearch","onTrackingClick","toggleSearch","theme","value","setValue","searchElementRef","inputRef","handleOutsideClick","e","target","current","contains","closest","navigateToSearch","searchTerm","handleChange","event","handleSubmit","preventDefault","focus","elements","headerHeight","stopPropagation","map"],"mappings":"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","sourcesContent":["import {\n  Box,\n  ContentContainer,\n  FlexBox,\n  FocusTrap,\n  Text,\n  TextButton,\n} from '@codecademy/gamut';\nimport { SearchIcon, SupportIcon } from '@codecademy/gamut-icons';\nimport { system } from '@codecademy/gamut-styles';\nimport { useTheme } from '@emotion/react';\nimport styled from '@emotion/styled';\nimport { camelCase } from 'lodash';\nimport React, { useEffect, useRef, useState } from 'react';\n\nexport type SearchPaneContentsProps = {\n  onSearch: (query: string) => void;\n  onTrackingClick: (target: string) => void;\n  toggleSearch: () => void;\n};\n\nconst searchTerms = [\n  'Data Science',\n  'Python',\n  'Web Development',\n  'HTML',\n  'Java',\n];\n\nconst Form = Box.withComponent('form');\nconst Input = Box.withComponent('input');\n\nconst QueryContainer = styled(ContentContainer)(\n  system.css({\n    display: 'flex',\n    pb: 0,\n    pt: 16,\n    width: '100%',\n  })\n);\n\nconst SuggestionContainer = styled(ContentContainer)(\n  system.css({\n    pb: 24,\n    pt: 16,\n  })\n);\n\nconst StyledInput = styled(Input)`\n  outline: none;\n`;\n\nexport const SearchPaneContents: React.FC<SearchPaneContentsProps> = ({\n  onSearch,\n  onTrackingClick,\n  toggleSearch,\n}) => {\n  const theme = useTheme();\n  const [value, setValue] = useState('');\n  const searchElementRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleOutsideClick = (e: MouseEvent) => {\n    const target = e.target as Element;\n    if (searchElementRef.current?.contains(target)) {\n      return;\n    }\n\n    if (target.closest('header')) {\n      return;\n    }\n\n    toggleSearch();\n  };\n\n  const navigateToSearch = (searchTerm: string) => {\n    onSearch(searchTerm);\n    toggleSearch();\n  };\n\n  const handleChange: React.ChangeEventHandler<HTMLInputElement> = (event) => {\n    setValue(event.target.value);\n  };\n\n  const handleSubmit: React.FormEventHandler = (event) => {\n    event.preventDefault();\n    navigateToSearch(value);\n  };\n\n  useEffect(() => {\n    inputRef.current?.focus();\n  }, []);\n\n  return (\n    <>\n      <Box\n        aria-hidden\n        bg=\"shadow-black-slight\"\n        height=\"100%\"\n        onClick={toggleSearch}\n        position=\"fixed\"\n        // We add 5rem here in case there's some sort of branded banner above search\n        // The search area is much taller than 5rem so this is a safe amount of padding\n        top={`calc(${theme.elements.headerHeight} + 5rem)`}\n        width={1}\n      />\n      <FocusTrap\n        onClickOutside={handleOutsideClick}\n        onEscapeKey={toggleSearch}\n        allowPageInteraction\n      >\n        <Box\n          bg=\"white\"\n          borderColorBottom=\"navy\"\n          borderColorTop=\"gray-100\"\n          borderStyle=\"solid\"\n          borderWidth=\"2px 0 1px\"\n          data-testid=\"header-search-dropdown\"\n          position=\"absolute\"\n          ref={searchElementRef}\n          width=\"100%\"\n        >\n          <Box border=\"none\" width=\"auto\">\n            <QueryContainer>\n              <FlexBox\n                alignItems=\"baseline\"\n                borderColor=\"gray-600\"\n                borderStyleBottom=\"solid\"\n                borderWidthBottom=\"1px\"\n                width=\"100%\"\n              >\n                <SearchIcon color=\"gray-600\" height={24} width={24} />\n                <Form\n                  action=\"/search\"\n                  id=\"search-form\"\n                  ml={8}\n                  onSubmit={handleSubmit}\n                  width=\"100%\"\n                >\n                  <StyledInput\n                    background=\"none\"\n                    border=\"none\"\n                    fontSize={34}\n                    fontWeight=\"bold\"\n                    id=\"header-search-bar\"\n                    name=\"query\"\n                    onChange={handleChange}\n                    onKeyDown={(event) => event.stopPropagation()}\n                    placeholder=\"Search our catalog\"\n                    ref={inputRef}\n                    type=\"search\"\n                    value={value}\n                    width=\"100%\"\n                  />\n                </Form>\n              </FlexBox>\n            </QueryContainer>\n          </Box>\n          <SuggestionContainer>\n            <Text as=\"h3\" fontSize={20} my={16}>\n              Popular Searches\n            </Text>\n            <FlexBox justifyContent=\"space-between\">\n              <div>\n                {searchTerms.map((searchTerm) => (\n                  <TextButton\n                    mr={16}\n                    key={searchTerm}\n                    onClick={() => {\n                      navigateToSearch(searchTerm);\n                      onTrackingClick(\n                        `popular_search_term_${camelCase(searchTerm)}`\n                      );\n                    }}\n                  >\n                    {searchTerm}\n                  </TextButton>\n                ))}\n              </div>\n              <TextButton\n                href=\"/help\"\n                onClick={() => onTrackingClick('help_center')}\n              >\n                <SupportIcon mr={8} size={20} /> Help Center\n              </TextButton>\n            </FlexBox>\n          </SuggestionContainer>\n        </Box>\n      </FocusTrap>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
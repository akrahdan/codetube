{"ast":null,"code":"import{MediaTypes}from'../constants';// import { postMetric } from '../analytics/metric'\nvar canPlayType=function canPlayType(videoEl,codec){return videoEl.canPlayType(codec)==='probably';};export var getCodecSupport=function getCodecSupport(){var videoEl=arguments.length>0&&arguments[0]!==undefined?arguments[0]:document.createElement('video');return{h264:canPlayType(videoEl,'video/mp4; codecs=\"avc1.42E01E\"'),aac:canPlayType(videoEl,'audio/mp4; codecs=\"mp4a.40.2\"'),vp8:canPlayType(videoEl,'video/webm; codecs=\"vp8, vorbis\"')};};var recordWebmFallback=function recordWebmFallback(){var hostname=window.location.hostname;var isStagingEnv=hostname&&(hostname.includes('stage')||hostname.includes('staging'));//   postMetric({\n//     functionName: 'webmFallbackEvent',\n//     latency: 1,\n//     tags: {\n//       format: 'webm',\n//     },\n//   }, isStagingEnv)\n};export var selectVideoFormat=function selectVideoFormat(){var codecSupportFn=arguments.length>0&&arguments[0]!==undefined?arguments[0]:getCodecSupport;var _codecSupportFn=codecSupportFn(),h264=_codecSupportFn.h264,aac=_codecSupportFn.aac,vp8=_codecSupportFn.vp8;if(h264&&aac)return MediaTypes.HLS;if(h264)return MediaTypes.MP4;if(vp8){recordWebmFallback();return MediaTypes.WEBM;}return MediaTypes.HLS;};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/utilities/video-format-support.js"],"names":["MediaTypes","canPlayType","videoEl","codec","getCodecSupport","document","createElement","h264","aac","vp8","recordWebmFallback","hostname","window","location","isStagingEnv","includes","selectVideoFormat","codecSupportFn","HLS","MP4","WEBM"],"mappings":"AAAA,OAASA,UAAT,KAA2B,cAA3B,CACA;AAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,OAAD,CAAUC,KAAV,QAAoBD,CAAAA,OAAO,CAACD,WAAR,CAAoBE,KAApB,IAA+B,UAAnD,EAApB,CAEA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAA+C,IAA9CF,CAAAA,OAA8C,2DAApCG,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAoC,CAC5E,MAAO,CACLC,IAAI,CAAEN,WAAW,CAACC,OAAD,CAAU,iCAAV,CADZ,CAELM,GAAG,CAAEP,WAAW,CAACC,OAAD,CAAU,+BAAV,CAFX,CAGLO,GAAG,CAAER,WAAW,CAACC,OAAD,CAAU,kCAAV,CAHX,CAAP,CAKD,CANM,CAQP,GAAMQ,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAC/B,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAACC,QAAP,CAAgBF,QAAjC,CACA,GAAMG,CAAAA,YAAY,CAAGH,QAAQ,GAAKA,QAAQ,CAACI,QAAT,CAAkB,OAAlB,GAA8BJ,QAAQ,CAACI,QAAT,CAAkB,SAAlB,CAAnC,CAA7B,CACF;AACA;AACA;AACA;AACA;AACA;AACA;AACC,CAVD,CAYA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAsC,IAArCC,CAAAA,cAAqC,2DAApBb,eAAoB,qBAC1Ca,cAAc,EAD4B,CAC7DV,IAD6D,iBAC7DA,IAD6D,CACvDC,GADuD,iBACvDA,GADuD,CAClDC,GADkD,iBAClDA,GADkD,CAGrE,GAAIF,IAAI,EAAIC,GAAZ,CAAiB,MAAOR,CAAAA,UAAU,CAACkB,GAAlB,CACjB,GAAIX,IAAJ,CAAU,MAAOP,CAAAA,UAAU,CAACmB,GAAlB,CACV,GAAIV,GAAJ,CAAS,CACPC,kBAAkB,GAClB,MAAOV,CAAAA,UAAU,CAACoB,IAAlB,CACD,CACD,MAAOpB,CAAAA,UAAU,CAACkB,GAAlB,CACD,CAVM","sourcesContent":["import { MediaTypes } from '../constants'\n// import { postMetric } from '../analytics/metric'\n\nconst canPlayType = (videoEl, codec) => videoEl.canPlayType(codec) === 'probably'\n\nexport const getCodecSupport = (videoEl = document.createElement('video')) => {\n  return {\n    h264: canPlayType(videoEl, 'video/mp4; codecs=\"avc1.42E01E\"'),\n    aac: canPlayType(videoEl, 'audio/mp4; codecs=\"mp4a.40.2\"'),\n    vp8: canPlayType(videoEl, 'video/webm; codecs=\"vp8, vorbis\"'),\n  }\n}\n\nconst recordWebmFallback = () => {\n  const hostname = window.location.hostname\n  const isStagingEnv = hostname && (hostname.includes('stage') || hostname.includes('staging'))\n//   postMetric({\n//     functionName: 'webmFallbackEvent',\n//     latency: 1,\n//     tags: {\n//       format: 'webm',\n//     },\n//   }, isStagingEnv)\n}\n\nexport const selectVideoFormat = (codecSupportFn = getCodecSupport) => {\n  const { h264, aac, vp8 } = codecSupportFn()\n\n  if (h264 && aac) return MediaTypes.HLS\n  if (h264) return MediaTypes.MP4\n  if (vp8) {\n    recordWebmFallback()\n    return MediaTypes.WEBM\n  }\n  return MediaTypes.HLS\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { classNames } from '@pluralsight/ps-design-system-util';\nimport React from 'react';\nimport '../css/index.css';\nimport { sizes, widths } from '../vars/index';\nimport { getColorByName, getInitials, transformSrc } from '../js/index';\nvar Avatar = React.forwardRef(function (props, ref) {\n  var alt = props.alt,\n      className = props.className,\n      name = props.name,\n      size = props.size,\n      src = props.src,\n      rest = __rest(props, [\"alt\", \"className\", \"name\", \"size\", \"src\"]);\n\n  var _a = React.useState('loading'),\n      imageState = _a[0],\n      setImageState = _a[1];\n\n  var handleImageLoadSuccess = function (evt) {\n    var pixel = evt.target;\n    var isFallbackPixel = pixel.naturalWidth === 1;\n    setImageState(isFallbackPixel ? 'error' : 'success');\n  };\n\n  var handleImageLoadError = function () {\n    setImageState('error');\n  };\n\n  var shouldShowImg = src && imageState !== 'error';\n  var shouldShowInitials = imageState === 'error' || imageState === 'loading';\n  var hideFromScreenReaders = shouldShowImg && !alt;\n  return React.createElement(\"div\", __assign({\n    className: classNames('psds-avatar', \"psds-avatar--size-\" + size, className)\n  }, hideFromScreenReaders && {\n    'aria-hidden': true\n  }, rest, {\n    ref: ref\n  }), shouldShowImg && React.createElement(\"img\", {\n    className: \"psds-avatar__image\",\n    alt: alt,\n    onError: handleImageLoadError,\n    onLoad: handleImageLoadSuccess,\n    src: transformSrc(src)\n  }), shouldShowInitials && React.createElement(\"div\", {\n    className: \"psds-avatar__initials\",\n    \"aria-label\": name,\n    style: {\n      backgroundColor: getColorByName(name)\n    }\n  }, getInitials(name)));\n});\nAvatar.defaultProps = {\n  size: sizes.medium\n};\nAvatar.displayName = 'Avatar';\nAvatar.sizes = sizes;\nAvatar.widths = widths;\nexport default Avatar;","map":{"version":3,"sources":["../../../src/react/index.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAGE,UAHF,QAIO,oCAJP;AAKA,OAAO,KAAP,MAAkB,OAAlB;AAEA,OAAO,kBAAP;AACA,SAAS,KAAT,EAAgB,MAAhB,QAA8B,eAA9B;AACA,SAAS,cAAT,EAAyB,WAAzB,EAAsC,YAAtC,QAA0D,aAA1D;AAuBA,IAAM,MAAM,GAAG,KAAK,CAAC,UAAN,CAA8C,UAAC,KAAD,EAAQ,GAAR,EAAW;AAC9D,MAAA,GAAG,GAA0C,KAAK,CAA/C,GAAH;AAAA,MAAK,SAAS,GAA+B,KAAK,CAApC,SAAd;AAAA,MAAgB,IAAI,GAAyB,KAAK,CAA9B,IAApB;AAAA,MAAsB,IAAI,GAAmB,KAAK,CAAxB,IAA1B;AAAA,MAA4B,GAAG,GAAc,KAAK,CAAnB,GAA/B;AAAA,MAAoC,IAAI,GAAA,MAAA,CAAK,KAAL,EAA1C,CAAA,KAAA,EAAA,WAAA,EAAA,MAAA,EAAA,MAAA,EAAA,KAAA,CAA0C,CAAxC;;AAEF,MAAA,EAAA,GAA8B,KAAK,CAAC,QAAN,CAA2B,SAA3B,CAA9B;AAAA,MAAC,UAAU,GAAA,EAAA,CAAA,CAAA,CAAX;AAAA,MAAa,aAAa,GAAA,EAAA,CAAA,CAAA,CAA1B;;AAEN,MAAM,sBAAsB,GAA8C,UAAA,GAAA,EAAG;AAC3E,QAAM,KAAK,GAAG,GAAG,CAAC,MAAlB;AACA,QAAM,eAAe,GAAG,KAAK,CAAC,YAAN,KAAuB,CAA/C;AACA,IAAA,aAAa,CAAC,eAAe,GAAG,OAAH,GAAa,SAA7B,CAAb;AACD,GAJD;;AAMA,MAAM,oBAAoB,GAA8C,YAAA;AACtE,IAAA,aAAa,CAAC,OAAD,CAAb;AACD,GAFD;;AAIA,MAAM,aAAa,GAAG,GAAG,IAAI,UAAU,KAAK,OAA5C;AACA,MAAM,kBAAkB,GAAG,UAAU,KAAK,OAAf,IAA0B,UAAU,KAAK,SAApE;AAEA,MAAM,qBAAqB,GAAG,aAAa,IAAI,CAAC,GAAhD;AAEA,SACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA;AACE,IAAA,SAAS,EAAE,UAAU,CACnB,aADmB,EAEnB,uBAAqB,IAFF,EAGnB,SAHmB;AADvB,GAAA,EAMO,qBAAqB,IAAI;AAAE,mBAAe;AAAjB,GANhC,EAOM,IAPN,EAOU;AACR,IAAA,GAAG,EAAE;AADG,GAPV,CAAA,EAUG,aAAa,IACZ,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,oBADZ;AAEE,IAAA,GAAG,EAAE,GAFP;AAGE,IAAA,OAAO,EAAE,oBAHX;AAIE,IAAA,MAAM,EAAE,sBAJV;AAKE,IAAA,GAAG,EAAE,YAAY,CAAC,GAAD;AALnB,GAAA,CAXJ,EAoBG,kBAAkB,IACjB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA;AACE,IAAA,SAAS,EAAC,uBADZ;AACmC,kBACrB,IAFd;AAGE,IAAA,KAAK,EAAE;AAAE,MAAA,eAAe,EAAE,cAAc,CAAC,IAAD;AAAjC;AAHT,GAAA,EAKG,WAAW,CAAC,IAAD,CALd,CArBJ,CADF;AAgCD,CApDc,CAAf;AAsDA,MAAM,CAAC,YAAP,GAAsB;AAAE,EAAA,IAAI,EAAE,KAAK,CAAC;AAAd,CAAtB;AACA,MAAM,CAAC,WAAP,GAAqB,QAArB;AAEA,MAAM,CAAC,KAAP,GAAe,KAAf;AACA,MAAM,CAAC,MAAP,GAAgB,MAAhB;AAEA,eAAe,MAAf","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { classNames } from '@pluralsight/ps-design-system-util';\nimport React from 'react';\nimport '../css/index.css';\nimport { sizes, widths } from '../vars/index';\nimport { getColorByName, getInitials, transformSrc } from '../js/index';\nvar Avatar = React.forwardRef(function (props, ref) {\n    var alt = props.alt, className = props.className, name = props.name, size = props.size, src = props.src, rest = __rest(props, [\"alt\", \"className\", \"name\", \"size\", \"src\"]);\n    var _a = React.useState('loading'), imageState = _a[0], setImageState = _a[1];\n    var handleImageLoadSuccess = function (evt) {\n        var pixel = evt.target;\n        var isFallbackPixel = pixel.naturalWidth === 1;\n        setImageState(isFallbackPixel ? 'error' : 'success');\n    };\n    var handleImageLoadError = function () {\n        setImageState('error');\n    };\n    var shouldShowImg = src && imageState !== 'error';\n    var shouldShowInitials = imageState === 'error' || imageState === 'loading';\n    var hideFromScreenReaders = shouldShowImg && !alt;\n    return (React.createElement(\"div\", __assign({ className: classNames('psds-avatar', \"psds-avatar--size-\" + size, className) }, (hideFromScreenReaders && { 'aria-hidden': true }), rest, { ref: ref }),\n        shouldShowImg && (React.createElement(\"img\", { className: \"psds-avatar__image\", alt: alt, onError: handleImageLoadError, onLoad: handleImageLoadSuccess, src: transformSrc(src) })),\n        shouldShowInitials && (React.createElement(\"div\", { className: \"psds-avatar__initials\", \"aria-label\": name, style: { backgroundColor: getColorByName(name) } }, getInitials(name)))));\n});\nAvatar.defaultProps = { size: sizes.medium };\nAvatar.displayName = 'Avatar';\nAvatar.sizes = sizes;\nAvatar.widths = widths;\nexport default Avatar;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"module"}
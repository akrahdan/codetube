{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{saveCourse}from\"state/course/courseSplice\";import{selectSections}from\"state/curriculum/currriculumSplice\";import{selectLocationType,selectLocationPayload}from\"state/location/selectors\";import{selectCourse}from\"state/course/courseSplice\";import{useFetchCourseQuery,useFetchSectionsQuery}from\"services/courses\";import{useAppSelector,useAppDispatch}from\"store/hooks\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var CourseManageHeader=function CourseManageHeader(){var dispatch=useAppDispatch();var locationPath=useAppSelector(selectLocationType);var locationPayload=useAppSelector(selectLocationPayload);var course=useAppSelector(selectCourse);var selectedSections=useAppSelector(selectSections);var _useState=useState(course),_useState2=_slicedToArray(_useState,2),courseUpdate=_useState2[0],setCourseUpdate=_useState2[1];var _useFetchCourseQuery=useFetchCourseQuery(locationPayload.id),courseQuery=_useFetchCourseQuery.data;var _useFetchSectionsQuer=useFetchSectionsQuery(locationPayload.id),sectionQuery=_useFetchSectionsQuer.data;var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),duration=_useState4[0],setDuration=_useState4[1];useEffect(function(){var lectures=selectedSections===null||selectedSections===void 0?void 0:selectedSections.flatMap(function(sec){return sec===null||sec===void 0?void 0:sec.lectures;});var result=lectures===null||lectures===void 0?void 0:lectures.flatMap(function(lec){return lec===null||lec===void 0?void 0:lec.duration;});if(result){var re=result===null||result===void 0?void 0:result.reduce(function(acc,current){return acc+current;},0);setDuration(Math.round(re/60));}},[selectedSections]);useEffect(function(){setCourseUpdate(course||courseQuery);},[course,courseQuery]);if(!courseUpdate)return null;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"full-page-takeover-header--affix-wrapper--koEW3\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"full-page-takeover-header--header--yZv70\",style:{},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"full-page-takeover-header--title--x4F1h\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"udlite-in-udheavy full-page-takeover-header--back-button--32gwR\",href:\"/instructor/courses\",\"aria-label\":\"Back to courses\",children:[/*#__PURE__*/_jsx(\"svg\",{\"aria-hidden\":\"true\",focusable:\"false\",className:\"udlite-icon udlite-icon-medium\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"#icon-previous\",children:/*#__PURE__*/_jsx(\"svg\",{id:\"icon-previous\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"})})})}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden-xxs hidden-xs hidden-sm hidden-md full-page-takeover-header--back-to-courses--nsJ3P\",children:\"Back to courses\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"full-page-takeover-header--course-title--3gEaO\",\"data-purpose\":\"course-title\",children:courseUpdate.title}),/*#__PURE__*/_jsx(\"span\",{className:\"udlite-in-udheavy full-page-takeover-header--status--2cjmy\",children:/*#__PURE__*/_jsx(\"span\",{className:\"udlite-heading-xs\",children:courseUpdate.state})}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsxs(\"span\",{children:[duration||0,\" min\"]}),\" of video content uploaded\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"full-page-takeover-header--actions--2bLjN\",children:/*#__PURE__*/_jsx(\"div\",{className:\"udlite-in-udheavy\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){dispatch(saveCourse({locationPath:locationPath,submit:true}));},tabIndex:-1,className:\"udlite-btn udlite-btn-small udlite-btn-white-solid udlite-heading-sm\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Save\"})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"full-page-takeover-header--menu--30tIM\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/instructor/course/\".concat(locationPayload.id,\"/manage/settings\"),children:/*#__PURE__*/_jsx(\"svg\",{\"aria-label\":\"Course Settings\",focusable:\"false\",className:\"udlite-icon udlite-icon-medium\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"#icon-settings\",children:/*#__PURE__*/_jsx(\"svg\",{id:\"icon-settings\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"})})})})})})]})]})})});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/header/courseManageHeader.tsx"],"names":["saveCourse","selectSections","selectLocationType","selectLocationPayload","selectCourse","useFetchCourseQuery","useFetchSectionsQuery","useAppSelector","useAppDispatch","useEffect","useState","CourseManageHeader","dispatch","locationPath","locationPayload","course","selectedSections","courseUpdate","setCourseUpdate","id","courseQuery","data","sectionQuery","duration","setDuration","lectures","flatMap","sec","result","lec","re","reduce","acc","current","Math","round","title","state","submit"],"mappings":"uKAAA,OAASA,UAAT,KAA2B,2BAA3B,CACA,OAASC,cAAT,KAA+B,oCAA/B,CACA,OAASC,kBAAT,CAA6BC,qBAA7B,KAA0D,0BAA1D,CACA,OAASC,YAAT,KAA6B,2BAA7B,CACA,OAASC,mBAAT,CAA8BC,qBAA9B,KAA2D,kBAA3D,CAEA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,aAA/C,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,6IAGA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CACtC,GAAMC,CAAAA,QAAQ,CAAGJ,cAAc,EAA/B,CACA,GAAMK,CAAAA,YAAY,CAAGN,cAAc,CAACL,kBAAD,CAAnC,CACA,GAAMY,CAAAA,eAAe,CAAGP,cAAc,CAACJ,qBAAD,CAAtC,CACA,GAAMY,CAAAA,MAAM,CAAGR,cAAc,CAACH,YAAD,CAA7B,CACA,GAAMY,CAAAA,gBAAgB,CAAGT,cAAc,CAACN,cAAD,CAAvC,CALsC,cAMES,QAAQ,CAAiBK,MAAjB,CANV,wCAM/BE,YAN+B,eAMjBC,eANiB,wCAORb,mBAAmB,CAACS,eAAe,CAACK,EAAjB,CAPX,CAOxBC,WAPwB,sBAO9BC,IAP8B,2BAQPf,qBAAqB,CAACQ,eAAe,CAACK,EAAjB,CARd,CAQxBG,YARwB,uBAQ9BD,IAR8B,gBASLX,QAAQ,CAAC,CAAD,CATH,yCAS/Ba,QAT+B,eASrBC,WATqB,eAYtCf,SAAS,CAAC,UAAM,CACd,GAAMgB,CAAAA,QAAQ,CAAGT,gBAAH,SAAGA,gBAAH,iBAAGA,gBAAgB,CAAEU,OAAlB,CAA0B,SAAAC,GAAG,QAAIA,CAAAA,GAAJ,SAAIA,GAAJ,iBAAIA,GAAG,CAAEF,QAAT,EAA7B,CAAjB,CACA,GAAMG,CAAAA,MAAM,CAAGH,QAAH,SAAGA,QAAH,iBAAGA,QAAQ,CAAEC,OAAV,CAAkB,SAAAG,GAAG,QAAIA,CAAAA,GAAJ,SAAIA,GAAJ,iBAAIA,GAAG,CAAEN,QAAT,EAArB,CAAf,CACA,GAAGK,MAAH,CAAW,CACT,GAAME,CAAAA,EAAE,CAAGF,MAAH,SAAGA,MAAH,iBAAGA,MAAM,CAAEG,MAAR,CAAe,SAACC,GAAD,CAAMC,OAAN,QAAkBD,CAAAA,GAAG,CAAGC,OAAxB,EAAf,CAAiD,CAAjD,CAAX,CACAT,WAAW,CAACU,IAAI,CAACC,KAAL,CAAWL,EAAE,CAAG,EAAhB,CAAD,CAAX,CACD,CAEF,CARQ,CAQN,CAACd,gBAAD,CARM,CAAT,CASAP,SAAS,CAAC,UAAM,CAEdS,eAAe,CAACH,MAAM,EAAIK,WAAX,CAAf,CACD,CAHQ,CAGN,CAACL,MAAD,CAASK,WAAT,CAHM,CAAT,CAKA,GAAI,CAACH,YAAL,CAAmB,MAAO,KAAP,CACnB,mBACE,sCAEE,YAAK,SAAS,CAAC,iDAAf,uBACE,oCACE,cADF,cAEE,aAAK,SAAS,CAAC,0CAAf,CAA0D,KAAK,CAAE,EAAjE,wBACE,aAAK,SAAS,CAAC,yCAAf,wBACE,WACE,SAAS,CAAC,iEADZ,CAEE,IAAI,CAAC,qBAFP,CAGE,aAAW,iBAHb,wBAKE,YACE,cAAY,MADd,CAEE,SAAS,CAAC,OAFZ,CAGE,SAAS,CAAC,gCAHZ,uBAKE,YAAK,SAAS,CAAC,gBAAf,uBACE,YAAK,EAAE,CAAC,eAAR,CAAwB,OAAO,CAAC,WAAhC,uBACE,aAAM,CAAC,CAAC,0DAAR,EADF,EADF,EALF,EALF,cAgBE,aAAM,SAAS,CAAC,4FAAhB,6BAhBF,GADF,cAqBE,aACE,SAAS,CAAC,gDADZ,CAEE,eAAa,cAFf,UAIGA,YAAY,CAACmB,KAJhB,EArBF,cA2BE,aAAM,SAAS,CAAC,4DAAhB,uBACE,aAAM,SAAS,CAAC,mBAAhB,UAAqCnB,YAAY,CAACoB,KAAlD,EADF,EA3BF,cA8BE,qCACE,wBAAOd,QAAQ,EAAI,CAAnB,UADF,gCA9BF,GADF,cAmCE,YAAK,SAAS,CAAC,2CAAf,uBACE,YAAK,SAAS,CAAC,mBAAf,uBACE,eACE,IAAI,CAAC,QADP,CAEE,OAAO,CAAE,kBAAM,CACbX,QAAQ,CAACZ,UAAU,CAAC,CAClBa,YAAY,CAAZA,YADkB,CAElByB,MAAM,CAAE,IAFU,CAAD,CAAX,CAAR,CAKD,CARH,CASE,QAAQ,CAAE,CAAC,CATb,CAUE,SAAS,CAAC,sEAVZ,uBAYE,8BAZF,EADF,EADF,EAnCF,cAqDE,YAAK,SAAS,CAAC,wCAAf,uBACE,UAAG,IAAI,8BAAwBxB,eAAe,CAACK,EAAxC,oBAAP,uBACE,YACE,aAAW,iBADb,CAEE,SAAS,CAAC,OAFZ,CAGE,SAAS,CAAC,gCAHZ,uBAKE,YAAK,SAAS,CAAC,gBAAf,uBACE,YAAK,EAAE,CAAC,eAAR,CAAwB,OAAO,CAAC,WAAhC,uBACE,aAAM,CAAC,CAAC,irBAAR,EADF,EADF,EALF,EADF,EADF,EArDF,GAFF,GADF,EAFF,EADF,CAiFD,CA5GM","sourcesContent":["import { saveCourse } from \"state/course/courseSplice\";\nimport { selectSections } from \"state/curriculum/currriculumSplice\";\nimport { selectLocationType, selectLocationPayload } from \"state/location/selectors\";\nimport { selectCourse } from \"state/course/courseSplice\";\nimport { useFetchCourseQuery, useFetchSectionsQuery } from \"services/courses\";\nimport type { CourseResponse } from \"services/courses\";\nimport { useAppSelector, useAppDispatch } from \"store/hooks\";\nimport { useEffect, useState } from \"react\";\n\n\nexport const CourseManageHeader = () => {\n  const dispatch = useAppDispatch()\n  const locationPath = useAppSelector(selectLocationType)\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const course = useAppSelector(selectCourse)\n  const selectedSections = useAppSelector(selectSections)\n  const [courseUpdate, setCourseUpdate] = useState<CourseResponse>(course)\n  const { data: courseQuery } = useFetchCourseQuery(locationPayload.id)\n  const { data: sectionQuery } = useFetchSectionsQuery(locationPayload.id)\n  const [duration, setDuration ] = useState(0)\n \n \n  useEffect(() => {\n    const lectures = selectedSections?.flatMap(sec => sec?.lectures)\n    const result = lectures?.flatMap(lec => lec?.duration)\n    if(result) {\n      const re = result?.reduce((acc, current) => acc + current , 0)\n      setDuration(Math.round(re / 60))\n    }\n\n  }, [selectedSections])\n  useEffect(() => {\n\n    setCourseUpdate(course || courseQuery)\n  }, [course, courseQuery])\n\n  if (!courseUpdate) return null;\n  return (\n    <>\n\n      <div className=\"full-page-takeover-header--affix-wrapper--koEW3\">\n        <div>\n          <div />\n          <div className=\"full-page-takeover-header--header--yZv70\" style={{}}>\n            <div className=\"full-page-takeover-header--title--x4F1h\">\n              <a\n                className=\"udlite-in-udheavy full-page-takeover-header--back-button--32gwR\"\n                href=\"/instructor/courses\"\n                aria-label=\"Back to courses\"\n              >\n                <svg\n                  aria-hidden=\"true\"\n                  focusable=\"false\"\n                  className=\"udlite-icon udlite-icon-medium\"\n                >\n                  <use xlinkHref=\"#icon-previous\">\n                    <svg id=\"icon-previous\" viewBox=\"0 0 24 24\">\n                      <path d=\"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z\"></path>\n                    </svg>\n                  </use>\n                </svg>\n                <span className=\"hidden-xxs hidden-xs hidden-sm hidden-md full-page-takeover-header--back-to-courses--nsJ3P\">\n                  Back to courses\n                </span>\n              </a>\n              <span\n                className=\"full-page-takeover-header--course-title--3gEaO\"\n                data-purpose=\"course-title\"\n              >\n                {courseUpdate.title}\n              </span>\n              <span className=\"udlite-in-udheavy full-page-takeover-header--status--2cjmy\">\n                <span className=\"udlite-heading-xs\">{courseUpdate.state}</span>\n              </span>\n              <span>\n                <span>{duration || 0} min</span> of video content uploaded\n              </span>\n            </div>\n            <div className=\"full-page-takeover-header--actions--2bLjN\">\n              <div className=\"udlite-in-udheavy\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    dispatch(saveCourse({\n                      locationPath,\n                      submit: true\n                    }))\n\n                  }}\n                  tabIndex={-1}\n                  className=\"udlite-btn udlite-btn-small udlite-btn-white-solid udlite-heading-sm\"\n                >\n                  <span>Save</span>\n                </button>\n              </div>\n            </div>\n            <div className=\"full-page-takeover-header--menu--30tIM\">\n              <a href={`/instructor/course/${locationPayload.id}/manage/settings`}>\n                <svg\n                  aria-label=\"Course Settings\"\n                  focusable=\"false\"\n                  className=\"udlite-icon udlite-icon-medium\"\n                >\n                  <use xlinkHref=\"#icon-settings\">\n                    <svg id=\"icon-settings\" viewBox=\"0 0 24 24\">\n                      <path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\">\n                      </path>\n                  </svg>\n                  </use>\n                </svg>\n              </a>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
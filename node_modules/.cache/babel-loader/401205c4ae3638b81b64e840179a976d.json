{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import{coursesApi}from\"services/courses\";var initialState={course:null,pricing:null,saveProps:{submit:false,locationPath:null}};var courseSlice=createSlice({name:\"course\",initialState:initialState,reducers:{saveCourse:function saveCourse(state,action){state.saveProps=action.payload;}},extraReducers:function extraReducers(builder){builder.addMatcher(coursesApi.endpoints.createCourse.matchFulfilled,function(state,_ref){var payload=_ref.payload;state.course=payload;}).addMatcher(coursesApi.endpoints.fetchCourse.matchFulfilled,function(state,_ref2){var payload=_ref2.payload;state.course=payload;}).addMatcher(coursesApi.endpoints.trackViews.matchFulfilled,function(state,_ref3){var payload=_ref3.payload;state.views=payload;}).addMatcher(coursesApi.endpoints.fetchViews.matchFulfilled,function(state,_ref4){var payload=_ref4.payload;state.views=payload;}).addMatcher(coursesApi.endpoints.fetchCourseViews.matchFulfilled,function(state,_ref5){var payload=_ref5.payload;state.analytics=payload;}).addMatcher(coursesApi.endpoints.fetchVideoViews.matchFulfilled,function(state,_ref6){var payload=_ref6.payload;state.analytics=payload;}).addMatcher(coursesApi.endpoints.updateVideoViews.matchFulfilled,function(state,_ref7){var _state$analytics;var payload=_ref7.payload;var analytics=(_state$analytics=state.analytics)===null||_state$analytics===void 0?void 0:_state$analytics.map(function(view){if(payload.lecture===view.lecture){return payload;}return view;});state.analytics=analytics;}).addMatcher(coursesApi.endpoints.updateCourse.matchFulfilled,function(state,_ref8){var payload=_ref8.payload;state.course=payload;}).addMatcher(coursesApi.endpoints.fetchResources.matchFulfilled,function(state,_ref9){var payload=_ref9.payload;state.resources=payload;}).addMatcher(coursesApi.endpoints.fetchPricing.matchFulfilled,function(state,_ref10){var payload=_ref10.payload;state.pricing=payload;}).addMatcher(coursesApi.endpoints.updatePricing.matchFulfilled,function(state,_ref11){var payload=_ref11.payload;state.pricing=payload;}).addMatcher(coursesApi.endpoints.createResource.matchFulfilled,function(state,_ref12){var payload=_ref12.payload;state.resources=payload;}).addMatcher(coursesApi.endpoints.fetchInstructorCourses.matchFulfilled,function(state,_ref13){var payload=_ref13.payload;state.courses=payload;});}});var saveCourse=courseSlice.actions.saveCourse;export{saveCourse};export default courseSlice.reducer;export var selectCourse=function selectCourse(state){return state.course.course;};export var selectCourses=function selectCourses(state){return state.course.courses;};export var selectResources=function selectResources(state){return state.course.resources;};export var selectPricing=function selectPricing(state){return state.course.pricing;};export var selectSave=function selectSave(state){return state.course.saveProps;};export var selectViews=function selectViews(state){return state.course.views;};export var selectAnalytics=function selectAnalytics(state){return state.course.analytics;};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/state/course/courseSplice.ts"],"names":["createSlice","coursesApi","initialState","course","pricing","saveProps","submit","locationPath","courseSlice","name","reducers","saveCourse","state","action","payload","extraReducers","builder","addMatcher","endpoints","createCourse","matchFulfilled","fetchCourse","trackViews","views","fetchViews","fetchCourseViews","analytics","fetchVideoViews","updateVideoViews","map","view","lecture","updateCourse","fetchResources","resources","fetchPricing","updatePricing","createResource","fetchInstructorCourses","courses","actions","reducer","selectCourse","selectCourses","selectResources","selectPricing","selectSave","selectViews","selectAnalytics"],"mappings":"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","sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { UserSubmitKey } from \"components/Forms/RegistrationForm/dist/types\";\nimport type { User } from \"services/auth\";\nimport type { RootState } from \"store\";\nimport {\n  CoursePlayerResponse,\n  CourseResponse,\n  coursesApi,\n  MediaResponse,\n  Pricing,\n  VideoAnalytics,\n  ViewsResponse,\n} from \"services/courses\";\n\ninterface submitProps {\n  submit: boolean;\n  locationPath: string;\n}\ntype CourseState = {\n  course: CourseResponse | null;\n  views: ViewsResponse[] | null,\n  courses: CoursePlayerResponse[] | [];\n  analytics: VideoAnalytics[] | [];\n  resources: MediaResponse[] | [];\n  saveProps: submitProps | null;\n  pricing: Pricing | null;\n};\nconst initialState = {\n  course: null,\n  pricing: null,\n  saveProps: {\n    submit: false,\n    locationPath: null,\n  },\n};\nconst courseSlice = createSlice({\n  name: \"course\",\n  initialState: initialState as CourseState,\n  reducers: {\n    saveCourse: (state, action: PayloadAction<submitProps>) => {\n      state.saveProps = action.payload;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addMatcher(\n        coursesApi.endpoints.createCourse.matchFulfilled,\n        (state, { payload }) => {\n          state.course = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.fetchCourse.matchFulfilled,\n        (state, { payload }) => {\n          state.course = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.trackViews.matchFulfilled,\n        (state, { payload }) => {\n          state.views = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.fetchViews.matchFulfilled,\n        (state, { payload }) => {\n          state.views = payload;\n        }\n      ).addMatcher(\n        coursesApi.endpoints.fetchCourseViews.matchFulfilled,\n        (state, { payload }) => {\n          state.analytics = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.fetchVideoViews.matchFulfilled,\n        (state, { payload }) => {\n          state.analytics = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.updateVideoViews.matchFulfilled,\n        (state, { payload }) => {\n          const analytics = state.analytics?.map((view: VideoAnalytics) => {\n            if(payload.lecture === view.lecture) {\n              return payload\n\n            }\n            return view;\n          })\n         state.analytics = analytics;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.updateCourse.matchFulfilled,\n        (state, { payload }) => {\n          state.course = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.fetchResources.matchFulfilled,\n        (state, { payload }) => {\n          state.resources = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.fetchPricing.matchFulfilled,\n        (state, { payload }) => {\n          state.pricing = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.updatePricing.matchFulfilled,\n        (state, { payload }) => {\n          state.pricing = payload;\n        }\n      )\n      .addMatcher(\n        coursesApi.endpoints.createResource.matchFulfilled,\n        (state, { payload }) => {\n          state.resources = payload;\n        }\n      ).addMatcher(\n        coursesApi.endpoints.fetchInstructorCourses.matchFulfilled,\n        (state, { payload }) => {\n          state.courses = payload;\n        }\n      );\n  },\n});\n\nexport const { saveCourse } = courseSlice.actions;\n\nexport default courseSlice.reducer;\n\nexport const selectCourse = (state: RootState) => state.course.course;\nexport const selectCourses = (state: RootState) => state.course.courses;\nexport const selectResources = (state: RootState) => state.course.resources;\nexport const selectPricing = (state: RootState) => state.course.pricing;\nexport const selectSave = (state: RootState) => state.course.saveProps;\nexport const selectViews = (state: RootState) => state.course.views;\nexport const selectAnalytics = (state: RootState) => state.course.analytics;\n"]},"metadata":{},"sourceType":"module"}
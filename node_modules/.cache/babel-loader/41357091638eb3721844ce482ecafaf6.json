{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { clamp } from \"portal/scenes/CoursePlayer/utilities/clamp\";\nimport { InteractionModes } from \"portal/scenes/CoursePlayer/constants\";\nconst validModes = Object.values(InteractionModes);\n\nfunction includes(modes, mode) {\n  return !!~modes.indexOf(mode);\n}\n\nexport const initialState = {\n  playing: false,\n  playbackSpeed: 1.0,\n  activeMenu: null,\n  volumeSliderActive: false,\n  volume: 0.5,\n  muted: false,\n  previousVolume: null,\n  interactionMode: null\n};\nexport const playerSlice = createSlice({\n  name: 'player',\n  initialState,\n  reducers: {\n    play: (state, action) => {\n      state.playing = true;\n    },\n    pause: (state, action) => {\n      state.playing = false;\n    },\n    setPlaybackSpeed: (state, action) => {\n      state.playbackSpeed = action.payload;\n    },\n    setActiveMenu: (state, action) => {\n      state.activeMenu = action.payload;\n    },\n    setVolumeSliderActive: (state, action) => {\n      state.volumeSliderActive = action.payload;\n    },\n    setVolume: (state, action) => {\n      const clamped = clamp(action.payload, 0, 1);\n      const muted = clamped === 0;\n      state.volume = clamped, state.muted = muted;\n    },\n    setPreviousVolume: (state, action) => {\n      const clamped = clamp(action.payload, 0, 1);\n      const muted = clamped === 0;\n      state.volume = clamped, state.muted = muted;\n    },\n    setInteractionMode: (state, action) => {\n      if (!includes(validModes, interactionMode)) {\n        throw new Error(`${interactionMode} not in valid list: ${validModes.join()}`);\n      }\n    }\n  }\n});\nexport const selectPlayer = state => state.player;\nexport const {\n  play,\n  pause,\n  setPlaybackSpeed,\n  setActiveMenu,\n  setVolumeSliderActive,\n  setVolume,\n  setPreviousVolume\n} = playerSlice.actions;\nexport default playerSlice.reducer;","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/state/player/playerSlice.ts"],"names":["createSlice","clamp","InteractionModes","validModes","Object","values","includes","modes","mode","indexOf","initialState","playing","playbackSpeed","activeMenu","volumeSliderActive","volume","muted","previousVolume","interactionMode","playerSlice","name","reducers","play","state","action","pause","setPlaybackSpeed","payload","setActiveMenu","setVolumeSliderActive","setVolume","clamped","setPreviousVolume","setInteractionMode","Error","join","selectPlayer","player","actions","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice, PayloadAction \n} from \"@reduxjs/toolkit\";\nimport { v1 as uuid } from \"uuid\";\nimport { StringChain, stubFalse, without } from 'lodash';\nimport { AppThunk, RootState } from \"store\";\nimport { clamp } from \"portal/scenes/CoursePlayer/utilities/clamp\";\nimport { InteractionModes } from \"portal/scenes/CoursePlayer/constants\";\n\nconst validModes = Object.values(InteractionModes);\n\nfunction includes(modes, mode) {\n    return !!~modes.indexOf(mode)\n  }\nexport interface PlayerState { \n    playing: boolean,\n    playbackSpeed: number,\n    activeMenu: string,\n    volumeSliderActive: boolean\n    volume: number,\n    muted: boolean,\n    previousVolume: number,\n    interactionMode: string\n\n}\n\n\n\nexport const initialState: PlayerState = {\n    playing: false,\n    playbackSpeed: 1.0,\n    activeMenu: null,\n    volumeSliderActive: false,\n    volume: 0.5,\n    muted: false,\n    previousVolume: null,\n    interactionMode: null\n}\nexport const playerSlice = createSlice({\n    name: 'player',\n    initialState,\n    reducers: {\n        play: (state, action: PayloadAction<void>) => {\n          \n            state.playing = true \n        },\n\n        pause: (state, action: PayloadAction<void>) => {\n          \n            state.playing = false \n        },\n        setPlaybackSpeed: (state, action: PayloadAction<number>) =>{\n            state.playbackSpeed = action.payload\n        },\n\n        setActiveMenu: (state, action: PayloadAction<string>) =>{\n            state.activeMenu = action.payload\n        },\n        setVolumeSliderActive: (state, action: PayloadAction<boolean>) =>{\n            state.volumeSliderActive = action.payload\n        },\n        setVolume: (state, action: PayloadAction<number>) => {\n            const clamped = clamp(action.payload, 0, 1)\n            const muted = clamped === 0\n            state.volume = clamped,\n            state.muted = muted  \n        },\n        setPreviousVolume: (state, action: PayloadAction<number>) => {\n            const clamped = clamp(action.payload, 0, 1)\n            const muted = clamped === 0\n            state.volume = clamped,\n            state.muted = muted    \n        },\n        setInteractionMode: (state, action: PayloadAction<string>) => {\n            if (!includes(validModes, interactionMode)) {\n                throw new Error(`${interactionMode} not in valid list: ${validModes.join()}`)\n              }\n        }\n\n        \n    }\n});\n\nexport const selectPlayer = (state: RootState) => state.player\n\n\n\nexport const  { play, pause, setPlaybackSpeed, setActiveMenu, setVolumeSliderActive, setVolume, setPreviousVolume } = playerSlice.actions\n\n\n\nexport default playerSlice.reducer;\n\n"]},"metadata":{},"sourceType":"module"}
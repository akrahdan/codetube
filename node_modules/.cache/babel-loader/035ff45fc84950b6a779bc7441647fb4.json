{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import*as client from'filestack-js';import classNames from'classnames';import avatar from'static/images/avatar/profile-avatar.png';import{useInstructor}from\"store/useInstructor\";import{useAlert}from'react-alert';import{UploadProgress}from\"../../Courses/Landing/UploadProgress\";import{useEditInstructorInfoMutation}from'services/courses';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var filestack=client.Filestack(process.env.REACT_APP_FILESTACK_APP_KEY,{});export var Picture=function Picture(_ref){var active=_ref.active;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),progress=_useState2[0],setProgress=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),upLoading=_useState4[0],setUpLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState('Progress'),_useState8=_slicedToArray(_useState7,2),status=_useState8[0],setStatus=_useState8[1];var _useEditInstructorInf=useEditInstructorInfoMutation(),_useEditInstructorInf2=_slicedToArray(_useEditInstructorInf,1),editInstructorInfo=_useEditInstructorInf2[0];var _useInstructor=useInstructor(),instructor=_useInstructor.instructor;var alert=useAlert();var _useState9=useState(instructor),_useState10=_slicedToArray(_useState9,2),profile=_useState10[0],setProfile=_useState10[1];var onProgress=function onProgress(eve){console.log(eve.totalPercent);setProgress(eve.totalPercent);};var onUpload=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(files,onProgress){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setStatus('Progress');setUpLoading(true);filestack.upload(files,{onProgress:onProgress}).then(function(results){setProfile(_objectSpread(_objectSpread({},profile),{},{avatar:results.url}));setUpLoading(false);}).catch(function(err){setStatus('Failed');console.log(err);setError(err.status);});case 4:case\"end\":return _context.stop();}}},_callee);}));return function onUpload(_x,_x2){return _ref2.apply(this,arguments);};}();useEffect(function(){setProfile(instructor);},[instructor]);return/*#__PURE__*/_jsx(\"div\",{className:classNames(\"one-column--one-column--3pI7D\",{hidden:!active}),children:/*#__PURE__*/_jsx(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();editInstructorInfo(_objectSpread({},profile)).then(function(res){if(res.data&&res.data.avatar){alert.show('Your profile picture has been successfully saved.');}});},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"control-label\",children:\"Image preview\"}),/*#__PURE__*/_jsx(\"span\",{className:\"help-block\",children:\"Minimum 200x200 pixels, Maximum 6000x6000 pixels\"}),/*#__PURE__*/_jsx(\"div\",{className:\"photo--profileCrop--tdqoW\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload-preview-with-crop--previewWrapper--1eYsy\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-upload-preview-with-crop--imageWrapper--fNINE\",children:[/*#__PURE__*/_jsx(\"img\",{\"data-purpose\":\"image-preview\",alt:\"Course image\",src:profile&&profile.avatar?profile.avatar:avatar}),upLoading&&progress<100&&/*#__PURE__*/_jsx(\"div\",{className:\"uploading-backdrop--wrapperLoader--3qlfG\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-label\":\"Loading\",className:\"uploading-backdrop--loader--23uMA cfi-medium cfi cfi-circle-loader\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"image-upload-preview-with-crop--tips--17Lj2\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"image-upload-preview-with-crop--form-element--2Nnsf\",children:/*#__PURE__*/_jsx(\"div\",{className:\"file-uploader--file-selector--SGCns\",children:upLoading?/*#__PURE__*/_jsx(UploadProgress,{progress:progress,changeUpload:function changeUpload(){return setUpLoading(!upLoading);}}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{accept:\".gif,.jpg,.jpeg,.png\",type:\"file\",onChange:function onChange(event){return onUpload(event.target.files[0],onProgress);},id:\"FileUploaderS3-0--1\",className:\"sr-only\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"FileUploaderS3-0--1\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-control file-uploader--fake-file-input--1_ohV\",children:\"No file selected\"}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-btn\",children:/*#__PURE__*/_jsx(\"div\",{\"data-type\":\"button\",className:\"btn btn-default\",children:\"Upload image\"})})]})})]})})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right mt20\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!profile||!profile.avatar,tabIndex:-1,className:classNames(\"udlite-btn udlite-btn-large udlite-btn-primary udlite-heading-md\",{'udlite-btn-disabled':!profile||!profile.avatar}),children:/*#__PURE__*/_jsx(\"span\",{children:\"Save\"})})})]})})});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Dashboard/Profile/Picture.tsx"],"names":["React","useEffect","useState","client","classNames","avatar","useInstructor","useAlert","UploadProgress","useEditInstructorInfoMutation","filestack","Filestack","process","env","REACT_APP_FILESTACK_APP_KEY","Picture","active","progress","setProgress","upLoading","setUpLoading","error","setError","status","setStatus","editInstructorInfo","instructor","alert","profile","setProfile","onProgress","eve","console","log","totalPercent","onUpload","files","upload","then","results","url","catch","err","hidden","event","preventDefault","res","data","show","target"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as client from 'filestack-js'\nimport classNames from 'classnames';\nimport avatar from 'static/images/avatar/profile-avatar.png'\n\nimport { selectInstructor } from 'state/instructor/instructorSplice';\nimport type { Instructor, InstructorResponse } from 'services/courses';\nimport { useInstructor } from \"store/useInstructor\";\nimport { useAlert } from 'react-alert';\nimport { UploadProgress } from \"../../Courses/Landing/UploadProgress\";\nimport { useEditInstructorInfoMutation } from 'services/courses';\n\nconst filestack = client.Filestack(process.env.REACT_APP_FILESTACK_APP_KEY, {})\n\ntype PictureProps = {\n  active: boolean\n}\nexport const Picture: React.FC<PictureProps> = ({ active }) => {\n\n  const [progress, setProgress] = useState(0)\n  const [upLoading, setUpLoading] = useState(false)\n  const [error, setError] = useState(null)\n  const [status, setStatus] = useState('Progress')\n  const [editInstructorInfo] = useEditInstructorInfoMutation()\n  const { instructor } = useInstructor()\n  const alert = useAlert()\n  const [profile, setProfile] = useState<InstructorResponse>(instructor)\n\n\n  const onProgress = eve => {\n    console.log(eve.totalPercent)\n    setProgress(eve.totalPercent)\n\n  }\n\n  const onUpload = async (files, onProgress) => {\n    setError(null)\n    setStatus('Progress')\n    setUpLoading(true)\n\n    filestack.upload(files, { onProgress })\n      .then(results => {\n        setProfile({\n          ...profile,\n          avatar: results.url\n        });\n        setUpLoading(false)\n      }).catch(err => {\n        setStatus('Failed')\n        console.log(err)\n        setError(err.status)\n      })\n  }\n\n  useEffect(() => {\n    setProfile(instructor)\n  }, [instructor])\n\n\n  return (\n    <div className={classNames(\"one-column--one-column--3pI7D\", {\n      hidden: !active\n    })}>\n      <form onSubmit={event => {\n        event.preventDefault()\n        editInstructorInfo({\n          ...profile\n        }).then((res: { data: InstructorResponse }) => {\n          if (res.data && res.data.avatar) {\n\n            alert.show('Your profile picture has been successfully saved.')\n\n          }\n        })\n      }} >\n        <div>\n          <div className=\"form-group\">\n            <label className=\"control-label\">Image preview</label>\n            <span className=\"help-block\">\n              Minimum 200x200 pixels, Maximum 6000x6000 pixels\n            </span>\n            <div className=\"photo--profileCrop--tdqoW\">\n              <div >\n                <div className=\"image-upload-preview-with-crop--previewWrapper--1eYsy\">\n                  <div className=\"image-upload-preview-with-crop--imageWrapper--fNINE\">\n                    <img\n                      data-purpose=\"image-preview\"\n                      alt=\"Course image\"\n\n                      src={profile && profile.avatar ? profile.avatar : avatar}\n                    />\n                    {(upLoading && progress < 100) && <div className=\"uploading-backdrop--wrapperLoader--3qlfG\">\n                      <span\n                        aria-label=\"Loading\"\n                        className=\"uploading-backdrop--loader--23uMA cfi-medium cfi cfi-circle-loader\"\n                      />\n                    </div>}\n                  </div>\n                  <div className=\"image-upload-preview-with-crop--tips--17Lj2\" />\n                </div>\n                <div className=\"image-upload-preview-with-crop--form-element--2Nnsf\">\n                  <div\n                    className=\"file-uploader--file-selector--SGCns\"\n\n                  >\n                    {upLoading ? <UploadProgress progress={progress} changeUpload={() => setUpLoading(!upLoading)} /> : <>\n                      <input\n                        accept=\".gif,.jpg,.jpeg,.png\"\n                        type=\"file\"\n                        onChange={event => onUpload(event.target.files[0], onProgress)}\n                        id=\"FileUploaderS3-0--1\"\n                        className=\"sr-only\"\n                      />\n                      <label htmlFor=\"FileUploaderS3-0--1\">\n                        <span className=\"input-group\">\n                          <div className=\"form-control file-uploader--fake-file-input--1_ohV\">\n                            No file selected\n                          </div>\n                          <span className=\"input-group-btn\">\n                            <div data-type=\"button\" className=\"btn btn-default\">\n                              Upload image\n                            </div>\n                          </span>\n                        </span>\n                      </label>\n                    </>}\n                  </div>\n\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"text-right mt20\">\n            <button\n              type=\"submit\"\n\n              disabled={!profile || !profile.avatar}\n              tabIndex={-1}\n              className={classNames(\"udlite-btn udlite-btn-large udlite-btn-primary udlite-heading-md\", {\n                'udlite-btn-disabled': !profile || !profile.avatar\n              })}\n            >\n              <span>Save</span>\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
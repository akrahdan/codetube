{"ast":null,"code":"import{createSlice}from\"@reduxjs/toolkit\";import{authApi}from\"services/auth\";var initialState={user:null,token:null};var authSlice=createSlice({name:\"auth\",initialState:initialState,reducers:{setCredentials:function setCredentials(state,_ref){var _ref$payload=_ref.payload,user=_ref$payload.user,token=_ref$payload.token;state.user=user;state.token=token;}},extraReducers:function extraReducers(builder){builder.addMatcher(authApi.endpoints.logout.matchFulfilled,function(state,_ref2){var payload=_ref2.payload;state.user=null;state.token=null;}).addMatcher(authApi.endpoints.signup.matchFulfilled,function(state,_ref3){var payload=_ref3.payload;state.user=payload.user;state.token=payload.token;}).addMatcher(authApi.endpoints.updateAvatar.matchFulfilled,function(state,_ref4){var payload=_ref4.payload;state.user=payload.user;state.avatar=payload.avatar;}).addMatcher(authApi.endpoints.updateProfile.matchFulfilled,function(state,_ref5){var payload=_ref5.payload;state.user=payload;}).addMatcher(authApi.endpoints.getProfile.matchFulfilled,function(state,_ref6){var payload=_ref6.payload;state.user=payload.user;state.avatar=payload.avatar;});}});var setCredentials=authSlice.actions.setCredentials;export{setCredentials};export default authSlice.reducer;export var selectCurrentUser=function selectCurrentUser(state){return state.auth.user;};export var selectAvatar=function selectAvatar(state){return state.auth.avatar;};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/state/auth/authSlice.ts"],"names":["createSlice","authApi","initialState","user","token","authSlice","name","reducers","setCredentials","state","payload","extraReducers","builder","addMatcher","endpoints","logout","matchFulfilled","signup","updateAvatar","avatar","updateProfile","getProfile","actions","reducer","selectCurrentUser","auth","selectAvatar"],"mappings":"AAAA,OAASA,WAAT,KAA2C,kBAA3C,CAIA,OAASC,OAAT,KAAwB,eAAxB,CAOA,GAAMC,CAAAA,YAAY,CAAG,CAAEC,IAAI,CAAE,IAAR,CAAcC,KAAK,CAAE,IAArB,CAArB,CACA,GAAMC,CAAAA,SAAS,CAAGL,WAAW,CAAC,CAC5BM,IAAI,CAAE,MADsB,CAE5BJ,YAAY,CAAEA,YAFc,CAG5BK,QAAQ,CAAE,CACRC,cAAc,CAAE,wBACdC,KADc,MAGX,uBADDC,OACC,CADUP,IACV,cADUA,IACV,CADgBC,KAChB,cADgBA,KAChB,CACHK,KAAK,CAACN,IAAN,CAAaA,IAAb,CACAM,KAAK,CAACL,KAAN,CAAcA,KAAd,CACD,CAPO,CAHkB,CAY5BO,aAAa,CAAE,uBAACC,OAAD,CAAa,CAC1BA,OAAO,CACJC,UADH,CAEIZ,OAAO,CAACa,SAAR,CAAkBC,MAAlB,CAAyBC,cAF7B,CAGI,SAACP,KAAD,OAAwB,IAAdC,CAAAA,OAAc,OAAdA,OAAc,CACtBD,KAAK,CAACN,IAAN,CAAa,IAAb,CACAM,KAAK,CAACL,KAAN,CAAc,IAAd,CACD,CANL,EAQGS,UARH,CASIZ,OAAO,CAACa,SAAR,CAAkBG,MAAlB,CAAyBD,cAT7B,CAUI,SAACP,KAAD,OAAwB,IAAdC,CAAAA,OAAc,OAAdA,OAAc,CACtBD,KAAK,CAACN,IAAN,CAAaO,OAAO,CAACP,IAArB,CACAM,KAAK,CAACL,KAAN,CAAcM,OAAO,CAACN,KAAtB,CACD,CAbL,EAcIS,UAdJ,CAeIZ,OAAO,CAACa,SAAR,CAAkBI,YAAlB,CAA+BF,cAfnC,CAgBI,SAACP,KAAD,OAAwB,IAAdC,CAAAA,OAAc,OAAdA,OAAc,CACtBD,KAAK,CAACN,IAAN,CAAaO,OAAO,CAACP,IAArB,CACAM,KAAK,CAACU,MAAN,CAAeT,OAAO,CAACS,MAAvB,CACD,CAnBL,EAoBIN,UApBJ,CAqBIZ,OAAO,CAACa,SAAR,CAAkBM,aAAlB,CAAgCJ,cArBpC,CAsBI,SAACP,KAAD,OAAwB,IAAdC,CAAAA,OAAc,OAAdA,OAAc,CACtBD,KAAK,CAACN,IAAN,CAAaO,OAAb,CACD,CAxBL,EAyBIG,UAzBJ,CA0BIZ,OAAO,CAACa,SAAR,CAAkBO,UAAlB,CAA6BL,cA1BjC,CA2BI,SAACP,KAAD,OAAwB,IAAdC,CAAAA,OAAc,OAAdA,OAAc,CACtBD,KAAK,CAACN,IAAN,CAAaO,OAAO,CAACP,IAArB,CACAM,KAAK,CAACU,MAAN,CAAeT,OAAO,CAACS,MAAvB,CACD,CA9BL,EAgCD,CA7C2B,CAAD,CAA7B,C,GAgDeX,CAAAA,c,CAAmBH,SAAS,CAACiB,O,CAA7Bd,c,wBAEf,cAAeH,CAAAA,SAAS,CAACkB,OAAzB,CAEA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACf,KAAD,QAAsBA,CAAAA,KAAK,CAACgB,IAAN,CAAWtB,IAAjC,EAA1B,CACP,MAAO,IAAMuB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACjB,KAAD,QAAsBA,CAAAA,KAAK,CAACgB,IAAN,CAAWN,MAAjC,EAArB","sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { UserSubmitKey } from \"components/Forms/RegistrationForm/dist/types\";\nimport type { User } from \"services/auth\";\nimport type { RootState } from \"store\";\nimport { authApi } from \"services/auth\";\n\ntype AuthState = {\n  user: User | null;\n  avatar: string | null;\n  token: string | null;\n};\nconst initialState = { user: null, token: null };\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState: initialState as AuthState,\n  reducers: {\n    setCredentials: (\n      state,\n      { payload: { user, token } }: PayloadAction<{ user: User; token: string }>\n    ) => {\n      state.user = user;\n      state.token = token;\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addMatcher(\n        authApi.endpoints.logout.matchFulfilled,\n        (state, { payload }) => {\n          state.user = null;\n          state.token = null;\n        }\n      )\n      .addMatcher(\n        authApi.endpoints.signup.matchFulfilled,\n        (state, { payload }) => {\n          state.user = payload.user;\n          state.token = payload.token;\n        }\n      ).addMatcher(\n        authApi.endpoints.updateAvatar.matchFulfilled,\n        (state, { payload }) => {\n          state.user = payload.user;\n          state.avatar = payload.avatar;\n        }\n      ).addMatcher(\n        authApi.endpoints.updateProfile.matchFulfilled,\n        (state, { payload }) => {\n          state.user = payload;\n        }\n      ).addMatcher(\n        authApi.endpoints.getProfile.matchFulfilled,\n        (state, { payload }) => {\n          state.user = payload.user;\n          state.avatar = payload.avatar\n        }\n      );\n  },\n});\n\nexport const { setCredentials } = authSlice.actions;\n\nexport default authSlice.reducer;\n\nexport const selectCurrentUser = (state: RootState) => state.auth.user;\nexport const selectAvatar = (state: RootState) => state.auth.avatar\n"]},"metadata":{},"sourceType":"module"}
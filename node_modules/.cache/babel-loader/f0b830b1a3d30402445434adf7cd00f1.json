{"ast":null,"code":"import { useCombinedRefs } from '@pluralsight/ps-design-system-util';\nimport React from 'react';\nexport var searchListItem = function (el, down) {\n  if (down === void 0) {\n    down = true;\n  }\n\n  if (!el) return;\n  var isDisabled = el.hasAttribute('disabled');\n  var isListItem = el.tagName === 'BUTTON';\n  if (isListItem && !isDisabled) return el;\n  var nextEl = down ? el.nextElementSibling : el.previousElementSibling;\n  return searchListItem(nextEl, down);\n};\n\nvar downArrow = function (evt) {\n  var _a;\n\n  var target = evt.target;\n  var nextEl = target.nextElementSibling;\n  var nextSibling = searchListItem(nextEl);\n  var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n  var firstChild = searchListItem(firstChildEl);\n  if (nextSibling) nextSibling.focus();else if (firstChild) firstChild.focus();\n  evt.preventDefault();\n};\n\nvar upArrow = function (evt) {\n  var _a;\n\n  var target = evt.target;\n  var prevEl = target.previousElementSibling;\n  var prevSibling = searchListItem(prevEl, false);\n  var lastEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n  var lastChild = searchListItem(lastEl, false);\n  if (prevSibling) prevSibling.focus();else if (lastChild) lastChild.focus();\n  evt.preventDefault();\n};\n\nvar home = function (evt) {\n  var _a;\n\n  var target = evt.target;\n  var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n  var firstChild = searchListItem(firstChildEl);\n  if (firstChild) firstChild.focus();\n  evt.preventDefault();\n};\n\nvar end = function (evt) {\n  var _a;\n\n  var target = evt.target;\n  var lastChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n  var lastChild = searchListItem(lastChildEl, false);\n  if (lastChild) lastChild.focus();\n  evt.preventDefault();\n};\n\nvar startsWith = function (el, key) {\n  if (el && typeof el.innerText === 'string') {\n    return el.innerText.startsWith(key) || el.innerText.startsWith(key.toUpperCase());\n  }\n\n  return false;\n};\n\nvar character = function (evt) {\n  var _a;\n\n  var target = evt.target;\n  var char = evt.key.length === 1 ? evt.key : false;\n  if (!char) return;\n  var nextSiblingEl = target.nextElementSibling;\n  var firstParentChild = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n  var sibling = searchListItem(nextSiblingEl) || searchListItem(firstParentChild);\n  var siblings = [];\n\n  while (sibling) {\n    if (sibling === target) break;\n    var nextSiblingsSiblingEl = sibling.nextElementSibling;\n    siblings.push(sibling);\n    sibling = searchListItem(nextSiblingsSiblingEl) || searchListItem(firstParentChild);\n  }\n\n  for (var _i = 0, siblings_1 = siblings; _i < siblings_1.length; _i++) {\n    var el = siblings_1[_i];\n\n    if (startsWith(el, char)) {\n      el.focus();\n      break;\n    }\n  }\n\n  evt.preventDefault();\n};\n\nexport var handleMenuKeyDownEvents = function (synthetic) {\n  var evt = synthetic.nativeEvent;\n  evt.key === 'ArrowDown' ? downArrow(evt) : evt.key === 'ArrowUp' ? upArrow(evt) : evt.key === 'Home' ? home(evt) : evt.key === 'End' ? end(evt) : character(evt);\n};\nexport var useMenuRef = function (outer) {\n  var inner = React.useCallback(function (node) {\n    if (node) {\n      var firstMenuItem = node.querySelector('[aria-selected=\"true\"]') || searchListItem(node.firstElementChild);\n      firstMenuItem && firstMenuItem.focus();\n    }\n  }, []);\n  return useCombinedRefs(outer, inner);\n};","map":{"version":3,"sources":["../../../src/js/menuKeyEvents.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { useCombinedRefs } from '@pluralsight/ps-design-system-util';\nimport React from 'react';\nexport var searchListItem = function (el, down) {\n    if (down === void 0) { down = true; }\n    if (!el)\n        return;\n    var isDisabled = el.hasAttribute('disabled');\n    var isListItem = el.tagName === 'BUTTON';\n    if (isListItem && !isDisabled)\n        return el;\n    var nextEl = down ? el.nextElementSibling : el.previousElementSibling;\n    return searchListItem(nextEl, down);\n};\nvar downArrow = function (evt) {\n    var _a;\n    var target = evt.target;\n    var nextEl = target.nextElementSibling;\n    var nextSibling = searchListItem(nextEl);\n    var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    var firstChild = searchListItem(firstChildEl);\n    if (nextSibling)\n        nextSibling.focus();\n    else if (firstChild)\n        firstChild.focus();\n    evt.preventDefault();\n};\nvar upArrow = function (evt) {\n    var _a;\n    var target = evt.target;\n    var prevEl = target.previousElementSibling;\n    var prevSibling = searchListItem(prevEl, false);\n    var lastEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n    var lastChild = searchListItem(lastEl, false);\n    if (prevSibling)\n        prevSibling.focus();\n    else if (lastChild)\n        lastChild.focus();\n    evt.preventDefault();\n};\nvar home = function (evt) {\n    var _a;\n    var target = evt.target;\n    var firstChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    var firstChild = searchListItem(firstChildEl);\n    if (firstChild)\n        firstChild.focus();\n    evt.preventDefault();\n};\nvar end = function (evt) {\n    var _a;\n    var target = evt.target;\n    var lastChildEl = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.lastElementChild;\n    var lastChild = searchListItem(lastChildEl, false);\n    if (lastChild)\n        lastChild.focus();\n    evt.preventDefault();\n};\nvar startsWith = function (el, key) {\n    if (el && typeof el.innerText === 'string') {\n        return (el.innerText.startsWith(key) || el.innerText.startsWith(key.toUpperCase()));\n    }\n    return false;\n};\nvar character = function (evt) {\n    var _a;\n    var target = evt.target;\n    var char = evt.key.length === 1 ? evt.key : false;\n    if (!char)\n        return;\n    var nextSiblingEl = target.nextElementSibling;\n    var firstParentChild = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    var sibling = searchListItem(nextSiblingEl) || searchListItem(firstParentChild);\n    var siblings = [];\n    while (sibling) {\n        if (sibling === target)\n            break;\n        var nextSiblingsSiblingEl = sibling.nextElementSibling;\n        siblings.push(sibling);\n        sibling =\n            searchListItem(nextSiblingsSiblingEl) || searchListItem(firstParentChild);\n    }\n    for (var _i = 0, siblings_1 = siblings; _i < siblings_1.length; _i++) {\n        var el = siblings_1[_i];\n        if (startsWith(el, char)) {\n            el.focus();\n            break;\n        }\n    }\n    evt.preventDefault();\n};\nexport var handleMenuKeyDownEvents = function (synthetic) {\n    var evt = synthetic.nativeEvent;\n    evt.key === 'ArrowDown'\n        ? downArrow(evt)\n        : evt.key === 'ArrowUp'\n            ? upArrow(evt)\n            : evt.key === 'Home'\n                ? home(evt)\n                : evt.key === 'End'\n                    ? end(evt)\n                    : character(evt);\n};\nexport var useMenuRef = function (outer) {\n    var inner = React.useCallback(function (node) {\n        if (node) {\n            var firstMenuItem = node.querySelector('[aria-selected=\"true\"]') ||\n                searchListItem(node.firstElementChild);\n            firstMenuItem && firstMenuItem.focus();\n        }\n    }, []);\n    return useCombinedRefs(outer, inner);\n};\n//# sourceMappingURL=menuKeyEvents.js.map"]},"metadata":{},"sourceType":"module"}
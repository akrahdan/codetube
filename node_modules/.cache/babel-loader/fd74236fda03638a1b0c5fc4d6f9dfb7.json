{"ast":null,"code":"import _objectSpread from\"/Users/akrah/Documents/dev/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/akrah/Documents/dev/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/akrah/Documents/dev/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import{BodyPortal,FocusTrap,IconButton}from'@codecademy/gamut';import{MiniDeleteIcon}from'@codecademy/gamut-icons';import{system,variant}from'@codecademy/gamut-styles';import{variance}from'@codecademy/variance';import styled from'@emotion/styled';import{AnimatePresence,motion}from'framer-motion';import React,{useCallback,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var transitionDuration=0.35;var flyoutStyles=variance.compose(system.background,system.border,system.flex,system.grid,system.layout,system.positioning);var flyoutOpenVariants=variant({defaultVariant:'left',prop:'openFrom',variants:{left:{right:'auto',left:0},right:{right:0,left:'auto'}}});export var DrawerBase=styled(motion.div)(flyoutStyles,flyoutOpenVariants);export var Flyout=function Flyout(_ref){var children=_ref.children,renderButton=_ref.renderButton,initialExpanded=_ref.initialExpanded,_ref$openFrom=_ref.openFrom,openFrom=_ref$openFrom===void 0?'left':_ref$openFrom,_ref$openWidth=_ref.openWidth,openWidth=_ref$openWidth===void 0?30:_ref$openWidth,clickOutsideDoesNotClose=_ref.clickOutsideDoesNotClose,escapeDoesNotClose=_ref.escapeDoesNotClose,closeFlyoutRef=_ref.closeFlyoutRef,styleProps=_objectWithoutProperties(_ref,[\"children\",\"renderButton\",\"initialExpanded\",\"openFrom\",\"openWidth\",\"clickOutsideDoesNotClose\",\"escapeDoesNotClose\",\"closeFlyoutRef\"]);var initialX=openFrom==='left'?-1000:1000;var _useState=useState(!!initialExpanded),_useState2=_slicedToArray(_useState,2),isExpanded=_useState2[0],setIsExpanded=_useState2[1];var toggleExpanded=useCallback(function(){return setIsExpanded(function(isExpanded){return!isExpanded;});},[]);var closeFlyout=useCallback(function(){setIsExpanded(false);},[]);useEffect(function(){// Passes the function up to any interested parent component\nif(closeFlyoutRef){closeFlyoutRef.current=closeFlyout;return function(){closeFlyoutRef.current=function(){};};}},[closeFlyoutRef,closeFlyout]);var handleOutsideClick=useCallback(function(){!clickOutsideDoesNotClose&&closeFlyout();},[clickOutsideDoesNotClose,closeFlyout]);var handleEscapeKey=useCallback(function(){!escapeDoesNotClose&&closeFlyout();},[escapeDoesNotClose,closeFlyout]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AnimatePresence,{children:isExpanded?/*#__PURE__*/_jsx(BodyPortal,{children:/*#__PURE__*/_jsx(FocusTrap,{onClickOutside:handleOutsideClick,onEscapeKey:handleEscapeKey,children:/*#__PURE__*/_jsxs(DrawerBase,_objectSpread(_objectSpread({\"aria-expanded\":isExpanded,initial:{x:initialX},animate:{x:0},exit:{x:initialX},transition:{duration:transitionDuration},width:{_:'75%',sm:\"\".concat(openWidth,\"rem\")},maxWidth:\"\".concat(openWidth,\"rem\"),openFrom:openFrom,position:\"fixed\",bottom:\"0\",top:\"0\"},styleProps),{},{children:[/*#__PURE__*/_jsx(IconButton,{icon:MiniDeleteIcon,onClick:toggleExpanded,position:\"absolute\",top:\"0.5rem\",right:\"0.5rem\"}),children]}))})}):null}),renderButton(toggleExpanded)]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/codefluent/src/components/gamut-overrides/Flyout/index.tsx"],"names":["BodyPortal","FocusTrap","IconButton","MiniDeleteIcon","system","variant","variance","styled","AnimatePresence","motion","React","useCallback","useEffect","useState","transitionDuration","flyoutStyles","compose","background","border","flex","grid","layout","positioning","flyoutOpenVariants","defaultVariant","prop","variants","left","right","DrawerBase","div","Flyout","children","renderButton","initialExpanded","openFrom","openWidth","clickOutsideDoesNotClose","escapeDoesNotClose","closeFlyoutRef","styleProps","initialX","isExpanded","setIsExpanded","toggleExpanded","closeFlyout","current","handleOutsideClick","handleEscapeKey","x","duration","_","sm"],"mappings":"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","sourcesContent":["import { BodyPortal, FocusTrap, IconButton } from '@codecademy/gamut';\nimport { MiniDeleteIcon } from '@codecademy/gamut-icons';\nimport { system, variant } from '@codecademy/gamut-styles';\nimport { StyleProps, variance } from '@codecademy/variance';\nimport styled from '@emotion/styled';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { useCallback, useEffect, useState } from 'react';\n\nexport const transitionDuration = 0.35;\n\nconst flyoutStyles = variance.compose(\n  system.background,\n  system.border,\n  system.flex,\n  system.grid,\n  system.layout,\n  system.positioning\n);\n\nconst flyoutOpenVariants = variant({\n  defaultVariant: 'left',\n  prop: 'openFrom',\n  variants: {\n    left: {\n      right: 'auto',\n      left: 0,\n    },\n    right: {\n      right: 0,\n      left: 'auto',\n    },\n  },\n});\n\nexport type FlyoutStyles = StyleProps<typeof flyoutStyles> &\n  StyleProps<typeof flyoutOpenVariants>;\nexport interface FlyoutStyleProps extends FlyoutStyles {}\n\nexport const DrawerBase = styled(motion.div)<FlyoutStyleProps>(\n  flyoutStyles,\n  flyoutOpenVariants\n);\n\ntype FlyoutProps = FlyoutStyleProps & {\n  /**\n   * if the drawer should be open or closed\n   */\n  initialExpanded?: boolean;\n  /**\n   * width of the open drawer in rem\n   */\n  openWidth?: number;\n  /**\n   * toggles the Flyout\n   */\n  renderButton: (onClick: () => void) => React.ReactNode;\n  /**\n   * Whether clicking on the screen outside of the container should close the Flyout\n   */\n  clickOutsideDoesNotClose?: boolean;\n  /**\n   * Whether clicking the escape key should close the Flyout\n   */\n  escapeDoesNotClose?: boolean;\n\n  /**\n   * A means of the parent method to get a reference to the closeFlyout function\n   */\n  closeFlyoutRef?: React.MutableRefObject<Function>;\n};\n\nexport const Flyout: React.FC<FlyoutProps> = ({\n  children,\n  renderButton,\n  initialExpanded,\n  openFrom = 'left',\n  openWidth = 30,\n  clickOutsideDoesNotClose,\n  escapeDoesNotClose,\n  closeFlyoutRef,\n  ...styleProps\n}) => {\n  const initialX = openFrom === 'left' ? -1000 : 1000;\n\n  const [isExpanded, setIsExpanded] = useState(!!initialExpanded);\n  const toggleExpanded = useCallback(\n    () => setIsExpanded((isExpanded) => !isExpanded),\n    []\n  );\n  const closeFlyout = useCallback(() => {\n    setIsExpanded(false);\n  }, []);\n\n  useEffect(() => {\n    // Passes the function up to any interested parent component\n    if (closeFlyoutRef) {\n      closeFlyoutRef.current = closeFlyout;\n      return () => {\n        closeFlyoutRef.current = () => {};\n      };\n    }\n  }, [closeFlyoutRef, closeFlyout]);\n\n  const handleOutsideClick = useCallback(() => {\n    !clickOutsideDoesNotClose && closeFlyout();\n  }, [clickOutsideDoesNotClose, closeFlyout]);\n\n  const handleEscapeKey = useCallback(() => {\n    !escapeDoesNotClose && closeFlyout();\n  }, [escapeDoesNotClose, closeFlyout]);\n\n  return (\n    <>\n      <AnimatePresence>\n        {isExpanded ? (\n          <BodyPortal>\n            <FocusTrap\n              onClickOutside={handleOutsideClick}\n              onEscapeKey={handleEscapeKey}\n            >\n              <DrawerBase\n                aria-expanded={isExpanded}\n                initial={{ x: initialX }}\n                animate={{ x: 0 }}\n                exit={{ x: initialX }}\n                transition={{ duration: transitionDuration }}\n                width={{ _: '75%', sm: `${openWidth}rem` }}\n                maxWidth={`${openWidth}rem`}\n                openFrom={openFrom}\n                position=\"fixed\"\n                bottom=\"0\"\n                top=\"0\"\n                {...styleProps}\n              >\n                <IconButton\n                  icon={MiniDeleteIcon}\n                  onClick={toggleExpanded}\n                  position=\"absolute\"\n                  top=\"0.5rem\"\n                  right=\"0.5rem\"\n                />\n                {children}\n              </DrawerBase>\n            </FocusTrap>\n          </BodyPortal>\n        ) : null}\n      </AnimatePresence>\n      {renderButton(toggleExpanded)}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
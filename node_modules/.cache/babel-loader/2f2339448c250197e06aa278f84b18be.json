{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import{Box}from'@codecademy/gamut';import{ArrowChevronDownFilledIcon}from'@codecademy/gamut-icons';import styled from'@emotion/styled';import cx from'classnames';import{AnimatePresence,motion}from'framer-motion';import React,{useRef,useState}from'react';import{Popover}from'../../../Popover';import{AppHeaderAvatar}from'../AppHeaderAvatar';import{AppHeaderLinkSections}from'../AppHeaderLinkSections';import{focusStyles,hoverStyles,textButtonStyles}from'../SharedStyles';import styles from'./styles.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var AppHeaderTextTargetButton=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  \",\"\\n  \",\"\\n  \",\"\\n\"])),textButtonStyles,hoverStyles,focusStyles);var AppHeaderAvatarTargetButton=styled.button(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  background-color: transparent;\\n  border: transparent;\\n  font-weight: normal;\\n  padding: 2px 0;\\n  \",\"\\n  \",\"\\n\"])),hoverStyles,focusStyles);export var AppHeaderDropdown=function AppHeaderDropdown(_ref){var action=_ref.action,item=_ref.item;var headerDropdownRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isOpen=_useState2[0],setIsOpen=_useState2[1];var toggleIsOpen=function toggleIsOpen(event){setIsOpen(!isOpen);!isOpen&&action(event,item);};var handleClose=function handleClose(){setIsOpen(false);};var clickTarget=item.type==='profile-dropdown'?/*#__PURE__*/_jsx(AppHeaderAvatarTargetButton,{onClick:function onClick(event){return toggleIsOpen(event);},children:/*#__PURE__*/_jsx(AppHeaderAvatar,{imageUrl:item.avatar})}):/*#__PURE__*/_jsxs(AppHeaderTextTargetButton,{className:cx(styles.target,isOpen&&styles.open),onClick:function onClick(event){return toggleIsOpen(event);},children:[/*#__PURE__*/_jsx(\"span\",{title:item.text,className:styles.copy,children:item.text}),/*#__PURE__*/_jsx(ArrowChevronDownFilledIcon,{size:12,className:styles.icon,\"aria-label\":\"dropdown\"})]});var paddingY=24;var linkHeight=56;var separatorHeight=16;var getPopoverHeight=function getPopoverHeight(){if(item.type==='dropdown')return item.popover.length*linkHeight+paddingY;var numberOfLinks=item.popover.reduce(function(sum,linksArray){return sum+linksArray.length;},0);var totalSeparatorHeight=separatorHeight*(item.popover.length-1);return numberOfLinks*linkHeight+totalSeparatorHeight+paddingY;};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{ref:headerDropdownRef,children:clickTarget}),/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsx(Popover,{align:item.type==='profile-dropdown'?'right':'left',verticalOffset:item.type==='profile-dropdown'?0:-2,outline:true,isOpen:isOpen,onRequestClose:handleClose,targetRef:headerDropdownRef,children:/*#__PURE__*/_jsx(motion.div,{style:{overflow:'hidden',top:'12px',position:'relative'},initial:{height:0},animate:{height:getPopoverHeight()},transition:{duration:0.175},exit:{height:0},children:/*#__PURE__*/_jsx(Box,{px:24,children:/*#__PURE__*/_jsx(AppHeaderLinkSections,{action:action,item:item})})})})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/components/gamut-overrides/AppHeader/AppHeaderElements/AppHeaderDropdown/index.tsx"],"names":["Box","ArrowChevronDownFilledIcon","styled","cx","AnimatePresence","motion","React","useRef","useState","Popover","AppHeaderAvatar","AppHeaderLinkSections","focusStyles","hoverStyles","textButtonStyles","styles","AppHeaderTextTargetButton","button","AppHeaderAvatarTargetButton","AppHeaderDropdown","action","item","headerDropdownRef","isOpen","setIsOpen","toggleIsOpen","event","handleClose","clickTarget","type","avatar","target","open","text","copy","icon","paddingY","linkHeight","separatorHeight","getPopoverHeight","popover","length","numberOfLinks","reduce","sum","linksArray","totalSeparatorHeight","overflow","top","position","height","duration"],"mappings":"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","sourcesContent":["import { Box } from '@codecademy/gamut';\nimport { ArrowChevronDownFilledIcon } from '@codecademy/gamut-icons';\nimport styled from '@emotion/styled';\nimport cx from 'classnames';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport React, { useRef, useState } from 'react';\n\nimport { Popover } from '../../../Popover';\nimport { AppHeaderAvatar } from '../AppHeaderAvatar';\nimport { AppHeaderLinkSections } from '../AppHeaderLinkSections';\nimport { focusStyles, hoverStyles, textButtonStyles } from '../SharedStyles';\nimport { AppHeaderClickHandler, AppHeaderDropdownItem } from '../types';\nimport styles from './styles.module.scss';\n\nconst AppHeaderTextTargetButton = styled.button`\n  ${textButtonStyles}\n  ${hoverStyles}\n  ${focusStyles}\n`;\n\nconst AppHeaderAvatarTargetButton = styled.button`\n  background-color: transparent;\n  border: transparent;\n  font-weight: normal;\n  padding: 2px 0;\n  ${hoverStyles}\n  ${focusStyles}\n`;\n\nexport type AppHeaderDropdownProps = {\n  action: AppHeaderClickHandler;\n  item: AppHeaderDropdownItem;\n};\n\nexport const AppHeaderDropdown: React.FC<AppHeaderDropdownProps> = ({\n  action,\n  item,\n}) => {\n  const headerDropdownRef = useRef<HTMLDivElement>(null);\n  const [isOpen, setIsOpen] = useState(false);\n  const toggleIsOpen = (event: React.MouseEvent) => {\n    setIsOpen(!isOpen);\n    !isOpen && action(event, item);\n  };\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n  const clickTarget =\n    item.type === 'profile-dropdown' ? (\n      <AppHeaderAvatarTargetButton onClick={(event) => toggleIsOpen(event)}>\n        <AppHeaderAvatar imageUrl={item.avatar} />\n      </AppHeaderAvatarTargetButton>\n    ) : (\n      <AppHeaderTextTargetButton\n        className={cx(styles.target, isOpen && styles.open)}\n        onClick={(event) => toggleIsOpen(event)}\n      >\n        <span title={item.text} className={styles.copy}>\n          {item.text}\n        </span>\n        <ArrowChevronDownFilledIcon\n          size={12}\n          className={styles.icon}\n          aria-label=\"dropdown\"\n        />\n      </AppHeaderTextTargetButton>\n    );\n\n  const paddingY = 24;\n  const linkHeight = 56;\n  const separatorHeight = 16;\n  const getPopoverHeight = () => {\n    if (item.type === 'dropdown')\n      return item.popover.length * linkHeight + paddingY;\n    const numberOfLinks = item.popover.reduce(\n      (sum, linksArray) => sum + linksArray.length,\n      0\n    );\n    const totalSeparatorHeight = separatorHeight * (item.popover.length - 1);\n    return numberOfLinks * linkHeight + totalSeparatorHeight + paddingY;\n  };\n\n  return (\n    <>\n      <div ref={headerDropdownRef}>{clickTarget}</div>\n      <AnimatePresence>\n        {isOpen && (\n          <Popover\n            align={item.type === 'profile-dropdown' ? 'right' : 'left'}\n            verticalOffset={item.type === 'profile-dropdown' ? 0 : -2}\n            outline\n            isOpen={isOpen}\n            onRequestClose={handleClose}\n            targetRef={headerDropdownRef}\n          >\n            <motion.div\n              style={{ overflow: 'hidden', top: '12px', position: 'relative' }}\n              initial={{ height: 0 }}\n              animate={{ height: getPopoverHeight() }}\n              transition={{ duration: 0.175 }}\n              exit={{ height: 0 }}\n            >\n              <Box px={24}>\n                <AppHeaderLinkSections action={action} item={item} />\n              </Box>\n            </motion.div>\n          </Popover>\n        )}\n      </AnimatePresence>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
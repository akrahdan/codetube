{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { createUniversalPortal, useCloseOnDocumentEvents } from '@pluralsight/ps-design-system-util';\nimport glamorDefault, * as glamorExports from 'glamor';\nimport React from 'react';\nimport stylesheet from '../css/index';\nimport { DropdownContext, useMenuRef, handleMenuKeyDownEvents } from '../js/index';\nvar glamor = glamorDefault || glamorExports;\nvar slide = glamor.keyframes(stylesheet['@keyframes psds-dropdown__menu__keyframes__slide']);\nvar styles = {\n  menuWrapper: function () {\n    return glamor.css(stylesheet['.psds-dropdown__menu-wrapper']);\n  },\n  menu: function () {\n    return glamor.css(stylesheet['.psds-dropdown__menu'], stylesheet['.psds-dropdown__menu__animation']({\n      slide: slide\n    }));\n  }\n};\nexport var Menu = React.forwardRef(function (props, forwardedRef) {\n  var inNode = props.inNode,\n      isOpen = props.isOpen,\n      menu = props.menu,\n      menuPosition = props.menuPosition,\n      buttonRef = props.buttonRef,\n      rest = __rest(props\n  /* eslint-disable-next-line react-hooks/rules-of-hooks */\n  , [\"inNode\", \"isOpen\", \"menu\", \"menuPosition\", \"buttonRef\"]);\n  /* eslint-disable-next-line react-hooks/rules-of-hooks */\n\n\n  var _a = React.useState(),\n      adjMenuPosition = _a[0],\n      setAdjMenuPosition = _a[1];\n  /* eslint-disable-next-line react-hooks/rules-of-hooks */\n\n\n  var context = React.useContext(DropdownContext);\n  /* eslint-disable-next-line react-hooks/rules-of-hooks */\n\n  var ref = useMenuRef(forwardedRef);\n  /* eslint-disable-next-line react-hooks/rules-of-hooks */\n\n  useCloseOnDocumentEvents(ref, function (evt) {\n    return context.onDocumentEvents(ref, evt);\n  });\n\n  var handleKeyDown = function (evt) {\n    isOpen && handleMenuKeyDownEvents(evt);\n  };\n  /* eslint-disable-next-line react-hooks/rules-of-hooks */\n\n\n  React.useLayoutEffect(function () {\n    setAdjMenuPosition(menuPosition);\n    if (!isOpen || !ref.current || !buttonRef.current) return;\n    var menuRect = ref.current.getBoundingClientRect();\n    var buttonRect = buttonRef.current.getBoundingClientRect();\n\n    if (buttonRect.bottom + menuRect.height > window.innerHeight) {\n      setAdjMenuPosition(__assign(__assign({}, menuPosition), {\n        top: buttonRect.top - menuRect.height - 8\n      }));\n    }\n  }, [ref, buttonRef, isOpen, menuPosition, setAdjMenuPosition]);\n  return menu && isOpen && createUniversalPortal(React.createElement(\"div\", __assign({}, styles.menuWrapper(), {\n    style: adjMenuPosition\n  }), React.createElement(\"div\", __assign({}, styles.menu(), {\n    ref: ref,\n    role: \"listbox\"\n  }, rest, {\n    onKeyDown: handleKeyDown\n  }), menu)), inNode);\n});\nMenu.displayName = 'Dropdown.Menu'; // TODO: replace\n\nMenu.defaultProps = {\n  menu: React.createElement(\"span\", null)\n};","map":{"version":3,"sources":["../../../src/react/menu.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SACE,qBADF,EAEE,wBAFF,QAGO,oCAHP;AAIA,OAAO,aAAP,EAAsB,KAAK,aAA3B,MAA8C,QAA9C;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,OAAO,UAAP,MAAuB,cAAvB;AACA,SACE,eADF,EAEE,UAFF,EAGE,uBAHF,QAIO,aAJP;AAMA,IAAM,MAAM,GAAG,aAAa,IAAI,aAAhC;AAEA,IAAM,KAAK,GAAG,MAAM,CAAC,SAAP,CACZ,UAAU,CAAC,kDAAD,CADE,CAAd;AAIA,IAAM,MAAM,GAAG;AACb,EAAA,WAAW,EAAE,YAAA;AAAM,WAAA,MAAM,CAAC,GAAP,CAAW,UAAU,CAArB,8BAAqB,CAArB,CAAA;AAAsD,GAD5D;AAEb,EAAA,IAAI,EAAE,YAAA;AACJ,WAAA,MAAM,CAAC,GAAP,CACE,UAAU,CAAC,sBAAD,CADZ,EAEE,UAAU,CAAC,iCAAD,CAAV,CAA8C;AAAE,MAAA,KAAK,EAAA;AAAP,KAA9C,CAFF,CAAA;AAGC;AANU,CAAf;AAiBA,OAAO,IAAM,IAAI,GAAG,KAAK,CAAC,UAAN,CAAqD,UACvE,KADuE,EAEvE,YAFuE,EAE3D;AAEJ,MAAA,MAAM,GAAqD,KAAK,CAA1D,MAAN;AAAA,MAAQ,MAAM,GAA6C,KAAK,CAAlD,MAAd;AAAA,MAAgB,IAAI,GAAuC,KAAK,CAA5C,IAApB;AAAA,MAAsB,YAAY,GAAyB,KAAK,CAA9B,YAAlC;AAAA,MAAoC,SAAS,GAAc,KAAK,CAAnB,SAA7C;AAAA,MAAkD,IAAI,GAAA,MAAA,CAAK;AAEnE;AAF8D,IAAxD,CAAA,QAAA,EAAA,QAAA,EAAA,MAAA,EAAA,cAAA,EAAA,WAAA,CAAwD,CAAtD;AAER;;;AACM,MAAA,EAAA,GAAwC,KAAK,CAAC,QAAN,EAAxC;AAAA,MAAC,eAAe,GAAA,EAAA,CAAA,CAAA,CAAhB;AAAA,MAAkB,kBAAkB,GAAA,EAAA,CAAA,CAAA,CAApC;AAMN;;;AACA,MAAM,OAAO,GAAG,KAAK,CAAC,UAAN,CAAiB,eAAjB,CAAhB;AACA;;AACA,MAAM,GAAG,GAAG,UAAU,CAAC,YAAD,CAAtB;AAEA;;AACA,EAAA,wBAAwB,CAAiB,GAAjB,EAAsB,UAAC,GAAD,EAAW;AACvD,WAAA,OAAO,CAAC,gBAAR,CAAyB,GAAzB,EAA8B,GAA9B,CAAA;AAAkC,GADZ,CAAxB;;AAIA,MAAM,aAAa,GAA+C,UAAA,GAAA,EAAG;AACnE,IAAA,MAAM,IAAI,uBAAuB,CAAC,GAAD,CAAjC;AACD,GAFD;AAIA;;;AACA,EAAA,KAAK,CAAC,eAAN,CAAsB,YAAA;AACpB,IAAA,kBAAkB,CAAC,YAAD,CAAlB;AACA,QAAI,CAAC,MAAD,IAAW,CAAC,GAAG,CAAC,OAAhB,IAA2B,CAAC,SAAS,CAAC,OAA1C,EAAmD;AAEnD,QAAM,QAAQ,GAAG,GAAG,CAAC,OAAJ,CAAY,qBAAZ,EAAjB;AACA,QAAM,UAAU,GAAG,SAAS,CAAC,OAAV,CAAkB,qBAAlB,EAAnB;;AACA,QAAI,UAAU,CAAC,MAAX,GAAoB,QAAQ,CAAC,MAA7B,GAAsC,MAAM,CAAC,WAAjD,EAA8D;AAC5D,MAAA,kBAAkB,CAAA,QAAA,CAAA,QAAA,CAAA,EAAA,EACb,YADa,CAAA,EACD;AACf,QAAA,GAAG,EAAE,UAAU,CAAC,GAAX,GAAiB,QAAQ,CAAC,MAA1B,GAAmC;AADzB,OADC,CAAA,CAAlB;AAID;AACF,GAZD,EAYG,CAAC,GAAD,EAAM,SAAN,EAAiB,MAAjB,EAAyB,YAAzB,EAAuC,kBAAvC,CAZH;AAcA,SACE,IAAI,IACJ,MADA,IAEA,qBAAqB,CACnB,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EAAS,MAAM,CAAC,WAAP,EAAT,EAA6B;AAAE,IAAA,KAAK,EAAE;AAAT,GAA7B,CAAA,EACE,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,QAAA,CAAA,EAAA,EACM,MAAM,CAAC,IAAP,EADN,EACmB;AACjB,IAAA,GAAG,EAAE,GADY;AAEjB,IAAA,IAAI,EAAC;AAFY,GADnB,EAIM,IAJN,EAIU;AACR,IAAA,SAAS,EAAE;AADH,GAJV,CAAA,EAOG,IAPH,CADF,CADmB,EAYnB,MAZmB,CAHvB;AAkBD,CA5DmB,CAAb;AA8DP,IAAI,CAAC,WAAL,GAAmB,eAAnB,C,CACA;;AACA,IAAI,CAAC,YAAL,GAAoB;AAClB,EAAA,IAAI,EAAE,KAAA,CAAA,aAAA,CAAA,MAAA,EAAA,IAAA;AADY,CAApB","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { createUniversalPortal, useCloseOnDocumentEvents } from '@pluralsight/ps-design-system-util';\nimport glamorDefault, * as glamorExports from 'glamor';\nimport React from 'react';\nimport stylesheet from '../css/index';\nimport { DropdownContext, useMenuRef, handleMenuKeyDownEvents } from '../js/index';\nvar glamor = glamorDefault || glamorExports;\nvar slide = glamor.keyframes(stylesheet['@keyframes psds-dropdown__menu__keyframes__slide']);\nvar styles = {\n    menuWrapper: function () { return glamor.css(stylesheet['.psds-dropdown__menu-wrapper']); },\n    menu: function () {\n        return glamor.css(stylesheet['.psds-dropdown__menu'], stylesheet['.psds-dropdown__menu__animation']({ slide: slide }));\n    }\n};\nexport var Menu = React.forwardRef((function (props, forwardedRef) {\n    var inNode = props.inNode, isOpen = props.isOpen, menu = props.menu, menuPosition = props.menuPosition, buttonRef = props.buttonRef, rest = __rest(props\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    , [\"inNode\", \"isOpen\", \"menu\", \"menuPosition\", \"buttonRef\"]);\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    var _a = React.useState(), adjMenuPosition = _a[0], setAdjMenuPosition = _a[1];\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    var context = React.useContext(DropdownContext);\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    var ref = useMenuRef(forwardedRef);\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    useCloseOnDocumentEvents(ref, function (evt) {\n        return context.onDocumentEvents(ref, evt);\n    });\n    var handleKeyDown = function (evt) {\n        isOpen && handleMenuKeyDownEvents(evt);\n    };\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    React.useLayoutEffect(function () {\n        setAdjMenuPosition(menuPosition);\n        if (!isOpen || !ref.current || !buttonRef.current)\n            return;\n        var menuRect = ref.current.getBoundingClientRect();\n        var buttonRect = buttonRef.current.getBoundingClientRect();\n        if (buttonRect.bottom + menuRect.height > window.innerHeight) {\n            setAdjMenuPosition(__assign(__assign({}, menuPosition), { top: buttonRect.top - menuRect.height - 8 }));\n        }\n    }, [ref, buttonRef, isOpen, menuPosition, setAdjMenuPosition]);\n    return (menu &&\n        isOpen &&\n        createUniversalPortal(React.createElement(\"div\", __assign({}, styles.menuWrapper(), { style: adjMenuPosition }),\n            React.createElement(\"div\", __assign({}, styles.menu(), { ref: ref, role: \"listbox\" }, rest, { onKeyDown: handleKeyDown }), menu)), inNode));\n}));\nMenu.displayName = 'Dropdown.Menu';\n// TODO: replace\nMenu.defaultProps = {\n    menu: React.createElement(\"span\", null)\n};\n//# sourceMappingURL=menu.js.map"]},"metadata":{},"sourceType":"module"}
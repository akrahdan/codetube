{"ast":null,"code":"import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState,useRef,useCallback}from\"react\";import classNames from\"classnames\";import styles from\"../styles.module.css\";import css from\"./lecture.module.scss\";import{CaretIcon}from\"./caretIcon/caretIcon\";import{LectureItem}from\"./lectureItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Lecture=function Lecture(_ref){var section=_ref.section,position=_ref.position,views=_ref.views;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),current=_useState4[0],setCurrent=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),active=_useState6[0],setActive=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),offset=_useState8[0],setOffset=_useState8[1];var navRef=useRef();var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),heightDom=_useState10[0],setHeightDom=_useState10[1];var callbackRef=useCallback(function(node){if(node){setHeightDom(node.getBoundingClientRect().height);}},[]);// const height = visible ? \"auto\" : \"0px\";\nvar visibility=visible?\"visible\":\"hidden\";var collapse=function collapse(navigation){var height=navigation.scrollHeight;var transition=navigation.style.transition;navigation.style.transition='';requestAnimationFrame(function(){navigation.style.height=height+'px';navigation.style.transition=transition;requestAnimationFrame(function(){navigation.style.height=0+\"px\";});});};var expand=function expand(navigation){var height=navigation.scrollHeight;navigation.style.height=height+'px';navigation.addEventListener('transitionend',function(e){navigation.removeEventListener('transitionend',function(ev){});});};useEffect(function(){if(views&&section){var currentViews=section.lectures.filter(function(lec){return views.includes(lec.id);});if(currentViews.length){setOffset(69.11503837897544*currentViews.length/section.lectures.length);}}},[views]);return/*#__PURE__*/_jsxs(\"div\",{className:css.lectureContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classNames(css.lectureSubContainer,_defineProperty({},css.active,visible)),children:[/*#__PURE__*/_jsx(\"div\",{className:styles.lectureDiv,onClick:function onClick(){var navigation=navRef.current;if(!visible){expand(navigation);setVisible(!visible);}else{collapse(navigation);setVisible(!visible);}},children:/*#__PURE__*/_jsxs(\"div\",{className:styles.navDisplay,children:[/*#__PURE__*/_jsx(\"div\",{className:css.progressContainer,children:/*#__PURE__*/_jsxs(\"svg\",{className:classNames(css.svgProgress),\"aria-label\":\"module completed\",viewBox:\"0 0 24 24\",version:\"1.1\",xmlns:\"http://www.w3.org/2000/svg\",transform:\"rotate(-90)\",children:[/*#__PURE__*/_jsx(\"circle\",{r:11,cx:12,cy:12,className:css.svgCircleBackground,strokeWidth:2}),/*#__PURE__*/_jsx(\"text\",{className:css.svgProgressText,x:\"49%\",y:\"-31%\",textAnchor:\"middle\",transform:\"rotate(90)\",children:position+1}),/*#__PURE__*/_jsx(\"circle\",{r:11,cx:12,cy:12,strokeWidth:2,strokeDasharray:\"69.11503837897544 69.11503837897544\",strokeDashoffset:active==section.id?69.11503837897544-offset:69.11503837897544,className:classNames(css.svgProgressCircle,_defineProperty({},css.current,active==section.id))})]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.navItemContent,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.navItemHeader,children:section.title}),/*#__PURE__*/_jsxs(\"div\",{className:styles.navItemSubTitle,children:[/*#__PURE__*/_jsxs(\"svg\",{className:styles.svgDuration,xmlns:\"http://www.w3.org/2000/svg\",width:\"24px\",height:\"24px\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M12 23.1a11.44 11.44 0 1 1 11.43-11.43c0 6.3-5.13 11.42-11.43 11.42zm0-20.87a9.44 9.44 0 0 0 0 18.87 9.44 9.44 0 0 0 0-18.87z\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M13 11V3.95h-2V11H4.36v2H13v-2z\"})]}),/*#__PURE__*/_jsx(\"span\",{className:styles.screenReader,children:\"Module Length\"}),Math.round(section.duration/60),\" mins\"]})]})]})}),/*#__PURE__*/_jsx(CaretIcon,{toggle:visible})]}),/*#__PURE__*/_jsx(\"div\",{className:css.lectureItemContainer,children:/*#__PURE__*/_jsx(\"div\",{ref:navRef,className:classNames(css.heightTransition),style:{height:\"0px\",overflow:visibility,visibility:visibility},children:/*#__PURE__*/_jsx(\"div\",{children:section.lectures&&section.lectures.map(function(lecture){return/*#__PURE__*/_jsx(LectureItem,{handleActive:function handleActive(){return setActive(section.id);},lecture:lecture,handleCurrent:function handleCurrent(){return setCurrent(lecture.id);},isCurrent:current==lecture.id,complete:views&&views.includes(lecture.id)},lecture.id);})})})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/contentItem/lecture.tsx"],"names":["useEffect","useState","useRef","useCallback","classNames","styles","css","CaretIcon","LectureItem","Lecture","section","position","views","visible","setVisible","current","setCurrent","active","setActive","offset","setOffset","navRef","heightDom","setHeightDom","callbackRef","node","getBoundingClientRect","height","visibility","collapse","navigation","scrollHeight","transition","style","requestAnimationFrame","expand","addEventListener","e","removeEventListener","ev","currentViews","lectures","filter","lec","includes","id","length","lectureContainer","lectureSubContainer","lectureDiv","navDisplay","progressContainer","svgProgress","svgCircleBackground","svgProgressText","svgProgressCircle","navItemContent","navItemHeader","title","navItemSubTitle","svgDuration","screenReader","Math","round","duration","lectureItemContainer","heightTransition","overflow","map","lecture"],"mappings":"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","sourcesContent":["import { useEffect, useState, useRef, useCallback } from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"../styles.module.css\";\nimport { selectAnalytics } from \"state/course/courseSplice\";\n\nimport css from \"./lecture.module.scss\";\nimport { CaretIcon } from \"./caretIcon/caretIcon\";\nimport { LectureItem } from \"./lectureItem\";\nimport { Section } from \"services/courses\";\n\n\ntype SectionProps = {\n  section: Section,\n  position: number,\n  views: number[]\n}\nexport const Lecture: React.FC<SectionProps> = ({ section, position, views }) => {\n  const [visible, setVisible] = useState(false);\n  const [current, setCurrent] = useState(0)\n  const [active, setActive] = useState(0)\n  const [offset, setOffset] = useState(0)\n  const navRef = useRef<HTMLDivElement>()\n  const [heightDom, setHeightDom] = useState(null)\n  const callbackRef = useCallback(node => {\n    if (node) {\n      setHeightDom(node.getBoundingClientRect().height)\n    }\n  }, [])\n  // const height = visible ? \"auto\" : \"0px\";\n  const visibility = visible ? \"visible\" : \"hidden\";\n  const collapse = (navigation) => {\n    const height = navigation.scrollHeight\n    const transition = navigation.style.transition\n    navigation.style.transition = ''\n    requestAnimationFrame(() => {\n      navigation.style.height = height + 'px'\n      navigation.style.transition = transition\n      requestAnimationFrame(() => {\n        navigation.style.height = 0 + \"px\"\n      });\n    });\n  }\n\n\n  const expand = (navigation) => {\n    const height = navigation.scrollHeight\n    navigation.style.height = height + 'px'\n    navigation.addEventListener('transitionend', function (e) {\n      navigation.removeEventListener('transitionend', (ev) => {\n\n      })\n      \n    })\n  }\n\n  useEffect(() => {\n    if (views && section) {\n      const currentViews = section.lectures.filter(lec => views.includes(lec.id))\n      if (currentViews.length) {\n        setOffset((69.11503837897544 * currentViews.length) / section.lectures.length)\n      }\n\n    }\n  }, [views])\n\n  \n\n  return (\n    <div\n      className={css.lectureContainer}\n\n    >\n      <div\n        className={classNames(css.lectureSubContainer, {\n          [css.active]: visible,\n        })}\n      >\n        <div className={styles.lectureDiv}\n          onClick={() => {\n            const navigation = navRef.current\n            \n            if (!visible) {\n              expand(navigation)\n              setVisible(!visible);\n            } else {\n              collapse(navigation)\n              setVisible(!visible);\n            }\n\n          }}\n        >\n\n          <div className={styles.navDisplay}>\n            <div className={css.progressContainer}>\n              <svg\n                className={classNames(css.svgProgress)}\n                aria-label=\"module completed\"\n                viewBox=\"0 0 24 24\"\n                version=\"1.1\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                transform=\"rotate(-90)\"\n              >\n                <circle\n                  r={11}\n                  cx={12}\n                  cy={12}\n                  className={css.svgCircleBackground}\n                  strokeWidth={2}\n                />\n                <text\n                  className={css.svgProgressText}\n                  x=\"49%\"\n                  y=\"-31%\"\n                  textAnchor=\"middle\"\n                  transform=\"rotate(90)\"\n                >\n                  {position + 1}\n                </text>\n                <circle\n                  r={11}\n                  cx={12}\n                  cy={12}\n                  strokeWidth={2}\n                  strokeDasharray=\"69.11503837897544 69.11503837897544\"\n                  strokeDashoffset={active == section.id ? (69.11503837897544 - offset) : 69.11503837897544}\n                  className={classNames(css.svgProgressCircle, {\n                    [css.current]: active == section.id\n                  })}\n                />\n              </svg>\n            </div>\n            <div className={styles.navItemContent}>\n              <div className={styles.navItemHeader}>{section.title}</div>\n              <div className={styles.navItemSubTitle}>\n                <svg\n                  className={styles.svgDuration}\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24px\"\n                  height=\"24px\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M12 23.1a11.44 11.44 0 1 1 11.43-11.43c0 6.3-5.13 11.42-11.43 11.42zm0-20.87a9.44 9.44 0 0 0 0 18.87 9.44 9.44 0 0 0 0-18.87z\" />\n                  <path d=\"M13 11V3.95h-2V11H4.36v2H13v-2z\" />\n                </svg>\n                <span className={styles.screenReader}>Module Length</span>\n                {Math.round(section.duration / 60)} mins\n              </div>\n            </div>\n          </div>\n        </div>\n        <CaretIcon toggle={visible} />\n      </div>\n      <div className={css.lectureItemContainer}>\n        <div\n          ref={navRef}\n          className={classNames(css.heightTransition)}\n          style={{\n            height: \"0px\",\n            overflow: visibility,\n            visibility: visibility,\n\n          }}\n        >\n          <div >\n            {section.lectures && section.lectures.map(lecture =>\n              <LectureItem\n                handleActive={() => setActive(section.id)}\n                key={lecture.id}\n                lecture={lecture} handleCurrent={() => setCurrent(lecture.id)}\n                isCurrent={current == lecture.id}\n                complete={views && views.includes(lecture.id)} />)}\n\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
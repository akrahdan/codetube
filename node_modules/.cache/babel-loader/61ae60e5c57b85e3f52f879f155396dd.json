{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/slider/slider.js\";\nimport React, { Component } from 'react';\nimport { clamp } from '../utilities/clamp';\nimport classNames from 'classnames';\nimport css from './slider.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Slider extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleStart = e => {\n      const {\n        onChangeStart,\n        onChange\n      } = this.props;\n      e && e.preventDefault && e.preventDefault();\n      document.addEventListener('mousemove', this.handleDrag);\n      document.addEventListener('touchmove', this.handleDrag);\n      document.addEventListener('mouseup', this.handleEnd);\n      document.addEventListener('touchend', this.handleEnd);\n      const box = this.slider.getBoundingClientRect();\n      const ratio = getRatio(box, e);\n      this.setState({\n        dragging: true,\n        hovering: e && e.type === 'mousedown'\n      }, () => {\n        onChangeStart && onChangeStart(ratio);\n        this.hoverChange(ratio);\n      });\n    };\n\n    this.handleEnd = e => {\n      const {\n        onChangeEnd\n      } = this.props;\n      const {\n        hovering\n      } = this.state;\n      e && e.preventDefault && e.preventDefault();\n      const box = this.slider.getBoundingClientRect();\n      const ratio = getRatio(box, e);\n      this.setState({\n        dragging: false,\n        hovering: e && e.type === 'touchend' ? false : hovering\n      }, () => {\n        onChangeEnd && onChangeEnd(ratio);\n        this.hoverChange(ratio);\n      });\n      document.removeEventListener('mousemove', this.handleDrag);\n      document.removeEventListener('touchmove', this.handleDrag);\n      document.removeEventListener('mouseup', this.handleEnd);\n      document.removeEventListener('touchend', this.handleEnd);\n    };\n\n    this.handleDrag = e => {\n      e.stopPropagation();\n      const {\n        onChange\n      } = this.props;\n      const box = this.slider.getBoundingClientRect();\n      let value = getRatio(box, e);\n      onChange && onChange(value);\n      this.hoverChange(value);\n    };\n\n    this.onMouseEnter = e => {\n      this.setState({\n        hovering: true\n      }, this.hoverChange);\n    };\n\n    this.onMouseLeave = e => {\n      this.setState({\n        hovering: false\n      }, this.hoverChange);\n    };\n\n    this.onMouseMove = e => {\n      const box = this.slider.getBoundingClientRect();\n      const value = getRatio(box, e);\n      this.hoverChange(value);\n    };\n\n    this.handleKeyDown = e => {\n      const {\n        keyCode\n      } = e;\n      const {\n        value,\n        onChange,\n        step: passedStep\n      } = this.props;\n      const min = 0,\n            max = 1,\n            step = passedStep || 0.1;\n\n      switch (keyCode) {\n        case 38: // up\n\n        case 39:\n          // right\n          e.preventDefault && e.preventDefault();\n          onChange && onChange(clamp(value + step, 0, 1));\n          break;\n\n        case 37: // left\n\n        case 40:\n          // down\n          e.preventDefault && e.preventDefault();\n          onChange && onChange(clamp(value - step, 0, 1));\n          break;\n      }\n    };\n\n    this.hoverChange = ratio => {\n      const {\n        onHoverChange\n      } = this.props;\n      const {\n        hovering,\n        dragging\n      } = this.state;\n      onHoverChange && onHoverChange({\n        ratio: ratio || null,\n        active: hovering || dragging\n      });\n    };\n\n    this.cancelEvent = e => {\n      e.preventDefault();\n    };\n\n    this.renderBackgroundBars = (active, verticalStyle) => {\n      const {\n        bars,\n        barClass\n      } = this.props;\n      if (!bars) return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: verticalStyle,\n        className: classNames(css.bar, barClass, css.backgroundFill, {\n          [css.hovering]: active\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this);\n      return bars.map(bar => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classNames(css.bar, bar.fillStyle, barClass, css.fill, {\n          [css.hovering]: active\n        }),\n        style: { ...{\n            width: `${clamp(bar.value * 100, 0, 100)}%`\n          },\n          ...verticalStyle\n        }\n      }, bar.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }, this));\n    };\n\n    this.renderMarkerTicks = (markerClusters, active, styles) => {\n      return markerClusters.map(c => /*#__PURE__*/_jsxDEV(\"span\", {\n        className: classNames(css['marker-tick'], {\n          [css.hovering]: active\n        }),\n        style: { ...styles,\n          left: `calc(${c.leftOffset}% + 7px)`\n        }\n      }, c.markers[0].id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 7\n      }, this));\n    };\n\n    this.state = {\n      hovering: false,\n      dragging: false\n    };\n  }\n\n  // prettier-ignore\n  render() {\n    const {\n      ariaLabel,\n      ariaValueText,\n      className,\n      bars,\n      barClass,\n      fillClass,\n      hovering: hoveringOverride,\n      value,\n      padded,\n      bottom,\n      verticalAlign,\n      markerClusters\n    } = this.props;\n    const {\n      hovering,\n      dragging\n    } = this.state;\n    const active = hoveringOverride || hovering || dragging;\n    const clampedValue = clamp((value || 0) * 100, 0, 100);\n    const percentageValue = Math.round(clampedValue);\n    const verticalStyle = {\n      top: `${verticalAlign ? verticalAlign : 50}%`\n    };\n    const fillStyle = {\n      width: `${clampedValue}%`\n    };\n    const handleStyle = {\n      left: `${clampedValue}%`\n    };\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classNames(className, css.slider, {\n        [css.hovering]: active,\n        [css.padded]: padded,\n        [css.bottom]: bottom\n      }),\n      ref: ref => this.slider = ref,\n      onContextMenu: this.cancelEvent,\n      onMouseDown: this.handleStart,\n      onTouchStart: this.handleStart,\n      onMouseMove: this.onMouseMove,\n      onMouseEnter: this.onMouseEnter,\n      onMouseLeave: this.onMouseLeave,\n      children: [this.props.children, this.renderBackgroundBars(active, verticalStyle), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classNames(css.bar, barClass, fillClass, css.fill, {\n          [css.hovering]: active\n        }),\n        style: { ...fillStyle,\n          ...verticalStyle\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        \"aria-label\": ariaLabel,\n        role: \"slider\",\n        \"aria-valuemin\": \"0\",\n        \"aria-valuemax\": \"100\",\n        \"aria-valuenow\": percentageValue,\n        \"aria-valuetext\": ariaValueText,\n        tabIndex: \"0\",\n        onKeyDown: this.handleKeyDown,\n        className: classNames(css.handle, {\n          [css.hovering]: active\n        }),\n        onContextMenu: this.cancelEvent,\n        ref: ref => this.handle = ref,\n        style: { ...handleStyle,\n          ...verticalStyle\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }, this), markerClusters && this.renderMarkerTicks(markerClusters, active, verticalStyle)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nfunction getRatio(boundingRect, event) {\n  if (!event) return 0;\n  const {\n    width: boxWidth,\n    left: x\n  } = boundingRect;\n  const pageX = event.pageX || event.touches && event.touches.length > 0 && event.touches[0].pageX || 0;\n  const numerator = pageX - x;\n  return Math.max(Math.min(numerator, boxWidth), 0) / boxWidth;\n}\n\nexport function getPercentage(boundingRect, event) {\n  return getRatio(boundingRect, event) * 100;\n}","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/slider/slider.js"],"names":["React","Component","clamp","classNames","css","Slider","constructor","props","handleStart","e","onChangeStart","onChange","preventDefault","document","addEventListener","handleDrag","handleEnd","box","slider","getBoundingClientRect","ratio","getRatio","setState","dragging","hovering","type","hoverChange","onChangeEnd","state","removeEventListener","stopPropagation","value","onMouseEnter","onMouseLeave","onMouseMove","handleKeyDown","keyCode","step","passedStep","min","max","onHoverChange","active","cancelEvent","renderBackgroundBars","verticalStyle","bars","barClass","bar","backgroundFill","map","fillStyle","fill","width","key","renderMarkerTicks","markerClusters","styles","c","left","leftOffset","markers","id","render","ariaLabel","ariaValueText","className","fillClass","hoveringOverride","padded","bottom","verticalAlign","clampedValue","percentageValue","Math","round","top","handleStyle","ref","children","handle","boundingRect","event","boxWidth","x","pageX","touches","length","numerator","getPercentage"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { clamp } from '../utilities/clamp'\nimport classNames from 'classnames'\nimport css from './slider.scss'\n\nexport default class Slider extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = { hovering: false, dragging: false }\n  }\n\n  handleStart = (e) => {\n    const { onChangeStart, onChange } = this.props\n\n    e && e.preventDefault && e.preventDefault()\n\n    document.addEventListener('mousemove', this.handleDrag)\n    document.addEventListener('touchmove', this.handleDrag)\n    document.addEventListener('mouseup', this.handleEnd)\n    document.addEventListener('touchend', this.handleEnd)\n\n    const box = this.slider.getBoundingClientRect()\n    const ratio = getRatio(box, e)\n\n    this.setState(\n      {\n        dragging: true,\n        hovering: e && e.type === 'mousedown',\n      },\n      () => {\n        onChangeStart && onChangeStart(ratio)\n\n        this.hoverChange(ratio)\n      }\n    )\n  }\n\n  handleEnd = (e) => {\n    const { onChangeEnd } = this.props\n    const { hovering } = this.state\n\n    e && e.preventDefault && e.preventDefault()\n\n    const box = this.slider.getBoundingClientRect()\n    const ratio = getRatio(box, e)\n\n    this.setState(\n      {\n        dragging: false,\n        hovering: e && e.type === 'touchend' ? false : hovering,\n      },\n      () => {\n        onChangeEnd && onChangeEnd(ratio)\n\n        this.hoverChange(ratio)\n      }\n    )\n\n    document.removeEventListener('mousemove', this.handleDrag)\n    document.removeEventListener('touchmove', this.handleDrag)\n    document.removeEventListener('mouseup', this.handleEnd)\n    document.removeEventListener('touchend', this.handleEnd)\n  }\n\n  handleDrag = (e) => {\n    e.stopPropagation()\n\n    const { onChange } = this.props\n\n    const box = this.slider.getBoundingClientRect()\n    let value = getRatio(box, e)\n\n    onChange && onChange(value)\n\n    this.hoverChange(value)\n  }\n\n  onMouseEnter = (e) => {\n    this.setState({ hovering: true }, this.hoverChange)\n  }\n\n  onMouseLeave = (e) => {\n    this.setState({ hovering: false }, this.hoverChange)\n  }\n\n  onMouseMove = (e) => {\n    const box = this.slider.getBoundingClientRect()\n    const value = getRatio(box, e)\n\n    this.hoverChange(value)\n  }\n\n  handleKeyDown = (e) => {\n    const { keyCode } = e\n    const { value, onChange, step: passedStep } = this.props\n    const min = 0,\n      max = 1,\n      step = passedStep || 0.1\n\n    switch (keyCode) {\n      case 38: // up\n      case 39: // right\n        e.preventDefault && e.preventDefault()\n\n        onChange && onChange(clamp(value + step, 0, 1))\n        break\n      case 37: // left\n      case 40: // down\n        e.preventDefault && e.preventDefault()\n\n        onChange && onChange(clamp(value - step, 0, 1))\n        break\n    }\n  }\n\n  hoverChange = (ratio) => {\n    const { onHoverChange } = this.props\n    const { hovering, dragging } = this.state\n\n    onHoverChange &&\n      onHoverChange({\n        ratio: ratio || null,\n        active: hovering || dragging,\n      })\n  }\n\n  cancelEvent = (e) => {\n    e.preventDefault()\n  }\n\n  renderBackgroundBars = (active, verticalStyle) => {\n    const { bars, barClass } = this.props\n\n    if (!bars)\n      return (\n        <div\n          style={verticalStyle}\n          className={classNames(css.bar, barClass, css.backgroundFill, { [css.hovering]: active })}\n        />\n      )\n\n    return bars.map((bar) => (\n      <div\n        key={bar.key}\n        className={classNames(css.bar, bar.fillStyle, barClass, css.fill, { [css.hovering]: active })}\n        style={{ ...{ width: `${clamp(bar.value * 100, 0, 100)}%` }, ...verticalStyle }}\n      />\n    ))\n  }\n\n  renderMarkerTicks = (markerClusters, active, styles) => {\n    return markerClusters.map((c) => (\n      <span\n        className={classNames(css['marker-tick'], { [css.hovering]: active })}\n        key={c.markers[0].id}\n        style={{ ...styles, left: `calc(${c.leftOffset}% + 7px)` }}\n      />\n    ))\n  }\n\n  // prettier-ignore\n  render() {\n    const { ariaLabel, ariaValueText, className, bars, barClass, fillClass, hovering: hoveringOverride, value, padded, bottom, verticalAlign, markerClusters } = this.props\n    const { hovering, dragging } = this.state\n\n    const active = hoveringOverride || (hovering || dragging)\n\n    const clampedValue = clamp((value || 0) * 100, 0, 100)\n    const percentageValue = Math.round(clampedValue)\n\n    const verticalStyle = { top: `${verticalAlign ? verticalAlign : 50}%`}\n    const fillStyle = { width: `${clampedValue}%` }\n    const handleStyle = { left: `${clampedValue}%` }\n\n    return <div \n            className={classNames(className, css.slider, {\n              [css.hovering]: active,\n              [css.padded]: padded,\n              [css.bottom]: bottom,\n            })} \n            ref={ref => (this.slider = ref)} \n            onContextMenu={this.cancelEvent} \n            onMouseDown={this.handleStart} \n            onTouchStart={this.handleStart} \n            onMouseMove={this.onMouseMove} \n            onMouseEnter={this.onMouseEnter} \n            onMouseLeave={this.onMouseLeave}\n          >\n            {this.props.children}\n            {this.renderBackgroundBars(active, verticalStyle)}\n          <div className={classNames(css.bar, barClass, fillClass, css.fill, { [css.hovering]: active})} \n            style={{ ...fillStyle, ...verticalStyle }} \n          />\n            <span \n              aria-label={ariaLabel} \n              role=\"slider\" \n              aria-valuemin=\"0\" \n              aria-valuemax=\"100\" \n              aria-valuenow={percentageValue} \n              aria-valuetext={ariaValueText} \n              tabIndex=\"0\" \n              onKeyDown={this.handleKeyDown} \n              className={classNames(css.handle,{ [css.hovering]: active })} \n              onContextMenu={this.cancelEvent} \n              ref={ref => (this.handle = ref)} \n              style={{ ...handleStyle, ...verticalStyle }} \n            />\n            { markerClusters && this.renderMarkerTicks(markerClusters, active, verticalStyle) }\n          </div>\n  }\n}\n\nfunction getRatio(boundingRect, event) {\n  if (!event) return 0\n\n  const { width: boxWidth, left: x } = boundingRect\n\n  const pageX = event.pageX || (event.touches && event.touches.length > 0 && event.touches[0].pageX) || 0\n\n  const numerator = pageX - x\n\n  return Math.max(Math.min(numerator, boxWidth), 0) / boxWidth\n}\n\nexport function getPercentage(boundingRect, event) {\n  return getRatio(boundingRect, event) * 100\n}\n"]},"metadata":{},"sourceType":"module"}
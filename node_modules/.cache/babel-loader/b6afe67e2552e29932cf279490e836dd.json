{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nexport const usePrompt = (when, message = 'Are you sure you want to quit without saving your changes?') => {\n  _s();\n\n  const history = useHistory();\n  const self = useRef(null);\n\n  const onWindowOrTabClose = event => {\n    if (!when) {\n      return;\n    }\n\n    if (typeof event == 'undefined') {\n      event = window.event;\n    }\n\n    if (event) {\n      event.returnValue = message;\n    }\n\n    return message;\n  };\n\n  useEffect(() => {\n    if (when) {\n      self.current = history.block(message);\n    } else {\n      self.current = null;\n    }\n\n    window.addEventListener('beforeunload', onWindowOrTabClose);\n    return () => {\n      if (self.current) {\n        self.current();\n        self.current = null;\n      }\n\n      window.removeEventListener('beforeunload', onWindowOrTabClose);\n    };\n  }, [message, when]);\n};\n\n_s(usePrompt, \"DUl2m3JLBFfondrJbDM82E9Gaqs=\", false, function () {\n  return [useHistory];\n});","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/userPrompt.ts"],"names":["useEffect","useRef","useHistory","usePrompt","when","message","history","self","onWindowOrTabClose","event","window","returnValue","current","block","addEventListener","removeEventListener"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,MAApB,QAAkC,OAAlC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,OAAO,MAAMC,SAAS,GAAG,CAACC,IAAD,EAAgBC,OAAe,GAAG,4DAAlC,KAAmG;AAAA;;AAC1H,QAAMC,OAAO,GAAGJ,UAAU,EAA1B;AAEA,QAAMK,IAAI,GAAGN,MAAM,CAAC,IAAD,CAAnB;;AAEA,QAAMO,kBAAkB,GAAGC,KAAK,IAAI;AAClC,QAAI,CAACL,IAAL,EAAW;AACT;AACD;;AAED,QAAI,OAAOK,KAAP,IAAgB,WAApB,EAAiC;AAC/BA,MAAAA,KAAK,GAAGC,MAAM,CAACD,KAAf;AACD;;AAED,QAAIA,KAAJ,EAAW;AACTA,MAAAA,KAAK,CAACE,WAAN,GAAoBN,OAApB;AACD;;AAED,WAAOA,OAAP;AACD,GAdD;;AAgBAL,EAAAA,SAAS,CAAC,MAAM;AACd,QAAII,IAAJ,EAAU;AACRG,MAAAA,IAAI,CAACK,OAAL,GAAeN,OAAO,CAACO,KAAR,CAAcR,OAAd,CAAf;AACD,KAFD,MAEO;AACLE,MAAAA,IAAI,CAACK,OAAL,GAAe,IAAf;AACD;;AAEDF,IAAAA,MAAM,CAACI,gBAAP,CAAwB,cAAxB,EAAwCN,kBAAxC;AAEA,WAAO,MAAM;AACX,UAAID,IAAI,CAACK,OAAT,EAAkB;AAChBL,QAAAA,IAAI,CAACK,OAAL;AACAL,QAAAA,IAAI,CAACK,OAAL,GAAe,IAAf;AACD;;AAEDF,MAAAA,MAAM,CAACK,mBAAP,CAA2B,cAA3B,EAA2CP,kBAA3C;AACD,KAPD;AAQD,GAjBQ,EAiBN,CAACH,OAAD,EAAUD,IAAV,CAjBM,CAAT;AAkBD,CAvCM;;GAAMD,S;UACKD,U","sourcesContent":["import { useEffect, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nexport const usePrompt = (when: boolean, message: string = 'Are you sure you want to quit without saving your changes?') => {\n  const history = useHistory();\n\n  const self = useRef(null);\n\n  const onWindowOrTabClose = event => {\n    if (!when) {\n      return;\n    }\n\n    if (typeof event == 'undefined') {\n      event = window.event;\n    }\n\n    if (event) {\n      event.returnValue = message;\n    }\n\n    return message;\n  };\n\n  useEffect(() => {\n    if (when) {\n      self.current = history.block(message as any);\n    } else {\n      self.current = null;\n    }\n\n    window.addEventListener('beforeunload', onWindowOrTabClose);\n\n    return () => {\n      if (self.current) {\n        self.current();\n        self.current = null;\n      }\n\n      window.removeEventListener('beforeunload', onWindowOrTabClose);\n    }\n  }, [message, when]);\n};"]},"metadata":{},"sourceType":"module"}
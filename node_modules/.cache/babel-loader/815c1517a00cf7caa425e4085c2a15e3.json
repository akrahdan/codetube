{"ast":null,"code":"import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Helmet}from'react-helmet';import{helmetJsonLdProp}from'react-schemaorg';import styles from'./styles/index.module.scss';import{projectCoursePath}from'libs/urlHelpers';import{Header}from'./Header';import{Supporting}from'./Supporting';import{Projects}from'./Projects';import{Syllabus}from'./Syllabus';import{CTASection}from'./CTASection';import{Recommendations}from'./Recommendations';import{SignupSection}from'portal/scenes/SignupSection';import{SiginSection}from'portal/scenes/SignupSection/SigninSection';import{SignupModal}from'portal/scenes/Modal/SignupModal';import{Payment}from'portal/scenes/Payments';import{Modal}from'portal/scenes/Modal';import{selectModal,showModal}from'state/modals/modalSlice';import{useAuth}from'store/useAuth';import{useAppSelector,useAppDispatch}from'store/hooks';import{selectLocationPayload}from'state/location/selectors';import{useCartUpdateMutation,useFetchDetailProjectQuery}from'services/projects';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var ProjectDetail=function ProjectDetail(_ref){var _project$syllabuses;var isAnonymous=_ref.isAnonymous,isPaidLanding=_ref.isPaidLanding,showTrialCTA=_ref.showTrialCTA;var modal=useAppSelector(selectModal);var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pay=_useState2[0],setPay=_useState2[1];var locationPayload=useAppSelector(selectLocationPayload);var _useFetchDetailProjec=useFetchDetailProjectQuery(locationPayload.slug),projectQuery=_useFetchDetailProjec.data;var _useCartUpdateMutatio=useCartUpdateMutation(),_useCartUpdateMutatio2=_slicedToArray(_useCartUpdateMutatio,1),cartUpdate=_useCartUpdateMutatio2[0];var _useAuth=useAuth(),user=_useAuth.user;var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),project=_useState4[0],setProject=_useState4[1];useEffect(function(){if(projectQuery){setProject(projectQuery);}},[projectQuery]);var ctaCallback=function ctaCallback(){if(user&&user.email){cartUpdate({project_id:project.id}).then(function(res){if(res.data&&res.data.detail==\"added\"){setPay(!pay);}});}else{dispatch(showModal('login'));}};var completionTime=\"24hrs\";if(!project)return null;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{className:styles.page,\"data-testid\":\"path-marketing-page\",children:[/*#__PURE__*/_jsx(Helmet,{script:[helmetJsonLdProp({'@context':'https://schema.org','@type':'Course',// name: path?.title,\n// description: path?.short_description,\nprovider:{'@type':'Organization',name:'Codefluent',sameAs:'https://www.codefluent.org/'},educationalCredentialAwarded:'Codefluent Certificate',timeRequired:completionTime,isAccessibleForFree:false})]}),/*#__PURE__*/_jsx(Header,{project:project,ctaCallback:ctaCallback,isPaidLanding:isPaidLanding,showTrialCTA:showTrialCTA,useContentfulCTA:true,isAnonymous:isAnonymous}),/*#__PURE__*/_jsx(Supporting,{project:project}),/*#__PURE__*/_jsx(Projects,{courses:project.courses,linkCallback:function linkCallback(course){return projectCoursePath(course===null||course===void 0?void 0:course.slug);}}),/*#__PURE__*/_jsx(Syllabus,{pathId:\"\".concat(project.id),tracks:(_project$syllabuses=project.syllabuses)===null||_project$syllabuses===void 0?void 0:_project$syllabuses.map(function(sylla,index){return _objectSpread(_objectSpread({},sylla),{},{id:index+1});}),ctaCallback:ctaCallback,isPaidLanding:isPaidLanding,showTrialCTA:false,useContentfulCTA:false}),/*#__PURE__*/_jsx(CTASection,{pathId:\"\".concat(project.id),ctaCallback:ctaCallback}),/*#__PURE__*/_jsx(Recommendations,{related:project.related,pathId:\"\".concat(project.id)})]}),modal=='signup'&&/*#__PURE__*/_jsx(SignupModal,{onClose:true,children:/*#__PURE__*/_jsx(SignupSection,{})}),modal=='login'&&/*#__PURE__*/_jsx(SignupModal,{children:/*#__PURE__*/_jsx(SiginSection,{})}),pay&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(Payment,{onClose:function onClose(){return setPay(!pay);}})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Projects/ProjectDetail/ProjectDetail.tsx"],"names":["React","useEffect","useState","Helmet","helmetJsonLdProp","styles","projectCoursePath","Header","Supporting","Projects","Syllabus","CTASection","Recommendations","SignupSection","SiginSection","SignupModal","Payment","Modal","selectModal","showModal","useAuth","useAppSelector","useAppDispatch","selectLocationPayload","useCartUpdateMutation","useFetchDetailProjectQuery","ProjectDetail","isAnonymous","isPaidLanding","showTrialCTA","modal","dispatch","pay","setPay","locationPayload","slug","projectQuery","data","cartUpdate","user","project","setProject","ctaCallback","email","project_id","id","then","res","detail","completionTime","page","provider","name","sameAs","educationalCredentialAwarded","timeRequired","isAccessibleForFree","courses","course","syllabuses","map","sylla","index","related"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useSelector } from 'react-redux';\nimport { helmetJsonLdProp } from 'react-schemaorg';\nimport { Course } from 'schema-dts';\nimport styles from './styles/index.module.scss';\nimport { projectCoursePath } from 'libs/urlHelpers';\nimport { Header } from './Header';\nimport { Supporting } from './Supporting';\nimport { Projects } from './Projects';\n\nimport { Syllabus } from './Syllabus';\nimport { CTASection } from './CTASection';\nimport { Recommendations } from './Recommendations';\nimport { SignupSection } from 'portal/scenes/SignupSection';\nimport { SiginSection } from 'portal/scenes/SignupSection/SigninSection';\nimport { SignupModal } from 'portal/scenes/Modal/SignupModal';\nimport { Payment } from 'portal/scenes/Payments'\nimport { Modal } from 'portal/scenes/Modal';\nimport { selectModal, showModal } from 'state/modals/modalSlice';\nimport { useAuth } from 'store/useAuth';\nimport { useAppSelector, useAppDispatch } from 'store/hooks';\nimport { selectLocationPayload } from 'state/location/selectors';\nimport { useCartUpdateMutation, Cart, useFetchDetailProjectQuery, ProjectEntityResponse } from 'services/projects';\n\n\nexport type PageProps = {\n  fetchPathAndTrackData?: () => void;\n  isPaidLanding: boolean;\n  // path: Path;\n  // location: RouteLocation;\n  isAnonymous: boolean;\n  showTrialCTA: boolean;\n\n};\n\nexport const ProjectDetail: React.FC<PageProps> = ({\n  isAnonymous,\n  isPaidLanding,\n  showTrialCTA\n}) => {\n\n  const modal = useAppSelector(selectModal)\n  const dispatch = useAppDispatch()\n  const [pay, setPay] = useState(false);\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const { data: projectQuery } = useFetchDetailProjectQuery(locationPayload.slug)\n  const [ cartUpdate ] = useCartUpdateMutation()\n  const { user} = useAuth();\n  const [project, setProject] = useState<ProjectEntityResponse>()\n\n\n  useEffect(() => {\n     if(projectQuery) {\n      setProject(projectQuery)\n     }\n  }, [projectQuery])\n\n  const ctaCallback = () => {\n    if(user && user.email) {\n      cartUpdate({\n        project_id: project.id\n      }).then((res: { data: Cart}) => {\n        if(res.data && res.data.detail == \"added\") {\n          setPay(!pay)\n        }\n      })\n    }\n    else {\n      dispatch(showModal('login'))\n    }\n   \n    \n  };\n  const completionTime = \"24hrs\"\n  if (!project) return null\n\n  return (\n    <>\n      <main className={styles.page} data-testid=\"path-marketing-page\">\n        <Helmet\n          script={[\n            helmetJsonLdProp<Course>({\n              '@context': 'https://schema.org',\n              '@type': 'Course',\n              // name: path?.title,\n              // description: path?.short_description,\n              provider: {\n                '@type': 'Organization',\n                name: 'Codefluent',\n                sameAs: 'https://www.codefluent.org/',\n              },\n              educationalCredentialAwarded: 'Codefluent Certificate',\n              timeRequired: completionTime,\n              isAccessibleForFree: false,\n            }),\n          ]}\n        />\n        <Header\n          project={project}\n          ctaCallback={ctaCallback}\n          isPaidLanding={isPaidLanding}\n          showTrialCTA={showTrialCTA}\n          useContentfulCTA={true}\n          isAnonymous={isAnonymous}\n        />\n        <Supporting project={project} />\n        <Projects \n          courses={project.courses}\n          linkCallback={(course) => projectCoursePath(course?.slug)}\n\n        />\n\n        <Syllabus\n          pathId={`${project.id}`}\n          tracks={project.syllabuses?.map((sylla, index) => {\n            return {\n              ...sylla,\n              id: index + 1\n            }\n          })}\n          ctaCallback={ctaCallback}\n          isPaidLanding={isPaidLanding}\n          showTrialCTA={false}\n          useContentfulCTA={false}\n        />\n\n        <CTASection\n          pathId={`${project.id}`}\n          ctaCallback={ctaCallback}\n\n        />\n        <Recommendations related={project.related} pathId={`${project.id}`} />\n\n\n      </main>\n\n      {modal == 'signup' && <SignupModal onClose>\n        <SignupSection />\n      </SignupModal>}\n\n      {modal == 'login' && <SignupModal >\n        <SiginSection />\n      </SignupModal>}\n\n      {pay && <Modal>\n        <Payment  onClose={() => setPay(!pay)}/>\n      </Modal>}\n\n     \n\n   \n\n\n\n    </>\n  );\n\n}"]},"metadata":{},"sourceType":"module"}
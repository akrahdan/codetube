{"ast":null,"code":"import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import classNames from'classnames';import styles from'./style.module.scss';import{PickerOverlay}from'filestack-react';import{useUpdateProfileMutation,useUpdateAvatarMutation}from'services/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var UpdateModal=function UpdateModal(_ref){var onClose=_ref.onClose;var _useUpdateAvatarMutat=useUpdateAvatarMutation(),_useUpdateAvatarMutat2=_slicedToArray(_useUpdateAvatarMutat,1),updateAvatar=_useUpdateAvatarMutat2[0];var _useUpdateProfileMuta=useUpdateProfileMutation(),_useUpdateProfileMuta2=_slicedToArray(_useUpdateProfileMuta,1),updateProfile=_useUpdateProfileMuta2[0];var cs=classNames(styles.cButton,styles.uploadPhoto);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pickerOpen=_useState2[0],setPickerOpen=_useState2[1];var _useState3=useState({avatar:''}),_useState4=_slicedToArray(_useState3,2),avatar=_useState4[0],setAvatar=_useState4[1];var _useState5=useState({first_name:'',last_name:'',email:'',csrfmiddlewaretoken:''}),_useState6=_slicedToArray(_useState5,2),profile=_useState6[0],setProfile=_useState6[1];var onPickerClose=function onPickerClose(){setPickerOpen(false);};var onUploadSuccess=function onUploadSuccess(result){if(result.filesUploaded&&result.filesUploaded.length){var files=result.filesUploaded[0];updateAvatar({avatar:files.url}).then(function(res){if(res.data&&res.data.avatar){setAvatar({avatar:res.data.avatar});}});}};return/*#__PURE__*/_jsx(\"div\",{\"aria-labelledby\":\"myModalLabel\",className:styles.modalOpen,role:\"dialog\",tabIndex:-1,style:{display:\"block\"},children:/*#__PURE__*/_jsx(\"div\",{className:styles.cfBackdrop,children:/*#__PURE__*/_jsx(\"div\",{className:styles.modalDialog,role:\"document\",children:/*#__PURE__*/_jsxs(\"div\",{className:classNames(styles.modalContent,styles.cfInvert),children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.modalHeader,children:[/*#__PURE__*/_jsx(\"button\",{\"aria-label\":\"Close\",className:styles.close,onClick:onClose,type:\"button\",children:/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\" \\xD7\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.textCenter,children:/*#__PURE__*/_jsx(\"h4\",{className:styles.mbh4,children:\"Please complete your profile.\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.modalBody,children:[/*#__PURE__*/_jsxs(\"form\",{className:\"new_user_info\",onSubmit:function onSubmit(event){event.preventDefault();updateProfile(profile);onClose();},children:[/*#__PURE__*/_jsx(\"div\",{className:styles.userContainer,children:/*#__PURE__*/_jsx(\"div\",{className:\"pre-comment__col-user-avatar-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.avatarEditHolder,children:[/*#__PURE__*/_jsx(\"img\",{className:styles.profilePhoto,src:avatar.avatar?avatar.avatar:process.env.PUBLIC_URL+'/img/avatar-photo.png'}),/*#__PURE__*/_jsx(\"div\",{className:cs,onClick:function onClick(){setPickerOpen(!pickerOpen);},children:\"Upload Photo\"}),/*#__PURE__*/_jsx(\"a\",{className:classNames(styles.cButton,styles.buttonFacebook),href:\"\",children:\"Import from Facebook\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.fieldsContainer,children:[/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"div\",{className:classNames(styles.name,styles.first),children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"First Name\",className:styles.input,type:\"text\",value:profile?profile.first_name:'',onChange:function onChange(event){setProfile(_objectSpread(_objectSpread({},profile),{},{first_name:event.target.value}));},name:\"user_info[first_name]\",id:\"user_info_first_name\"})}),/*#__PURE__*/_jsx(\"div\",{className:styles.name,children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Last Name\",value:profile?profile.last_name:'',onChange:function onChange(event){setProfile(_objectSpread(_objectSpread({},profile),{},{last_name:event.target.value}));},className:styles.input,type:\"text\",name:\"user_info[last_name]\",id:\"user_info_last_name\"})})]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Location:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Your Location\",type:\"text\",name:styles.input,id:\"user_info_location\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:classNames(styles.cButton,styles.cButtonPrimary),id:\"cyp-submit\",type:\"submit\",children:\"Continue\"})]})]}),pickerOpen&&/*#__PURE__*/_jsx(PickerOverlay,{apikey:\"AVBagqtWmRWyWVqWas0m9z\",onSuccess:onUploadSuccess,pickerOptions:{onClose:onPickerClose}})]})]})})})});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Profile/UpdateModal.tsx"],"names":["React","useState","classNames","styles","PickerOverlay","useUpdateProfileMutation","useUpdateAvatarMutation","UpdateModal","onClose","updateAvatar","updateProfile","cs","cButton","uploadPhoto","pickerOpen","setPickerOpen","avatar","setAvatar","first_name","last_name","email","csrfmiddlewaretoken","profile","setProfile","onPickerClose","onUploadSuccess","result","filesUploaded","length","files","url","then","res","data","modalOpen","display","cfBackdrop","modalDialog","modalContent","cfInvert","modalHeader","close","textCenter","mbh4","modalBody","event","preventDefault","userContainer","avatarEditHolder","profilePhoto","process","env","PUBLIC_URL","buttonFacebook","fieldsContainer","name","first","input","target","value","cButtonPrimary"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\n\nimport classNames from 'classnames';\nimport styles from './style.module.scss';\nimport type { UserRequest, Avatar, UserResponse } from 'services/auth';\nimport { PickerOverlay } from 'filestack-react';\nimport { PickerResponse } from \"filestack-js\";\nimport { useUpdateProfileMutation, useUpdateAvatarMutation } from 'services/auth'\n\n\ntype ModalProps = {\n  onClose: () => void\n}\n\nexport const UpdateModal: React.FC<ModalProps> = ({ onClose }) => {\n  const [updateAvatar] = useUpdateAvatarMutation()\n  const [updateProfile] = useUpdateProfileMutation()\n  const cs = classNames(styles.cButton, styles.uploadPhoto)\n  const [ pickerOpen , setPickerOpen] = useState(false)\n  const [avatar, setAvatar] = useState<Avatar>({\n    avatar: ''\n  })\n\n  const [profile, setProfile] = useState<UserRequest>({\n    first_name: '',\n    last_name: '',\n    email: '',\n    csrfmiddlewaretoken: ''\n  })\n\n  const onPickerClose = () => {\n    setPickerOpen(false)\n  }\n\n  const onUploadSuccess = (result: PickerResponse) => {\n    if (result.filesUploaded && result.filesUploaded.length) {\n      const files = result.filesUploaded[0]\n      updateAvatar({\n        avatar: files.url\n      }).then((res: { data: UserResponse}) => {\n        if(res.data && res.data.avatar) {\n          setAvatar({\n            avatar: res.data.avatar\n          })\n        }\n      })\n    }\n  }\n\n\n\n  return (\n    <div\n      aria-labelledby=\"myModalLabel\"\n      className={styles.modalOpen}\n      role=\"dialog\"\n      tabIndex={-1}\n      style={{ display: \"block\" }}\n    >\n      <div className={styles.cfBackdrop}>\n        <div className={styles.modalDialog} role=\"document\">\n          <div className={classNames(styles.modalContent, styles.cfInvert)}>\n            <div className={styles.modalHeader}>\n              <button\n                aria-label=\"Close\"\n                className={styles.close}\n                onClick={onClose}\n                type=\"button\"\n              >\n                <span aria-hidden=\"true\"> ×</span>\n              </button>\n              <div className={styles.textCenter}>\n                <h4 className={styles.mbh4}>\n                  Please complete your profile.\n                </h4>\n\n              </div>\n            </div>\n            <div className={styles.modalBody}>\n              <form\n                className=\"new_user_info\"\n                onSubmit={event => {\n                  event.preventDefault();\n                  updateProfile(profile)\n                  onClose()\n                }}\n\n              >\n\n                <div className={styles.userContainer}>\n                  <div className=\"pre-comment__col-user-avatar-container\">\n                    <div className={styles.avatarEditHolder}>\n                      <img\n                        className={styles.profilePhoto}\n                        src={avatar.avatar ? avatar.avatar : process.env.PUBLIC_URL + '/img/avatar-photo.png'}\n                      />\n                      <div\n                        className={cs}\n                       onClick={() => {\n                         setPickerOpen(!pickerOpen)\n                       }}\n                       >\n                        Upload Photo\n                      </div>\n                      <a\n                        className={classNames(styles.cButton, styles.buttonFacebook)}\n                        href=\"\"\n\n                      >\n                        Import from Facebook\n                      </a>\n                    </div>\n                  </div>\n                </div>\n                <div className={styles.fieldsContainer}>\n                  <ul>\n                    <li>\n                      <p>Name:</p>\n                      <div className={classNames(styles.name, styles.first)}>\n                        <input\n                          placeholder=\"First Name\"\n                          className={styles.input}\n                          type=\"text\"\n                          value={profile ? profile.first_name : ''}\n                          onChange={event => {\n                            setProfile({\n                              ...profile,\n                              first_name: event.target.value\n                            })\n                          }}\n                          name=\"user_info[first_name]\"\n                          id=\"user_info_first_name\"\n                        />\n                      </div>\n                      <div className={styles.name}>\n                        <input\n                          placeholder=\"Last Name\"\n                          value={profile ? profile.last_name : ''}\n                          onChange={event => {\n                            setProfile({\n                              ...profile,\n                              last_name: event.target.value\n                            })\n                          }}\n                          className={styles.input}\n                          type=\"text\"\n                          name=\"user_info[last_name]\"\n                          id=\"user_info_last_name\"\n                        />\n                      </div>\n                    </li>\n                    <li>\n                      <p>Location:</p>\n                      <input\n                        placeholder=\"Your Location\"\n                        type=\"text\"\n                        name={styles.input}\n                        id=\"user_info_location\"\n                      />\n                    </li>\n                  </ul>\n                  <button\n                    className={classNames(styles.cButton, styles.cButtonPrimary)}\n                    id=\"cyp-submit\"\n                    type=\"submit\"\n                  >\n                    Continue\n                  </button>\n                </div>\n              </form>\n              {pickerOpen && <PickerOverlay apikey=\"AVBagqtWmRWyWVqWas0m9z\"\n                onSuccess={onUploadSuccess}\n                pickerOptions={{\n                  onClose: onPickerClose,\n                  \n                }}\n              />}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
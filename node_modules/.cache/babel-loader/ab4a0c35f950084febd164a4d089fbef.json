{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/index.tsx\",\n    _s = $RefreshSig$();\n\nimport styles from \"./styles.module.css\";\nimport Manager from \"./Manager\";\nimport { useEffect, useState } from \"react\";\nimport { useAppDispatch } from \"store/hooks\";\nimport Container from \"./Container\";\nimport ActionOverlay from \"./Overlay\";\nimport ControlBar from \"./control-bar/control-bar\";\nimport ProgressBar from \"./progress-bar/progress-bar\";\nimport Header from \"./header/header\";\nimport CommandLayer from \"./command-layer/command-layer\";\nimport BufferingIndicator from \"./buffering-indicator/buffering-indicator\";\nimport Video from \"./video/video\";\nimport SyncSettings from \"./sync-settings/sync-settings\";\nimport SyncClipProgress from \"./sync-clip-progress/sync-clip-progress\";\nimport Captions from \"./captions/captions\";\nimport ErrorModal from \"./error-modal/error-modal\";\nimport KeyboardShortcuts from \"./keyboard-shortcuts/keyboard-shortcuts\";\nimport classNames from \"classnames\";\nimport { Lecture } from \"./contentItem/lecture\";\nimport { selectLocationPayload, selectLocationQuery } from \"state/location/selectors\";\nimport { useAppSelector } from \"store/hooks\";\nimport _ from 'lodash';\nimport { selectPlayerCourse, setCurrentUrl, setTitle, setClipId, setCurrentLecture } from \"state/player/playerSlice\";\nimport { selectAnalytics } from \"state/course/courseSplice\";\nimport { usePlayer } from \"store/usePlayer\";\nimport { useFetchPlayerCourseQuery, useFetchCourseViewsQuery } from \"services/courses\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CoursePlayer = () => {\n  _s();\n\n  const [toggle, setToggle] = useState(false);\n  const locationPayload = useAppSelector(selectLocationPayload);\n  const dispatch = useAppDispatch();\n  const locationQuery = useAppSelector(selectLocationQuery);\n  const selectedViews = useAppSelector(selectAnalytics);\n  const selectedCourse = useAppSelector(selectPlayerCourse);\n  const {\n    data: courseQuery\n  } = useFetchPlayerCourseQuery(locationPayload.id);\n  const {\n    data: viewsQuery\n  } = useFetchCourseViewsQuery();\n  const {\n    player\n  } = usePlayer();\n  const [course, setCourse] = useState();\n  const [views, setViews] = useState(selectedViews ? selectedViews.map(view => view.lecture) : []);\n  useEffect(() => {\n    if (selectedCourse) {\n      var _selectedCourse$secti;\n\n      setCourse(selectedCourse);\n      dispatch(setTitle(selectedCourse.title));\n      const lectures = (_selectedCourse$secti = selectedCourse.sections) === null || _selectedCourse$secti === void 0 ? void 0 : _selectedCourse$secti.flatMap(sec => sec.lectures);\n\n      if (lectures) {\n        const currentLecture = lectures === null || lectures === void 0 ? void 0 : lectures.find(lec => lec.video.key == locationQuery.clipid);\n        if (currentLecture) dispatch(setCurrentLecture(current));\n      }\n    }\n  }, [selectedCourse]);\n  useEffect(() => {\n    if (selectedViews) {\n      const views = _.uniq(selectedViews.map(view => view.lecture));\n\n      setViews(views);\n    }\n  }, [selectedViews]);\n  useEffect(() => {\n    if (locationQuery) {\n      const baseUrl = `https://cdn.filestackcontent.com/${locationQuery.clipid}`;\n      dispatch(setCurrentUrl(baseUrl));\n      dispatch(setClipId(locationQuery.clipid));\n    }\n  }, [locationQuery]);\n  if (!course) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.next,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classNames(styles.courseLayout, {\n        [styles.navCollapse]: toggle\n      }),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.coursePlayerLayout,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.navToggleButtonContainer,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.navToggle,\n            onClick: () => {\n              setToggle(!toggle);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                className: styles.navToggleSvg,\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"24px\",\n                height: \"24px\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M2 17.02h17.33v2H2zM2 11.06h15.49v2H2zM18.55 2.52L17.2 3.98l1.16 1.08H2v2h16.4L17.35 8.2l1.46 1.37L22.2 5.9l-3.64-3.39zm.78 3.54v-.08l.04.04-.04.04z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          tabIndex: -1,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.playerWrapper,\n            children: /*#__PURE__*/_jsxDEV(Manager, {\n              children: /*#__PURE__*/_jsxDEV(Container, {\n                children: [/*#__PURE__*/_jsxDEV(SyncSettings, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 104,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(SyncClipProgress, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ErrorModal, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(ActionOverlay, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Captions, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(BufferingIndicator, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 110,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(KeyboardShortcuts, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 111,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(CommandLayer, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 112,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Video, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    position: \"absolute\",\n                    bottom: 0,\n                    right: 0,\n                    left: 0\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(ProgressBar, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 122,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(ControlBar, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 114,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.courseLayoutNav,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.courseLayoutNavContent,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.navNavigation,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.navHeader,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.courseTitleSection,\n                children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                  className: styles.courseTitle,\n                  children: /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: styles.courseTitleLink,\n                    children: course.title\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: styles.courseSubTitle,\n                  children: course.headline\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  role: \"tablist\",\n                  tabIndex: 0,\n                  className: styles.tabList,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.tabListHeader,\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      tabIndex: -1,\n                      className: classNames(styles.navTab, styles.navTabItem),\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        tabIndex: -1,\n                        className: styles.navTabItemCss,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          tabIndex: -1,\n                          className: styles.nestedCss,\n                          children: \"Table of Contents\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 152,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: styles.tableContentBackground\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 155,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: classNames(styles.navTab, styles.navTabItem),\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        tabIndex: -1,\n                        className: styles.navTabItemCss,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          tabIndex: -1,\n                          className: styles.nestedCss,\n                          children: \"Notes\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 164,\n                          columnNumber: 27\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: styles.notesBackground\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 167,\n                          columnNumber: 27\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 163,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.navContent,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                role: \"tabpanel\",\n                className: styles.navTabPanel,\n                children: course.sections && course.sections.map((section, index) => /*#__PURE__*/_jsxDEV(Lecture, {\n                  position: index,\n                  section: section,\n                  views: views\n                }, section.id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 21\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CoursePlayer, \"YGi2nwvGvixlazuUyC+NSWAeDS8=\", false, function () {\n  return [useAppSelector, useAppDispatch, useAppSelector, useAppSelector, useAppSelector, useFetchPlayerCourseQuery, useFetchCourseViewsQuery, usePlayer];\n});\n\n_c = CoursePlayer;\nexport default CoursePlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CoursePlayer\");","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/index.tsx"],"names":["styles","Manager","useEffect","useState","useAppDispatch","Container","ActionOverlay","ControlBar","ProgressBar","Header","CommandLayer","BufferingIndicator","Video","SyncSettings","SyncClipProgress","Captions","ErrorModal","KeyboardShortcuts","classNames","Lecture","selectLocationPayload","selectLocationQuery","useAppSelector","_","selectPlayerCourse","setCurrentUrl","setTitle","setClipId","setCurrentLecture","selectAnalytics","usePlayer","useFetchPlayerCourseQuery","useFetchCourseViewsQuery","CoursePlayer","toggle","setToggle","locationPayload","dispatch","locationQuery","selectedViews","selectedCourse","data","courseQuery","id","viewsQuery","player","course","setCourse","views","setViews","map","view","lecture","title","lectures","sections","flatMap","sec","currentLecture","find","lec","video","key","clipid","current","uniq","baseUrl","next","courseLayout","navCollapse","coursePlayerLayout","navToggleButtonContainer","navToggle","navToggleSvg","playerWrapper","position","bottom","right","left","courseLayoutNav","courseLayoutNavContent","navNavigation","navHeader","courseTitleSection","courseTitle","courseTitleLink","courseSubTitle","headline","tabList","tabListHeader","navTab","navTabItem","navTabItemCss","nestedCss","tableContentBackground","notesBackground","navContent","navTabPanel","section","index"],"mappings":"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","sourcesContent":["import styles from \"./styles.module.css\";\nimport Manager from \"./Manager\";\nimport { useEffect, useState } from \"react\";\nimport { useAppDispatch } from \"store/hooks\";\nimport Container from \"./Container\";\nimport ActionOverlay from \"./Overlay\";\nimport ControlBar from \"./control-bar/control-bar\";\nimport ProgressBar from \"./progress-bar/progress-bar\";\nimport Header from \"./header/header\";\nimport CommandLayer from \"./command-layer/command-layer\";\nimport BufferingIndicator from \"./buffering-indicator/buffering-indicator\";\nimport Video from \"./video/video\";\nimport SyncSettings from \"./sync-settings/sync-settings\";\nimport SyncClipProgress from \"./sync-clip-progress/sync-clip-progress\";\nimport Captions from \"./captions/captions\";\nimport ErrorModal from \"./error-modal/error-modal\";\nimport KeyboardShortcuts from \"./keyboard-shortcuts/keyboard-shortcuts\";\nimport classNames from \"classnames\";\nimport { Lecture } from \"./contentItem/lecture\";\nimport { selectLocationPayload, selectLocationQuery } from \"state/location/selectors\";\nimport { useAppSelector } from \"store/hooks\";\nimport _ from 'lodash';\nimport { selectPlayerCourse, setCurrentUrl, setTitle, setClipId, setCurrentLecture } from \"state/player/playerSlice\";\nimport { selectAnalytics } from \"state/course/courseSplice\";\nimport { usePlayer } from \"store/usePlayer\";\nimport { CoursePlayerResponse, useFetchPlayerCourseQuery, useFetchViewsQuery, useFetchCourseViewsQuery, VideoAnalytics } from \"services/courses\";\nimport { selectViews } from \"state/course/courseSplice\";\nconst CoursePlayer = () => {\n  const [toggle, setToggle] = useState(false);\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const dispatch = useAppDispatch()\n  const locationQuery = useAppSelector(selectLocationQuery)\n  const selectedViews = useAppSelector(selectAnalytics)\n  const selectedCourse = useAppSelector(selectPlayerCourse)\n  const { data: courseQuery } = useFetchPlayerCourseQuery(locationPayload.id)\n  const { data: viewsQuery } = useFetchCourseViewsQuery()\n  const { player } = usePlayer()\n  const [course, setCourse] = useState<CoursePlayerResponse>();\n  const [views, setViews] = useState(selectedViews ? selectedViews.map((view: VideoAnalytics) => view.lecture) : [])\n\n  useEffect(() => {\n    if (selectedCourse) {\n      setCourse(selectedCourse)\n      dispatch(setTitle(selectedCourse.title))\n      const lectures = selectedCourse.sections?.flatMap(sec => sec.lectures)\n      if(lectures) {\n        const currentLecture = lectures?.find(lec => lec.video.key == locationQuery.clipid)\n        if(currentLecture) dispatch(setCurrentLecture(current))\n      }\n    }\n\n  }, [selectedCourse])\n\n  useEffect(() => {\n    if (selectedViews) {\n      const views = _.uniq(selectedViews.map((view: VideoAnalytics) => view.lecture))\n      setViews(views)\n    }\n\n  }, [selectedViews])\n  useEffect(() => {\n    if (locationQuery) {\n      const baseUrl = `https://cdn.filestackcontent.com/${locationQuery.clipid}`;\n\n      dispatch(setCurrentUrl(baseUrl))\n      dispatch(setClipId(locationQuery.clipid))\n    }\n  }, [locationQuery])\n\n  if (!course) return null;\n\n  return (\n    <div className={styles.next}>\n      <div\n        className={classNames(styles.courseLayout, {\n          [styles.navCollapse]: toggle,\n        })}\n      >\n        <div className={styles.coursePlayerLayout}>\n          <div className={styles.navToggleButtonContainer}>\n            <button\n              className={styles.navToggle}\n              onClick={() => {\n                setToggle(!toggle);\n              }}\n            >\n              <span>\n                <svg\n                  className={styles.navToggleSvg}\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  width=\"24px\"\n                  height=\"24px\"\n                  viewBox=\"0 0 24 24\"\n                >\n                  <path d=\"M2 17.02h17.33v2H2zM2 11.06h15.49v2H2zM18.55 2.52L17.2 3.98l1.16 1.08H2v2h16.4L17.35 8.2l1.46 1.37L22.2 5.9l-3.64-3.39zm.78 3.54v-.08l.04.04-.04.04z\"></path>\n                </svg>\n              </span>\n            </button>\n          </div>\n          <div tabIndex={-1}>\n            <div className={styles.playerWrapper}>\n              <Manager>\n                <Container>\n                  <SyncSettings />\n                  <SyncClipProgress />\n                  <ErrorModal />\n                  <ActionOverlay />\n                  <Captions />\n                  <BufferingIndicator />\n                  <Header />\n                  <KeyboardShortcuts />\n                  <CommandLayer />\n                  <Video />\n                  <div\n                    style={{\n                      position: \"absolute\",\n                      bottom: 0,\n                      right: 0,\n                      left: 0,\n                    }}\n                  >\n                    <ProgressBar />\n                    <ControlBar />\n                  </div>\n                </Container>\n              </Manager>\n            </div>\n          </div>\n        </div>\n        <div className={styles.courseLayoutNav}>\n          <div className={styles.courseLayoutNavContent}>\n            <div className={styles.navNavigation}>\n              <div className={styles.navHeader}>\n                <div className={styles.courseTitleSection}>\n                  <h1 className={styles.courseTitle}>\n                    <a className={styles.courseTitleLink}>\n                      {course.title}\n                    </a>\n                  </h1>\n                  <h2 className={styles.courseSubTitle}>\n                    {course.headline}\n                  </h2>\n                </div>\n                <div>\n                  <div role={\"tablist\"} tabIndex={0} className={styles.tabList}>\n                    <div className={styles.tabListHeader}>\n                      <button\n                        tabIndex={-1}\n                        className={classNames(styles.navTab, styles.navTabItem)}\n                      >\n                        <div tabIndex={-1} className={styles.navTabItemCss}>\n                          <div tabIndex={-1} className={styles.nestedCss}>\n                            Table of Contents\n                          </div>\n                          <span\n                            className={styles.tableContentBackground}\n                          ></span>\n                        </div>\n                      </button>\n                      <button\n                        className={classNames(styles.navTab, styles.navTabItem)}\n                      >\n                        <div tabIndex={-1} className={styles.navTabItemCss}>\n                          <div tabIndex={-1} className={styles.nestedCss}>\n                            Notes\n                          </div>\n                          <span className={styles.notesBackground}></span>\n                        </div>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className={styles.navContent}>\n                <div role={\"tabpanel\"} className={styles.navTabPanel}>\n\n                  {course.sections && course.sections.map((section, index) =>\n                    <Lecture key={section.id} position={index} section={section} views={views} />)}\n\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CoursePlayer;\n"]},"metadata":{},"sourceType":"module"}
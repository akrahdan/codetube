{"ast":null,"code":"import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import classnames from'classnames';import{isFullscreen}from'../fullscreen-helper';import{FullscreenState,InteractionModes,TOUCH_TIMEOUT_DURATION,MOUSE_TIMEOUT_DURATION}from'../constants';import{hideUI as _hideUI,showUI as _showUI,setInteractionMode as _setInteractionMode,setFullscreen as _setFullscreen}from'state/player/playerSlice';import{initMousetrap,resetMoustrap}from'../keyboard/shortcut-keys';import{registerDefaultShortcuts}from'../keyboard/register-shortcuts';import css from'./styles.module.css';import{jsx as _jsx}from\"react/jsx-runtime\";export var Manager=/*#__PURE__*/function(_Component){_inherits(Manager,_Component);var _super=_createSuper(Manager);function Manager(props){var _this;_classCallCheck(this,Manager);_this=_super.call(this,props);_this.updateMediaUI=function(){if(!navigator||!navigator.mediaSession)return;var _this$props=_this.props,title=_this$props.title,playing=_this$props.playing;navigator.mediaSession.playbackState=playing?'playing':'paused';navigator.mediaSession.metadata=new window.MediaMetadata({title:title});};_this.handleGetClip=function(){return{clipId:_this.props.clipId||null};};_this.handleFullscreenChange=function(){var setFullscreen=_this.props.setFullscreen;var fullscreenState=isFullscreen()?FullscreenState.FULLSCREEN:FullscreenState.NORMAL;setFullscreen&&setFullscreen(fullscreenState);};_this.handleMouseMove=function(e){var setInteractionMode=_this.props.setInteractionMode;setInteractionMode(InteractionModes.MOUSE);_this.showUI();_this.hideUITimeout&&clearTimeout(_this.hideUITimeout);_this.hideUITimeout=setTimeout(_this.hideUI,MOUSE_TIMEOUT_DURATION);};_this.handleMouseEnter=function(e){var setInteractionMode=_this.props.setInteractionMode;setInteractionMode(InteractionModes.MOUSE);_this.showUI();};_this.handleMouseDown=function(e){var _this$props2=_this.props,activeMenu=_this$props2.activeMenu,setInteractionMode=_this$props2.setInteractionMode;setInteractionMode(InteractionModes.MOUSE);_this.showUI();};_this.handleTouchStart=function(e){var _this$props3=_this.props,activeMenu=_this$props3.activeMenu,setInteractionMode=_this$props3.setInteractionMode;_this.cancelEvent(e);setInteractionMode(InteractionModes.TOUCH);_this.showUI();_this.hideUITimeout&&clearTimeout(_this.hideUITimeout);_this.hideUITimeout=setTimeout(_this.hideUI,TOUCH_TIMEOUT_DURATION);};_this.handleKeyUp=function(e){var setInteractionMode=_this.props.setInteractionMode;setInteractionMode(InteractionModes.KEYBOARD);};_this.cancelEvent=function(e){e&&e.preventDefault();};_this.showUI=function(){var showUI=_this.props.showUI;showUI&&showUI();};_this.hideUI=function(){var _this$props4=_this.props,hideUI=_this$props4.hideUI,activeMenu=_this$props4.activeMenu;if(!activeMenu){hideUI&&hideUI();}};_this.handleBlur=function(e){var interactionMode=_this.props.interactionMode;var target=e.relatedTarget||document.activeElement;if(interactionMode===InteractionModes.KEYBOARD&&!_this.mainRef.current.contains(target)){_this.hideUI();}};_this.mainRef=/*#__PURE__*/React.createRef();return _this;}_createClass(Manager,[{key:\"componentDidMount\",value:function componentDidMount(){var keyboardShortcutsEnabled=this.props.keyboardShortcutsEnabled;document.addEventListener('fullscreenchange',this.handleFullscreenChange);document.addEventListener('webkitfullscreenchange',this.handleFullscreenChange);document.addEventListener('mozfullscreenchange',this.handleFullscreenChange);document.addEventListener('MSFullscreenChange',this.handleFullscreenChange);initMousetrap(this.mainRef.current);if(keyboardShortcutsEnabled!==false)registerDefaultShortcuts(this.props,this.handleGetClip);this.updateMediaUI();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('fullscreenchange',this.handleFullscreenChange);document.removeEventListener('webkitfullscreenchange',this.handleFullscreenChange);document.removeEventListener('mozfullscreenchange',this.handleFullscreenChange);document.removeEventListener('MSFullscreenChange',this.handleFullscreenChange);resetMoustrap();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(this.props.keyboardShortcutsEnabled===nextProps.keyboardShortcutsEnabled)return;if(nextProps.keyboardShortcutsEnabled!==false)registerDefaultShortcuts(this.props,this.handleGetClip);if(nextProps.keyboardShortcutsEnabled==false)resetMoustrap();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.title!==this.props.title||prevProps.playing!==this.props.playing)this.updateMediaUI();}},{key:\"render\",value:function render(){var _this$props5=this.props,children=_this$props5.children,visible=_this$props5.visible;return/*#__PURE__*/_jsx(\"div\",{tabIndex:\"-1\",onMouseEnter:this.handleMouseEnter,onMouseLeave:this.hideUI,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onTouchEnd:this.cancelEvent,onTouchStart:this.handleTouchStart,onFocus:this.showUI,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,className:classnames(css.manager,_defineProperty({},css.hidden,!visible)),ref:this.mainRef,children:children});}}]);return Manager;}(Component);export default connect(function(state){return{clipId:state.player.clipId,title:state.player.title,playing:state.player.playing,activeMenu:state.player.activeMenu,interactionMode:state.player.interactionMode,visible:state.player.visible,registeredShortcuts:state.registeredShortcuts,hiddenButtons:state.hiddenButtons,keyboardShortcutsEnabled:state.keyboardShortcutsEnabled};},function(dispatch){return{hideUI:function hideUI(){return dispatch(_hideUI());},showUI:function showUI(){return dispatch(_showUI());},setInteractionMode:function setInteractionMode(payload){return dispatch(_setInteractionMode(payload));},setFullscreen:function setFullscreen(payload){return dispatch(_setFullscreen(payload));}};})(Manager);","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/Manager/index.js"],"names":["React","Component","connect","classnames","isFullscreen","FullscreenState","InteractionModes","TOUCH_TIMEOUT_DURATION","MOUSE_TIMEOUT_DURATION","hideUI","showUI","setInteractionMode","setFullscreen","initMousetrap","resetMoustrap","registerDefaultShortcuts","css","Manager","props","updateMediaUI","navigator","mediaSession","title","playing","playbackState","metadata","window","MediaMetadata","handleGetClip","clipId","handleFullscreenChange","fullscreenState","FULLSCREEN","NORMAL","handleMouseMove","e","MOUSE","hideUITimeout","clearTimeout","setTimeout","handleMouseEnter","handleMouseDown","activeMenu","handleTouchStart","cancelEvent","TOUCH","handleKeyUp","KEYBOARD","preventDefault","handleBlur","interactionMode","target","relatedTarget","document","activeElement","mainRef","current","contains","createRef","keyboardShortcutsEnabled","addEventListener","removeEventListener","nextProps","prevProps","children","visible","manager","hidden","state","player","registeredShortcuts","hiddenButtons","dispatch","payload"],"mappings":"qzBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA,OAASC,YAAT,KAA6B,sBAA7B,CACA,OAASC,eAAT,CAA0BC,gBAA1B,CAA4CC,sBAA5C,CAAoEC,sBAApE,KAAkG,cAAlG,CACA,OAASC,MAAM,GAANA,CAAAA,OAAT,CAAiBC,MAAM,GAANA,CAAAA,OAAjB,CAAyBC,kBAAkB,GAAlBA,CAAAA,mBAAzB,CAA6CC,aAAa,GAAbA,CAAAA,cAA7C,KAAkE,0BAAlE,CACA,OAASC,aAAT,CAAwBC,aAAxB,KAA6C,2BAA7C,CACA,OAASC,wBAAT,KAAyC,gCAAzC,CAEA,MAAOC,CAAAA,GAAP,KAAgB,qBAAhB,C,2CAEA,UAAaC,CAAAA,OAAb,kGACE,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAkCnBC,aAlCmB,CAkCH,UAAM,CACpB,GAAI,CAACC,SAAD,EAAc,CAACA,SAAS,CAACC,YAA7B,CAA2C,OADvB,gBAEO,MAAKH,KAFZ,CAEZI,KAFY,aAEZA,KAFY,CAELC,OAFK,aAELA,OAFK,CAGpBH,SAAS,CAACC,YAAV,CAAuBG,aAAvB,CAAuCD,OAAO,CAAG,SAAH,CAAe,QAA7D,CACAH,SAAS,CAACC,YAAV,CAAuBI,QAAvB,CAAkC,GAAIC,CAAAA,MAAM,CAACC,aAAX,CAAyB,CAAEL,KAAK,CAALA,KAAF,CAAzB,CAAlC,CACD,CAvCkB,OAyCnBM,aAzCmB,CAyCH,iBAAO,CAAEC,MAAM,CAAE,MAAKX,KAAL,CAAWW,MAAX,EAAqB,IAA/B,CAAP,EAzCG,OA2CnBC,sBA3CmB,CA2CM,UAAM,IACrBlB,CAAAA,aADqB,CACH,MAAKM,KADF,CACrBN,aADqB,CAG7B,GAAMmB,CAAAA,eAAe,CAAG3B,YAAY,GAAKC,eAAe,CAAC2B,UAArB,CAAkC3B,eAAe,CAAC4B,MAAtF,CAEArB,aAAa,EAAIA,aAAa,CAACmB,eAAD,CAA9B,CACD,CAjDkB,OAmDnBG,eAnDmB,CAmDD,SAACC,CAAD,CAAO,IACfxB,CAAAA,kBADe,CACQ,MAAKO,KADb,CACfP,kBADe,CAGvBA,kBAAkB,CAACL,gBAAgB,CAAC8B,KAAlB,CAAlB,CAEA,MAAK1B,MAAL,GAEA,MAAK2B,aAAL,EAAsBC,YAAY,CAAC,MAAKD,aAAN,CAAlC,CAEA,MAAKA,aAAL,CAAqBE,UAAU,CAAC,MAAK9B,MAAN,CAAcD,sBAAd,CAA/B,CACD,CA7DkB,OA+DnBgC,gBA/DmB,CA+DA,SAACL,CAAD,CAAO,IAChBxB,CAAAA,kBADgB,CACO,MAAKO,KADZ,CAChBP,kBADgB,CAGxBA,kBAAkB,CAACL,gBAAgB,CAAC8B,KAAlB,CAAlB,CAEA,MAAK1B,MAAL,GACD,CArEkB,OAuEnB+B,eAvEmB,CAuED,SAACN,CAAD,CAAO,kBACoB,MAAKjB,KADzB,CACfwB,UADe,cACfA,UADe,CACH/B,kBADG,cACHA,kBADG,CAGvBA,kBAAkB,CAACL,gBAAgB,CAAC8B,KAAlB,CAAlB,CAEA,MAAK1B,MAAL,GACD,CA7EkB,OA+EnBiC,gBA/EmB,CA+EA,SAACR,CAAD,CAAO,kBACmB,MAAKjB,KADxB,CAChBwB,UADgB,cAChBA,UADgB,CACJ/B,kBADI,cACJA,kBADI,CAGxB,MAAKiC,WAAL,CAAiBT,CAAjB,EAEAxB,kBAAkB,CAACL,gBAAgB,CAACuC,KAAlB,CAAlB,CAEA,MAAKnC,MAAL,GAEA,MAAK2B,aAAL,EAAsBC,YAAY,CAAC,MAAKD,aAAN,CAAlC,CAEA,MAAKA,aAAL,CAAqBE,UAAU,CAAC,MAAK9B,MAAN,CAAcF,sBAAd,CAA/B,CACD,CA3FkB,OA6FnBuC,WA7FmB,CA6FL,SAACX,CAAD,CAAO,IACXxB,CAAAA,kBADW,CACY,MAAKO,KADjB,CACXP,kBADW,CAGnBA,kBAAkB,CAACL,gBAAgB,CAACyC,QAAlB,CAAlB,CACD,CAjGkB,OAmGnBH,WAnGmB,CAmGL,SAACT,CAAD,CAAO,CACnBA,CAAC,EAAIA,CAAC,CAACa,cAAF,EAAL,CACD,CArGkB,OAuGnBtC,MAvGmB,CAuGV,UAAM,IACLA,CAAAA,MADK,CACM,MAAKQ,KADX,CACLR,MADK,CAGbA,MAAM,EAAIA,MAAM,EAAhB,CACD,CA3GkB,OA6GnBD,MA7GmB,CA6GV,UAAM,kBACkB,MAAKS,KADvB,CACLT,MADK,cACLA,MADK,CACGiC,UADH,cACGA,UADH,CAGb,GAAI,CAACA,UAAL,CAAiB,CACfjC,MAAM,EAAIA,MAAM,EAAhB,CACD,CACF,CAnHkB,OAqHnBwC,UArHmB,CAqHN,SAACd,CAAD,CAAO,IACVe,CAAAA,eADU,CACU,MAAKhC,KADf,CACVgC,eADU,CAGlB,GAAMC,CAAAA,MAAM,CAAGhB,CAAC,CAACiB,aAAF,EAAmBC,QAAQ,CAACC,aAA3C,CAEA,GAAIJ,eAAe,GAAK5C,gBAAgB,CAACyC,QAArC,EAAiD,CAAC,MAAKQ,OAAL,CAAaC,OAAb,CAAqBC,QAArB,CAA8BN,MAA9B,CAAtD,CAA6F,CAC3F,MAAK1C,MAAL,GACD,CACF,CA7HkB,CAEjB,MAAK8C,OAAL,cAAevD,KAAK,CAAC0D,SAAN,EAAf,CAFiB,aAGlB,CAJH,qDAME,4BAAoB,IACVC,CAAAA,wBADU,CACmB,KAAKzC,KADxB,CACVyC,wBADU,CAElBN,QAAQ,CAACO,gBAAT,CAA0B,kBAA1B,CAA8C,KAAK9B,sBAAnD,EACAuB,QAAQ,CAACO,gBAAT,CAA0B,wBAA1B,CAAoD,KAAK9B,sBAAzD,EACAuB,QAAQ,CAACO,gBAAT,CAA0B,qBAA1B,CAAiD,KAAK9B,sBAAtD,EACAuB,QAAQ,CAACO,gBAAT,CAA0B,oBAA1B,CAAgD,KAAK9B,sBAArD,EACAjB,aAAa,CAAC,KAAK0C,OAAL,CAAaC,OAAd,CAAb,CACA,GAAIG,wBAAwB,GAAK,KAAjC,CAAwC5C,wBAAwB,CAAC,KAAKG,KAAN,CAAa,KAAKU,aAAlB,CAAxB,CACxC,KAAKT,aAAL,GACD,CAfH,oCAiBE,+BAAuB,CACrBkC,QAAQ,CAACQ,mBAAT,CAA6B,kBAA7B,CAAiD,KAAK/B,sBAAtD,EACAuB,QAAQ,CAACQ,mBAAT,CAA6B,wBAA7B,CAAuD,KAAK/B,sBAA5D,EACAuB,QAAQ,CAACQ,mBAAT,CAA6B,qBAA7B,CAAoD,KAAK/B,sBAAzD,EACAuB,QAAQ,CAACQ,mBAAT,CAA6B,oBAA7B,CAAmD,KAAK/B,sBAAxD,EACAhB,aAAa,GACd,CAvBH,yCAyBE,mCAA0BgD,SAA1B,CAAqC,CACnC,GAAI,KAAK5C,KAAL,CAAWyC,wBAAX,GAAwCG,SAAS,CAACH,wBAAtD,CAAgF,OAChF,GAAIG,SAAS,CAACH,wBAAV,GAAuC,KAA3C,CAAkD5C,wBAAwB,CAAC,KAAKG,KAAN,CAAa,KAAKU,aAAlB,CAAxB,CAClD,GAAIkC,SAAS,CAACH,wBAAV,EAAsC,KAA1C,CAAiD7C,aAAa,GAC/D,CA7BH,kCA+BE,4BAAmBiD,SAAnB,CAA8B,CAC5B,GAAIA,SAAS,CAACzC,KAAV,GAAoB,KAAKJ,KAAL,CAAWI,KAA/B,EAAwCyC,SAAS,CAACxC,OAAV,GAAsB,KAAKL,KAAL,CAAWK,OAA7E,CAAsF,KAAKJ,aAAL,GACvF,CAjCH,sBAgIE,iBAAS,kBACuB,KAAKD,KAD5B,CACC8C,QADD,cACCA,QADD,CACWC,OADX,cACWA,OADX,CAGP,mBACE,YACE,QAAQ,CAAC,IADX,CAEE,YAAY,CAAE,KAAKzB,gBAFrB,CAGE,YAAY,CAAE,KAAK/B,MAHrB,CAIE,WAAW,CAAE,KAAKgC,eAJpB,CAKE,WAAW,CAAE,KAAKP,eALpB,CAME,UAAU,CAAE,KAAKU,WANnB,CAOE,YAAY,CAAE,KAAKD,gBAPrB,CAQE,OAAO,CAAE,KAAKjC,MARhB,CASE,MAAM,CAAE,KAAKuC,UATf,CAUE,OAAO,CAAE,KAAKH,WAVhB,CAWE,SAAS,CAAE3C,UAAU,CAACa,GAAG,CAACkD,OAAL,oBAAiBlD,GAAG,CAACmD,MAArB,CAA8B,CAACF,OAA/B,EAXvB,CAYE,GAAG,CAAE,KAAKV,OAZZ,UAcGS,QAdH,EADF,CAkBD,CArJH,qBAA6B/D,SAA7B,EAwJA,cAAeC,CAAAA,OAAO,CACpB,SAACkE,KAAD,QAAY,CACVvC,MAAM,CAAEuC,KAAK,CAACC,MAAN,CAAaxC,MADX,CAEVP,KAAK,CAAE8C,KAAK,CAACC,MAAN,CAAa/C,KAFV,CAGVC,OAAO,CAAE6C,KAAK,CAACC,MAAN,CAAa9C,OAHZ,CAIVmB,UAAU,CAAE0B,KAAK,CAACC,MAAN,CAAa3B,UAJf,CAKVQ,eAAe,CAAEkB,KAAK,CAACC,MAAN,CAAanB,eALpB,CAMVe,OAAO,CAAEG,KAAK,CAACC,MAAN,CAAaJ,OANZ,CAOVK,mBAAmB,CAAEF,KAAK,CAACE,mBAPjB,CAQVC,aAAa,CAAEH,KAAK,CAACG,aARX,CASVZ,wBAAwB,CAAES,KAAK,CAACT,wBATtB,CAAZ,EADoB,CAYpB,SAAAa,QAAQ,QAAK,CACX/D,MAAM,CAAE,wBAAM+D,CAAAA,QAAQ,CAAC/D,OAAM,EAAP,CAAd,EADG,CAEXC,MAAM,CAAE,wBAAM8D,CAAAA,QAAQ,CAAC9D,OAAM,EAAP,CAAd,EAFG,CAGXC,kBAAkB,CAAE,4BAAC8D,OAAD,QAAaD,CAAAA,QAAQ,CAAC7D,mBAAkB,CAAC8D,OAAD,CAAnB,CAArB,EAHT,CAIX7D,aAAa,CAAE,uBAAC6D,OAAD,QAAaD,CAAAA,QAAQ,CAAC5D,cAAa,CAAC6D,OAAD,CAAd,CAArB,EAJJ,CAAL,EAZY,CAAP,CAkBbxD,OAlBa,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport classnames from 'classnames'\n\nimport { isFullscreen } from '../fullscreen-helper'\nimport { FullscreenState, InteractionModes, TOUCH_TIMEOUT_DURATION, MOUSE_TIMEOUT_DURATION } from '../constants'\nimport { hideUI, showUI, setInteractionMode, setFullscreen } from 'state/player/playerSlice'\nimport { initMousetrap, resetMoustrap } from '../keyboard/shortcut-keys'\nimport { registerDefaultShortcuts } from '../keyboard/register-shortcuts'\n\nimport css from './styles.module.css'\n\nexport class Manager extends Component {\n  constructor(props) {\n    super(props)\n    this.mainRef = React.createRef()\n  }\n\n  componentDidMount() {\n    const { keyboardShortcutsEnabled } = this.props\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange)\n    document.addEventListener('webkitfullscreenchange', this.handleFullscreenChange)\n    document.addEventListener('mozfullscreenchange', this.handleFullscreenChange)\n    document.addEventListener('MSFullscreenChange', this.handleFullscreenChange)\n    initMousetrap(this.mainRef.current)\n    if (keyboardShortcutsEnabled !== false) registerDefaultShortcuts(this.props, this.handleGetClip)\n    this.updateMediaUI()\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.handleFullscreenChange)\n    document.removeEventListener('webkitfullscreenchange', this.handleFullscreenChange)\n    document.removeEventListener('mozfullscreenchange', this.handleFullscreenChange)\n    document.removeEventListener('MSFullscreenChange', this.handleFullscreenChange)\n    resetMoustrap()\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.keyboardShortcutsEnabled === nextProps.keyboardShortcutsEnabled) return\n    if (nextProps.keyboardShortcutsEnabled !== false) registerDefaultShortcuts(this.props, this.handleGetClip)\n    if (nextProps.keyboardShortcutsEnabled == false) resetMoustrap()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.title !== this.props.title || prevProps.playing !== this.props.playing) this.updateMediaUI()\n  }\n\n  updateMediaUI = () => {\n    if (!navigator || !navigator.mediaSession) return\n    const { title, playing } = this.props\n    navigator.mediaSession.playbackState = playing ? 'playing' : 'paused'\n    navigator.mediaSession.metadata = new window.MediaMetadata({ title })\n  }\n\n  handleGetClip = () => ({ clipId: this.props.clipId || null })\n\n  handleFullscreenChange = () => {\n    const { setFullscreen } = this.props\n\n    const fullscreenState = isFullscreen() ? FullscreenState.FULLSCREEN : FullscreenState.NORMAL\n\n    setFullscreen && setFullscreen(fullscreenState)\n  }\n\n  handleMouseMove = (e) => {\n    const { setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.MOUSE)\n\n    this.showUI()\n\n    this.hideUITimeout && clearTimeout(this.hideUITimeout)\n\n    this.hideUITimeout = setTimeout(this.hideUI, MOUSE_TIMEOUT_DURATION)\n  }\n\n  handleMouseEnter = (e) => {\n    const { setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.MOUSE)\n\n    this.showUI()\n  }\n\n  handleMouseDown = (e) => {\n    const { activeMenu, setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.MOUSE)\n\n    this.showUI()\n  }\n\n  handleTouchStart = (e) => {\n    const { activeMenu, setInteractionMode } = this.props\n\n    this.cancelEvent(e)\n\n    setInteractionMode(InteractionModes.TOUCH)\n\n    this.showUI()\n\n    this.hideUITimeout && clearTimeout(this.hideUITimeout)\n\n    this.hideUITimeout = setTimeout(this.hideUI, TOUCH_TIMEOUT_DURATION)\n  }\n\n  handleKeyUp = (e) => {\n    const { setInteractionMode } = this.props\n\n    setInteractionMode(InteractionModes.KEYBOARD)\n  }\n\n  cancelEvent = (e) => {\n    e && e.preventDefault()\n  }\n\n  showUI = () => {\n    const { showUI } = this.props\n\n    showUI && showUI()\n  }\n\n  hideUI = () => {\n    const { hideUI, activeMenu } = this.props\n\n    if (!activeMenu) {\n      hideUI && hideUI()\n    }\n  }\n\n  handleBlur = (e) => {\n    const { interactionMode } = this.props\n\n    const target = e.relatedTarget || document.activeElement\n\n    if (interactionMode === InteractionModes.KEYBOARD && !this.mainRef.current.contains(target)) {\n      this.hideUI()\n    }\n  }\n\n  render() {\n    const { children, visible } = this.props\n\n    return (\n      <div\n        tabIndex=\"-1\"\n        onMouseEnter={this.handleMouseEnter}\n        onMouseLeave={this.hideUI}\n        onMouseDown={this.handleMouseDown}\n        onMouseMove={this.handleMouseMove}\n        onTouchEnd={this.cancelEvent}\n        onTouchStart={this.handleTouchStart}\n        onFocus={this.showUI}\n        onBlur={this.handleBlur}\n        onKeyUp={this.handleKeyUp}\n        className={classnames(css.manager, { [css.hidden]: !visible })}\n        ref={this.mainRef}\n      >\n        {children}\n      </div>\n    )\n  }\n}\n\nexport default connect(\n  (state) => ({\n    clipId: state.player.clipId,\n    title: state.player.title,\n    playing: state.player.playing,\n    activeMenu: state.player.activeMenu,\n    interactionMode: state.player.interactionMode,\n    visible: state.player.visible,\n    registeredShortcuts: state.registeredShortcuts,\n    hiddenButtons: state.hiddenButtons,\n    keyboardShortcutsEnabled: state.keyboardShortcutsEnabled,\n  }),\n  dispatch => ({\n    hideUI: () => dispatch(hideUI()),\n    showUI: () => dispatch(showUI()),\n    setInteractionMode: (payload) => dispatch(setInteractionMode(payload)),\n    setFullscreen: (payload) => dispatch(setFullscreen(payload)),\n  })\n)(Manager)\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import classNames from\"classnames\";import\"./styles.scss\";import{Lecture}from\"./Lecture\";import{LectureCreate}from\"./Lecture/lectureCreate\";import{SectionCreate}from\"./SectionCreate\";import{SectionEdit}from\"./SectionEdit\";import{Modal}from\"portal/scenes/Modal\";import{DeleteDialog}from\"portal/scenes/Dialog/DeleteDialog\";import{selectLectures}from\"state/curriculum/currriculumSplice\";import{useAppSelector}from\"store/hooks\";import{useDeleteSectionMutation,useCreateLectureMutation,useEditLectureMutation,useFetchLecturesQuery}from'services/courses';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Section=function Section(_ref){var addSection=_ref.addSection,sectionResult=_ref.sectionResult,index=_ref.index,editSection=_ref.editSection;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),lecture=_useState2[0],setLecture=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),section=_useState4[0],setSection=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),sectionEdit=_useState6[0],setSectionEdit=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggleDelete=_useState8[0],setToggleDelete=_useState8[1];var _useDeleteSectionMuta=useDeleteSectionMutation(),_useDeleteSectionMuta2=_slicedToArray(_useDeleteSectionMuta,1),deleteSection=_useDeleteSectionMuta2[0];var _useEditLectureMutati=useEditLectureMutation(),_useEditLectureMutati2=_slicedToArray(_useEditLectureMutati,1),_editLecture=_useEditLectureMutati2[0];var _useCreateLectureMuta=useCreateLectureMutation(),_useCreateLectureMuta2=_slicedToArray(_useCreateLectureMuta,1),createLecture=_useCreateLectureMuta2[0];var _useFetchLecturesQuer=useFetchLecturesQuery(sectionResult.id),data=_useFetchLecturesQuer.data;var selectedLectures=useAppSelector(selectLectures);var _useState9=useState(selectedLectures),_useState10=_slicedToArray(_useState9,2),lectures=_useState10[0],setLectures=_useState10[1];useEffect(function(){var sectionLectures=selectedLectures&&selectedLectures.filter(function(lec){return lec.section==sectionResult.id;});if(sectionLectures){setLectures(sectionLectures);}},[selectedLectures]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"li\",{className:\"js-curriculum-item-draggable curriculum-list--curriculum-list__section--2SsIO curriculum-list--curriculum-list__section--inline--2E-oq\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"curriculum-list--item-wrap--1GkZz\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"curriculum-list--add-item-section-wrapper--bXWiB\",children:[/*#__PURE__*/_jsx(\"div\",{className:classNames(\"curriculum-list--wrapper-section--3v7bx\",{\"curriculum-list--open--VjfTb\":section==\"newSection01\"}),children:/*#__PURE__*/_jsx(\"button\",{id:\"newSection01\",\"aria-label\":\"New curriculum item\",onClick:function onClick(event){var target=event.target;setSection(target.id);},type:\"button\",className:classNames(\"curriculum-list--add-item-section--3JmsU add-item--add-item-toggler--1k-rh add-item--section--1_IVB btn btn-xs btn-link\",{\"add-item--open--2FcI6\":section==\"newSection01\"}),children:/*#__PURE__*/_jsx(\"span\",{className:classNames(\"add-item--icon--2FsmW cfi-small cfi cfi-close\",{\"add-item--open--2FcI6\":section==\"newSection01\",\"add-item--rotate--WJ08z\":section!=\"newSection01\"})})})}),section==\"newSection01\"&&/*#__PURE__*/_jsx(SectionCreate,{index:index,position:\"above\",addSection:addSection,className:\"curriculum-list--over-section--1DyMX\",toggle:function toggle(){return setSection(\"\");}})]}),/*#__PURE__*/_jsxs(\"div\",{\"data-purpose\":\"section-editor\",children:[sectionEdit&&/*#__PURE__*/_jsx(SectionEdit,{index:index,editSection:editSection,section:sectionResult,toggle:function toggle(){return setSectionEdit(!sectionEdit);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"fx-lt item-icon-button-trigger js-curriculum-item-handle item-bar--item-bar--1qWKU item-bar--item-bar--section--3aQ_4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fx\",children:/*#__PURE__*/_jsx(\"div\",{className:\"fx-lt fxwrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"item-bar--item-bar__left--1nfEv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fx-lc item-bar--item-bar__title--3ww0E\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"item-bar--item-bar__status--MZ70P\",children:[/*#__PURE__*/_jsx(\"span\",{\"data-purpose\":\"empty-status-icon\",children:\"\\xA0\"}),\"Section \".concat(index+1,\":\")]}),/*#__PURE__*/_jsxs(\"span\",{className:\"hidden-xxs ellipsis pl10\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"pr5 cfi cfi-file-text-o\"}),/*#__PURE__*/_jsx(\"span\",{children:sectionResult.title})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setSectionEdit(!sectionEdit);},\"data-purpose\":\"section-edit-btn\",type:\"button\",className:\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-pencil\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setToggleDelete(!toggleDelete);},type:\"button\",className:\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-trash-o\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"visible-xxs ellipsis pb5\",children:[/*#__PURE__*/_jsx(\"span\",{\"data-purpose\":\"section-icon\",className:\"pr5 cfi cfi-file-text-o\"}),/*#__PURE__*/_jsx(\"span\",{children:\"GraphQL Fundamentals\"})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"item-bar--item-bar__right--1gA3p\",children:/*#__PURE__*/_jsxs(\"div\",{\"data-type\":\"button\",className:\"item-bar--item-bar__handle--1DqDp item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-bars\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Move\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"curriculum-list--add-item-wrapper--2CGL-\",children:[/*#__PURE__*/_jsx(\"div\",{className:classNames(\"curriculum-list--wrapper--2Jw7f\",{\"curriculum-list--open--VjfTb\":lecture==\"newLecture01\"}),children:/*#__PURE__*/_jsx(\"button\",{id:\"newLecture01\",onClick:function onClick(event){var target=event.target;setLecture(target.id);},\"aria-label\":\"New curriculum item\",type:\"button\",className:classNames(\"curriculum-list--add-item--1DK2G add-item--add-item-toggler--1k-rh add-item--lecture--2ZWW9 btn btn-xs btn-link\",{\"add-item--open--2FcI6\":lecture==\"newLecture1\"}),children:/*#__PURE__*/_jsx(\"span\",{className:classNames(\"add-item--icon--2FsmW  cfi-small cfi cfi-close\",{\"add-item--rotate--WJ08z\":lecture!=\"newLecture01\",\"add-item--open--2FcI6\":lecture==\"newLecture01\"})})})}),/*#__PURE__*/_jsx(\"div\",{children:lecture==\"newLecture01\"&&/*#__PURE__*/_jsx(LectureCreate,{position:\"above\",handleChange:function handleChange(value){var id=null;if(lectures&&lectures.length){id=lectures[0].id;}createLecture({title:value.title,position:value.position,neighbor:id,section:sectionResult.id});},toggle:function toggle(){return setLecture(\"\");}})})]})]})}),lectures&&lectures.map(function(lec,index){return/*#__PURE__*/_jsx(\"li\",{id:\"\".concat(index),className:\"js-curriculum-item-draggable curriculum-list--curriculum-list__section-item--1hfk_ curriculum-list--curriculum-list__section-item--inline--aFpJo\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"curriculum-list--item-wrap--1GkZz\",children:[/*#__PURE__*/_jsx(Lecture,{lecture:lec,index:index,editMedia:function editMedia(result){_editLecture({id:result.id,title:lec.title,video:result.video,video_url:result.video_url});},editLecture:function editLecture(value){return _editLecture({title:value.title,id:value.id,resources:value.resources,section:sectionResult.id});}}),/*#__PURE__*/_jsx(\"div\",{className:\"curriculum-list--add-item-wrapper--2CGL-\",children:/*#__PURE__*/_jsx(\"div\",{className:classNames(\"curriculum-list--wrapper--2Jw7f\",{\"curriculum-list--open--VjfTb\":lecture==\"newLecture\".concat(index)}),children:/*#__PURE__*/_jsx(\"button\",{id:\"newLecture\".concat(index),onClick:function onClick(event){var target=event.target;setLecture(target.id);},\"aria-label\":\"New curriculum item\",\"data-purpose\":\"add-item-inline\",type:\"button\",className:classNames(\"curriculum-list--add-item--1DK2G add-item--add-item-toggler--1k-rh add-item--lecture--2ZWW9 btn btn-xs btn-link\",{\"add-item--open--2FcI6\":lecture==\"newLecture\".concat(index)}),children:/*#__PURE__*/_jsx(\"span\",{className:classNames(\"add-item--icon--2FsmW  cfi-small cfi cfi-close\",{\"add-item--rotate--WJ08z\":lecture!=\"newLecture\".concat(index),\"add-item--open--2FcI6\":lecture==\"newLecture\".concat(index)})})})})}),/*#__PURE__*/_jsx(\"div\",{children:lecture==\"newLecture\".concat(index)&&/*#__PURE__*/_jsx(LectureCreate,{position:\"below\",handleChange:function handleChange(value){createLecture({title:value.title,position:value.position,neighbor:lec.id,section:sectionResult.id});},toggle:function toggle(){return setLecture(\"\");}})}),/*#__PURE__*/_jsxs(\"div\",{className:\"curriculum-list--add-item-section-wrapper--bXWiB\",children:[/*#__PURE__*/_jsx(\"div\",{className:classNames(\"curriculum-list--wrapper-section--3v7bx curriculum-list--is-last-item--1Diog\",{\"curriculum-list--open--VjfTb\":section==\"newSection\".concat(index)}),children:/*#__PURE__*/_jsx(\"button\",{id:\"newSection\".concat(index),onClick:function onClick(event){var target=event.target;index==lectures.length-1?setSection(target.id):setLecture(target.id);},\"aria-label\":\"New curriculum item\",\"data-purpose\":\"add-item-inline\",type:\"button\",className:classNames(\"curriculum-list--add-item-section--3JmsU add-item--add-item-toggler--1k-rh add-item--section--1_IVB btn btn-xs btn-link\",{\"add-item--open--2FcI6\":section==\"newSection\".concat(index)}),children:/*#__PURE__*/_jsx(\"span\",{className:classNames(\"add-item--icon--2FsmW cfi-small cfi cfi-close\",{\"add-item--open--2FcI6\":section==\"newSection\".concat(index),\"add-item--rotate--WJ08z\":section!=\"newSection\".concat(index)})})})}),section==\"newSection\".concat(index)&&/*#__PURE__*/_jsx(SectionCreate,{index:index,position:\"below\",addSection:addSection,className:\"curriculum-list--under-section--zkvIv\",toggle:function toggle(){return setSection(\"\");}})]})]})},index);}),toggleDelete&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(DeleteDialog,{deleteCallback:function deleteCallback(){deleteSection(sectionResult.id).then(function(){return setToggleDelete(!toggleDelete);});},cancelDelete:function cancelDelete(){return setToggleDelete(!toggleDelete);},text:\"You are about to remove a section item. Are you sure you want to continue?\"})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/Curriculum/Section/index.tsx"],"names":["useState","useEffect","classNames","Lecture","LectureCreate","SectionCreate","SectionEdit","Modal","DeleteDialog","selectLectures","useAppSelector","useDeleteSectionMutation","useCreateLectureMutation","useEditLectureMutation","useFetchLecturesQuery","Section","addSection","sectionResult","index","editSection","lecture","setLecture","section","setSection","sectionEdit","setSectionEdit","toggleDelete","setToggleDelete","deleteSection","editLecture","createLecture","id","data","selectedLectures","lectures","setLectures","sectionLectures","filter","lec","event","target","title","value","length","position","neighbor","map","result","video","video_url","resources","then"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport classNames from \"classnames\";\nimport \"./styles.scss\";\nimport { Lecture } from \"./Lecture\";\nimport { LectureCreate } from \"./Lecture/lectureCreate\";\nimport { SectionCreate } from \"./SectionCreate\";\nimport { SectionEdit } from \"./SectionEdit\";\nimport { Modal } from \"portal/scenes/Modal\";\nimport { DeleteDialog } from \"portal/scenes/Dialog/DeleteDialog\";\nimport { selectLectures } from \"state/curriculum/currriculumSplice\";\nimport { useAppSelector } from \"store/hooks\";\nimport { useDeleteSectionMutation, useCreateLectureMutation, useEditLectureMutation, useFetchLecturesQuery } from 'services/courses';\n\nexport const Section = ({ addSection, sectionResult, index, editSection }) => {\n  const [lecture, setLecture] = useState(\"\");\n  const [section, setSection] = useState(\"\");\n  const [sectionEdit, setSectionEdit] = useState(false);\n  const [toggleDelete, setToggleDelete] = useState(false)\n  const [deleteSection] = useDeleteSectionMutation()\n  const [editLecture] = useEditLectureMutation()\n  const [createLecture] = useCreateLectureMutation()\n  const { data } = useFetchLecturesQuery(sectionResult.id)\n  const selectedLectures = useAppSelector(selectLectures)\n  const [lectures, setLectures] = useState(selectedLectures);\n\n  useEffect(() => {\n    const sectionLectures = selectedLectures && selectedLectures.filter(lec => lec.section == sectionResult.id)\n    if (sectionLectures) {\n      setLectures(sectionLectures)\n    }\n  }, [selectedLectures])\n\n  return (\n    <>\n      <li className=\"js-curriculum-item-draggable curriculum-list--curriculum-list__section--2SsIO curriculum-list--curriculum-list__section--inline--2E-oq\">\n        <div className=\"curriculum-list--item-wrap--1GkZz\">\n          <div className=\"curriculum-list--add-item-section-wrapper--bXWiB\">\n            <div\n              className={classNames(\"curriculum-list--wrapper-section--3v7bx\", {\n                \"curriculum-list--open--VjfTb\": section == \"newSection01\",\n              })}\n            >\n              <button\n                id={\"newSection01\"}\n                aria-label=\"New curriculum item\"\n                onClick={(event) => {\n                  const target = event.target as Element\n                  setSection(target.id);\n                }}\n                type=\"button\"\n                className={classNames(\n                  \"curriculum-list--add-item-section--3JmsU add-item--add-item-toggler--1k-rh add-item--section--1_IVB btn btn-xs btn-link\",\n                  { \"add-item--open--2FcI6\": section == \"newSection01\" }\n                )}\n              >\n                <span\n                  className={classNames(\n                    \"add-item--icon--2FsmW cfi-small cfi cfi-close\",\n                    {\n                      \"add-item--open--2FcI6\": section == \"newSection01\",\n                      \"add-item--rotate--WJ08z\": section != \"newSection01\",\n                    }\n                  )}\n                />\n              </button>\n            </div>\n            {section == \"newSection01\" && (\n              <SectionCreate\n                index={index}\n                position=\"above\"\n                addSection={addSection}\n                className={\"curriculum-list--over-section--1DyMX\"}\n                toggle={() => setSection(\"\")}\n              />\n            )}\n          </div>\n          <div data-purpose=\"section-editor\">\n            {sectionEdit && (\n              <SectionEdit\n                index={index}\n                editSection={editSection}\n                section={sectionResult}\n                toggle={() => setSectionEdit(!sectionEdit)}\n              />\n            )}\n            <div className=\"fx-lt item-icon-button-trigger js-curriculum-item-handle item-bar--item-bar--1qWKU item-bar--item-bar--section--3aQ_4\">\n              <div className=\"fx\">\n                <div className=\"fx-lt fxwrap\">\n                  <div className=\"item-bar--item-bar__left--1nfEv\">\n                    <div className=\"fx-lc item-bar--item-bar__title--3ww0E\">\n                      <span className=\"item-bar--item-bar__status--MZ70P\">\n                        <span data-purpose=\"empty-status-icon\">&nbsp;</span>\n                        {`Section ${index + 1}:`}\n                      </span>\n                      <span className=\"hidden-xxs ellipsis pl10\">\n                        <span className=\"pr5 cfi cfi-file-text-o\" />\n                        <span>{sectionResult.title}</span>\n                      </span>\n                      <button\n                        onClick={() => {\n                          setSectionEdit(!sectionEdit);\n                        }}\n                        data-purpose=\"section-edit-btn\"\n                        type=\"button\"\n                        className=\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\"\n                      >\n                        <span className=\"cfi cfi-pencil\" />\n                        <span className=\"sr-only\">Edit</span>\n                      </button>\n                      <button\n                        onClick={() => setToggleDelete(!toggleDelete)}\n                        type=\"button\"\n                        className=\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\"\n                      >\n                        <span className=\"cfi cfi-trash-o\" />\n                        <span className=\"sr-only\">Delete</span>\n                      </button>\n                    </div>\n                    <div className=\"visible-xxs ellipsis pb5\">\n                      <span\n                        data-purpose=\"section-icon\"\n                        className=\"pr5 cfi cfi-file-text-o\"\n                      />\n                      <span>GraphQL Fundamentals</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"item-bar--item-bar__right--1gA3p\">\n                <div\n                  data-type=\"button\"\n                  className=\"item-bar--item-bar__handle--1DqDp item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\"\n                >\n                  <span className=\"cfi cfi-bars\" />\n                  <span className=\"sr-only\">Move</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"curriculum-list--add-item-wrapper--2CGL-\">\n            <div\n              className={classNames(\"curriculum-list--wrapper--2Jw7f\", {\n                \"curriculum-list--open--VjfTb\": lecture == \"newLecture01\",\n              })}\n            >\n              <button\n                id={\"newLecture01\"}\n                onClick={(event) => {\n                  const target = event.target as Element\n                  setLecture(target.id);\n                }}\n                aria-label=\"New curriculum item\"\n                type=\"button\"\n                className={classNames(\n                  \"curriculum-list--add-item--1DK2G add-item--add-item-toggler--1k-rh add-item--lecture--2ZWW9 btn btn-xs btn-link\",\n                  {\n                    \"add-item--open--2FcI6\": lecture == \"newLecture1\",\n                  }\n                )}\n              >\n                <span\n                  className={classNames(\n                    \"add-item--icon--2FsmW  cfi-small cfi cfi-close\",\n                    {\n                      \"add-item--rotate--WJ08z\": lecture != \"newLecture01\",\n                      \"add-item--open--2FcI6\": lecture == \"newLecture01\",\n                    }\n                  )}\n                />\n              </button>\n            </div>\n            <div>\n              {lecture == \"newLecture01\" && (\n                <LectureCreate\n                  position='above'\n                  handleChange={(value) => {\n                    var id = null\n                    if(lectures && lectures.length) {\n                      id = lectures[0].id\n                    }\n                    \n                    createLecture({\n                      title: value.title,\n                      position: value.position,\n                      neighbor: id,\n                      section: sectionResult.id\n                    })\n                  }}\n                  toggle={() => setLecture(\"\")}\n                />\n              )}\n            </div>\n          </div>\n        </div>\n      </li>\n      {lectures &&\n        lectures.map((lec, index) => (\n          <li\n            id={`${index}`}\n            key={index}\n            className=\"js-curriculum-item-draggable curriculum-list--curriculum-list__section-item--1hfk_ curriculum-list--curriculum-list__section-item--inline--aFpJo\"\n          >\n            <div className=\"curriculum-list--item-wrap--1GkZz\">\n              <Lecture lecture={lec} index={index} editMedia={result => {\n                editLecture({\n                  id: result.id,\n                  title: lec.title,\n                  video: result.video,\n                  video_url: result.video_url\n                })\n              }} editLecture={value => editLecture({\n                title: value.title,\n                id: value.id,\n                resources: value.resources,\n                section: sectionResult.id\n              })}/>\n              <div className=\"curriculum-list--add-item-wrapper--2CGL-\">\n                <div\n                  className={classNames(\"curriculum-list--wrapper--2Jw7f\", {\n                    \"curriculum-list--open--VjfTb\":\n                      lecture == `newLecture${index}`,\n                  })}\n                >\n                  <button\n                    id={`newLecture${index}`}\n                    onClick={(event) => {\n                      const target = event.target as Element\n                      setLecture(target.id);\n                    }}\n                    aria-label=\"New curriculum item\"\n                    data-purpose=\"add-item-inline\"\n                    type=\"button\"\n                    className={classNames(\n                      \"curriculum-list--add-item--1DK2G add-item--add-item-toggler--1k-rh add-item--lecture--2ZWW9 btn btn-xs btn-link\",\n                      {\n                        \"add-item--open--2FcI6\":\n                          lecture == `newLecture${index}`,\n                      }\n                    )}\n                  >\n                    <span\n                      className={classNames(\n                        \"add-item--icon--2FsmW  cfi-small cfi cfi-close\",\n                        {\n                          \"add-item--rotate--WJ08z\":\n                            lecture != `newLecture${index}`,\n                          \"add-item--open--2FcI6\":\n                            lecture == `newLecture${index}`,\n                        }\n                      )}\n                    />\n                  </button>\n                </div>\n              </div>\n              <div>\n                {lecture == `newLecture${index}` && (\n                  <LectureCreate\n                    position='below'\n                    handleChange={(value) => {\n                      createLecture({\n                        title: value.title,\n                        position: value.position,\n                        neighbor: lec.id,\n                        section: sectionResult.id\n                      })\n                    }}\n                    toggle={() => setLecture(\"\")}\n                  />\n                )}\n              </div>\n              <div className=\"curriculum-list--add-item-section-wrapper--bXWiB\">\n                <div\n                  className={classNames(\n                    \"curriculum-list--wrapper-section--3v7bx curriculum-list--is-last-item--1Diog\",\n                    {\n                      \"curriculum-list--open--VjfTb\":\n                        section == `newSection${index}`,\n                    }\n                  )}\n                >\n                  <button\n                    id={`newSection${index}`}\n                    onClick={(event) => {\n                      const target = event.target as Element\n                      index == lectures.length - 1\n                        ? setSection(target.id)\n                        : setLecture(target.id);\n                    }}\n                    aria-label=\"New curriculum item\"\n                    data-purpose=\"add-item-inline\"\n                    type=\"button\"\n                    className={classNames(\n                      \"curriculum-list--add-item-section--3JmsU add-item--add-item-toggler--1k-rh add-item--section--1_IVB btn btn-xs btn-link\",\n                      {\n                        \"add-item--open--2FcI6\":\n                          section == `newSection${index}`,\n                      }\n                    )}\n                  >\n                    <span\n                      className={classNames(\n                        \"add-item--icon--2FsmW cfi-small cfi cfi-close\",\n                        {\n                          \"add-item--open--2FcI6\":\n                            section == `newSection${index}`,\n                          \"add-item--rotate--WJ08z\":\n                            section != `newSection${index}`,\n                        }\n                      )}\n                    />\n                  </button>\n                </div>\n                {section == `newSection${index}` && (\n                  <SectionCreate\n                    index={index}\n                    position=\"below\"\n                    addSection={addSection}\n                    className={\"curriculum-list--under-section--zkvIv\"}\n                    toggle={() => setSection(\"\")}\n                  />\n                )}\n              </div>\n            </div>\n          </li>\n        ))}\n      {toggleDelete && <Modal>\n        <DeleteDialog\n          deleteCallback={() => {\n            deleteSection(sectionResult.id)\n              .then(() => setToggleDelete(!toggleDelete))\n          }\n          }\n          cancelDelete={() => setToggleDelete(!toggleDelete)}\n          text=\"You are about to remove a section item. Are you sure you want to continue?\"\n        />\n      </Modal>}\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import classNames from'classnames';import{connect}from'react-redux';import{setActiveMenu as _setActiveMenu}from'state/player/playerSlice';import css from'./control-bar.module.scss';import{InteractionModes,Menus}from'../constants';import{Layout240p}from'./layout-240p';import{Layout360p}from'./layout-360p';import{Layout480p}from'./layout-480p';import{Layout720p}from'./layout-720p';import{jsx as _jsx}from\"react/jsx-runtime\";export var ControlBar=/*#__PURE__*/function(_Component){_inherits(ControlBar,_Component);var _super=_createSuper(ControlBar);function ControlBar(props){var _this;_classCallCheck(this,ControlBar);_this=_super.call(this,props);_this.handleAction=function(){if(_this.isMenuOpen){_this.closeMenu();}};_this.handleFocus=function(e){var isControlBarButton=_this.isControlBarButton(e.target);if(isControlBarButton&&_this.isMenuOpen&&_this.isKeyboardMode){_this.closeMenu();}};_this.handleClick=function(e){if(_this.controlBar&&_this.controlBar.current.contains(e.target)){return;}_this.closeMenu();};_this.controlBar=/*#__PURE__*/React.createRef();return _this;}_createClass(ControlBar,[{key:\"isMenuOpen\",get:function get(){return this.props.activeMenu!==Menus.NONE;}},{key:\"isKeyboardMode\",get:function get(){return this.props.interactionMode===InteractionModes.KEYBOARD;}},{key:\"isControlBarButton\",value:function isControlBarButton(el){return el.getAttribute('is-control-bar-button');}},{key:\"closeMenu\",value:function closeMenu(){// this.props.setActiveMenu(Menus.NONE)\n}},{key:\"renderLayout\",value:function renderLayout(layout){switch(layout){case'120p':case'240p':return/*#__PURE__*/_jsx(Layout240p,{});case'360p':return/*#__PURE__*/_jsx(Layout360p,{});case'480p':return/*#__PURE__*/_jsx(Layout480p,{});case'720p':case'1080p':return/*#__PURE__*/_jsx(Layout720p,{});default:return null;// return <Layout720p />\n}}},{key:\"componentDidMount\",value:function componentDidMount(){document.addEventListener('mousedown',this.handleClick);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){document.removeEventListener('mousedown',this.handleClick);}},{key:\"render\",value:function render(){var _classNames;var _this$props=this.props,activeMenu=_this$props.activeMenu,_this$props$layout=_this$props.layout,layout=_this$props$layout===void 0?'720p':_this$props$layout,visible=_this$props.visible,volumeSliderActive=_this$props.volumeSliderActive;return/*#__PURE__*/_jsx(\"div\",{className:classNames(css.controlBar,(_classNames={},_defineProperty(_classNames,css.hidden,!visible),_defineProperty(_classNames,css.volumeSliderActive,volumeSliderActive),_classNames)),onTouchStart:this.handleAction,onClick:this.handleAction,onFocus:this.handleFocus,layout:layout,ref:this.controlBar,children:/*#__PURE__*/_jsx(\"div\",{className:css.layout,children:this.renderLayout(layout)})});}}]);return ControlBar;}(Component);export default connect(function(state){return{activeMenu:state.player.activeMenu,interactionMode:state.player.interactionMode,layout:state.player.layout,visible:state.player.visible,volumeSliderActive:state.player.volumeSliderActive};},function(dispatch){return{setActiveMenu:function setActiveMenu(payload){return dispatch(_setActiveMenu(payload));}};})(ControlBar);","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/control-bar/control-bar.js"],"names":["React","Component","classNames","connect","setActiveMenu","css","InteractionModes","Menus","Layout240p","Layout360p","Layout480p","Layout720p","ControlBar","props","handleAction","isMenuOpen","closeMenu","handleFocus","e","isControlBarButton","target","isKeyboardMode","handleClick","controlBar","current","contains","createRef","activeMenu","NONE","interactionMode","KEYBOARD","el","getAttribute","layout","document","addEventListener","removeEventListener","visible","volumeSliderActive","hidden","renderLayout","state","player","dispatch","payload"],"mappings":"qzBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,OAAT,KAAuB,aAAvB,CACA,OAASC,aAAa,GAAbA,CAAAA,cAAT,KAA8B,0BAA9B,CACA,MAAOC,CAAAA,GAAP,KAAgB,2BAAhB,CAGA,OAASC,gBAAT,CAA2BC,KAA3B,KAAwC,cAAxC,CAEA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,UAAT,KAA2B,eAA3B,C,2CAEA,UAAaC,CAAAA,UAAb,wGACE,oBAAYC,KAAZ,CAAmB,4CACjB,uBAAMA,KAAN,EADiB,MAanBC,YAbmB,CAaJ,UAAM,CACnB,GAAI,MAAKC,UAAT,CAAqB,CACnB,MAAKC,SAAL,GACD,CACF,CAjBkB,OAmBnBC,WAnBmB,CAmBL,SAAAC,CAAC,CAAI,CACjB,GAAMC,CAAAA,kBAAkB,CAAG,MAAKA,kBAAL,CAAwBD,CAAC,CAACE,MAA1B,CAA3B,CAEA,GAAID,kBAAkB,EAAI,MAAKJ,UAA3B,EAAyC,MAAKM,cAAlD,CAAkE,CAChE,MAAKL,SAAL,GACD,CACF,CAzBkB,OA6DnBM,WA7DmB,CA6DL,SAAAJ,CAAC,CAAI,CACjB,GAAI,MAAKK,UAAL,EAAmB,MAAKA,UAAL,CAAgBC,OAAhB,CAAwBC,QAAxB,CAAiCP,CAAC,CAACE,MAAnC,CAAvB,CAAmE,CACjE,OACD,CACD,MAAKJ,SAAL,GACD,CAlEkB,CAEjB,MAAKO,UAAL,cAAkBvB,KAAK,CAAC0B,SAAN,EAAlB,CAFiB,aAGlB,CAJH,+CAME,cAAiB,CACf,MAAO,MAAKb,KAAL,CAAWc,UAAX,GAA0BpB,KAAK,CAACqB,IAAvC,CACD,CARH,4BAUE,cAAqB,CACnB,MAAO,MAAKf,KAAL,CAAWgB,eAAX,GAA+BvB,gBAAgB,CAACwB,QAAvD,CACD,CAZH,kCA4BE,4BAAmBC,EAAnB,CAAuB,CACrB,MAAOA,CAAAA,EAAE,CAACC,YAAH,CAAgB,uBAAhB,CAAP,CACD,CA9BH,yBAgCE,oBAAY,CACV;AACD,CAlCH,4BAoCE,sBAAaC,MAAb,CAAqB,CACnB,OAAQA,MAAR,EACE,IAAK,MAAL,CACA,IAAK,MAAL,CACE,mBAAO,KAAC,UAAD,IAAP,CACF,IAAK,MAAL,CACE,mBAAO,KAAC,UAAD,IAAP,CACF,IAAK,MAAL,CACE,mBAAO,KAAC,UAAD,IAAP,CACF,IAAK,MAAL,CACA,IAAK,OAAL,CACE,mBAAO,KAAC,UAAD,IAAP,CACF,QACE,MAAO,KAAP,CACA;AAbJ,CAeD,CApDH,iCAsDE,4BAAoB,CAClBC,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAuC,KAAKb,WAA5C,EACD,CAxDH,oCA0DE,+BAAuB,CACrBY,QAAQ,CAACE,mBAAT,CAA6B,WAA7B,CAA0C,KAAKd,WAA/C,EACD,CA5DH,sBAqEE,iBAAS,iCAC8D,KAAKT,KADnE,CACCc,UADD,aACCA,UADD,gCACaM,MADb,CACaA,MADb,6BACsB,MADtB,oBAC8BI,OAD9B,aAC8BA,OAD9B,CACuCC,kBADvC,aACuCA,kBADvC,CAGP,mBACE,YACE,SAAS,CAAEpC,UAAU,CAACG,GAAG,CAACkB,UAAL,6CAClBlB,GAAG,CAACkC,MADc,CACL,CAACF,OADI,8BAElBhC,GAAG,CAACiC,kBAFc,CAEOA,kBAFP,eADvB,CAKE,YAAY,CAAE,KAAKxB,YALrB,CAME,OAAO,CAAE,KAAKA,YANhB,CAOE,OAAO,CAAE,KAAKG,WAPhB,CAQE,MAAM,CAAEgB,MARV,CASE,GAAG,CAAE,KAAKV,UATZ,uBAWE,YAAK,SAAS,CAAElB,GAAG,CAAC4B,MAApB,UAA6B,KAAKO,YAAL,CAAkBP,MAAlB,CAA7B,EAXF,EADF,CAeD,CAvFH,wBAAgChC,SAAhC,EA2FA,cAAeE,CAAAA,OAAO,CACpB,SAAAsC,KAAK,QAAK,CACRd,UAAU,CAAEc,KAAK,CAACC,MAAN,CAAaf,UADjB,CAERE,eAAe,CAAEY,KAAK,CAACC,MAAN,CAAab,eAFtB,CAGRI,MAAM,CAAEQ,KAAK,CAACC,MAAN,CAAaT,MAHb,CAIRI,OAAO,CAAEI,KAAK,CAACC,MAAN,CAAaL,OAJd,CAKRC,kBAAkB,CAAEG,KAAK,CAACC,MAAN,CAAaJ,kBALzB,CAAL,EADe,CAQpB,SAAAK,QAAQ,QAAK,CACXvC,aAAa,CAAE,uBAAAwC,OAAO,QAAID,CAAAA,QAAQ,CAACvC,cAAa,CAACwC,OAAD,CAAd,CAAZ,EADX,CAAL,EARY,CAAP,CAWbhC,UAXa,CAAf","sourcesContent":["import React, { Component } from 'react'\n\nimport classNames from 'classnames'\nimport { connect} from 'react-redux';\nimport { setActiveMenu } from 'state/player/playerSlice';\nimport css from './control-bar.module.scss'\n\n\nimport { InteractionModes, Menus } from '../constants'\n\nimport { Layout240p } from './layout-240p'\nimport { Layout360p } from './layout-360p'\nimport { Layout480p } from './layout-480p'\nimport { Layout720p } from './layout-720p'\n\nexport class ControlBar extends Component {\n  constructor(props) {\n    super(props)\n    this.controlBar = React.createRef()\n  }\n\n  get isMenuOpen() {\n    return this.props.activeMenu !== Menus.NONE\n  }\n\n  get isKeyboardMode() {\n    return this.props.interactionMode === InteractionModes.KEYBOARD\n  }\n\n  handleAction = () => {\n    if (this.isMenuOpen) {\n      this.closeMenu()\n    }\n  }\n\n  handleFocus = e => {\n    const isControlBarButton = this.isControlBarButton(e.target)\n\n    if (isControlBarButton && this.isMenuOpen && this.isKeyboardMode) {\n      this.closeMenu()\n    }\n  }\n\n  isControlBarButton(el) {\n    return el.getAttribute('is-control-bar-button')\n  }\n\n  closeMenu() {\n    // this.props.setActiveMenu(Menus.NONE)\n  }\n\n  renderLayout(layout) {\n    switch (layout) {\n      case '120p':\n      case '240p':\n        return <Layout240p />\n      case '360p':\n        return <Layout360p />\n      case '480p':\n        return <Layout480p />\n      case '720p':\n      case '1080p':\n        return <Layout720p />\n      default:\n        return null\n        // return <Layout720p />\n    }\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleClick)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleClick)\n  }\n\n  handleClick = e => {\n    if (this.controlBar && this.controlBar.current.contains(e.target)) {\n      return\n    }\n    this.closeMenu()\n  }\n\n  render() {\n    const { activeMenu, layout = '720p', visible, volumeSliderActive } = this.props\n    \n    return (\n      <div\n        className={classNames(css.controlBar, {\n          [css.hidden]: !visible,\n          [css.volumeSliderActive]: volumeSliderActive,\n        })}\n        onTouchStart={this.handleAction}\n        onClick={this.handleAction}\n        onFocus={this.handleFocus}\n        layout={layout}\n        ref={this.controlBar}\n      >\n        <div className={css.layout}>{this.renderLayout(layout)}</div>\n      </div>\n    )\n  }\n}\n\n\nexport default connect(\n  state => ({\n    activeMenu: state.player.activeMenu,\n    interactionMode: state.player.interactionMode,\n    layout: state.player.layout,\n    visible: state.player.visible,\n    volumeSliderActive: state.player.volumeSliderActive,\n  }),\n  dispatch => ({\n    setActiveMenu: payload => dispatch(setActiveMenu(payload)),\n  })\n)(ControlBar)\n"]},"metadata":{},"sourceType":"module"}
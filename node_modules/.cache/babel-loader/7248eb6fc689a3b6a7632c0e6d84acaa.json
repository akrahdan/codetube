{"ast":null,"code":"import React from 'react';\nimport { canUseDOM } from './can-use-dom';\nexport var onClickOutside = function onClickOutside(el, callback) {\n  if (!canUseDOM()) return noop;\n\n  var handleClick = function handleClick(evt) {\n    if (evt.target instanceof HTMLElement || evt.target instanceof HTMLDocument) {\n      if (el.contains(evt.target)) return;\n      callback(evt);\n    }\n  };\n\n  document.addEventListener('click', handleClick, {\n    capture: true\n  });\n  return function () {\n    document.removeEventListener('click', handleClick, {\n      capture: true\n    });\n  };\n};\nexport var useEvent = function useEvent(eventHandler) {\n  return function (ref, cb) {\n    if (cb === void 0) {\n      cb = noop;\n    }\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n\n\n    React.useEffect(function () {\n      if (!canUseDOM()) return noop;\n      var el = ref.current;\n\n      if (el) {\n        return eventHandler(el, cb);\n      }\n\n      return noop;\n    }, [ref, cb]);\n  };\n};\nexport var useClickOutside = function useClickOutside(ref, cb) {\n  if (cb === void 0) {\n    cb = noop;\n  }\n\n  return useEvent(onClickOutside)(ref, cb);\n};\nexport var onResize = function onResize(_el, callback) {\n  if (!canUseDOM()) return noop;\n  var currentAnimationFrame;\n\n  var handleResize = function handleResize(evt) {\n    window.cancelAnimationFrame(currentAnimationFrame);\n    currentAnimationFrame = window.requestAnimationFrame(function () {\n      return callback(evt);\n    });\n    return currentAnimationFrame;\n  };\n\n  window.addEventListener('resize', handleResize, {\n    passive: true,\n    capture: true\n  });\n  return function () {\n    window.removeEventListener('resize', handleResize, {\n      capture: true\n    });\n  };\n};\nexport var useResize = function useResize(ref, cb) {\n  if (cb === void 0) {\n    cb = noop;\n  }\n\n  return useEvent(onResize)(ref, cb);\n};\nexport var onScrollOutside = function onScrollOutside(el, callback) {\n  if (!canUseDOM()) return noop;\n  var currentAnimationFrame;\n\n  var handleScroll = function handleScroll(evt) {\n    window.cancelAnimationFrame(currentAnimationFrame);\n\n    if (evt.target instanceof HTMLElement || evt.target instanceof HTMLDocument) {\n      if (el.contains(evt.target)) return;\n      currentAnimationFrame = window.requestAnimationFrame(function () {\n        return callback(evt);\n      });\n    }\n\n    return currentAnimationFrame;\n  };\n\n  document.addEventListener('scroll', handleScroll, {\n    passive: true,\n    capture: true\n  });\n  return function () {\n    window.removeEventListener('scroll', handleScroll, {\n      capture: true\n    });\n  };\n};\nexport var useScrollOutside = function useScrollOutside(ref, cb) {\n  if (cb === void 0) {\n    cb = noop;\n  }\n\n  return useEvent(onScrollOutside)(ref, cb);\n};\nexport var onGlobalEventsClose = function onGlobalEventsClose(el, callback) {\n  if (!canUseDOM()) return noop;\n\n  var handleClickOutsideMenu = function handleClickOutsideMenu(evt) {\n    if (evt.target instanceof HTMLElement) {\n      if (el.contains(evt.target)) return;\n      callback(evt);\n    }\n  };\n\n  var currentAnimationFrame;\n\n  var requestAnimationFrame = function requestAnimationFrame(evt) {\n    window.cancelAnimationFrame(currentAnimationFrame);\n    currentAnimationFrame = window.requestAnimationFrame(function () {\n      return callback(evt);\n    });\n    return currentAnimationFrame;\n  };\n\n  document.addEventListener('click', handleClickOutsideMenu, {\n    capture: true\n  });\n  window.addEventListener('resize', requestAnimationFrame, {\n    passive: true,\n    capture: true\n  });\n  document.addEventListener('scroll', requestAnimationFrame, {\n    passive: true,\n    capture: true\n  });\n  return function () {\n    document.removeEventListener('click', handleClickOutsideMenu, {\n      capture: true\n    });\n    window.removeEventListener('resize', requestAnimationFrame, {\n      capture: true\n    });\n    window.removeEventListener('scroll', requestAnimationFrame, {\n      capture: true\n    });\n  };\n};\nexport var useCloseOnDocumentEvents = function useCloseOnDocumentEvents(ref, cb) {\n  if (cb === void 0) {\n    cb = noop;\n  }\n\n  return React.useEffect(function () {\n    if (!canUseDOM()) return noop;\n    var el = ref.current;\n\n    if (el) {\n      return onGlobalEventsClose(el, cb);\n    }\n\n    return noop;\n  }, [ref, cb]);\n}; // eslint-disable-next-line @typescript-eslint/no-empty-function\n\nvar noop = function noop() {};","map":{"version":3,"sources":["../../src/use-close-on-document-events.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import React from 'react';\nimport { canUseDOM } from './can-use-dom';\nexport var onClickOutside = function (el, callback) {\n    if (!canUseDOM())\n        return noop;\n    var handleClick = function (evt) {\n        if (evt.target instanceof HTMLElement ||\n            evt.target instanceof HTMLDocument) {\n            if (el.contains(evt.target))\n                return;\n            callback(evt);\n        }\n    };\n    document.addEventListener('click', handleClick, { capture: true });\n    return function () {\n        document.removeEventListener('click', handleClick, {\n            capture: true\n        });\n    };\n};\nexport var useEvent = function (eventHandler) { return function (ref, cb) {\n    if (cb === void 0) { cb = noop; }\n    /* eslint-disable-next-line react-hooks/rules-of-hooks */\n    React.useEffect(function () {\n        if (!canUseDOM())\n            return noop;\n        var el = ref.current;\n        if (el) {\n            return eventHandler(el, cb);\n        }\n        return noop;\n    }, [ref, cb]);\n}; };\nexport var useClickOutside = function (ref, cb) {\n    if (cb === void 0) { cb = noop; }\n    return useEvent(onClickOutside)(ref, cb);\n};\nexport var onResize = function (_el, callback) {\n    if (!canUseDOM())\n        return noop;\n    var currentAnimationFrame;\n    var handleResize = function (evt) {\n        window.cancelAnimationFrame(currentAnimationFrame);\n        currentAnimationFrame = window.requestAnimationFrame(function () { return callback(evt); });\n        return currentAnimationFrame;\n    };\n    window.addEventListener('resize', handleResize, {\n        passive: true,\n        capture: true\n    });\n    return function () {\n        window.removeEventListener('resize', handleResize, {\n            capture: true\n        });\n    };\n};\nexport var useResize = function (ref, cb) {\n    if (cb === void 0) { cb = noop; }\n    return useEvent(onResize)(ref, cb);\n};\nexport var onScrollOutside = function (el, callback) {\n    if (!canUseDOM())\n        return noop;\n    var currentAnimationFrame;\n    var handleScroll = function (evt) {\n        window.cancelAnimationFrame(currentAnimationFrame);\n        if (evt.target instanceof HTMLElement ||\n            evt.target instanceof HTMLDocument) {\n            if (el.contains(evt.target))\n                return;\n            currentAnimationFrame = window.requestAnimationFrame(function () { return callback(evt); });\n        }\n        return currentAnimationFrame;\n    };\n    document.addEventListener('scroll', handleScroll, {\n        passive: true,\n        capture: true\n    });\n    return function () {\n        window.removeEventListener('scroll', handleScroll, {\n            capture: true\n        });\n    };\n};\nexport var useScrollOutside = function (ref, cb) {\n    if (cb === void 0) { cb = noop; }\n    return useEvent(onScrollOutside)(ref, cb);\n};\nexport var onGlobalEventsClose = function (el, callback) {\n    if (!canUseDOM())\n        return noop;\n    var handleClickOutsideMenu = function (evt) {\n        if (evt.target instanceof HTMLElement) {\n            if (el.contains(evt.target))\n                return;\n            callback(evt);\n        }\n    };\n    var currentAnimationFrame;\n    var requestAnimationFrame = function (evt) {\n        window.cancelAnimationFrame(currentAnimationFrame);\n        currentAnimationFrame = window.requestAnimationFrame(function () { return callback(evt); });\n        return currentAnimationFrame;\n    };\n    document.addEventListener('click', handleClickOutsideMenu, { capture: true });\n    window.addEventListener('resize', requestAnimationFrame, {\n        passive: true,\n        capture: true\n    });\n    document.addEventListener('scroll', requestAnimationFrame, {\n        passive: true,\n        capture: true\n    });\n    return function () {\n        document.removeEventListener('click', handleClickOutsideMenu, {\n            capture: true\n        });\n        window.removeEventListener('resize', requestAnimationFrame, {\n            capture: true\n        });\n        window.removeEventListener('scroll', requestAnimationFrame, {\n            capture: true\n        });\n    };\n};\nexport var useCloseOnDocumentEvents = function (ref, cb) {\n    if (cb === void 0) { cb = noop; }\n    return React.useEffect(function () {\n        if (!canUseDOM())\n            return noop;\n        var el = ref.current;\n        if (el) {\n            return onGlobalEventsClose(el, cb);\n        }\n        return noop;\n    }, [ref, cb]);\n};\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nvar noop = function () { };\n//# sourceMappingURL=use-close-on-document-events.js.map"]},"metadata":{},"sourceType":"module"}
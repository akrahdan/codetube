{"ast":null,"code":"import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Helmet}from'react-helmet';import{helmetJsonLdProp}from'react-schemaorg';import styles from'./styles/index.module.scss';import{projectCoursePath}from'libs/urlHelpers';import{Header}from'./Header';import{Supporting}from'./Supporting';import{Projects}from'./Projects';import{Syllabus}from'./Syllabus';import{CTASection}from'./CTASection';import{Recommendations}from'./Recommendations';import{SignupSection}from'portal/scenes/SignupSection';import{SiginSection}from'portal/scenes/SignupSection/SigninSection';import{SignupModal}from'portal/scenes/Modal/SignupModal';import{Payment}from'portal/scenes/Payments';import{Modal}from'portal/scenes/Modal';import{selectModal,showModal}from'state/modals/modalSlice';import{useAuth}from'store/useAuth';import{useAppSelector,useAppDispatch}from'store/hooks';import{useFetchProjectsQuery,useCartUpdateMutation}from'services/projects';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var PathMarketingPage=function PathMarketingPage(_ref){var isAnonymous=_ref.isAnonymous,isPaidLanding=_ref.isPaidLanding,showTrialCTA=_ref.showTrialCTA;var modal=useAppSelector(selectModal);var dispatch=useAppDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),pay=_useState2[0],setPay=_useState2[1];var _useFetchProjectsQuer=useFetchProjectsQuery(),projects=_useFetchProjectsQuer.data;var _useCartUpdateMutatio=useCartUpdateMutation(),_useCartUpdateMutatio2=_slicedToArray(_useCartUpdateMutatio,1),cartUpdate=_useCartUpdateMutatio2[0];var _useAuth=useAuth(),user=_useAuth.user;var leadProject=projects&&projects.find(function(element){return element.lead==true;});var ctaCallback=function ctaCallback(){if(user&&user.email){cartUpdate({project_id:leadProject.id}).then(function(res){if(res.data&&res.data.detail==\"added\"){setPay(!pay);}});}else{dispatch(showModal('login'));}};var completionTime=\"24hrs\";if(!leadProject)return null;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"main\",{className:styles.page,\"data-testid\":\"path-marketing-page\",children:[/*#__PURE__*/_jsx(Helmet,{script:[helmetJsonLdProp({'@context':'https://schema.org','@type':'Course',// name: path?.title,\n// description: path?.short_description,\nprovider:{'@type':'Organization',name:'Codefluent',sameAs:'https://www.codefluent.org/'},educationalCredentialAwarded:'Codefluent Certificate',timeRequired:completionTime,isAccessibleForFree:false})]}),/*#__PURE__*/_jsx(Header,{project:leadProject,ctaCallback:ctaCallback,isPaidLanding:isPaidLanding,showTrialCTA:showTrialCTA,useContentfulCTA:true,isAnonymous:isAnonymous}),/*#__PURE__*/_jsx(Supporting,{project:leadProject}),/*#__PURE__*/_jsx(Projects,{courses:leadProject.courses,linkCallback:function linkCallback(course){return projectCoursePath(course===null||course===void 0?void 0:course.slug);}}),/*#__PURE__*/_jsx(Syllabus,{pathId:\"\".concat(leadProject.id),tracks:leadProject.syllabuses,ctaCallback:ctaCallback,isPaidLanding:isPaidLanding,showTrialCTA:false,useContentfulCTA:false}),/*#__PURE__*/_jsx(CTASection,{pathId:\"\".concat(leadProject.id),ctaCallback:ctaCallback}),/*#__PURE__*/_jsx(Recommendations,{related:leadProject.related,pathId:\"\".concat(leadProject.id)})]}),modal=='signup'&&/*#__PURE__*/_jsx(SignupModal,{onClose:true,children:/*#__PURE__*/_jsx(SignupSection,{})}),modal=='login'&&/*#__PURE__*/_jsx(SignupModal,{children:/*#__PURE__*/_jsx(SiginSection,{})}),pay&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(Payment,{onClose:function onClose(){return setPay(!pay);}})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Paths/PathMarketingPage/PathMarketingPage.tsx"],"names":["React","useState","Helmet","helmetJsonLdProp","styles","projectCoursePath","Header","Supporting","Projects","Syllabus","CTASection","Recommendations","SignupSection","SiginSection","SignupModal","Payment","Modal","selectModal","showModal","useAuth","useAppSelector","useAppDispatch","useFetchProjectsQuery","useCartUpdateMutation","PathMarketingPage","isAnonymous","isPaidLanding","showTrialCTA","modal","dispatch","pay","setPay","projects","data","cartUpdate","user","leadProject","find","element","lead","ctaCallback","email","project_id","id","then","res","detail","completionTime","page","provider","name","sameAs","educationalCredentialAwarded","timeRequired","isAccessibleForFree","courses","course","slug","syllabuses","related"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useSelector } from 'react-redux';\nimport { helmetJsonLdProp } from 'react-schemaorg';\nimport { Course } from 'schema-dts';\nimport styles from './styles/index.module.scss';\nimport { projectCoursePath } from 'libs/urlHelpers';\nimport { Header } from './Header';\nimport { Supporting } from './Supporting';\nimport { Projects } from './Projects';\n\nimport { Syllabus } from './Syllabus';\nimport { CTASection } from './CTASection';\nimport { Recommendations } from './Recommendations';\nimport { SignupSection } from 'portal/scenes/SignupSection';\nimport { SiginSection } from 'portal/scenes/SignupSection/SigninSection';\nimport { SignupModal } from 'portal/scenes/Modal/SignupModal';\nimport { Payment } from 'portal/scenes/Payments'\nimport { Modal } from 'portal/scenes/Modal';\nimport { CardGrid } from 'portal/components/CardGrid';\nimport { selectModal, showModal } from 'state/modals/modalSlice';\nimport { useAuth } from 'store/useAuth';\nimport { useAppSelector, useAppDispatch } from 'store/hooks';\nimport { useFetchProjectsQuery, useCartUpdateMutation, Cart } from 'services/projects';\n\n\nexport type PageProps = {\n  fetchPathAndTrackData?: () => void;\n  isPaidLanding: boolean;\n  // path: Path;\n  // location: RouteLocation;\n  isAnonymous: boolean;\n  showTrialCTA: boolean;\n\n};\n\nexport const PathMarketingPage: React.FC<PageProps> = ({\n  isAnonymous,\n  isPaidLanding,\n  showTrialCTA\n}) => {\n\n  const modal = useAppSelector(selectModal)\n  const dispatch = useAppDispatch()\n  const [pay, setPay] = useState(false);\n  const { data: projects } = useFetchProjectsQuery()\n  const [ cartUpdate ] = useCartUpdateMutation()\n  const { user} = useAuth();\n  const leadProject = projects && projects.find(element => element.lead == true)\n\n  const ctaCallback = () => {\n    if(user && user.email) {\n      cartUpdate({\n        project_id: leadProject.id\n      }).then((res: { data: Cart}) => {\n        if(res.data && res.data.detail == \"added\") {\n          setPay(!pay)\n        }\n      })\n    }\n    else {\n      dispatch(showModal('login'))\n    }\n   \n    \n  };\n  const completionTime = \"24hrs\"\n  if (!leadProject) return null\n\n  return (\n    <>\n      <main className={styles.page} data-testid=\"path-marketing-page\">\n        <Helmet\n          script={[\n            helmetJsonLdProp<Course>({\n              '@context': 'https://schema.org',\n              '@type': 'Course',\n              // name: path?.title,\n              // description: path?.short_description,\n              provider: {\n                '@type': 'Organization',\n                name: 'Codefluent',\n                sameAs: 'https://www.codefluent.org/',\n              },\n              educationalCredentialAwarded: 'Codefluent Certificate',\n              timeRequired: completionTime,\n              isAccessibleForFree: false,\n            }),\n          ]}\n        />\n        <Header\n          project={leadProject}\n          ctaCallback={ctaCallback}\n          isPaidLanding={isPaidLanding}\n          showTrialCTA={showTrialCTA}\n          useContentfulCTA={true}\n          isAnonymous={isAnonymous}\n        />\n        <Supporting project={leadProject} />\n\n        <Projects \n          courses={leadProject.courses}\n          linkCallback={(course) => projectCoursePath(course?.slug)}\n\n        />\n\n        <Syllabus\n          pathId={`${leadProject.id}`}\n          tracks={leadProject.syllabuses}\n          ctaCallback={ctaCallback}\n          isPaidLanding={isPaidLanding}\n          showTrialCTA={false}\n          useContentfulCTA={false}\n        />\n\n        <CTASection\n          pathId={`${leadProject.id}`}\n          ctaCallback={ctaCallback}\n\n        />\n        <Recommendations related={leadProject.related} pathId={`${leadProject.id}`} />\n\n\n      </main>\n\n      {modal == 'signup' && <SignupModal onClose>\n        <SignupSection />\n      </SignupModal>}\n\n      {modal == 'login' && <SignupModal >\n        <SiginSection />\n      </SignupModal>}\n\n      {pay && <Modal>\n        <Payment  onClose={() => setPay(!pay)}/>\n      </Modal>}\n\n     \n\n   \n\n\n\n    </>\n  );\n\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{getSDK}from'./get-sdk';import{KNOWLEDGE_OWL_URL}from'../constants';import{collapseFullscreen}from'../fullscreen-helper';var knowledgeOwlPayloadToString=function knowledgeOwlPayloadToString(payload){return Object.keys(payload).filter(function(key){return payload[key]!==undefined;}).reduce(function(prev,curr){prev.push(curr+': '+payload[curr]);return prev;},[]).join('\\n');};export var initKnowledgeOwl=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var KnowledgeOwl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getSDK(KNOWLEDGE_OWL_URL,'KnowledgeOwl');case 2:KnowledgeOwl=_context.sent;KnowledgeOwl.init({disableTriggerElement:true});return _context.abrupt(\"return\",KnowledgeOwl);case 5:case\"end\":return _context.stop();}}},_callee);}));return function initKnowledgeOwl(){return _ref.apply(this,arguments);};}();var KnowledgeOwl;var startKnowledgOwl=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return initKnowledgeOwl();case 2:KnowledgeOwl=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function startKnowledgOwl(){return _ref2.apply(this,arguments);};}();startKnowledgOwl();export var displayFeedbackForm=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(props){var payload,details,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(KnowledgeOwl){_context3.next=4;break;}_context3.next=3;return startKnowledgOwl();case 3:KnowledgeOwl=_context3.sent;case 4:payload={autoplay:props.userAutoplaySetting,bufferedTime:props.bufferedTime,bufferedPercent:props.bufferedTime/props.duration*100,courseTitle:props.courseTitle,clipTitle:props.clipTitle,clipId:props.clipId,closedCaptioningEnabled:props.closedCaptioningEnabled,closedCaptioningLanguage:props.closedCaptioningLanguage.name,currentResolution:props.currentResolution.height,currentTime:props.time,currentSrc:props.urls[props.currentUrlIndex].url,date:new Date().toGMTString(),embeddablePlayer:true,mediaType:props.mediaType,playbackSpeed:props.playbackSpeed,playedPercent:props.time/props.duration*100,playing:props.playing?props.playing:false,sessionId:props.sessionId,subtitle:props.subtitle,title:props.title,versions:JSON.stringify(props.versions),userAgent:navigator.userAgent,volume:props.volume};details='\\n---- Enter your message above ----\\n'+knowledgeOwlPayloadToString(payload);data={initialForm:'support-now',fields:{custom_contact_field_0:'VideoNotes',details:details,requester:''}};collapseFullscreen();window.dispatchEvent(new window.CustomEvent('knowledge_owl_show',{detail:data}));case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function displayFeedbackForm(_x){return _ref3.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/utilities/feedback.js"],"names":["getSDK","KNOWLEDGE_OWL_URL","collapseFullscreen","knowledgeOwlPayloadToString","payload","Object","keys","filter","key","undefined","reduce","prev","curr","push","join","initKnowledgeOwl","KnowledgeOwl","init","disableTriggerElement","startKnowledgOwl","displayFeedbackForm","props","autoplay","userAutoplaySetting","bufferedTime","bufferedPercent","duration","courseTitle","clipTitle","clipId","closedCaptioningEnabled","closedCaptioningLanguage","name","currentResolution","height","currentTime","time","currentSrc","urls","currentUrlIndex","url","date","Date","toGMTString","embeddablePlayer","mediaType","playbackSpeed","playedPercent","playing","sessionId","subtitle","title","versions","JSON","stringify","userAgent","navigator","volume","details","data","initialForm","fields","custom_contact_field_0","requester","window","dispatchEvent","CustomEvent","detail"],"mappings":"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","sourcesContent":["import { getSDK } from './get-sdk'\nimport { KNOWLEDGE_OWL_URL } from '../constants'\nimport { collapseFullscreen } from '../fullscreen-helper'\n\nconst knowledgeOwlPayloadToString = payload => {\n  return Object.keys(payload)\n    .filter(key => payload[key] !== undefined)\n    .reduce(function(prev, curr) {\n      prev.push(curr + ': ' + payload[curr])\n      return prev\n    }, [])\n    .join('\\n')\n}\n\nexport const initKnowledgeOwl = async () => {\n  const KnowledgeOwl = await getSDK(KNOWLEDGE_OWL_URL, 'KnowledgeOwl')\n  KnowledgeOwl.init({ disableTriggerElement: true })\n  return KnowledgeOwl\n}\n\nlet KnowledgeOwl\n\nconst startKnowledgOwl = async () => {\n  KnowledgeOwl = await initKnowledgeOwl()\n}\n\nstartKnowledgOwl()\n\nexport const displayFeedbackForm = async props => {\n  if (!KnowledgeOwl) KnowledgeOwl = await startKnowledgOwl()\n\n  let payload = {\n    autoplay: props.userAutoplaySetting,\n    bufferedTime: props.bufferedTime,\n    bufferedPercent: (props.bufferedTime / props.duration) * 100,\n    courseTitle: props.courseTitle,\n    clipTitle: props.clipTitle,\n    clipId: props.clipId,\n    closedCaptioningEnabled: props.closedCaptioningEnabled,\n    closedCaptioningLanguage: props.closedCaptioningLanguage.name,\n    currentResolution: props.currentResolution.height,\n    currentTime: props.time,\n    currentSrc: props.urls[props.currentUrlIndex].url,\n    date: new Date().toGMTString(),\n    embeddablePlayer: true,\n    mediaType: props.mediaType,\n    playbackSpeed: props.playbackSpeed,\n    playedPercent: (props.time / props.duration) * 100,\n    playing: props.playing ? props.playing : false,\n    sessionId: props.sessionId,\n    subtitle: props.subtitle,\n    title: props.title,\n    versions: JSON.stringify(props.versions),\n    userAgent: navigator.userAgent,\n    volume: props.volume,\n  }\n\n  let details = '\\n---- Enter your message above ----\\n' + knowledgeOwlPayloadToString(payload)\n\n  let data = {\n    initialForm: 'support-now',\n    fields: {\n      custom_contact_field_0: 'VideoNotes',\n      details,\n      requester: '',\n    },\n  }\n\n  collapseFullscreen()\n\n  window.dispatchEvent(new window.CustomEvent('knowledge_owl_show', { detail: data }))\n}\n"]},"metadata":{},"sourceType":"module"}
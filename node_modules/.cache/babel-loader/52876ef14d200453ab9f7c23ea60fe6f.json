{"ast":null,"code":"import _defineProperty from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import classNames from'classnames';import React,{Component}from'react';import{connect}from'react-redux';import{clusterMarkers}from'../marker/marker-clustering';import{play as _play,pause as _pause,seekStart,seekEnd,setTime as _setTime,seek as _seek}from'state/player/playerSlice';// import * as actions from '../../actions'\nimport{formatTime}from'../utilities/format-time';import css from'./progress-bar.module.css';import{InteractionModes}from'../constants';import Marker from'../marker/marker';import Slider from'../slider/slider';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ProgressBar=/*#__PURE__*/function(_Component){_inherits(ProgressBar,_Component);var _super=_createSuper(ProgressBar);function ProgressBar(props){var _this;_classCallCheck(this,ProgressBar);_this=_super.call(this,props);_this.setTime=function(ratio){var _this$props=_this.props,setTime=_this$props.setTime,duration=_this$props.duration;setTime&&setTime(Math.floor(ratio*duration));};_this.handleHoverChange=function(_ref){var ratio=_ref.ratio,active=_ref.active;var duration=_this.props.duration;var hoveringPercentage=_this.state.hoveringPercentage;var value=ratio||hoveringPercentage/100;var hoveringTime=formatTime(value*duration);_this.setState({hoveringPercentage:value*100,hovering:active,hoveringTime:hoveringTime});};_this.getClustersWithLeftOffset=function(markers){var _this$props2=_this.props,duration=_this$props2.duration,layout=_this$props2.layout;var clusters=clusterMarkers(markers,duration,layout);return clusters.map(function(c){return _objectSpread(_objectSpread({},c),{},{leftOffset:Math.floor(c.timeIndex/duration*100)});});};_this.renderMarkers=function(markers,visible){var clusters=_this.getClustersWithLeftOffset(markers);return clusters.map(function(_ref2){var timeIndex=_ref2.timeIndex,markers=_ref2.markers,leftOffset=_ref2.leftOffset;return/*#__PURE__*/_jsx(Marker,{timeIndex:timeIndex,markers:markers,leftOffset:leftOffset,isVisible:visible},markers[0].id);});};_this.state={hovering:false,dragging:false,hoveringTime:null};return _this;}_createClass(ProgressBar,[{key:\"currentPercentage\",get:function get(){var _this$props3=this.props,time=_this$props3.time,duration=_this$props3.duration;if(duration<=0)return 0;return time/(duration-1);}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,isDragging=_this$state.isDragging,hovering=_this$state.hovering,hoveringPercentage=_this$state.hoveringPercentage,hoveringTime=_this$state.hoveringTime,percentage=_this$state.percentage,dragging=_this$state.dragging,startRatio=_this$state.startRatio,endRatio=_this$state.endRatio;var _this$props4=this.props,visible=_this$props4.visible,setTime=_this$props4.setTime,duration=_this$props4.duration,bufferedTime=_this$props4.bufferedTime,interactionMode=_this$props4.interactionMode,time=_this$props4.time,seek=_this$props4.seek,markers=_this$props4.markers;var ariaValueText=\"\".concat(formatTime(time),\" of \").concat(formatTime(duration));var bars=[{value:1,fillStyle:css.progressBar,key:'background-bar'},{value:duration?Math.ceil(bufferedTime)/duration:0,fillStyle:css.bufferedTime,key:'buffering-bar'}];var active=visible&&(hovering||dragging);var interactiveHovering=(interactionMode===InteractionModes.TOUCH||interactionMode===InteractionModes.KEYBOARD)&&visible;return/*#__PURE__*/_jsxs(\"div\",{className:classNames(css.progressBarWrapper,_defineProperty({},css.hidden,!visible)),children:[/*#__PURE__*/_jsx(\"div\",{style:{left:\"\".concat(hoveringPercentage,\"%\")},className:classNames(css.timestamp,_defineProperty({},css.timestampFadeIn,active)),children:hoveringTime}),markers&&this.renderMarkers(markers,visible),/*#__PURE__*/_jsx(Slider,{ariaLabel:\"Seek slider\",ariaValueText:ariaValueText,step:getStep(duration,3),hovering:interactiveHovering,verticalAlign:80,className:classNames(css.slider,_defineProperty({},css.hiddenSlider,!visible)),value:this.currentPercentage,onChange:function onChange(ratio){_this2.setTime(ratio);_this2.setState({endRatio:ratio});},onChangeStart:function onChangeStart(ratio){var _this2$props=_this2.props,currentTime=_this2$props.time,onSeekStart=_this2$props.onSeekStart,pause=_this2$props.pause,playing=_this2$props.playing;_this2.setTime(ratio);onSeekStart&&onSeekStart();pause&&pause(false);_this2.setState({dragging:true,startRatio:currentTime/duration,endRatio:ratio,playing:playing});},onChangeEnd:function onChangeEnd(){var _this2$props2=_this2.props,onSeekEnd=_this2$props2.onSeekEnd,play=_this2$props2.play;var _this2$state=_this2.state,startRatio=_this2$state.startRatio,endRatio=_this2$state.endRatio,playing=_this2$state.playing;onSeekEnd&&onSeekEnd();seek&&seek({startRatio:startRatio,endRatio:endRatio});playing&&play(false);_this2.setState({dragging:false,startRatio:null,endRatio:null});},onHoverChange:this.handleHoverChange,bars:bars,barClass:css.barClass,markerClusters:markers&&this.getClustersWithLeftOffset(markers)})]});}}]);return ProgressBar;}(Component);function getStep(duration,seconds){return seconds/duration;}export default connect(function(state){return{bufferedTime:state.player.bufferedTime,duration:state.player.duration,time:state.player.time,visible:state.player.visible,interactionMode:state.player.interactionMode,markers:state.player.markers,clusterInterval:state.player.clusterInterval,layout:state.player.layout,playing:state.player.playing};},function(dispatch){return _defineProperty({setTime:function setTime(payload){return dispatch(_setTime(payload));},seek:function seek(payload){return dispatch(_seek(payload));},onSeekStart:function onSeekStart(payload){return dispatch(seekStart(payload));},onSeekEnd:function onSeekEnd(payload){return dispatch(seekEnd(payload));},pause:function pause(payload){return dispatch(_pause(payload));},play:function play(payload){return dispatch(_play(payload));}},\"setTime\",function setTime(payload){return dispatch(_setTime(payload));});})(ProgressBar);","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/progress-bar/progress-bar.js"],"names":["classNames","React","Component","connect","clusterMarkers","play","pause","seekStart","seekEnd","setTime","seek","formatTime","css","InteractionModes","Marker","Slider","ProgressBar","props","ratio","duration","Math","floor","handleHoverChange","active","hoveringPercentage","state","value","hoveringTime","setState","hovering","getClustersWithLeftOffset","markers","layout","clusters","map","c","leftOffset","timeIndex","renderMarkers","visible","id","dragging","time","isDragging","percentage","startRatio","endRatio","bufferedTime","interactionMode","ariaValueText","bars","fillStyle","progressBar","key","ceil","interactiveHovering","TOUCH","KEYBOARD","progressBarWrapper","hidden","left","timestamp","timestampFadeIn","getStep","slider","hiddenSlider","currentPercentage","currentTime","onSeekStart","playing","onSeekEnd","barClass","seconds","player","clusterInterval","dispatch","payload"],"mappings":"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","sourcesContent":["import classNames from 'classnames'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { clusterMarkers } from '../marker/marker-clustering'\nimport { play, pause, seekStart, seekEnd, setTime, seek } from 'state/player/playerSlice'\n// import * as actions from '../../actions'\nimport { formatTime } from '../utilities/format-time'\nimport css from './progress-bar.module.css'\nimport { InteractionModes } from '../constants'\nimport Marker from '../marker/marker'\n\nimport Slider from '../slider/slider'\n\nexport class ProgressBar extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = { hovering: false, dragging: false, hoveringTime: null }\n  }\n\n  get currentPercentage() {\n    const { time, duration } = this.props\n\n    if (duration <= 0) return 0\n\n    return time / (duration-1)\n  }\n\n  setTime = ratio => {\n    const { setTime, duration } = this.props\n    setTime && setTime(Math.floor(ratio * duration))\n  }\n\n  handleHoverChange = ({ ratio, active }) => {\n    const { duration } = this.props\n    const { hoveringPercentage } = this.state\n\n    const value = ratio || hoveringPercentage / 100\n    const hoveringTime = formatTime(value * duration)\n\n    this.setState({ hoveringPercentage: value * 100, hovering: active, hoveringTime })\n  }\n\n  getClustersWithLeftOffset = markers => {\n    const { duration, layout } = this.props\n\n    const clusters = clusterMarkers(markers, duration, layout)\n    return clusters.map(c => ({\n      ...c,\n      leftOffset: Math.floor((c.timeIndex / duration) * 100),\n    }))\n  }\n\n  renderMarkers = (markers, visible) => {\n    const clusters = this.getClustersWithLeftOffset(markers)\n    return clusters.map(({ timeIndex, markers, leftOffset }) => {\n      return (\n        <Marker\n          timeIndex={timeIndex}\n          markers={markers}\n          key={markers[0].id}\n          leftOffset={leftOffset}\n          isVisible={visible}\n        />\n      )\n    })\n  }\n\n  render() {\n    const {\n      isDragging,\n      hovering,\n      hoveringPercentage,\n      hoveringTime,\n      percentage,\n      dragging,\n      startRatio,\n      endRatio,\n    } = this.state\n    const { visible, setTime, duration, bufferedTime, interactionMode, time, seek, markers } = this.props\n    const ariaValueText = `${formatTime(time)} of ${formatTime(duration)}`\n\n    const bars = [\n      {\n        value: 1,\n        fillStyle: css.progressBar,\n        key: 'background-bar',\n      },\n      {\n        value: duration ? Math.ceil(bufferedTime) / duration : 0,\n        fillStyle: css.bufferedTime,\n        key: 'buffering-bar',\n      },\n    ]\n\n    const active = visible && (hovering || dragging)\n    const interactiveHovering =\n      (interactionMode === InteractionModes.TOUCH || interactionMode === InteractionModes.KEYBOARD) && visible\n\n    return (\n      <div className={classNames(css.progressBarWrapper, { [css.hidden]: !visible })}>\n        <div\n          style={{ left: `${hoveringPercentage}%` }}\n          className={classNames(css.timestamp, {\n            [css.timestampFadeIn]: active,\n          })}\n        >\n          {hoveringTime}\n        </div>\n        {markers && this.renderMarkers(markers, visible)}\n        <Slider\n          ariaLabel=\"Seek slider\"\n          ariaValueText={ariaValueText}\n          step={getStep(duration, 3)}\n          hovering={interactiveHovering}\n          verticalAlign={80}\n          className={classNames(css.slider, { [css.hiddenSlider]: !visible })}\n          value={this.currentPercentage}\n          onChange={ratio => {\n            this.setTime(ratio)\n\n            this.setState({ endRatio: ratio })\n          }}\n          onChangeStart={ratio => {\n            const { time: currentTime, onSeekStart, pause, playing } = this.props\n\n            this.setTime(ratio)\n\n            onSeekStart && onSeekStart()\n            pause && pause(false)\n\n            this.setState({ dragging: true, startRatio: currentTime / duration, endRatio: ratio, playing })\n          }}\n          onChangeEnd={() => {\n            const { onSeekEnd, play } = this.props\n            const { startRatio, endRatio, playing } = this.state\n\n            onSeekEnd && onSeekEnd()\n\n            seek && seek({ startRatio, endRatio })\n            playing && play(false)\n\n            this.setState({ dragging: false, startRatio: null, endRatio: null })\n          }}\n          onHoverChange={this.handleHoverChange}\n          bars={bars}\n          barClass={css.barClass}\n          markerClusters={markers && this.getClustersWithLeftOffset(markers)}\n        />\n      </div>\n    )\n  }\n}\n\nfunction getStep(duration, seconds) {\n  return seconds / duration\n}\n\nexport default connect(\n  state => ({\n    bufferedTime: state.player.bufferedTime,\n    duration: state.player.duration,\n    time: state.player.time,\n    visible: state.player.visible,\n    interactionMode: state.player.interactionMode,\n    markers: state.player.markers,\n    clusterInterval: state.player.clusterInterval,\n    layout: state.player.layout,\n    playing: state.player.playing\n  }),\n  dispatch => ({\n    setTime: payload => dispatch(setTime(payload)),\n    seek: payload => dispatch(seek(payload)),\n    onSeekStart: payload => dispatch(seekStart(payload)),\n    onSeekEnd: payload => dispatch(seekEnd(payload)),\n    pause: (payload) => dispatch(pause(payload)),\n    play: (payload) => dispatch(play(payload)),\n    setTime: payload => dispatch(setTime(payload)),\n   \n  })\n)(ProgressBar)\n"]},"metadata":{},"sourceType":"module"}
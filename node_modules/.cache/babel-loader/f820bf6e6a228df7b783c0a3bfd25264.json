{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/components/gamut-overrides/Popover/index.tsx\",\n    _s = $RefreshSig$();\n\nimport { BodyPortal, FocusTrap, Pattern } from '@codecademy/gamut';\nimport styled from '@emotion/styled';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useWindowScroll, useWindowSize } from 'react-use';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst transform = {\n  right: 'translateX(-100%)',\n  left: 'translateX(0%)',\n  above: 'translateY(-100%)',\n  below: 'translateY(0%)'\n};\nconst PopoverContainer = styled.div`\n  position: fixed;\n  display: flex;\n  transform: ${({\n  position,\n  align\n}) => position && align && `${transform[position]} ${transform[align]}`};\n`;\n_c = PopoverContainer;\nconst RaisedDiv = styled.div`\n  z-index: 1;\n  border-radius: 2px;\n  border: 1px ${({\n  outline\n}) => outline ? 'solid' : 'none'}\n    ${({\n  theme\n}) => theme.colors.secondary};\n  background-color: ${({\n  theme\n}) => theme.colors.white};\n  ${({\n  outline\n}) => !outline && 'box-shadow: 0 0 16px rgba(0, 0, 0, 0.1), 0 0 24px rgba(0, 0, 0, 0.15)'};\n`;\n_c2 = RaisedDiv;\nconst Beak = styled.div`\n  width: 20px;\n  height: 20px;\n  transform: rotate(45deg);\n  border-${({\n  position\n}) => position === 'below' ? 'left' : 'right'}:\n    1px\n    ${({\n  outline\n}) => outline ? 'solid' : 'none'}\n    ${({\n  theme\n}) => theme.colors.secondary};\n  border-${({\n  position\n}) => position === 'below' ? 'top' : 'bottom'}:\n    1px\n    ${({\n  outline\n}) => outline ? 'solid' : 'none'}\n    ${({\n  theme\n}) => theme.colors.secondary};\n  background-color: ${({\n  theme\n}) => theme.colors.white};\n  position: absolute;\n  left: ${({\n  beak\n}) => beak === 'left' && '25px'};\n  right: ${({\n  beak\n}) => beak === 'right' && '25px'};\n  top: ${({\n  position\n}) => position === 'below' ? '-10px' : 'calc(100% - 10px);'};\n`;\n_c3 = Beak;\nconst PatternContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  border-radius: 2px;\n  overflow: hidden;\n  background-color: ${({\n  theme\n}) => theme.colors.white};\n  position: absolute;\n  top: ${({\n  position\n}) => position === 'below' ? '8px' : '-8px'};\n  left: ${({\n  align\n}) => align === 'left' ? '8px' : '-8px'};\n`;\n_c4 = PatternContainer;\nexport const Popover = ({\n  children,\n  className,\n  align = 'left',\n  verticalOffset = 20,\n  horizontalOffset = 0,\n  outline = false,\n  position = 'below',\n  beak,\n  isOpen,\n  onRequestClose,\n  targetRef,\n  pattern\n}) => {\n  _s();\n\n  const [targetRect, setTargetRect] = useState();\n  const [isInViewport, setIsInViewport] = useState(true);\n  const {\n    width,\n    height\n  } = useWindowSize();\n  const {\n    x,\n    y\n  } = useWindowScroll();\n  const getPopoverPosition = useCallback(() => {\n    if (!targetRect) return {};\n    const positions = {\n      above: Math.round(targetRect.top - verticalOffset),\n      below: Math.round(targetRect.top + targetRect.height + verticalOffset)\n    };\n    const alignments = {\n      right: Math.round(window.scrollX + targetRect.right + horizontalOffset),\n      left: Math.round(window.scrollX + targetRect.left - horizontalOffset)\n    };\n    return {\n      top: positions[position],\n      left: alignments[align]\n    };\n  }, [targetRect, verticalOffset, horizontalOffset, align, position]);\n  useEffect(() => {\n    var _targetRef$current;\n\n    setTargetRect(targetRef === null || targetRef === void 0 ? void 0 : (_targetRef$current = targetRef.current) === null || _targetRef$current === void 0 ? void 0 : _targetRef$current.getBoundingClientRect());\n  }, [targetRef, isOpen, width, height, x, y]);\n  useEffect(() => {\n    if (targetRect) {\n      const inView = targetRect.top >= 0 && targetRect.left >= 0 && targetRect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && targetRect.right <= (window.innerWidth || document.documentElement.clientWidth);\n      setIsInViewport(inView);\n    }\n\n    if (!isInViewport) onRequestClose === null || onRequestClose === void 0 ? void 0 : onRequestClose();\n  }, [targetRect, isInViewport, onRequestClose]);\n  const handleClickOutside = useCallback(e => {\n    var _targetRef$current2;\n\n    /**\n     * Allows targetRef to be or contain a button that toggles the popover open and closed.\n     * Without this check it would toggle closed then back open immediately.\n     */\n    if ((_targetRef$current2 = targetRef.current) === null || _targetRef$current2 === void 0 ? void 0 : _targetRef$current2.contains(e.target)) return;\n    onRequestClose === null || onRequestClose === void 0 ? void 0 : onRequestClose();\n  }, [onRequestClose, targetRef]);\n  const popoverRef = useRef(null);\n  if (!isOpen || !targetRef) return null;\n  return /*#__PURE__*/_jsxDEV(BodyPortal, {\n    children: /*#__PURE__*/_jsxDEV(FocusTrap, {\n      allowPageInteraction: true,\n      onClickOutside: handleClickOutside,\n      onEscapeKey: onRequestClose,\n      children: /*#__PURE__*/_jsxDEV(PopoverContainer, {\n        position: position,\n        align: align,\n        ref: popoverRef,\n        className: className,\n        style: getPopoverPosition(),\n        \"data-testid\": \"popover-content-container\",\n        tabIndex: -1,\n        children: [/*#__PURE__*/_jsxDEV(RaisedDiv, {\n          outline: outline,\n          children: [beak && /*#__PURE__*/_jsxDEV(Beak, {\n            outline: outline,\n            position: position,\n            beak: beak,\n            \"data-testid\": \"popover-beak\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 15\n          }, this), children]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), pattern && /*#__PURE__*/_jsxDEV(PatternContainer, {\n          position: position,\n          align: align,\n          children: /*#__PURE__*/_jsxDEV(Pattern, {\n            \"data-testid\": \"popover-pattern\",\n            name: pattern,\n            fit: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 189,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Popover, \"vwLAtugg1ECavQ69JTtWEfseoRo=\", false, function () {\n  return [useWindowSize, useWindowScroll];\n});\n\n_c5 = Popover;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"PopoverContainer\");\n$RefreshReg$(_c2, \"RaisedDiv\");\n$RefreshReg$(_c3, \"Beak\");\n$RefreshReg$(_c4, \"PatternContainer\");\n$RefreshReg$(_c5, \"Popover\");","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/components/gamut-overrides/Popover/index.tsx"],"names":["BodyPortal","FocusTrap","Pattern","styled","React","useCallback","useEffect","useRef","useState","useWindowScroll","useWindowSize","transform","right","left","above","below","PopoverContainer","div","position","align","RaisedDiv","outline","theme","colors","secondary","white","Beak","beak","PatternContainer","Popover","children","className","verticalOffset","horizontalOffset","isOpen","onRequestClose","targetRef","pattern","targetRect","setTargetRect","isInViewport","setIsInViewport","width","height","x","y","getPopoverPosition","positions","Math","round","top","alignments","window","scrollX","current","getBoundingClientRect","inView","bottom","innerHeight","document","documentElement","clientHeight","innerWidth","clientWidth","handleClickOutside","e","contains","target","popoverRef"],"mappings":"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","sourcesContent":["import { BodyPortal, FocusTrap, Pattern, PatternName } from '@codecademy/gamut';\nimport styled from '@emotion/styled';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useWindowScroll, useWindowSize } from 'react-use';\n\ntype StyleProps = {\n  outline?: boolean;\n  position?: 'above' | 'below';\n  beak?: 'right' | 'left';\n  align?: 'right' | 'left';\n};\n\nconst transform = {\n  right: 'translateX(-100%)',\n  left: 'translateX(0%)',\n  above: 'translateY(-100%)',\n  below: 'translateY(0%)',\n};\n\nconst PopoverContainer = styled.div<StyleProps>`\n  position: fixed;\n  display: flex;\n  transform: ${({ position, align }) =>\n    position && align && `${transform[position]} ${transform[align]}`};\n`;\n\nconst RaisedDiv = styled.div<StyleProps>`\n  z-index: 1;\n  border-radius: 2px;\n  border: 1px ${({ outline }) => (outline ? 'solid' : 'none')}\n    ${({ theme }) => theme.colors.secondary};\n  background-color: ${({ theme }) => theme.colors.white};\n  ${({ outline }) =>\n    !outline &&\n    'box-shadow: 0 0 16px rgba(0, 0, 0, 0.1), 0 0 24px rgba(0, 0, 0, 0.15)'};\n`;\n\nconst Beak = styled.div<StyleProps>`\n  width: 20px;\n  height: 20px;\n  transform: rotate(45deg);\n  border-${({ position }) => (position === 'below' ? 'left' : 'right')}:\n    1px\n    ${({ outline }) => (outline ? 'solid' : 'none')}\n    ${({ theme }) => theme.colors.secondary};\n  border-${({ position }) => (position === 'below' ? 'top' : 'bottom')}:\n    1px\n    ${({ outline }) => (outline ? 'solid' : 'none')}\n    ${({ theme }) => theme.colors.secondary};\n  background-color: ${({ theme }) => theme.colors.white};\n  position: absolute;\n  left: ${({ beak }) => beak === 'left' && '25px'};\n  right: ${({ beak }) => beak === 'right' && '25px'};\n  top: ${({ position }) =>\n    position === 'below' ? '-10px' : 'calc(100% - 10px);'};\n`;\n\nconst PatternContainer = styled.div<StyleProps>`\n  width: 100%;\n  height: 100%;\n  border-radius: 2px;\n  overflow: hidden;\n  background-color: ${({ theme }) => theme.colors.white};\n  position: absolute;\n  top: ${({ position }) => (position === 'below' ? '8px' : '-8px')};\n  left: ${({ align }) => (align === 'left' ? '8px' : '-8px')};\n`;\n\nexport type PopoverProps = {\n  children: React.ReactElement<any>;\n  className?: string;\n  /**\n   * Which vertical edge of the source component to align against.\n   */\n  align?: 'left' | 'right';\n  /**\n   * Number of pixels to offset the popover vertically from the source component.\n   */\n  verticalOffset?: number;\n  /**\n   * Number of pixels to offset the popover horizontally from the source component.\n   */\n  horizontalOffset?: number;\n  /**\n   * Whether to add outline style (i.e. used for dropdowns and coachmarks).\n   */\n  outline?: boolean;\n  /**\n   * Which horizontal edge of the source componet to align against.\n   */\n  position?: 'above' | 'below';\n  /**\n   * Which side to position the beak. If not provided, beak will not be rendered.\n   */\n  beak?: 'left' | 'right';\n  /**\n   * Whether the popover is rendered.\n   */\n  isOpen: boolean;\n  /**\n   * Whether to add a pattern background.\n   */\n  pattern?: PatternName;\n  /**\n   * Called when the Popover requests to be closed,\n   * this could be due to clicking outside of the popover, or by clicking the escape key.\n   */\n  onRequestClose?: () => void;\n  /**\n   * The target element around which the popover will be positioned.\n   */\n  targetRef: React.RefObject<\n    Pick<HTMLDivElement, 'getBoundingClientRect' | 'contains'>\n  >;\n};\n\nexport const Popover: React.FC<PopoverProps> = ({\n  children,\n  className,\n  align = 'left',\n  verticalOffset = 20,\n  horizontalOffset = 0,\n  outline = false,\n  position = 'below',\n  beak,\n  isOpen,\n  onRequestClose,\n  targetRef,\n  pattern,\n}) => {\n  const [targetRect, setTargetRect] = useState<DOMRect>();\n  const [isInViewport, setIsInViewport] = useState(true);\n  const { width, height } = useWindowSize();\n  const { x, y } = useWindowScroll();\n\n  const getPopoverPosition = useCallback(() => {\n    if (!targetRect) return {};\n\n    const positions = {\n      above: Math.round(targetRect.top - verticalOffset),\n      below: Math.round(targetRect.top + targetRect.height + verticalOffset),\n    };\n    const alignments = {\n      right: Math.round(window.scrollX + targetRect.right + horizontalOffset),\n      left: Math.round(window.scrollX + targetRect.left - horizontalOffset),\n    };\n    return {\n      top: positions[position],\n      left: alignments[align],\n    };\n  }, [targetRect, verticalOffset, horizontalOffset, align, position]);\n\n  useEffect(() => {\n    setTargetRect(targetRef?.current?.getBoundingClientRect());\n  }, [targetRef, isOpen, width, height, x, y]);\n\n  useEffect(() => {\n    if (targetRect) {\n      const inView =\n        targetRect.top >= 0 &&\n        targetRect.left >= 0 &&\n        targetRect.bottom <=\n          (window.innerHeight || document.documentElement.clientHeight) &&\n        targetRect.right <=\n          (window.innerWidth || document.documentElement.clientWidth);\n      setIsInViewport(inView);\n    }\n    if (!isInViewport) onRequestClose?.();\n  }, [targetRect, isInViewport, onRequestClose]);\n\n  const handleClickOutside = useCallback(\n    (e) => {\n      /**\n       * Allows targetRef to be or contain a button that toggles the popover open and closed.\n       * Without this check it would toggle closed then back open immediately.\n       */\n      if (targetRef.current?.contains(e.target as Node)) return;\n\n      onRequestClose?.();\n    },\n    [onRequestClose, targetRef]\n  );\n\n  const popoverRef = useRef<HTMLDivElement>(null);\n\n  if (!isOpen || !targetRef) return null;\n\n  return (\n    <BodyPortal>\n      <FocusTrap\n        allowPageInteraction\n        onClickOutside={handleClickOutside}\n        onEscapeKey={onRequestClose}\n      >\n        <PopoverContainer\n          position={position}\n          align={align}\n          ref={popoverRef}\n          className={className}\n          style={getPopoverPosition()}\n          data-testid=\"popover-content-container\"\n          tabIndex={-1}\n        >\n          <RaisedDiv outline={outline}>\n            {beak && (\n              <Beak\n                outline={outline}\n                position={position}\n                beak={beak}\n                data-testid=\"popover-beak\"\n              />\n            )}\n            {children}\n          </RaisedDiv>\n          {pattern && (\n            <PatternContainer position={position} align={align}>\n              <Pattern data-testid=\"popover-pattern\" name={pattern} fit />\n            </PatternContainer>\n          )}\n        </PopoverContainer>\n      </FocusTrap>\n    </BodyPortal>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
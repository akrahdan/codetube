{"ast":null,"code":"var _jsxFileName = \"/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Projects/ProjectDetail/ProjectDetail.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { helmetJsonLdProp } from 'react-schemaorg';\nimport styles from './styles/index.module.scss';\nimport { projectCoursePath } from 'libs/urlHelpers';\nimport { Header } from './Header';\nimport { Supporting } from './Supporting';\nimport { Projects } from './Projects';\nimport { Syllabus } from './Syllabus';\nimport { CTASection } from './CTASection';\nimport { Recommendations } from './Recommendations';\nimport { SignupSection } from 'portal/scenes/SignupSection';\nimport { SiginSection } from 'portal/scenes/SignupSection/SigninSection';\nimport { SignupModal } from 'portal/scenes/Modal/SignupModal';\nimport { Payment } from 'portal/scenes/Payments';\nimport { Modal } from 'portal/scenes/Modal';\nimport { selectModal, showModal } from 'state/modals/modalSlice';\nimport { useAuth } from 'store/useAuth';\nimport { useAppSelector, useAppDispatch } from 'store/hooks';\nimport { selectLocationPayload } from 'state/location/selectors';\nimport { useCartUpdateMutation, useFetchDetailProjectQuery } from 'services/projects';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ProjectDetail = ({\n  isAnonymous,\n  isPaidLanding,\n  showTrialCTA\n}) => {\n  _s();\n\n  var _project$syllabuses;\n\n  const modal = useAppSelector(selectModal);\n  const dispatch = useAppDispatch();\n  const [pay, setPay] = useState(false);\n  const locationPayload = useAppSelector(selectLocationPayload);\n  const {\n    data: projectQuery\n  } = useFetchDetailProjectQuery(locationPayload.slug);\n  const [cartUpdate] = useCartUpdateMutation();\n  const {\n    user\n  } = useAuth();\n  const [project, setProject] = useState();\n  useEffect(() => {\n    if (projectQuery) {\n      setProject(projectQuery);\n    }\n  }, [projectQuery]);\n\n  const ctaCallback = () => {\n    if (user && user.email) {\n      cartUpdate({\n        project_id: project.id\n      }).then(res => {\n        if (res.data && res.data.detail == \"added\") {\n          setPay(!pay);\n        }\n      });\n    } else {\n      dispatch(showModal('login'));\n    }\n  };\n\n  const completionTime = \"24hrs\";\n  if (!project) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: styles.page,\n      \"data-testid\": \"path-marketing-page\",\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        script: [helmetJsonLdProp({\n          '@context': 'https://schema.org',\n          '@type': 'Course',\n          // name: path?.title,\n          // description: path?.short_description,\n          provider: {\n            '@type': 'Organization',\n            name: 'Codefluent',\n            sameAs: 'https://www.codefluent.org/'\n          },\n          educationalCredentialAwarded: 'Codefluent Certificate',\n          timeRequired: completionTime,\n          isAccessibleForFree: false\n        })]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Header, {\n        project: project,\n        ctaCallback: ctaCallback,\n        isPaidLanding: isPaidLanding,\n        showTrialCTA: showTrialCTA,\n        useContentfulCTA: true,\n        isAnonymous: isAnonymous\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Supporting, {\n        project: project\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Projects, {\n        courses: project.courses,\n        linkCallback: course => projectCoursePath(course === null || course === void 0 ? void 0 : course.slug)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Syllabus, {\n        pathId: `${project.id}`,\n        tracks: (_project$syllabuses = project.syllabuses) === null || _project$syllabuses === void 0 ? void 0 : _project$syllabuses.map((sylla, index) => {\n          return { ...sylla,\n            id: index + 1\n          };\n        }),\n        ctaCallback: ctaCallback,\n        isPaidLanding: isPaidLanding,\n        showTrialCTA: false,\n        useContentfulCTA: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CTASection, {\n        pathId: `${project.id}`,\n        ctaCallback: ctaCallback\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Recommendations, {\n        related: project.related,\n        pathId: `${project.id}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), modal == 'signup' && /*#__PURE__*/_jsxDEV(SignupModal, {\n      onClose: true,\n      children: /*#__PURE__*/_jsxDEV(SignupSection, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 29\n    }, this), modal == 'login' && /*#__PURE__*/_jsxDEV(SignupModal, {\n      children: /*#__PURE__*/_jsxDEV(SiginSection, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 28\n    }, this), pay && /*#__PURE__*/_jsxDEV(Modal, {\n      children: /*#__PURE__*/_jsxDEV(Payment, {\n        onClose: () => setPay(!pay)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 15\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ProjectDetail, \"Usbtt4YX8/m0zRFokzyf3Hb85n0=\", false, function () {\n  return [useAppSelector, useAppDispatch, useAppSelector, useFetchDetailProjectQuery, useCartUpdateMutation, useAuth];\n});\n\n_c = ProjectDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProjectDetail\");","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Projects/ProjectDetail/ProjectDetail.tsx"],"names":["React","useEffect","useState","Helmet","helmetJsonLdProp","styles","projectCoursePath","Header","Supporting","Projects","Syllabus","CTASection","Recommendations","SignupSection","SiginSection","SignupModal","Payment","Modal","selectModal","showModal","useAuth","useAppSelector","useAppDispatch","selectLocationPayload","useCartUpdateMutation","useFetchDetailProjectQuery","ProjectDetail","isAnonymous","isPaidLanding","showTrialCTA","modal","dispatch","pay","setPay","locationPayload","data","projectQuery","slug","cartUpdate","user","project","setProject","ctaCallback","email","project_id","id","then","res","detail","completionTime","page","provider","name","sameAs","educationalCredentialAwarded","timeRequired","isAccessibleForFree","courses","course","syllabuses","map","sylla","index","related"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { useSelector } from 'react-redux';\nimport { helmetJsonLdProp } from 'react-schemaorg';\nimport { Course } from 'schema-dts';\nimport styles from './styles/index.module.scss';\nimport { projectCoursePath } from 'libs/urlHelpers';\nimport { Header } from './Header';\nimport { Supporting } from './Supporting';\nimport { Projects } from './Projects';\n\nimport { Syllabus } from './Syllabus';\nimport { CTASection } from './CTASection';\nimport { Recommendations } from './Recommendations';\nimport { SignupSection } from 'portal/scenes/SignupSection';\nimport { SiginSection } from 'portal/scenes/SignupSection/SigninSection';\nimport { SignupModal } from 'portal/scenes/Modal/SignupModal';\nimport { Payment } from 'portal/scenes/Payments'\nimport { Modal } from 'portal/scenes/Modal';\nimport { selectModal, showModal } from 'state/modals/modalSlice';\nimport { useAuth } from 'store/useAuth';\nimport { useAppSelector, useAppDispatch } from 'store/hooks';\nimport { selectLocationPayload } from 'state/location/selectors';\nimport { useCartUpdateMutation, Cart, useFetchDetailProjectQuery, ProjectEntityResponse } from 'services/projects';\n\n\nexport type PageProps = {\n  fetchPathAndTrackData?: () => void;\n  isPaidLanding: boolean;\n  // path: Path;\n  // location: RouteLocation;\n  isAnonymous: boolean;\n  showTrialCTA: boolean;\n\n};\n\nexport const ProjectDetail: React.FC<PageProps> = ({\n  isAnonymous,\n  isPaidLanding,\n  showTrialCTA\n}) => {\n\n  const modal = useAppSelector(selectModal)\n  const dispatch = useAppDispatch()\n  const [pay, setPay] = useState(false);\n  const locationPayload = useAppSelector(selectLocationPayload)\n  const { data: projectQuery } = useFetchDetailProjectQuery(locationPayload.slug)\n  const [ cartUpdate ] = useCartUpdateMutation()\n  const { user} = useAuth();\n  const [project, setProject] = useState<ProjectEntityResponse>()\n\n\n  useEffect(() => {\n     if(projectQuery) {\n      setProject(projectQuery)\n     }\n  }, [projectQuery])\n\n  const ctaCallback = () => {\n    if(user && user.email) {\n      cartUpdate({\n        project_id: project.id\n      }).then((res: { data: Cart}) => {\n        if(res.data && res.data.detail == \"added\") {\n          setPay(!pay)\n        }\n      })\n    }\n    else {\n      dispatch(showModal('login'))\n    }\n   \n    \n  };\n  const completionTime = \"24hrs\"\n  if (!project) return null\n\n  return (\n    <>\n      <main className={styles.page} data-testid=\"path-marketing-page\">\n        <Helmet\n          script={[\n            helmetJsonLdProp<Course>({\n              '@context': 'https://schema.org',\n              '@type': 'Course',\n              // name: path?.title,\n              // description: path?.short_description,\n              provider: {\n                '@type': 'Organization',\n                name: 'Codefluent',\n                sameAs: 'https://www.codefluent.org/',\n              },\n              educationalCredentialAwarded: 'Codefluent Certificate',\n              timeRequired: completionTime,\n              isAccessibleForFree: false,\n            }),\n          ]}\n        />\n        <Header\n          project={project}\n          ctaCallback={ctaCallback}\n          isPaidLanding={isPaidLanding}\n          showTrialCTA={showTrialCTA}\n          useContentfulCTA={true}\n          isAnonymous={isAnonymous}\n        />\n        <Supporting project={project} />\n        <Projects \n          courses={project.courses}\n          linkCallback={(course) => projectCoursePath(course?.slug)}\n\n        />\n\n        <Syllabus\n          pathId={`${project.id}`}\n          tracks={project.syllabuses?.map((sylla, index) => {\n            return {\n              ...sylla,\n              id: index + 1\n            }\n          })}\n          ctaCallback={ctaCallback}\n          isPaidLanding={isPaidLanding}\n          showTrialCTA={false}\n          useContentfulCTA={false}\n        />\n\n        <CTASection\n          pathId={`${project.id}`}\n          ctaCallback={ctaCallback}\n\n        />\n        <Recommendations related={project.related} pathId={`${project.id}`} />\n\n\n      </main>\n\n      {modal == 'signup' && <SignupModal onClose>\n        <SignupSection />\n      </SignupModal>}\n\n      {modal == 'login' && <SignupModal >\n        <SiginSection />\n      </SignupModal>}\n\n      {pay && <Modal>\n        <Payment  onClose={() => setPay(!pay)}/>\n      </Modal>}\n\n     \n\n   \n\n\n\n    </>\n  );\n\n}"]},"metadata":{},"sourceType":"module"}
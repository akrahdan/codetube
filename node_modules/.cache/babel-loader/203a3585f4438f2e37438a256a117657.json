{"ast":null,"code":"import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import ReactResizeDetector,{withResizeDetector}from'react-resize-detector';import css from'./container.module.css';import{setContainerSize as setContainer}from'state/player/playerSlice';import{isIE}from'../utilities/is-ie';import{FullscreenState}from'../constants';import{setFullscreen,isFullscreen,collapseFullscreen}from'../fullscreen-helper';import{jsx as _jsx}from\"react/jsx-runtime\";var resize=function resize(container){return function(width,height){var setContainerSize=container.props.setContainerSize;setContainerSize({width:width,height:height});};};export var Container=/*#__PURE__*/function(_Component){_inherits(Container,_Component);var _super=_createSuper(Container);function Container(props){var _this;_classCallCheck(this,Container);_this=_super.call(this,props);_this.resizeContainer=function(width,height){_this.props.setContainerSize({width:width,height:height});};_this.resize=resize(_assertThisInitialized(_this));return _this;}_createClass(Container,[{key:\"updateFullscreenState\",value:function updateFullscreenState(fullscreenState){var container=this.content;var videoElement=document.getElementById('video-element');if(fullscreenState===FullscreenState.FULLSCREEN&&!isFullscreen()){setFullscreen(container,videoElement);}else{collapseFullscreen(videoElement);}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var currentFullscreenState=this.props.fullscreenState;var nextFullscreenState=nextProps.fullscreenState;if(currentFullscreenState===nextFullscreenState){return;}this.updateFullscreenState(nextFullscreenState);return nextProps;}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,containerSize=_this$props.containerSize,interactionMode=_this$props.interactionMode,playerSize=_this$props.playerSize,refreshRate=_this$props.refreshRate,fullscreenState=_this$props.fullscreenState;return[/*#__PURE__*/_jsx(ReactResizeDetector,{handleWidth:true,handleHeight:true,onResize:this.resize,refreshMode:\"throttle\",refreshRate:refreshRate||15},'resize detector'),/*#__PURE__*/_jsx(\"div\",{className:css.container,style:fullscreenState===FullscreenState.FULLSCREEN?_objectSpread({},containerSize):{},ref:function ref(el){return _this2.element=el;},\"interaction-mode\":interactionMode,\"is-ie\":\"\".concat(isIE()),children:/*#__PURE__*/_jsx(\"div\",{className:css.content,style:fullscreenState===FullscreenState.NORMAL?_objectSpread({},playerSize):{width:'100%',height:'100%'},ref:function ref(el){return _this2.content=el;},children:this.props.children})},\"container\")];}}]);return Container;}(Component);export default connect(function(state){return{containerSize:state.player.containerSize,breakpoint:state.player.breakpoint,interactionMode:state.player.interactionMode,playerSize:state.player.playerSize,fullscreenState:state.player.fullscreenState};},function(dispatch){return{setContainerSize:function setContainerSize(size){return dispatch(setContainer(size));}};})(Container);","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/CoursePlayer/Container/index.js"],"names":["React","Component","connect","ReactResizeDetector","withResizeDetector","css","setContainerSize","setContainer","isIE","FullscreenState","setFullscreen","isFullscreen","collapseFullscreen","resize","container","width","height","props","Container","resizeContainer","fullscreenState","content","videoElement","document","getElementById","FULLSCREEN","nextProps","currentFullscreenState","nextFullscreenState","updateFullscreenState","containerSize","interactionMode","playerSize","refreshRate","el","element","NORMAL","children","state","player","breakpoint","dispatch","size"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport ReactResizeDetector, { withResizeDetector} from 'react-resize-detector'\nimport css from './container.module.css'\nimport { setContainerSize as setContainer } from 'state/player/playerSlice'\nimport { isIE } from '../utilities/is-ie';\nimport { FullscreenState } from '../constants'\nimport { setFullscreen, isFullscreen, collapseFullscreen } from '../fullscreen-helper'\n\nconst resize = container => (width, height) => {\n  \n  const {\n    props: { setContainerSize },\n  } = container\n  setContainerSize({ width, height })\n}\n\nexport class Container extends Component {\n  constructor(props) {\n    super(props)\n\n    this.resize = resize(this)\n  }\n  \n  resizeContainer = (width, height) => {\n    this.props.setContainerSize({width, height})\n  }\n  updateFullscreenState(fullscreenState) {\n    const container = this.content\n    const videoElement = document.getElementById('video-element')\n\n    if (fullscreenState === FullscreenState.FULLSCREEN && !isFullscreen()) {\n      setFullscreen(container, videoElement)\n    } else {\n      collapseFullscreen(videoElement)\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const currentFullscreenState = this.props.fullscreenState\n    const nextFullscreenState = nextProps.fullscreenState\n\n    if (currentFullscreenState === nextFullscreenState) {\n      return\n    }\n\n    this.updateFullscreenState(nextFullscreenState)\n\n    return nextProps\n  }\n\n  render() {\n    let { containerSize, interactionMode, playerSize, refreshRate, fullscreenState } = this.props\n    \n    return [\n      <ReactResizeDetector\n        key={'resize detector'}\n        handleWidth\n        handleHeight\n        onResize={this.resize}\n        refreshMode=\"throttle\"\n        refreshRate={refreshRate || 15}\n      />,\n      <div\n        key=\"container\"\n        className={css.container}\n        style={fullscreenState === FullscreenState.FULLSCREEN ? { ...containerSize } : {}}\n        ref={el => (this.element = el)}\n        interaction-mode={interactionMode}\n        is-ie={`${isIE()}`}\n      >\n        <div className={css.content} style={fullscreenState === FullscreenState.NORMAL ? { ...playerSize } : { width: '100%', height: '100%' }} ref={el => (this.content = el)}>\n          {this.props.children}\n        </div>\n      </div>,\n    ]\n  }\n}\n\nexport default  connect(\n  state => ({\n    containerSize: state.player.containerSize,\n    breakpoint: state.player.breakpoint,\n    interactionMode: state.player.interactionMode,\n    playerSize: state.player.playerSize,\n    fullscreenState: state.player.fullscreenState,\n  }),\n  dispatch => ({\n    setContainerSize: (size) => dispatch(setContainer(size)),\n  })\n)(Container)"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/akrah/Documents/dev/readux/src/codefluent/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import classNames from\"classnames\";import{Preview}from\"./Preview\";import{LectureEdit}from\"./LectureEdit\";import{UploadVideo}from\"./UploadVideo\";import{Modal}from\"portal/scenes/Modal\";import{DeleteDialog}from\"portal/scenes/Dialog/DeleteDialog\";import{Resources}from\"./Resources\";import{LectureDescription}from\"./LectureDescription\";import{Downloadables}from\"./Downloadables\";import{useDeleteLectureMutation}from\"services/courses\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Lecture=function Lecture(_ref){var lecture=_ref.lecture,index=_ref.index,editLecture=_ref.editLecture,editMedia=_ref.editMedia;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),toggleDescription=_useState2[0],setToggleDescription=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),toggleEdit=_useState4[0],setToggleEdit=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),toggleAdd=_useState6[0],setToggleAdd=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),lectureEdit=_useState8[0],setLectureEdit=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),toggleResource=_useState10[0],setToggleResource=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),toggleDelete=_useState12[0],setToggleDelete=_useState12[1];var _useDeleteLectureMuta=useDeleteLectureMutation(),_useDeleteLectureMuta2=_slicedToArray(_useDeleteLectureMuta,1),deleteLecture=_useDeleteLectureMuta2[0];return/*#__PURE__*/_jsxs(\"div\",{\"data-purpose\":\"lecture-editor\",className:\"default-item-editor--item-editor--3GhNq\",children:[lectureEdit&&/*#__PURE__*/_jsx(LectureEdit,{lecture:lecture,index:index,editLecture:editLecture,toggle:function toggle(){setLectureEdit(!lectureEdit);}}),/*#__PURE__*/_jsx(\"div\",{className:classNames({hidden:lectureEdit}),children:/*#__PURE__*/_jsxs(\"div\",{className:classNames(\"fx-lt item-icon-button-trigger js-curriculum-item-handle item-bar--item-bar--1qWKU\",{\"item-bar--item-bar--expanded--2QfQd\":toggleAdd||toggleResource||toggleEdit}),children:[/*#__PURE__*/_jsx(\"div\",{className:\"fx\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fx-lt fxwrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-bar--item-bar__left--1nfEv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fx-lc item-bar--item-bar__title--3ww0E\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"item-bar--item-bar__status--MZ70P\",\"data-purpose\":\"item-object-index\",children:[/*#__PURE__*/_jsx(\"span\",{\"data-purpose\":\"published-icon\",className:\"text-secondary pr5 cfi cfi-check-circle\"}),\"Lecture \".concat(index+1,\":\")]}),/*#__PURE__*/_jsxs(\"span\",{className:\"hidden-xxs ellipsis pl10\",children:[/*#__PURE__*/_jsx(\"span\",{\"data-purpose\":\"misc-icon\",className:classNames(\"pr5 cfi\",{\"cfi-file-text-o\":!lecture.video_url,\"cfi-play-circle-o\":lecture.video_url})}),/*#__PURE__*/_jsx(\"span\",{children:lecture.title})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setLectureEdit(!toggleEdit);},type:\"button\",className:\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-pencil\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Edit\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:function onClick(){return setToggleDelete(!toggleDelete);},className:\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-trash-o\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Delete\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"visible-xxs ellipsis pb5\",children:[/*#__PURE__*/_jsx(\"span\",{\"data-purpose\":\"misc-icon\",className:\"pr5 cfi cfi-file-text-o\"}),/*#__PURE__*/_jsx(\"span\",{children:lecture.title})]})]}),!toggleAdd&&!toggleResource&&!lecture.video_url&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){setToggleAdd(!toggleAdd);},\"aria-label\":\"Add Content\",type:\"button\",className:\"mr10 btn btn-sm btn-default\",children:\"+ Content\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-bar--item-bar__right--1gA3p\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setToggleEdit(!toggleEdit);},\"data-purpose\":\"lecture-collapse-btn\",type:\"button\",className:\"item-icon-button--icon-button--1IKG6 item-icon-button--icon-button--always-show--1mM0X btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:classNames(\"cfi\",{\"cfi-chevron-down\":toggleEdit,\"cfi-chevron-up\":!toggleEdit})}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Expand\"})]}),/*#__PURE__*/_jsxs(\"div\",{type:\"button\",className:\"item-bar--item-bar__handle--1DqDp item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-bars\"}),/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Move\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:classNames(\"default-item-editor--add-content--1wZ-X\",{hidden:!toggleAdd&&!toggleResource}),\"data-purpose\":\"add-content-wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-tab--content-tab--2ALO8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"content-tab--content-tab__header--1K1oU\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-tab--header__inner--30WeT\",children:[toggleResource?\"Add Resources\":\"Upload Video\",/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){toggleResource?setToggleResource(!toggleResource):setToggleAdd(!toggleAdd);},\"data-purpose\":\"content-tab-close\",type:\"button\",className:\"content-tab--header__close--20p2w btn btn-xs btn-tertiary\",children:/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-close\"})})]})}),toggleResource?/*#__PURE__*/_jsx(Resources,{onSuccess:function onSuccess(result){var resources=[].concat(_toConsumableArray(lecture.resources),_toConsumableArray(result));editLecture(_objectSpread(_objectSpread({},lecture),{},{resources:resources}));setToggleResource(!toggleResource);setToggleEdit(!toggleEdit);},toggle:function toggle(){setToggleResource(!toggleResource);setToggleEdit(!toggleEdit);},selectResource:function selectResource(resource){var resources=[].concat(_toConsumableArray(lecture.resources),[resource.id]);editLecture(_objectSpread(_objectSpread({},lecture),{},{resources:resources}));}}):/*#__PURE__*/_jsx(UploadVideo,{lecture:lecture,onSuccess:function onSuccess(result){editMedia({id:lecture.id,video:result.id,video_url:result.url});setToggleAdd(!toggleAdd);setToggleEdit(!toggleEdit);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:classNames(\"default-item-editor--edit-content--HLXOq\",{hidden:!toggleEdit}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"lecture-editor--edit-content--CgLXg\",\"data-purpose\":\"edit-content\",children:[lecture.video_url&&/*#__PURE__*/_jsx(Preview,{media:lecture.video,video_url:lecture.video_url,setToggle:function setToggle(){setToggleAdd(!toggleAdd);setToggleEdit(!toggleEdit);}}),lecture.resources&&lecture.resources.length?/*#__PURE__*/_jsx(Downloadables,{deleteDownload:function deleteDownload(media){var resources=lecture.resources.filter(function(item){return item!=media.id;});editLecture({title:lecture.title,id:lecture.id,resources:resources});},resources:lecture.resources}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"pt10 pb10 lecture-editor--edit-content__row--3z9s2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lecture-editor--edit-content__button-row--3QiBR\",children:toggleDescription?/*#__PURE__*/_jsx(LectureDescription,{setToggle:setToggleDescription}):/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setToggleDescription(!toggleDescription);},\"data-purpose\":\"add-desc-btn\",\"aria-label\":\"Add Description\",type:\"button\",className:\"mr5 btn btn-sm btn-default\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-vjs-plus\"}),\" Description\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"lecture-editor--edit-content__button-row--3QiBR\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){setToggleResource(!toggleResource);setToggleEdit(!toggleEdit);},\"data-purpose\":\"add-resources-btn\",\"aria-label\":\"Add Resources\",type:\"button\",className:\"btn btn-sm btn-default\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"cfi cfi-vjs-plus\"}),\" Resources\"]})})]})]})}),toggleDelete&&/*#__PURE__*/_jsx(Modal,{children:/*#__PURE__*/_jsx(DeleteDialog,{deleteCallback:function deleteCallback(){deleteLecture(lecture.id).then(function(){return setToggleDelete(!toggleDelete);});},cancelDelete:function cancelDelete(){return setToggleDelete(!toggleDelete);},text:\"You are about to remove a course lecture. Are you sure you want to do it?\"})})]});};","map":{"version":3,"sources":["/Users/akrah/Documents/dev/readux/src/codefluent/src/portal/scenes/Instructor/Courses/Curriculum/Section/Lecture/index.jsx"],"names":["useState","classNames","Preview","LectureEdit","UploadVideo","Modal","DeleteDialog","Resources","LectureDescription","Downloadables","useDeleteLectureMutation","Lecture","lecture","index","editLecture","editMedia","toggleDescription","setToggleDescription","toggleEdit","setToggleEdit","toggleAdd","setToggleAdd","lectureEdit","setLectureEdit","toggleResource","setToggleResource","toggleDelete","setToggleDelete","deleteLecture","hidden","video_url","title","result","resources","resource","id","video","url","length","media","filter","item","then"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport classNames from \"classnames\";\nimport { Preview } from \"./Preview\";\nimport { LectureEdit } from \"./LectureEdit\";\nimport { UploadVideo } from \"./UploadVideo\";\nimport { Modal } from \"portal/scenes/Modal\";\nimport { DeleteDialog } from \"portal/scenes/Dialog/DeleteDialog\";\nimport { Resources } from \"./Resources\";\nimport { LectureDescription } from \"./LectureDescription\";\nimport { Downloadables } from \"./Downloadables\";\nimport { useDeleteLectureMutation } from \"services/courses\";\nexport const Lecture = ({ lecture, index, editLecture, editMedia }) => {\n  const [toggleDescription, setToggleDescription] = useState(false);\n  const [toggleEdit, setToggleEdit] = useState(false);\n  const [toggleAdd, setToggleAdd] = useState(false);\n  const [lectureEdit, setLectureEdit] = useState(false);\n  const [toggleResource, setToggleResource] = useState(false);\n  const [toggleDelete, setToggleDelete] = useState(false);\n  const [deleteLecture] = useDeleteLectureMutation();\n\n  return (\n    <div\n      data-purpose=\"lecture-editor\"\n      className=\"default-item-editor--item-editor--3GhNq\"\n    >\n      {lectureEdit && (\n        <LectureEdit\n          lecture={lecture}\n          index={index}\n          editLecture={editLecture}\n          toggle={() => {\n            setLectureEdit(!lectureEdit);\n          }}\n        />\n      )}\n      <div className={classNames({ hidden: lectureEdit })}>\n        <div\n          className={classNames(\n            \"fx-lt item-icon-button-trigger js-curriculum-item-handle item-bar--item-bar--1qWKU\",\n            {\n              \"item-bar--item-bar--expanded--2QfQd\":\n                toggleAdd || toggleResource || toggleEdit,\n            }\n          )}\n        >\n          <div className=\"fx\">\n            <div className=\"fx-lt fxwrap\">\n              <div className=\"item-bar--item-bar__left--1nfEv\">\n                <div\n                  className=\"fx-lc item-bar--item-bar__title--3ww0E\"\n                  \n                >\n                  <span\n                    className=\"item-bar--item-bar__status--MZ70P\"\n                    data-purpose=\"item-object-index\"\n                  >\n                    <span\n                      data-purpose=\"published-icon\"\n                      className=\"text-secondary pr5 cfi cfi-check-circle\"\n                    />\n                    {`Lecture ${index + 1}:`}\n                  </span>\n                  <span className=\"hidden-xxs ellipsis pl10\">\n                    <span\n                      data-purpose=\"misc-icon\"\n                      className={classNames(\"pr5 cfi\", {\n                        \"cfi-file-text-o\": !lecture.video_url,\n                        \"cfi-play-circle-o\": lecture.video_url,\n                      })}\n                    />\n                    <span>{lecture.title}</span>\n                  </span>\n                  <button\n                    onClick={() => {\n                      setLectureEdit(!toggleEdit);\n                    }}\n                    type=\"button\"\n                    className=\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\"\n                  >\n                    <span className=\"cfi cfi-pencil\" />\n                    <span className=\"sr-only\">Edit</span>\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setToggleDelete(!toggleDelete)}\n                    className=\"item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\"\n                  >\n                    <span className=\"cfi cfi-trash-o\" />\n                    <span className=\"sr-only\">Delete</span>\n                  </button>\n                </div>\n                <div className=\"visible-xxs ellipsis pb5\">\n                  <span\n                    data-purpose=\"misc-icon\"\n                    className=\"pr5 cfi cfi-file-text-o\"\n                  />\n                  <span>{lecture.title}</span>\n                </div>\n              </div>\n              {!toggleAdd && !toggleResource && !lecture.video_url && (\n                <div>\n                  <button\n                    onClick={() => {\n                      setToggleAdd(!toggleAdd);\n                    }}\n                    \n                    aria-label=\"Add Content\"\n                    type=\"button\"\n                    className=\"mr10 btn btn-sm btn-default\"\n                  >\n                    + Content\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"item-bar--item-bar__right--1gA3p\">\n            <button\n              onClick={() => {\n                setToggleEdit(!toggleEdit);\n              }}\n              data-purpose=\"lecture-collapse-btn\"\n              type=\"button\"\n              className=\"item-icon-button--icon-button--1IKG6 item-icon-button--icon-button--always-show--1mM0X btn btn-xs btn-quintinary\"\n            >\n              <span\n                className={classNames(\"cfi\", {\n                  \"cfi-chevron-down\": toggleEdit,\n                  \"cfi-chevron-up\": !toggleEdit,\n                })}\n              />\n              <span className=\"sr-only\">Expand</span>\n            </button>\n            <div\n              type=\"button\"\n              className=\"item-bar--item-bar__handle--1DqDp item-icon-button--icon-button--1IKG6 btn btn-xs btn-quintinary\"\n            >\n              <span className=\"cfi cfi-bars\" />\n              <span className=\"sr-only\">Move</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div\n        className={classNames(\"default-item-editor--add-content--1wZ-X\", {\n          hidden: !toggleAdd && !toggleResource,\n        })}\n        data-purpose=\"add-content-wrapper\"\n      >\n        <div className=\"content-tab--content-tab--2ALO8\">\n          <div className=\"content-tab--content-tab__header--1K1oU\">\n            <div className=\"content-tab--header__inner--30WeT\">\n              {toggleResource ? \"Add Resources\" : \"Upload Video\"}\n              <button\n                onClick={() => {\n                  toggleResource\n                    ? setToggleResource(!toggleResource)\n                    : setToggleAdd(!toggleAdd);\n                }}\n                data-purpose=\"content-tab-close\"\n                type=\"button\"\n                className=\"content-tab--header__close--20p2w btn btn-xs btn-tertiary\"\n              >\n                <span className=\"cfi cfi-close\" />\n              </button>\n            </div>\n          </div>\n          {toggleResource ? (\n            <Resources\n              onSuccess={(result) => {\n                const resources = [...lecture.resources, ...result];\n                editLecture({\n                  ...lecture,\n                  resources,\n                });\n                setToggleResource(!toggleResource);\n                setToggleEdit(!toggleEdit);\n              }}\n              toggle={() => {\n                setToggleResource(!toggleResource);\n                setToggleEdit(!toggleEdit);\n              }}\n              selectResource={(resource) => {\n                const resources = [...lecture.resources, resource.id];\n                editLecture({\n                  ...lecture,\n                  resources,\n                });\n              }}\n            />\n          ) : (\n            <UploadVideo\n              lecture={lecture}\n              onSuccess={(result) => {\n                editMedia({\n                  id: lecture.id,\n                  video: result.id,\n                  video_url: result.url,\n                });\n                setToggleAdd(!toggleAdd);\n                setToggleEdit(!toggleEdit);\n              }}\n            />\n          )}\n        </div>\n      </div>\n      <div\n        className={classNames(\"default-item-editor--edit-content--HLXOq\", {\n          hidden: !toggleEdit,\n        })}\n      >\n        <div\n          className=\"lecture-editor--edit-content--CgLXg\"\n          data-purpose=\"edit-content\"\n        >\n          {lecture.video_url && (\n            <Preview\n              media={lecture.video}\n              video_url={lecture.video_url}\n              setToggle={() => {\n                setToggleAdd(!toggleAdd);\n                setToggleEdit(!toggleEdit);\n              }}\n            />\n          )}\n          {lecture.resources && lecture.resources.length ? (\n            <Downloadables\n              deleteDownload={(media) => {\n                const resources = lecture.resources.filter(\n                  (item) => item != media.id\n                );\n                editLecture({\n                  title: lecture.title,\n                  id: lecture.id,\n                  resources,\n                });\n              }}\n              resources={lecture.resources}\n            />\n          ) : null}\n          <div className=\"pt10 pb10 lecture-editor--edit-content__row--3z9s2\">\n            <div className=\"lecture-editor--edit-content__button-row--3QiBR\">\n              {toggleDescription ? (\n                <LectureDescription setToggle={setToggleDescription} />\n              ) : (\n                <button\n                  onClick={() => setToggleDescription(!toggleDescription)}\n                  data-purpose=\"add-desc-btn\"\n                  aria-label=\"Add Description\"\n                  type=\"button\"\n                  className=\"mr5 btn btn-sm btn-default\"\n                >\n                  <span className=\"cfi cfi-vjs-plus\" /> Description\n                </button>\n              )}\n            </div>\n            <div className=\"lecture-editor--edit-content__button-row--3QiBR\">\n              <button\n                onClick={() => {\n                  setToggleResource(!toggleResource);\n                  setToggleEdit(!toggleEdit);\n                }}\n                data-purpose=\"add-resources-btn\"\n                aria-label=\"Add Resources\"\n                type=\"button\"\n                className=\"btn btn-sm btn-default\"\n              >\n                <span className=\"cfi cfi-vjs-plus\" /> Resources\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      {toggleDelete && (\n        <Modal>\n          <DeleteDialog\n            deleteCallback={() => {\n              deleteLecture(lecture.id).then(() =>\n                setToggleDelete(!toggleDelete)\n              );\n            }}\n            cancelDelete={() => setToggleDelete(!toggleDelete)}\n            text=\"You are about to remove a course lecture. Are you sure you want to do it?\"\n          />\n        </Modal>\n      )}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
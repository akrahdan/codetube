import _styled from "@emotion/styled/base";
import { Box, Column, Container, LayoutGrid } from '@codecademy/gamut';
import { mediaQueries } from '@codecademy/gamut-styles';
import React from 'react';
import { CTA } from './CTA';
import { Description } from './Description';
import { Feature, FeaturedDescription, FeaturedIcon, FeaturedImage, FeaturedStat, FeaturedTitle } from './Feature';
import { Title } from './Title';

var FlexContainer = /*#__PURE__*/_styled(Container, {
  target: "e1j65p7v0",
  label: "FlexContainer"
})(mediaQueries.sm, "{flex-direction:row;}" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9MYW5kaW5nUGFnZS9QYWdlRmVhdHVyZXMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXdCdUMiLCJmaWxlIjoiLi4vLi4vc3JjL0xhbmRpbmdQYWdlL1BhZ2VGZWF0dXJlcy50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBCb3gsXG4gIENvbHVtbixcbiAgQ29sdW1uUHJvcHMsXG4gIENvbnRhaW5lcixcbiAgTGF5b3V0R3JpZCxcbn0gZnJvbSAnQGNvZGVjYWRlbXkvZ2FtdXQnO1xuaW1wb3J0IHsgbWVkaWFRdWVyaWVzIH0gZnJvbSAnQGNvZGVjYWRlbXkvZ2FtdXQtc3R5bGVzJztcbmltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcbmltcG9ydCBSZWFjdCwgeyBSZWFjdE5vZGUgfSBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IENUQSB9IGZyb20gJy4vQ1RBJztcbmltcG9ydCB7IERlc2NyaXB0aW9uIH0gZnJvbSAnLi9EZXNjcmlwdGlvbic7XG5pbXBvcnQge1xuICBGZWF0dXJlLFxuICBGZWF0dXJlZERlc2NyaXB0aW9uLFxuICBGZWF0dXJlZEljb24sXG4gIEZlYXR1cmVkSW1hZ2UsXG4gIEZlYXR1cmVkU3RhdCxcbiAgRmVhdHVyZWRUaXRsZSxcbn0gZnJvbSAnLi9GZWF0dXJlJztcbmltcG9ydCB7IFRpdGxlIH0gZnJvbSAnLi9UaXRsZSc7XG5pbXBvcnQgeyBCYXNlUHJvcHMgfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgRmxleENvbnRhaW5lciA9IHN0eWxlZChDb250YWluZXIpYFxuICAke21lZGlhUXVlcmllcy5zbX0ge1xuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gIH1cbmA7XG5cbmV4cG9ydCB0eXBlIFBhZ2VGZWF0dXJlc1Byb3BzID0gQmFzZVByb3BzICYge1xuICBtYXhDb2xzPzogMSB8IDIgfCAzIHwgNDtcbiAgZmVhdHVyZXNNZWRpYT86ICdpbWFnZScgfCAnaWNvbicgfCAnc3RhdCc7XG4gIGZlYXR1cmVzOiB7XG4gICAgdGl0bGU/OiBzdHJpbmc7XG4gICAgZGVzYz86IHN0cmluZztcbiAgICBpbWdTcmM/OiBzdHJpbmc7XG4gICAgaW1nQWx0Pzogc3RyaW5nO1xuICAgIHN0YXRUZXh0Pzogc3RyaW5nO1xuICAgIHRlc3RJZD86IHN0cmluZztcbiAgfVtdO1xufTtcblxuY29uc3Qgcm93UmVuZGVyRWFjaCA9IChcbiAgaXRlbXM6IFBhZ2VGZWF0dXJlc1Byb3BzWydmZWF0dXJlcyddLFxuICBpdGVtUmVuZGVyZXI6IChpdGVtOiBQYWdlRmVhdHVyZXNQcm9wc1snZmVhdHVyZXMnXVswXSkgPT4gUmVhY3ROb2RlXG4pOiBSZWFjdE5vZGUgPT4ge1xuICAvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9uby1hcnJheS1pbmRleC1rZXkgKi9cbiAgcmV0dXJuIChcbiAgICA8RmxleENvbnRhaW5lciBub3dyYXAgY29sdW1uPlxuICAgICAge2l0ZW1zLm1hcCgoaXRlbSwgaSkgPT4gKFxuICAgICAgICA8UmVhY3QuRnJhZ21lbnQga2V5PXtpfT57aXRlbVJlbmRlcmVyKGl0ZW0pfTwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICApKX1cbiAgICA8L0ZsZXhDb250YWluZXI+XG4gICk7XG4gIC8qIGVzbGludC1lbmFibGUgcmVhY3Qvbm8tYXJyYXktaW5kZXgta2V5ICovXG59O1xuXG5jb25zdCBncmlkUmVuZGVyRWFjaCA9IChcbiAgbWF4Q29sczogTm9uTnVsbGFibGU8UGFnZUZlYXR1cmVzUHJvcHNbJ21heENvbHMnXT4sXG4gIGl0ZW1zOiBQYWdlRmVhdHVyZXNQcm9wc1snZmVhdHVyZXMnXSxcbiAgaXRlbVJlbmRlcmVyOiAoaXRlbTogUGFnZUZlYXR1cmVzUHJvcHNbJ2ZlYXR1cmVzJ11bMF0pID0+IFJlYWN0Tm9kZVxuKTogUmVhY3ROb2RlID0+IHtcbiAgY29uc3Qgc2l6ZSA9IHtcbiAgICBfOiAxMixcbiAgICBzbTogMTIgLyBtYXhDb2xzLFxuICB9IGFzIENvbHVtblByb3BzWydzaXplJ107XG4gIC8qIGVzbGludC1kaXNhYmxlIHJlYWN0L25vLWFycmF5LWluZGV4LWtleSAqL1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXRHcmlkIGNvbHVtbkdhcD17eyBfOiA4LCBzbTogMzIgfX0+XG4gICAgICB7aXRlbXMubWFwKChpdGVtLCBpKSA9PiAoXG4gICAgICAgIDxDb2x1bW4ga2V5PXtpfSBzaXplPXtzaXplfT5cbiAgICAgICAgICB7aXRlbVJlbmRlcmVyKGl0ZW0pfVxuICAgICAgICA8L0NvbHVtbj5cbiAgICAgICkpfVxuICAgIDwvTGF5b3V0R3JpZD5cbiAgKTtcbiAgLyogZXNsaW50LWVuYWJsZSByZWFjdC9uby1hcnJheS1pbmRleC1rZXkgKi9cbn07XG5cbmNvbnN0IHJlbmRlckVhY2ggPSAoXG4gIG1heENvbHM6IFBhZ2VGZWF0dXJlc1Byb3BzWydtYXhDb2xzJ10sXG4gIGl0ZW1zOiBQYWdlRmVhdHVyZXNQcm9wc1snZmVhdHVyZXMnXSxcbiAgaXRlbVJlbmRlcmVyOiAoaXRlbTogUGFnZUZlYXR1cmVzUHJvcHNbJ2ZlYXR1cmVzJ11bMF0pID0+IFJlYWN0Tm9kZVxuKTogUmVhY3ROb2RlID0+IHtcbiAgaWYgKG1heENvbHMgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiByb3dSZW5kZXJFYWNoKGl0ZW1zLCBpdGVtUmVuZGVyZXIpO1xuICB9XG4gIGlmIChtYXhDb2xzID4gMCAmJiBtYXhDb2xzIDw9IDQpIHtcbiAgICByZXR1cm4gZ3JpZFJlbmRlckVhY2gobWF4Q29scywgaXRlbXMsIGl0ZW1SZW5kZXJlcik7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnQgY29uc3QgUGFnZUZlYXR1cmVzOiBSZWFjdC5GQzxQYWdlRmVhdHVyZXNQcm9wcz4gPSAoe1xuICB0aXRsZSxcbiAgZGVzYyxcbiAgY3RhLFxuICBtYXhDb2xzLFxuICBmZWF0dXJlcyxcbiAgZmVhdHVyZXNNZWRpYSxcbiAgdGVzdElkLFxuICBvbkFuY2hvckNsaWNrLFxufSkgPT4gKFxuICA8ZGl2IGRhdGEtdGVzdGlkPXt0ZXN0SWR9PlxuICAgIDxkaXY+XG4gICAgICB7dGl0bGUgJiYgPFRpdGxlIGlzUGFnZUhlYWRpbmc9e2ZhbHNlfT57dGl0bGV9PC9UaXRsZT59XG4gICAgICB7ZGVzYyAmJiA8RGVzY3JpcHRpb24gdGV4dD17ZGVzY30gb25BbmNob3JDbGljaz17b25BbmNob3JDbGlja30gLz59XG4gICAgICB7Y3RhICYmIChcbiAgICAgICAgPENUQSBocmVmPXtjdGEuaHJlZn0gb25DdGFCdXR0b25DbGljaz17Y3RhLm9uQ2xpY2t9PlxuICAgICAgICAgIHtjdGEudGV4dH1cbiAgICAgICAgPC9DVEE+XG4gICAgICApfVxuICAgIDwvZGl2PlxuICAgIDxCb3ggbXQ9ezE2fT5cbiAgICAgIHtyZW5kZXJFYWNoKFxuICAgICAgICBtYXhDb2xzLFxuICAgICAgICBmZWF0dXJlcyxcbiAgICAgICAgKHsgdGVzdElkLCBpbWdTcmMsIGltZ0FsdCwgc3RhdFRleHQsIHRpdGxlOiBmZWF0VGl0bGUsIGRlc2MgfSkgPT4gKFxuICAgICAgICAgIDxGZWF0dXJlIHRlc3RJZD17dGVzdElkfT5cbiAgICAgICAgICAgIHtmZWF0dXJlc01lZGlhID09PSAnaW1hZ2UnICYmIChcbiAgICAgICAgICAgICAgPEZlYXR1cmVkSW1hZ2Ugc3JjPXtpbWdTcmMhfSBhbHQ9e2ltZ0FsdCF9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2ZlYXR1cmVzTWVkaWEgPT09ICdpY29uJyAmJiAoXG4gICAgICAgICAgICAgIDxGZWF0dXJlZEljb24gc3JjPXtpbWdTcmMhfSBhbHQ9e2ltZ0FsdCF9IC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2ZlYXR1cmVzTWVkaWEgPT09ICdzdGF0JyAmJiAoXG4gICAgICAgICAgICAgIDxGZWF0dXJlZFN0YXQ+e3N0YXRUZXh0fTwvRmVhdHVyZWRTdGF0PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtmZWF0VGl0bGUgJiYgKFxuICAgICAgICAgICAgICA8RmVhdHVyZWRUaXRsZSBhcz17dGl0bGUgPyAnaDMnIDogJ2gyJ30+XG4gICAgICAgICAgICAgICAge2ZlYXRUaXRsZX1cbiAgICAgICAgICAgICAgPC9GZWF0dXJlZFRpdGxlPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIHtkZXNjICYmIChcbiAgICAgICAgICAgICAgPEZlYXR1cmVkRGVzY3JpcHRpb24gZGVzYz17ZGVzY30gb25BbmNob3JDbGljaz17b25BbmNob3JDbGlja30gLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC9GZWF0dXJlPlxuICAgICAgICApXG4gICAgICApfVxuICAgIDwvQm94PlxuICA8L2Rpdj5cbik7XG4iXX0= */"));

var rowRenderEach = function rowRenderEach(items, itemRenderer) {
  /* eslint-disable react/no-array-index-key */
  return /*#__PURE__*/React.createElement(FlexContainer, {
    nowrap: true,
    column: true
  }, items.map(function (item, i) {
    return /*#__PURE__*/React.createElement(React.Fragment, {
      key: i
    }, itemRenderer(item));
  }));
  /* eslint-enable react/no-array-index-key */
};

var gridRenderEach = function gridRenderEach(maxCols, items, itemRenderer) {
  var size = {
    _: 12,
    sm: 12 / maxCols
  };
  /* eslint-disable react/no-array-index-key */

  return /*#__PURE__*/React.createElement(LayoutGrid, {
    columnGap: {
      _: 8,
      sm: 32
    }
  }, items.map(function (item, i) {
    return /*#__PURE__*/React.createElement(Column, {
      key: i,
      size: size
    }, itemRenderer(item));
  }));
  /* eslint-enable react/no-array-index-key */
};

var renderEach = function renderEach(maxCols, items, itemRenderer) {
  if (maxCols === undefined) {
    return rowRenderEach(items, itemRenderer);
  }

  if (maxCols > 0 && maxCols <= 4) {
    return gridRenderEach(maxCols, items, itemRenderer);
  }

  return null;
};

export var PageFeatures = function PageFeatures(_ref) {
  var title = _ref.title,
      desc = _ref.desc,
      cta = _ref.cta,
      maxCols = _ref.maxCols,
      features = _ref.features,
      featuresMedia = _ref.featuresMedia,
      testId = _ref.testId,
      onAnchorClick = _ref.onAnchorClick;
  return /*#__PURE__*/React.createElement("div", {
    "data-testid": testId
  }, /*#__PURE__*/React.createElement("div", null, title && /*#__PURE__*/React.createElement(Title, {
    isPageHeading: false
  }, title), desc && /*#__PURE__*/React.createElement(Description, {
    text: desc,
    onAnchorClick: onAnchorClick
  }), cta && /*#__PURE__*/React.createElement(CTA, {
    href: cta.href,
    onCtaButtonClick: cta.onClick
  }, cta.text)), /*#__PURE__*/React.createElement(Box, {
    mt: 16
  }, renderEach(maxCols, features, function (_ref2) {
    var testId = _ref2.testId,
        imgSrc = _ref2.imgSrc,
        imgAlt = _ref2.imgAlt,
        statText = _ref2.statText,
        featTitle = _ref2.title,
        desc = _ref2.desc;
    return /*#__PURE__*/React.createElement(Feature, {
      testId: testId
    }, featuresMedia === 'image' && /*#__PURE__*/React.createElement(FeaturedImage, {
      src: imgSrc,
      alt: imgAlt
    }), featuresMedia === 'icon' && /*#__PURE__*/React.createElement(FeaturedIcon, {
      src: imgSrc,
      alt: imgAlt
    }), featuresMedia === 'stat' && /*#__PURE__*/React.createElement(FeaturedStat, null, statText), featTitle && /*#__PURE__*/React.createElement(FeaturedTitle, {
      as: title ? 'h3' : 'h2'
    }, featTitle), desc && /*#__PURE__*/React.createElement(FeaturedDescription, {
      desc: desc,
      onAnchorClick: onAnchorClick
    }));
  })));
};
import _styled from "@emotion/styled/base";

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

import { Box } from '@codecademy/gamut';
import { ArrowChevronDownFilledIcon } from '@codecademy/gamut-icons';
import cx from 'classnames';
import { AnimatePresence, motion } from 'framer-motion';
import React, { useRef, useState } from 'react';
import { Popover } from '../../../Popover';
import { AppHeaderAvatar } from '../AppHeaderAvatar';
import { AppHeaderLinkSections } from '../AppHeaderLinkSections';
import { focusStyles, hoverStyles, textButtonStyles } from '../SharedStyles';
import styles from './styles.module.scss';

var AppHeaderTextTargetButton = _styled("button", {
  target: "er1dlwl1",
  label: "AppHeaderTextTargetButton"
})(textButtonStyles, " ", hoverStyles, " ", focusStyles, ";" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9BcHBIZWFkZXIvQXBwSGVhZGVyRWxlbWVudHMvQXBwSGVhZGVyRHJvcGRvd24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWMrQyIsImZpbGUiOiIuLi8uLi8uLi8uLi9zcmMvQXBwSGVhZGVyL0FwcEhlYWRlckVsZW1lbnRzL0FwcEhlYWRlckRyb3Bkb3duL2luZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJveCB9IGZyb20gJ0Bjb2RlY2FkZW15L2dhbXV0JztcbmltcG9ydCB7IEFycm93Q2hldnJvbkRvd25GaWxsZWRJY29uIH0gZnJvbSAnQGNvZGVjYWRlbXkvZ2FtdXQtaWNvbnMnO1xuaW1wb3J0IHN0eWxlZCBmcm9tICdAZW1vdGlvbi9zdHlsZWQnO1xuaW1wb3J0IGN4IGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgQW5pbWF0ZVByZXNlbmNlLCBtb3Rpb24gfSBmcm9tICdmcmFtZXItbW90aW9uJztcbmltcG9ydCBSZWFjdCwgeyB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBQb3BvdmVyIH0gZnJvbSAnLi4vLi4vLi4vUG9wb3Zlcic7XG5pbXBvcnQgeyBBcHBIZWFkZXJBdmF0YXIgfSBmcm9tICcuLi9BcHBIZWFkZXJBdmF0YXInO1xuaW1wb3J0IHsgQXBwSGVhZGVyTGlua1NlY3Rpb25zIH0gZnJvbSAnLi4vQXBwSGVhZGVyTGlua1NlY3Rpb25zJztcbmltcG9ydCB7IGZvY3VzU3R5bGVzLCBob3ZlclN0eWxlcywgdGV4dEJ1dHRvblN0eWxlcyB9IGZyb20gJy4uL1NoYXJlZFN0eWxlcyc7XG5pbXBvcnQgeyBBcHBIZWFkZXJDbGlja0hhbmRsZXIsIEFwcEhlYWRlckRyb3Bkb3duSXRlbSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCBzdHlsZXMgZnJvbSAnLi9zdHlsZXMubW9kdWxlLnNjc3MnO1xuXG5jb25zdCBBcHBIZWFkZXJUZXh0VGFyZ2V0QnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgJHt0ZXh0QnV0dG9uU3R5bGVzfVxuICAke2hvdmVyU3R5bGVzfVxuICAke2ZvY3VzU3R5bGVzfVxuYDtcblxuY29uc3QgQXBwSGVhZGVyQXZhdGFyVGFyZ2V0QnV0dG9uID0gc3R5bGVkLmJ1dHRvbmBcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlcjogdHJhbnNwYXJlbnQ7XG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gIHBhZGRpbmc6IDJweCAwO1xuICAke2hvdmVyU3R5bGVzfVxuICAke2ZvY3VzU3R5bGVzfVxuYDtcblxuZXhwb3J0IHR5cGUgQXBwSGVhZGVyRHJvcGRvd25Qcm9wcyA9IHtcbiAgYWN0aW9uOiBBcHBIZWFkZXJDbGlja0hhbmRsZXI7XG4gIGl0ZW06IEFwcEhlYWRlckRyb3Bkb3duSXRlbTtcbn07XG5cbmV4cG9ydCBjb25zdCBBcHBIZWFkZXJEcm9wZG93bjogUmVhY3QuRkM8QXBwSGVhZGVyRHJvcGRvd25Qcm9wcz4gPSAoe1xuICBhY3Rpb24sXG4gIGl0ZW0sXG59KSA9PiB7XG4gIGNvbnN0IGhlYWRlckRyb3Bkb3duUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgW2lzT3Blbiwgc2V0SXNPcGVuXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgdG9nZ2xlSXNPcGVuID0gKGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgc2V0SXNPcGVuKCFpc09wZW4pO1xuICAgICFpc09wZW4gJiYgYWN0aW9uKGV2ZW50LCBpdGVtKTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlQ2xvc2UgPSAoKSA9PiB7XG4gICAgc2V0SXNPcGVuKGZhbHNlKTtcbiAgfTtcbiAgY29uc3QgY2xpY2tUYXJnZXQgPVxuICAgIGl0ZW0udHlwZSA9PT0gJ3Byb2ZpbGUtZHJvcGRvd24nID8gKFxuICAgICAgPEFwcEhlYWRlckF2YXRhclRhcmdldEJ1dHRvbiBvbkNsaWNrPXsoZXZlbnQpID0+IHRvZ2dsZUlzT3BlbihldmVudCl9PlxuICAgICAgICA8QXBwSGVhZGVyQXZhdGFyIGltYWdlVXJsPXtpdGVtLmF2YXRhcn0gLz5cbiAgICAgIDwvQXBwSGVhZGVyQXZhdGFyVGFyZ2V0QnV0dG9uPlxuICAgICkgOiAoXG4gICAgICA8QXBwSGVhZGVyVGV4dFRhcmdldEJ1dHRvblxuICAgICAgICBjbGFzc05hbWU9e2N4KHN0eWxlcy50YXJnZXQsIGlzT3BlbiAmJiBzdHlsZXMub3Blbil9XG4gICAgICAgIG9uQ2xpY2s9eyhldmVudCkgPT4gdG9nZ2xlSXNPcGVuKGV2ZW50KX1cbiAgICAgID5cbiAgICAgICAgPHNwYW4gdGl0bGU9e2l0ZW0udGV4dH0gY2xhc3NOYW1lPXtzdHlsZXMuY29weX0+XG4gICAgICAgICAge2l0ZW0udGV4dH1cbiAgICAgICAgPC9zcGFuPlxuICAgICAgICA8QXJyb3dDaGV2cm9uRG93bkZpbGxlZEljb25cbiAgICAgICAgICBzaXplPXsxMn1cbiAgICAgICAgICBjbGFzc05hbWU9e3N0eWxlcy5pY29ufVxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJkcm9wZG93blwiXG4gICAgICAgIC8+XG4gICAgICA8L0FwcEhlYWRlclRleHRUYXJnZXRCdXR0b24+XG4gICAgKTtcblxuICBjb25zdCBwYWRkaW5nWSA9IDI0O1xuICBjb25zdCBsaW5rSGVpZ2h0ID0gNTY7XG4gIGNvbnN0IHNlcGFyYXRvckhlaWdodCA9IDE2O1xuICBjb25zdCBnZXRQb3BvdmVySGVpZ2h0ID0gKCkgPT4ge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdkcm9wZG93bicpXG4gICAgICByZXR1cm4gaXRlbS5wb3BvdmVyLmxlbmd0aCAqIGxpbmtIZWlnaHQgKyBwYWRkaW5nWTtcbiAgICBjb25zdCBudW1iZXJPZkxpbmtzID0gaXRlbS5wb3BvdmVyLnJlZHVjZShcbiAgICAgIChzdW0sIGxpbmtzQXJyYXkpID0+IHN1bSArIGxpbmtzQXJyYXkubGVuZ3RoLFxuICAgICAgMFxuICAgICk7XG4gICAgY29uc3QgdG90YWxTZXBhcmF0b3JIZWlnaHQgPSBzZXBhcmF0b3JIZWlnaHQgKiAoaXRlbS5wb3BvdmVyLmxlbmd0aCAtIDEpO1xuICAgIHJldHVybiBudW1iZXJPZkxpbmtzICogbGlua0hlaWdodCArIHRvdGFsU2VwYXJhdG9ySGVpZ2h0ICsgcGFkZGluZ1k7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiByZWY9e2hlYWRlckRyb3Bkb3duUmVmfT57Y2xpY2tUYXJnZXR9PC9kaXY+XG4gICAgICA8QW5pbWF0ZVByZXNlbmNlPlxuICAgICAgICB7aXNPcGVuICYmIChcbiAgICAgICAgICA8UG9wb3ZlclxuICAgICAgICAgICAgYWxpZ249e2l0ZW0udHlwZSA9PT0gJ3Byb2ZpbGUtZHJvcGRvd24nID8gJ3JpZ2h0JyA6ICdsZWZ0J31cbiAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0PXtpdGVtLnR5cGUgPT09ICdwcm9maWxlLWRyb3Bkb3duJyA/IDAgOiAtMn1cbiAgICAgICAgICAgIG91dGxpbmVcbiAgICAgICAgICAgIGlzT3Blbj17aXNPcGVufVxuICAgICAgICAgICAgb25SZXF1ZXN0Q2xvc2U9e2hhbmRsZUNsb3NlfVxuICAgICAgICAgICAgdGFyZ2V0UmVmPXtoZWFkZXJEcm9wZG93blJlZn1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8bW90aW9uLmRpdlxuICAgICAgICAgICAgICBzdHlsZT17eyBvdmVyZmxvdzogJ2hpZGRlbicsIHRvcDogJzEycHgnLCBwb3NpdGlvbjogJ3JlbGF0aXZlJyB9fVxuICAgICAgICAgICAgICBpbml0aWFsPXt7IGhlaWdodDogMCB9fVxuICAgICAgICAgICAgICBhbmltYXRlPXt7IGhlaWdodDogZ2V0UG9wb3ZlckhlaWdodCgpIH19XG4gICAgICAgICAgICAgIHRyYW5zaXRpb249e3sgZHVyYXRpb246IDAuMTc1IH19XG4gICAgICAgICAgICAgIGV4aXQ9e3sgaGVpZ2h0OiAwIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxCb3ggcHg9ezI0fT5cbiAgICAgICAgICAgICAgICA8QXBwSGVhZGVyTGlua1NlY3Rpb25zIGFjdGlvbj17YWN0aW9ufSBpdGVtPXtpdGVtfSAvPlxuICAgICAgICAgICAgICA8L0JveD5cbiAgICAgICAgICAgIDwvbW90aW9uLmRpdj5cbiAgICAgICAgICA8L1BvcG92ZXI+XG4gICAgICAgICl9XG4gICAgICA8L0FuaW1hdGVQcmVzZW5jZT5cbiAgICA8Lz5cbiAgKTtcbn07XG4iXX0= */"));

var AppHeaderAvatarTargetButton = _styled("button", {
  target: "er1dlwl0",
  label: "AppHeaderAvatarTargetButton"
})("background-color:transparent;border:transparent;font-weight:normal;padding:2px 0;", hoverStyles, " ", focusStyles, ";" + (process.env.NODE_ENV === "production" ? "" : "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9BcHBIZWFkZXIvQXBwSGVhZGVyRWxlbWVudHMvQXBwSGVhZGVyRHJvcGRvd24vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQW9CaUQiLCJmaWxlIjoiLi4vLi4vLi4vLi4vc3JjL0FwcEhlYWRlci9BcHBIZWFkZXJFbGVtZW50cy9BcHBIZWFkZXJEcm9wZG93bi9pbmRleC50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCb3ggfSBmcm9tICdAY29kZWNhZGVteS9nYW11dCc7XG5pbXBvcnQgeyBBcnJvd0NoZXZyb25Eb3duRmlsbGVkSWNvbiB9IGZyb20gJ0Bjb2RlY2FkZW15L2dhbXV0LWljb25zJztcbmltcG9ydCBzdHlsZWQgZnJvbSAnQGVtb3Rpb24vc3R5bGVkJztcbmltcG9ydCBjeCBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB7IEFuaW1hdGVQcmVzZW5jZSwgbW90aW9uIH0gZnJvbSAnZnJhbWVyLW1vdGlvbic7XG5pbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IHsgUG9wb3ZlciB9IGZyb20gJy4uLy4uLy4uL1BvcG92ZXInO1xuaW1wb3J0IHsgQXBwSGVhZGVyQXZhdGFyIH0gZnJvbSAnLi4vQXBwSGVhZGVyQXZhdGFyJztcbmltcG9ydCB7IEFwcEhlYWRlckxpbmtTZWN0aW9ucyB9IGZyb20gJy4uL0FwcEhlYWRlckxpbmtTZWN0aW9ucyc7XG5pbXBvcnQgeyBmb2N1c1N0eWxlcywgaG92ZXJTdHlsZXMsIHRleHRCdXR0b25TdHlsZXMgfSBmcm9tICcuLi9TaGFyZWRTdHlsZXMnO1xuaW1wb3J0IHsgQXBwSGVhZGVyQ2xpY2tIYW5kbGVyLCBBcHBIZWFkZXJEcm9wZG93bkl0ZW0gfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vc3R5bGVzLm1vZHVsZS5zY3NzJztcblxuY29uc3QgQXBwSGVhZGVyVGV4dFRhcmdldEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gICR7dGV4dEJ1dHRvblN0eWxlc31cbiAgJHtob3ZlclN0eWxlc31cbiAgJHtmb2N1c1N0eWxlc31cbmA7XG5cbmNvbnN0IEFwcEhlYWRlckF2YXRhclRhcmdldEJ1dHRvbiA9IHN0eWxlZC5idXR0b25gXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICBib3JkZXI6IHRyYW5zcGFyZW50O1xuICBmb250LXdlaWdodDogbm9ybWFsO1xuICBwYWRkaW5nOiAycHggMDtcbiAgJHtob3ZlclN0eWxlc31cbiAgJHtmb2N1c1N0eWxlc31cbmA7XG5cbmV4cG9ydCB0eXBlIEFwcEhlYWRlckRyb3Bkb3duUHJvcHMgPSB7XG4gIGFjdGlvbjogQXBwSGVhZGVyQ2xpY2tIYW5kbGVyO1xuICBpdGVtOiBBcHBIZWFkZXJEcm9wZG93bkl0ZW07XG59O1xuXG5leHBvcnQgY29uc3QgQXBwSGVhZGVyRHJvcGRvd246IFJlYWN0LkZDPEFwcEhlYWRlckRyb3Bkb3duUHJvcHM+ID0gKHtcbiAgYWN0aW9uLFxuICBpdGVtLFxufSkgPT4ge1xuICBjb25zdCBoZWFkZXJEcm9wZG93blJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IFtpc09wZW4sIHNldElzT3Blbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IHRvZ2dsZUlzT3BlbiA9IChldmVudDogUmVhY3QuTW91c2VFdmVudCkgPT4ge1xuICAgIHNldElzT3BlbighaXNPcGVuKTtcbiAgICAhaXNPcGVuICYmIGFjdGlvbihldmVudCwgaXRlbSk7XG4gIH07XG4gIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4ge1xuICAgIHNldElzT3BlbihmYWxzZSk7XG4gIH07XG4gIGNvbnN0IGNsaWNrVGFyZ2V0ID1cbiAgICBpdGVtLnR5cGUgPT09ICdwcm9maWxlLWRyb3Bkb3duJyA/IChcbiAgICAgIDxBcHBIZWFkZXJBdmF0YXJUYXJnZXRCdXR0b24gb25DbGljaz17KGV2ZW50KSA9PiB0b2dnbGVJc09wZW4oZXZlbnQpfT5cbiAgICAgICAgPEFwcEhlYWRlckF2YXRhciBpbWFnZVVybD17aXRlbS5hdmF0YXJ9IC8+XG4gICAgICA8L0FwcEhlYWRlckF2YXRhclRhcmdldEJ1dHRvbj5cbiAgICApIDogKFxuICAgICAgPEFwcEhlYWRlclRleHRUYXJnZXRCdXR0b25cbiAgICAgICAgY2xhc3NOYW1lPXtjeChzdHlsZXMudGFyZ2V0LCBpc09wZW4gJiYgc3R5bGVzLm9wZW4pfVxuICAgICAgICBvbkNsaWNrPXsoZXZlbnQpID0+IHRvZ2dsZUlzT3BlbihldmVudCl9XG4gICAgICA+XG4gICAgICAgIDxzcGFuIHRpdGxlPXtpdGVtLnRleHR9IGNsYXNzTmFtZT17c3R5bGVzLmNvcHl9PlxuICAgICAgICAgIHtpdGVtLnRleHR9XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPEFycm93Q2hldnJvbkRvd25GaWxsZWRJY29uXG4gICAgICAgICAgc2l6ZT17MTJ9XG4gICAgICAgICAgY2xhc3NOYW1lPXtzdHlsZXMuaWNvbn1cbiAgICAgICAgICBhcmlhLWxhYmVsPVwiZHJvcGRvd25cIlxuICAgICAgICAvPlxuICAgICAgPC9BcHBIZWFkZXJUZXh0VGFyZ2V0QnV0dG9uPlxuICAgICk7XG5cbiAgY29uc3QgcGFkZGluZ1kgPSAyNDtcbiAgY29uc3QgbGlua0hlaWdodCA9IDU2O1xuICBjb25zdCBzZXBhcmF0b3JIZWlnaHQgPSAxNjtcbiAgY29uc3QgZ2V0UG9wb3ZlckhlaWdodCA9ICgpID0+IHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnZHJvcGRvd24nKVxuICAgICAgcmV0dXJuIGl0ZW0ucG9wb3Zlci5sZW5ndGggKiBsaW5rSGVpZ2h0ICsgcGFkZGluZ1k7XG4gICAgY29uc3QgbnVtYmVyT2ZMaW5rcyA9IGl0ZW0ucG9wb3Zlci5yZWR1Y2UoXG4gICAgICAoc3VtLCBsaW5rc0FycmF5KSA9PiBzdW0gKyBsaW5rc0FycmF5Lmxlbmd0aCxcbiAgICAgIDBcbiAgICApO1xuICAgIGNvbnN0IHRvdGFsU2VwYXJhdG9ySGVpZ2h0ID0gc2VwYXJhdG9ySGVpZ2h0ICogKGl0ZW0ucG9wb3Zlci5sZW5ndGggLSAxKTtcbiAgICByZXR1cm4gbnVtYmVyT2ZMaW5rcyAqIGxpbmtIZWlnaHQgKyB0b3RhbFNlcGFyYXRvckhlaWdodCArIHBhZGRpbmdZO1xuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgcmVmPXtoZWFkZXJEcm9wZG93blJlZn0+e2NsaWNrVGFyZ2V0fTwvZGl2PlxuICAgICAgPEFuaW1hdGVQcmVzZW5jZT5cbiAgICAgICAge2lzT3BlbiAmJiAoXG4gICAgICAgICAgPFBvcG92ZXJcbiAgICAgICAgICAgIGFsaWduPXtpdGVtLnR5cGUgPT09ICdwcm9maWxlLWRyb3Bkb3duJyA/ICdyaWdodCcgOiAnbGVmdCd9XG4gICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldD17aXRlbS50eXBlID09PSAncHJvZmlsZS1kcm9wZG93bicgPyAwIDogLTJ9XG4gICAgICAgICAgICBvdXRsaW5lXG4gICAgICAgICAgICBpc09wZW49e2lzT3Blbn1cbiAgICAgICAgICAgIG9uUmVxdWVzdENsb3NlPXtoYW5kbGVDbG9zZX1cbiAgICAgICAgICAgIHRhcmdldFJlZj17aGVhZGVyRHJvcGRvd25SZWZ9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPG1vdGlvbi5kaXZcbiAgICAgICAgICAgICAgc3R5bGU9e3sgb3ZlcmZsb3c6ICdoaWRkZW4nLCB0b3A6ICcxMnB4JywgcG9zaXRpb246ICdyZWxhdGl2ZScgfX1cbiAgICAgICAgICAgICAgaW5pdGlhbD17eyBoZWlnaHQ6IDAgfX1cbiAgICAgICAgICAgICAgYW5pbWF0ZT17eyBoZWlnaHQ6IGdldFBvcG92ZXJIZWlnaHQoKSB9fVxuICAgICAgICAgICAgICB0cmFuc2l0aW9uPXt7IGR1cmF0aW9uOiAwLjE3NSB9fVxuICAgICAgICAgICAgICBleGl0PXt7IGhlaWdodDogMCB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8Qm94IHB4PXsyNH0+XG4gICAgICAgICAgICAgICAgPEFwcEhlYWRlckxpbmtTZWN0aW9ucyBhY3Rpb249e2FjdGlvbn0gaXRlbT17aXRlbX0gLz5cbiAgICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgICA8L21vdGlvbi5kaXY+XG4gICAgICAgICAgPC9Qb3BvdmVyPlxuICAgICAgICApfVxuICAgICAgPC9BbmltYXRlUHJlc2VuY2U+XG4gICAgPC8+XG4gICk7XG59O1xuIl19 */"));

export var AppHeaderDropdown = function AppHeaderDropdown(_ref) {
  var action = _ref.action,
      item = _ref.item;
  var headerDropdownRef = useRef(null);

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      isOpen = _useState2[0],
      setIsOpen = _useState2[1];

  var toggleIsOpen = function toggleIsOpen(event) {
    setIsOpen(!isOpen);
    !isOpen && action(event, item);
  };

  var handleClose = function handleClose() {
    setIsOpen(false);
  };

  var clickTarget = item.type === 'profile-dropdown' ? /*#__PURE__*/React.createElement(AppHeaderAvatarTargetButton, {
    onClick: function onClick(event) {
      return toggleIsOpen(event);
    }
  }, /*#__PURE__*/React.createElement(AppHeaderAvatar, {
    imageUrl: item.avatar
  })) : /*#__PURE__*/React.createElement(AppHeaderTextTargetButton, {
    className: cx(styles.target, isOpen && styles.open),
    onClick: function onClick(event) {
      return toggleIsOpen(event);
    }
  }, /*#__PURE__*/React.createElement("span", {
    title: item.text,
    className: styles.copy
  }, item.text), /*#__PURE__*/React.createElement(ArrowChevronDownFilledIcon, {
    size: 12,
    className: styles.icon,
    "aria-label": "dropdown"
  }));
  var paddingY = 24;
  var linkHeight = 56;
  var separatorHeight = 16;

  var getPopoverHeight = function getPopoverHeight() {
    if (item.type === 'dropdown') return item.popover.length * linkHeight + paddingY;
    var numberOfLinks = item.popover.reduce(function (sum, linksArray) {
      return sum + linksArray.length;
    }, 0);
    var totalSeparatorHeight = separatorHeight * (item.popover.length - 1);
    return numberOfLinks * linkHeight + totalSeparatorHeight + paddingY;
  };

  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement("div", {
    ref: headerDropdownRef
  }, clickTarget), /*#__PURE__*/React.createElement(AnimatePresence, null, isOpen && /*#__PURE__*/React.createElement(Popover, {
    align: item.type === 'profile-dropdown' ? 'right' : 'left',
    verticalOffset: item.type === 'profile-dropdown' ? 0 : -2,
    outline: true,
    isOpen: isOpen,
    onRequestClose: handleClose,
    targetRef: headerDropdownRef
  }, /*#__PURE__*/React.createElement(motion.div, {
    style: {
      overflow: 'hidden',
      top: '12px',
      position: 'relative'
    },
    initial: {
      height: 0
    },
    animate: {
      height: getPopoverHeight()
    },
    transition: {
      duration: 0.175
    },
    exit: {
      height: 0
    }
  }, /*#__PURE__*/React.createElement(Box, {
    px: 24
  }, /*#__PURE__*/React.createElement(AppHeaderLinkSections, {
    action: action,
    item: item
  }))))));
};